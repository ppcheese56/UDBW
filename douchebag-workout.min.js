!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.h5branding=global.h5branding||{})}(this,function(exports){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var BrandingDomain,list;createCommonjsModule(function(module,exports){module.exports=function(){function isFunction(x){return"function"==typeof x}var isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())},browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i],arg=queue[i+1];callback(arg),queue[i]=void 0,queue[i+1]=void 0}len=0}var channel,iterations,observer,node,scheduleFlush=void 0;function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop);return resolve(promise,object),promise}scheduleFlush=isNode?function(){return process.nextTick(flush)}:BrowserMutationObserver?(iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):isWorker?((channel=new MessageChannel).port1.onmessage=flush,function(){return channel.port2.postMessage(0)}):void 0===browserWindow?function(){try{var vertx=Function("return this")().require("vertx");return void 0===(vertxNext=vertx.runOnLoop||vertx.runOnContext)?useSetTimeout():function(){vertxNext(flush)}}catch(e){return useSetTimeout()}}():useSetTimeout();var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0,FULFILLED=1,REJECTED=2;function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?function(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?reject(promise,thenable._result):subscribe(thenable,void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}(promise,maybeThenable):void 0===then$$1?fulfill(promise,maybeThenable):isFunction(then$$1)?function(promise,thenable,then$$1){asap(function(promise){var sealed=!1,error=tryThen(then$$1,thenable,function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value):fulfill(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){if(promise===value)reject(promise,new TypeError("You cannot resolve a promise with itself"));else if(type=typeof(x=value),null===x||"object"!==type&&"function"!==type)fulfill(promise,value);else{var then$$1=void 0;try{then$$1=value.then}catch(error){return void reject(promise,error)}handleMaybeThenable(promise,value,then$$1)}var x,type}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+FULFILLED]=onFulfillment,_subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=!0;if(hasCallback){try{value=callback(detail)}catch(e){succeeded=!1,error=e}if(promise===value)return void reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail;promise._state!==PENDING||(hasCallback&&succeeded?resolve(promise,value):!1===succeeded?reject(promise,error):settled===FULFILLED?fulfill(promise,value):settled===REJECTED&&reject(promise,value))}var id=0;function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=void 0,error=void 0,didError=!1;try{_then=entry.then}catch(e){didError=!0,error=e}if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$1){var promise=new c(noop);didError?reject(promise,error):handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._remaining--,state===REJECTED?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}(),Promise$1=function(){function Promise(resolver){this[PROMISE_ID]=id++,this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function(promise,resolver){try{resolver(function(value){resolve(promise,value)},function(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}(this,resolver):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise.prototype.catch=function(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function(callback){var constructor=this.constructor;return isFunction(callback)?this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})}):this.then(callback,callback)},Promise}();return Promise$1.prototype.then=then,Promise$1.all=function(entries){return new Enumerator(this,entries).promise},Promise$1.race=function(entries){var Constructor=this;return isArray(entries)?new Constructor(function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)}):new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})},Promise$1.resolve=resolve$1,Promise$1.reject=function(reason){var promise=new this(noop);return reject(promise,reason),promise},Promise$1._setScheduler=function(scheduleFn){customSchedulerFn=scheduleFn},Promise$1._setAsap=function(asapFn){asap=asapFn},Promise$1._asap=asap,Promise$1.polyfill=function(){var local=void 0;if(void 0!==commonjsGlobal)local=commonjsGlobal;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$1},Promise$1.Promise=Promise$1}()}).polyfill();(BrandingDomain=exports.BrandingDomain||(exports.BrandingDomain={}))[BrandingDomain.Neutral=0]="Neutral",BrandingDomain[BrandingDomain.Yepi=1]="Yepi",BrandingDomain[BrandingDomain.Spele=2]="Spele",BrandingDomain[BrandingDomain.Funnygames=3]="Funnygames",BrandingDomain[BrandingDomain.Kizi=4]="Kizi",BrandingDomain[BrandingDomain.PlayCell=5]="PlayCell",BrandingDomain[BrandingDomain.GameCell=6]="GameCell",BrandingDomain[BrandingDomain.Bild=7]="Bild",BrandingDomain[BrandingDomain.AGame=8]="AGame",BrandingDomain[BrandingDomain.Admeen=9]="Admeen",BrandingDomain[BrandingDomain.PlayTime=10]="PlayTime",BrandingDomain[BrandingDomain.Zigiz=11]="Zigiz";var UtmTargets,Sld=function(){function Sld(){}return Sld.has=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||tldOffset-1<=sldOffset)return!1;var sldList=list[domain.slice(tldOffset+1)];return!!sldList&&0<=sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")},Sld.is=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;if(0<=domain.lastIndexOf(".",tldOffset-1))return!1;var sldList=list[domain.slice(tldOffset+1)];return!!sldList&&0<=sldList.indexOf(" "+domain.slice(0,tldOffset)+" ")},Sld.get=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return null;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||tldOffset-1<=sldOffset)return null;var sldList=list[domain.slice(tldOffset+1)];return sldList?sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")<0?null:domain.slice(sldOffset+1):null},Sld}(),Domain=function(){function Domain(){}return Domain.setList=function(newList){list=newList||{}},Domain.getDomain=function(host){if(!list)return null;var t=host.match(/\./g);if(t&&t.length<2)return host;var tld=this.getTld(host);if(!tld)return null;var end=host.length-tld.length-1;return end=host.lastIndexOf(".",end-1)+1,host.substring(end)||""},Domain.getTld=function(host){if(!list)return"";var pos=host.lastIndexOf("."),tld=host.substring(pos+1);return list[tld.toLowerCase()]&&Sld.get(host)||tld},Domain.KEY="Domains",Domain}(),Loader=function(){function Loader(){this.cache={}}return Object.defineProperty(Loader,"instance",{get:function(){return void 0===Loader.classInstance&&(Loader.classInstance=new Loader),Loader.classInstance},enumerable:!1,configurable:!0}),Loader.prototype.load=function(key,url,contentType){var _this=this;return this.contains(key)?Promise.reject("Already in cache."):(this.cache[key]={url:url,data:null},this.requestXhr(url,contentType).then(function(data){return _this.loadComplete(key,data)}).catch(function(e){return _this.remove(key),Promise.reject(e)}))},Loader.prototype.loadComplete=function(key,data){if(!this.contains(key))return Promise.reject("Item was removed from cache before loading was complete.");try{var json=JSON.parse(data);return this.cache[key].data=json,Promise.resolve(json)}catch(error){return Promise.reject("There was an error parsing JSON file.")}},Loader.prototype.remove=function(key){this.contains(key)&&delete this.cache[key]},Loader.prototype.get=function(key){return this.contains(key)?this.cache[key].data:null},Loader.prototype.contains=function(key){return this.cache.hasOwnProperty(key)},Loader.prototype.isLoading=function(key){return this.contains(key)&&null===this.cache[key].data},Loader.prototype.isLoaded=function(key){return this.contains(key)&&null!==this.cache[key].data},Loader.prototype.loadScript=function(url,deferred,callback){return void 0===deferred&&(deferred=!0),new Promise(function(resolve,reject){var tag=document.createElement("script");tag.src=url,tag.async=!1,tag.onload=function(){"function"==typeof callback&&callback(),resolve()},document.head.appendChild(tag)})},Loader.prototype.requestXhr=function(url,contentType){var xhr;return void 0===contentType&&(contentType="application/json"),window.XMLHttpRequest?(xhr=new XMLHttpRequest,new Promise(function(resolve,reject){xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?(resolve(xhr.responseText),xhr.onreadystatechange=null):0<xhr.status&&(reject("There was a problem with the request: status "+xhr.status),xhr.onreadystatechange=null))};try{xhr.open("GET",url,!0),xhr.setRequestHeader("Content-Type",contentType),xhr.send()}catch(e){reject("Error: Unable to send request, CORS not allowed.")}})):Promise.reject("Unable to send request, XMLHttpRequest not supported.")},Loader}();function addScript(src,buster,callback){var s=document.createElement("script");s.setAttribute("src",src+"?v="+buster),"function"==typeof callback&&(s.onload=callback),document.body.appendChild(s)}(UtmTargets=exports.UtmTargets||(exports.UtmTargets={}))[UtmTargets.splashscreen=0]="splashscreen",UtmTargets[UtmTargets.logo=1]="logo",UtmTargets[UtmTargets.facebook=2]="facebook",UtmTargets[UtmTargets.twitter=3]="twitter",UtmTargets[UtmTargets.playstore=4]="playstore",UtmTargets[UtmTargets.appstore=5]="appstore",UtmTargets[UtmTargets.more_games=6]="more_games",UtmTargets[UtmTargets.download_game=7]="download_game",UtmTargets[UtmTargets.walkthrough=8]="walkthrough",UtmTargets[UtmTargets.disclaimer=9]="disclaimer",UtmTargets[UtmTargets.highscores=10]="highscores";var h,s,PortalScripts=function(){function PortalScripts(){}return PortalScripts.loadPortalScript=function(siteLockList){siteLockList&&siteLockList.hasOwnProperty("minijuegos")&&-1!==siteLockList.minijuegos.indexOf(Utils.getSourceSite())&&(void 0!==window.mpConfig?window.mpConfig.partner="orange-games":window.mpConfig={partner:"orange-games"},addScript("https://ext.minijuegosgratis.com/external-host/main.js",Date.now()/1e3)),siteLockList&&siteLockList.hasOwnProperty("kongregate")&&-1!==siteLockList.kongregate.indexOf(Utils.getSourceSite())&&addScript("https://cdn1.kongregate.com/javascripts/kongregate_api.js",Date.now()/1e3,function(){"undefined"!=typeof kongregateAPI&&kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI()})}),siteLockList&&siteLockList.hasOwnProperty("newgrounds")&&-1!==siteLockList.newgrounds.indexOf(Utils.getSourceSite())&&addScript("https://cdn.fbrq.io/@azerion/splash/assets/scripts/newgroundsio.min.js",Date.now()/1e3)},PortalScripts}(),Branding$$1=function(){function Branding$$1(){}return Branding$$1.preload=function(version){var promise=Promise.all([Loader.instance.load(Domain.KEY,Utils.ASSET_LOCATION+"json/domains.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.SITELOCK_PORTALS,Utils.ASSET_LOCATION+"json/sitelock.json?v="+version,"text/plain")]);return Promise.all([Loader.instance.load(Branding$$1.INTERNAL_PORTALS_KEY,Utils.ASSET_LOCATION+"json/internal.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.CONTRACTED_PORTALS_KEY,Utils.ASSET_LOCATION+"json/contracted.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.SPECIAL_PORTALS_KEY,Utils.ASSET_LOCATION+"json/special.json?v="+version,"text/plain")]),promise.then(function(data){var domains=data[0],sitelock=data[1];Domain.setList(domains),PortalScripts.loadPortalScript(sitelock),Branding$$1.setSiteLock(sitelock)}).catch(function(){console.warn("Unable to parse json")})},Branding$$1.setSiteLock=function(data){Branding$$1.siteLocks=data},Object.defineProperty(Branding$$1,"brandingLogoUrl",{get:function(){var imageName;switch(Utils.isOnDevice()||Branding$$1.isAirfi()?Utils.ASSET_LOCATION="assets/":"fbrq.io"===Utils.getSourceSite(!0)&&(Utils.ASSET_LOCATION="https://"+window.location.host+"/@azerion/splash/assets/"),Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:imageName="spele";break;case exports.BrandingDomain.PlayCell:imageName="playcell";break;case exports.BrandingDomain.GameCell:imageName="gamecell";break;case exports.BrandingDomain.Yepi:imageName="yepi";break;case exports.BrandingDomain.Admeen:imageName="admeen";break;case exports.BrandingDomain.Bild:imageName="bild";break;case exports.BrandingDomain.Kizi:imageName="kizi";break;case exports.BrandingDomain.Funnygames:imageName="funnygames";break;case exports.BrandingDomain.PlayTime:imageName="playtime";break;default:case exports.BrandingDomain.AGame:imageName="agame";break;case exports.BrandingDomain.Zigiz:imageName="zigiz"}return Utils.ASSET_LOCATION+"images/branding_logo_"+imageName+"_small.png"},enumerable:!1,configurable:!0}),Object.defineProperty(Branding$$1,"brandingBackgroundColor",{get:function(){var bgColor;switch(Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:bgColor="#4a72ad";break;case exports.BrandingDomain.PlayCell:bgColor="#52a1e1";break;case exports.BrandingDomain.GameCell:bgColor="#c600b2";break;case exports.BrandingDomain.Yepi:bgColor="#0573a7";break;case exports.BrandingDomain.AGame:bgColor="#0C486C";break;case exports.BrandingDomain.Admeen:bgColor="#4267B2";break;case exports.BrandingDomain.Bild:bgColor="#de0000";break;default:case exports.BrandingDomain.Kizi:bgColor="#012f50";break;case exports.BrandingDomain.Funnygames:bgColor="#33b0ff";break;case exports.BrandingDomain.PlayTime:case exports.BrandingDomain.Zigiz:bgColor="#023a63"}return bgColor},enumerable:!1,configurable:!0}),Branding$$1.openCampaignLink=function(gameTitle,type){if(!Utils.isOnDevice()&&!Branding$$1.isSpecial()&&Branding$$1.outGoingLinksAllowed()){var url,win,host=Utils.getSourceSite(),protocol=Utils.isOnDevice()?"https://":"//";switch(Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:url=protocol+"www.spele.nl";break;case exports.BrandingDomain.Yepi:url=protocol+"www.yepi.com";break;case exports.BrandingDomain.Admeen:return url="https://media.admeen.com/branding/link.php",void((win=window.open(url,"_blank"))&&win.focus&&win.focus());case exports.BrandingDomain.PlayCell:url=protocol+"www.playcell.com";break;case exports.BrandingDomain.GameCell:url=protocol+"www.gamecell.com";break;case exports.BrandingDomain.Kizi:url=protocol+"www.kizi.com";break;case exports.BrandingDomain.Bild:return void((win=window.open(protocol+"www.bildspielt.de","_blank"))&&win.focus&&win.focus());case exports.BrandingDomain.Funnygames:url=protocol+"www.funnygames.nu";break;case exports.BrandingDomain.PlayTime:url=protocol+"playtime.nl";break;default:case exports.BrandingDomain.AGame:url=protocol+"www.agame.com";break;case exports.BrandingDomain.Zigiz:url=protocol+"m.zigiz.com"}var utmContent="string"==typeof type?type:exports.UtmTargets[type];(win=window.open(url+"/?utm_source="+host+"&utm_medium=html5&utm_term="+gameTitle+"&utm_content="+utmContent+"&utm_campaign=Gamedistribution","_blank"))&&win.focus&&win.focus()}},Branding$$1.isInternal=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.INTERNAL_PORTALS_KEY))},Branding$$1.isContracted=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.CONTRACTED_PORTALS_KEY))},Branding$$1.isSpecial=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.SPECIAL_PORTALS_KEY))},Branding$$1.isAdmeen=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("admeen"))return!1;var admeen=Branding$$1.siteLocks.admeen;return Branding$$1.hostMatchesList(admeen)},Branding$$1.isKongregate=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("kongregate"))return!1;var kongregate=Branding$$1.siteLocks.kongregate;return Branding$$1.hostMatchesList(kongregate)},Branding$$1.isNewgrounds=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("newgrounds"))return!1;var newgrounds=Branding$$1.siteLocks.newgrounds;return Branding$$1.hostMatchesList(newgrounds)},Branding$$1.isBild=function(){return"bild.fbrq.io"===window.location.host||-1!==window.location.host.indexOf("contentfleet.com")},Branding$$1.isPlaytime=function(){return-1!==window.location.host.indexOf("playtime.nl")},Branding$$1.isBip=function(){return-1!==window.location.search.indexOf("bipgaming")||"bip.fbrq.io"===window.location.host},Branding$$1.isPlaycellApp=function(){return-1!==window.location.search.indexOf("playcellApp")},Branding$$1.isAGame=function(){return-1!==window.location.search.indexOf("agame")},Branding$$1.isAirfi=function(){return!!window.hasOwnProperty("airfi")&&window.airfi},Branding$$1.outGoingLinksAllowed=function(){return!(Branding$$1.isAirfi()||Branding$$1.isSpecial()||Branding$$1.isContracted())&&(!window.hasOwnProperty("fbrqLA")||window.fbrqLA)},Branding$$1.hostMatchesList=function(portals){portals=portals||[];for(var host=Utils.getSourceSite(),id=0;id<portals.length;id++)if(host===portals[id])return!0;return!1},Branding$$1.LOGO_KEY="branding_logo",Branding$$1.INTERNAL_PORTALS_KEY="branding_portals",Branding$$1.CONTRACTED_PORTALS_KEY="branding_contracted",Branding$$1.SPECIAL_PORTALS_KEY="branding_special",Branding$$1.SITELOCK_PORTALS="sitelock_portals",Branding$$1.DOMAIN_OVERWRITE=null,Branding$$1.analyticsEnabled=!0,Branding$$1}(),Utils=function(){function Utils(){}return Utils.getSourceSite=function(forceLocal){void 0===forceLocal&&(forceLocal=!1);var host=document.referrer||window.location.host;if(forceLocal&&(host=window.location.host),-1!==host.indexOf("embed.gamedistribution.com")&&-1!==window.location.search.indexOf("gd_sdk_referrer_url")&&(host=Utils.getUrlParameter("gd_sdk_referrer_url")||host),host=decodeURIComponent(host),Branding$$1.isBild())return"bildspielt.de";if(Branding$$1.isBip())return"bipgaming.com";host=(host=-1<host.indexOf("://")?host.split("/")[2]:host.split("/")[0]).split(":")[0];var newHost=Domain.getDomain(host);return null!==newHost?newHost:(3===host.split(".").length&&(host=host.substr(host.indexOf(".")+1)),host)},Utils.getBrandingDomain=function(){if(window.hasOwnProperty("fbrqBD")&&window.fbrqBD in exports.BrandingDomain)return window.fbrqBD;if(Branding$$1.DOMAIN_OVERWRITE)return Branding$$1.DOMAIN_OVERWRITE;var source=Utils.getSourceSite();if(Branding$$1.isAdmeen())return exports.BrandingDomain.Admeen;if(Branding$$1.isPlaycellApp()||Branding$$1.isBip())return exports.BrandingDomain.PlayCell;switch(source){case"spele.nl":return exports.BrandingDomain.Spele;case"yepi.com":return exports.BrandingDomain.Yepi;case"oyunskor.com":case"barbioyunu.com.tr":case"bebekoyunu.com.tr":case"oyunkolu.com":case"oyungemisi.com":case"oyunlar1.com":case"oyunkuzusu.com":case"kraloyun.com":case"rekoroyun.com":case"oyundedem.com":case"oyunoyna.com":case"pastaoyunu.com.tr":case"playcell.com":return exports.BrandingDomain.PlayCell;case"gamecell.com":return exports.BrandingDomain.GameCell;case"playxl.com":return exports.BrandingDomain.Admeen;case"kizi.com":return exports.BrandingDomain.Kizi;case"bildspielt.de":return exports.BrandingDomain.Bild;case"funnygames.nl":return exports.BrandingDomain.Funnygames;case"playtime.nl":return exports.BrandingDomain.PlayTime;default:case"agame.com":return exports.BrandingDomain.AGame;case"gmbl.nl":case"zigiz.com":return exports.BrandingDomain.Zigiz;case"coolmathgames.com":return exports.BrandingDomain.Neutral}},Utils.getReferrer=function(host){return-1!==host.indexOf("?ref=")?host.substr(host.indexOf("?ref=")+5):host},Utils.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},Utils.inGDGameZone=function(){return-1!==document.referrer.indexOf("html5.gamedistribution.com")},Utils.getDomain=function(uri){var parser=document.createElement("a");return parser.href=uri,parser.origin},Utils.isOnDevice=function(){return void 0!==window.cordova&&!/(gamedistribution\.com)/.test(window.location.hostname)},Utils.isTc=function(){return/(teamcity\.azerdev\.com)/.test(window.location.host)},Utils.getRandomRange=function(min,max){return Math.random()*(max-min)+min|0},Utils.getUrlParameter=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},Utils.intTimeToString=function(time){var hours=Math.floor(time/3600),minutes=Math.floor(time%3600/60),seconds=time%60;return(hours<10?"0"+hours:hours.toString())+":"+(minutes<10?"0"+minutes:minutes.toString())+":"+(seconds<10?"0"+seconds:seconds.toString())},Utils.LANGUAGE="en",Utils.ASSET_LOCATION=window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/":"https://cdn.fbrq.io/@azerion/splash/assets/",Utils}(),GoogleAnalytics=function(){function GoogleAnalytics(){this.fbrqId="UA-60359297-50"}return GoogleAnalytics.addScript=function(){return Branding$$1.analyticsEnabled?new Promise(function(resolve,reject){var s=document.createElement("script"),src="https://www.googletagmanager.com/gtag/js?id="+GoogleAnalytics.GAMeasurementId;s.setAttribute("src",src),s.async=!0,s.onload=function(){resolve({loaded:!0})},document.head.appendChild(s)}):Promise.resolve()},GoogleAnalytics.preload=function(){return Branding$$1.analyticsEnabled&&GoogleAnalytics.addScript().then(function(result,error){return new Promise(function(resolve,reject){result.loaded&&(window.hasOwnProperty("dataLayer")&&(window.dataLayer=window.dataLayer||[]),gtag=function(){window.hasOwnProperty("dataLayer")&&window.dataLayer.push(arguments)}),resolve()})}),Promise.resolve()},GoogleAnalytics.prototype.setup=function(analyticsId,appName,appVersion,trackerWrapper,sampleRate){if(void 0===appName&&(appName="none"),void 0===appVersion&&(appVersion="none"),void 0===trackerWrapper&&(trackerWrapper="auto"),void 0===sampleRate&&(sampleRate=100),"function"!=typeof gtag)return null;if(!Branding$$1.analyticsEnabled){var disableID="ga-disable-"+analyticsId;return window.hasOwnProperty(disableID)&&(window.disableID=!Branding$$1.analyticsEnabled),null}var referrer="none";Branding$$1.isAGame()&&(referrer=Utils.getReferrer(decodeURIComponent(document.referrer))),gtag("js",new Date),gtag("set","user_properties",{app_name:appName,app_version:appVersion,referrer:referrer}),gtag("config",analyticsId,{sample_rate:sampleRate});var settings={name:"fbrq",sample_rate:1,referrer:referrer,app_name:"All"};if("auto"!==trackerWrapper)for(var key in trackerWrapper)trackerWrapper.hasOwnProperty(key)&&(settings[key]=trackerWrapper[key]);return gtag("config",this.fbrqId,settings),gtag},GoogleAnalytics.prototype.sendScreenView=function(screenName){Branding$$1.analyticsEnabled&&("undefined"==typeof gtag&&"function"!=typeof gtag||(gtag("event","screen_view",{screen_name:screenName}),gtag("event","screen_view",{send_to:this.fbrqId,screen_name:screenName})))},GoogleAnalytics.prototype.sendGenericEvent=function(category,action,label){Branding$$1.analyticsEnabled&&("undefined"==typeof gtag&&"function"!=typeof gtag||(gtag("event",action,{event_category:category,event_label:label}),gtag("event",action,{send_to:this.fbrqId,event_category:category,event_label:label})))},GoogleAnalytics.GAMeasurementId="none",GoogleAnalytics}(),CryptoJS=CryptoJS||function(h,s){var f={},g=f.lib={},q=function(){},m=g.Base={extend:function(a){q.prototype=this;var c=new q;return a&&c.mixIn(a),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),(c.init.prototype=c).$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},r=g.WordArray=m.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=null!=c?c:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;if(a=a.sigBytes,this.clamp(),b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-e%4*8&255)<<24-(b+e)%4*8;else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);return this.sigBytes+=a,this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-c%4*8,a.length=h.ceil(c/4)},clone:function(){var a=m.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new r.init(c,a)}}),l=f.enc={},k=l.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-b%4*8&255;d.push((e>>>4).toString(16)),d.push((15&e).toString(16))}return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,2),16)<<24-b%8*4;return new r.init(d,c/2)}},n=l.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-b%4*8&255));return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(255&a.charCodeAt(b))<<24-b%4*8;return new r.init(d,c)}},j=l.Utf8={stringify:function(a){try{return decodeURIComponent(escape(n.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return n.parse(unescape(encodeURIComponent(a)))}},u=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e);if(a=(f=a?h.ceil(f):h.max((0|f)-this._minBufferSize,0))*e,b=h.min(4*a,b),a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a),c.sigBytes-=b}return new r.init(g,b)},clone:function(){var a=m.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});g.Hasher=u.extend({cfg:m.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return new a.init(d).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return new t.HMAC.init(a,d).finalize(c)}}});var t=f.algo={};return f}(Math);!function(h){for(var s=CryptoJS,g=(f=s.lib).WordArray,q=f.Hasher,f=s.algo,m=[],r=[],l=function(a){return 4294967296*(a-(0|a))|0},k=2,n=0;n<64;){var j;a:{j=k;for(var u=h.sqrt(j),t=2;t<=u;t++)if(!(j%t)){j=!1;break a}j=!0}j&&(n<8&&(m[n]=l(h.pow(k,.5))),r[n]=l(h.pow(k,1/3)),n++),k++}var a=[];f=f.SHA256=q.extend({_doReset:function(){this._hash=new g.init(m.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],g=b[2],j=b[3],h=b[4],m=b[5],n=b[6],q=b[7],p=0;p<64;p++){if(p<16)a[p]=0|c[d+p];else{var k=a[p-15],l=a[p-2];a[p]=((k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3)+a[p-7]+((l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10)+a[p-16]}k=q+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&m^~h&n)+r[p]+a[p],l=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&g^f&g),q=n,n=m,m=h,h=j+k|0,j=g,g=f,f=e,e=k+l|0}b[0]=b[0]+e|0,b[1]=b[1]+f|0,b[2]=b[2]+g|0,b[3]=b[3]+j|0,b[4]=b[4]+h|0,b[5]=b[5]+m|0,b[6]=b[6]+n|0,b[7]=b[7]+q|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;return d[e>>>5]|=128<<24-e%32,d[14+(e+64>>>9<<4)]=h.floor(b/4294967296),d[15+(e+64>>>9<<4)]=b,a.sigBytes=4*d.length,this._process(),this._hash},clone:function(){var a=q.clone.call(this);return a._hash=this._hash.clone(),a}});s.SHA256=q._createHelper(f),s.HmacSHA256=q._createHmacHelper(f)}(Math),s=(h=CryptoJS).enc.Utf8,h.algo.HMAC=h.lib.Base.extend({init:function(f,g){f=this._hasher=new f.init,"string"==typeof g&&(g=s.parse(g));var h=f.blockSize,m=4*h;g.sigBytes>m&&(g=f.finalize(g)),g.clamp();for(var r=this._oKey=g.clone(),l=this._iKey=g.clone(),k=r.words,n=l.words,j=0;j<h;j++)k[j]^=1549556828,n[j]^=909522486;r.sigBytes=l.sigBytes=m,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var g=this._hasher;return f=g.finalize(f),g.reset(),g.finalize(this._oKey.clone().concat(f))}}),function(){var h=CryptoJS,j=h.lib.WordArray;h.enc.Base64={stringify:function(b){var e=b.words,f=b.sigBytes,c=this._map;b.clamp(),b=[];for(var a=0;a<f;a+=3)for(var d=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,g=0;g<4&&a+.75*g<f;g++)b.push(c.charAt(d>>>6*(3-g)&63));if(e=c.charAt(64))for(;b.length%4;)b.push(e);return b.join("")},parse:function(b){var e=b.length,f=this._map;(c=f.charAt(64))&&(-1!=(c=b.indexOf(c))&&(e=c));for(var c=[],a=0,d=0;d<e;d++)if(d%4){var g=f.indexOf(b.charAt(d-1))<<d%4*2,h=f.indexOf(b.charAt(d))>>>6-d%4*2;c[a>>>2]|=(g|h)<<24-a%4*8,a++}return j.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(gameanalytics){!function(EGAErrorSeverity){EGAErrorSeverity[EGAErrorSeverity.Undefined=0]="Undefined",EGAErrorSeverity[EGAErrorSeverity.Debug=1]="Debug",EGAErrorSeverity[EGAErrorSeverity.Info=2]="Info",EGAErrorSeverity[EGAErrorSeverity.Warning=3]="Warning",EGAErrorSeverity[EGAErrorSeverity.Error=4]="Error",EGAErrorSeverity[EGAErrorSeverity.Critical=5]="Critical"}(gameanalytics.EGAErrorSeverity||(gameanalytics.EGAErrorSeverity={})),function(EGAGender){EGAGender[EGAGender.Undefined=0]="Undefined",EGAGender[EGAGender.Male=1]="Male",EGAGender[EGAGender.Female=2]="Female"}(gameanalytics.EGAGender||(gameanalytics.EGAGender={})),function(EGAProgressionStatus){EGAProgressionStatus[EGAProgressionStatus.Undefined=0]="Undefined",EGAProgressionStatus[EGAProgressionStatus.Start=1]="Start",EGAProgressionStatus[EGAProgressionStatus.Complete=2]="Complete",EGAProgressionStatus[EGAProgressionStatus.Fail=3]="Fail"}(gameanalytics.EGAProgressionStatus||(gameanalytics.EGAProgressionStatus={})),function(EGAResourceFlowType){EGAResourceFlowType[EGAResourceFlowType.Undefined=0]="Undefined",EGAResourceFlowType[EGAResourceFlowType.Source=1]="Source",EGAResourceFlowType[EGAResourceFlowType.Sink=2]="Sink"}(gameanalytics.EGAResourceFlowType||(gameanalytics.EGAResourceFlowType={})),function(http){!function(EGASdkErrorType){EGASdkErrorType[EGASdkErrorType.Undefined=0]="Undefined",EGASdkErrorType[EGASdkErrorType.Rejected=1]="Rejected"}(http.EGASdkErrorType||(http.EGASdkErrorType={})),function(EGAHTTPApiResponse){EGAHTTPApiResponse[EGAHTTPApiResponse.NoResponse=0]="NoResponse",EGAHTTPApiResponse[EGAHTTPApiResponse.BadResponse=1]="BadResponse",EGAHTTPApiResponse[EGAHTTPApiResponse.RequestTimeout=2]="RequestTimeout",EGAHTTPApiResponse[EGAHTTPApiResponse.JsonEncodeFailed=3]="JsonEncodeFailed",EGAHTTPApiResponse[EGAHTTPApiResponse.JsonDecodeFailed=4]="JsonDecodeFailed",EGAHTTPApiResponse[EGAHTTPApiResponse.InternalServerError=5]="InternalServerError",EGAHTTPApiResponse[EGAHTTPApiResponse.BadRequest=6]="BadRequest",EGAHTTPApiResponse[EGAHTTPApiResponse.Unauthorized=7]="Unauthorized",EGAHTTPApiResponse[EGAHTTPApiResponse.UnknownResponseCode=8]="UnknownResponseCode",EGAHTTPApiResponse[EGAHTTPApiResponse.Ok=9]="Ok"}(http.EGAHTTPApiResponse||(http.EGAHTTPApiResponse={}))}(gameanalytics.http||(gameanalytics.http={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;gameanalytics.EGAErrorSeverity,gameanalytics.EGAGender,gameanalytics.EGAProgressionStatus,gameanalytics.EGAResourceFlowType;!function(gameanalytics){!function(logging){var EGALoggerMessageType;!function(EGALoggerMessageType){EGALoggerMessageType[EGALoggerMessageType.Error=0]="Error",EGALoggerMessageType[EGALoggerMessageType.Warning=1]="Warning",EGALoggerMessageType[EGALoggerMessageType.Info=2]="Info",EGALoggerMessageType[EGALoggerMessageType.Debug=3]="Debug"}(EGALoggerMessageType||(EGALoggerMessageType={}));var GALogger=function(){function GALogger(){GALogger.debugEnabled=!1}return GALogger.setInfoLog=function(value){GALogger.instance.infoLogEnabled=value},GALogger.setVerboseLog=function(value){GALogger.instance.infoLogVerboseEnabled=value},GALogger.i=function(format){if(GALogger.instance.infoLogEnabled){var message="Info/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Info)}},GALogger.w=function(format){var message="Warning/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Warning)},GALogger.e=function(format){var message="Error/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Error)},GALogger.ii=function(format){if(GALogger.instance.infoLogVerboseEnabled){var message="Verbose/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Info)}},GALogger.d=function(format){if(GALogger.debugEnabled){var message="Debug/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Debug)}},GALogger.prototype.sendNotificationMessage=function(message,type){switch(type){case EGALoggerMessageType.Error:console.error(message);break;case EGALoggerMessageType.Warning:console.warn(message);break;case EGALoggerMessageType.Debug:"function"==typeof console.debug?console.debug(message):console.log(message);break;case EGALoggerMessageType.Info:console.log(message)}},GALogger.instance=new GALogger,GALogger.Tag="GameAnalytics",GALogger}();logging.GALogger=GALogger}(gameanalytics.logging||(gameanalytics.logging={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(utilities){var GALogger=gameanalytics.logging.GALogger,GAUtilities=function(){function GAUtilities(){}return GAUtilities.getHmac=function(key,data){var encryptedMessage=CryptoJS.HmacSHA256(data,key);return CryptoJS.enc.Base64.stringify(encryptedMessage)},GAUtilities.stringMatch=function(s,pattern){return!(!s||!pattern)&&pattern.test(s)},GAUtilities.joinStringArray=function(v,delimiter){for(var result="",i=0,il=v.length;i<il;i++)0<i&&(result+=delimiter),result+=v[i];return result},GAUtilities.stringArrayContainsString=function(array,search){if(0===array.length)return!1;for(var s in array)if(array[s]===search)return!0;return!1},GAUtilities.encode64=function(input){input=encodeURI(input);for(var chr1,chr2,enc1,enc2,enc3,output="",chr3=0,enc4=0,i=0;enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+GAUtilities.keyStr.charAt(enc1)+GAUtilities.keyStr.charAt(enc2)+GAUtilities.keyStr.charAt(enc3)+GAUtilities.keyStr.charAt(enc4),chr1=chr2=chr3=0,enc1=enc2=enc3=enc4=0,i<input.length;);return output},GAUtilities.decode64=function(input){var chr1,chr2,enc2,enc3,output="",chr3=0,enc4=0,i=0;for(/[^A-Za-z0-9\+\/\=]/g.exec(input)&&GALogger.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");chr1=GAUtilities.keyStr.indexOf(input.charAt(i++))<<2|(enc2=GAUtilities.keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=GAUtilities.keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=GAUtilities.keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3)),chr1=chr2=chr3=0,enc2=enc3=enc4=0,i<input.length;);return decodeURI(output)},GAUtilities.timeIntervalSince1970=function(){var date=new Date;return Math.round(date.getTime()/1e3)},GAUtilities.createGuid=function(){return(GAUtilities.s4()+GAUtilities.s4()+"-"+GAUtilities.s4()+"-4"+GAUtilities.s4().substr(0,3)+"-"+GAUtilities.s4()+"-"+GAUtilities.s4()+GAUtilities.s4()+GAUtilities.s4()).toLowerCase()},GAUtilities.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},GAUtilities.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",GAUtilities}();utilities.GAUtilities=GAUtilities}(gameanalytics.utilities||(gameanalytics.utilities={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(validators){var GALogger=gameanalytics.logging.GALogger,EGASdkErrorType=gameanalytics.http.EGASdkErrorType,GAUtilities=gameanalytics.utilities.GAUtilities,GAValidator=function(){function GAValidator(){}return GAValidator.validateBusinessEvent=function(currency,amount,cartType,itemType,itemId){return GAValidator.validateCurrency(currency)?amount<0?(GALogger.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+amount),!1):GAValidator.validateShortString(cartType,!0)?GAValidator.validateEventPartLength(itemType,!1)?GAValidator.validateEventPartCharacters(itemType)?GAValidator.validateEventPartLength(itemId,!1)?!!GAValidator.validateEventPartCharacters(itemId)||(GALogger.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemId),!1):(GALogger.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+itemId),!1):(GALogger.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemType),!1):(GALogger.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+itemType),!1):(GALogger.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+cartType),!1):(GALogger.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+currency),!1)},GAValidator.validateResourceEvent=function(flowType,currency,amount,itemType,itemId,availableCurrencies,availableItemTypes){return flowType==gameanalytics.EGAResourceFlowType.Undefined?(GALogger.w("Validation fail - resource event - flowType: Invalid flow type."),!1):currency?GAUtilities.stringArrayContainsString(availableCurrencies,currency)?0<amount?itemType?GAValidator.validateEventPartLength(itemType,!1)?GAValidator.validateEventPartCharacters(itemType)?GAUtilities.stringArrayContainsString(availableItemTypes,itemType)?GAValidator.validateEventPartLength(itemId,!1)?!!GAValidator.validateEventPartCharacters(itemId)||(GALogger.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemId),!1):(GALogger.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+itemId),!1):(GALogger.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(GALogger.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+amount),!1):(GALogger.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+currency),!1):(GALogger.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},GAValidator.validateProgressionEvent=function(progressionStatus,progression01,progression02,progression03){if(progressionStatus==gameanalytics.EGAProgressionStatus.Undefined)return GALogger.w("Validation fail - progression event: Invalid progression status."),!1;if(progression03&&!progression02&&progression01)return GALogger.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(progression02&&!progression01)return GALogger.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!progression01)return GALogger.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!GAValidator.validateEventPartLength(progression01,!1))return GALogger.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+progression01),!1;if(!GAValidator.validateEventPartCharacters(progression01))return GALogger.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression01),!1;if(progression02){if(!GAValidator.validateEventPartLength(progression02,!0))return GALogger.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+progression02),!1;if(!GAValidator.validateEventPartCharacters(progression02))return GALogger.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression02),!1}if(progression03){if(!GAValidator.validateEventPartLength(progression03,!0))return GALogger.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+progression03),!1;if(!GAValidator.validateEventPartCharacters(progression03))return GALogger.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression03),!1}return!0},GAValidator.validateDesignEvent=function(eventId,value){return GAValidator.validateEventIdLength(eventId)?!!GAValidator.validateEventIdCharacters(eventId)||(GALogger.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+eventId),!1):(GALogger.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+eventId),!1)},GAValidator.validateErrorEvent=function(severity,message){return severity==gameanalytics.EGAErrorSeverity.Undefined?(GALogger.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!GAValidator.validateLongString(message,!0)||(GALogger.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},GAValidator.validateSdkErrorEvent=function(gameKey,gameSecret,type){return!!GAValidator.validateKeys(gameKey,gameSecret)&&(type!==EGASdkErrorType.Undefined||(GALogger.w("Validation fail - sdk error event - type: Type was unsupported value."),!1))},GAValidator.validateKeys=function(gameKey,gameSecret){return!(!GAUtilities.stringMatch(gameKey,/^[A-z0-9]{32}$/)||!GAUtilities.stringMatch(gameSecret,/^[A-z0-9]{40}$/))},GAValidator.validateCurrency=function(currency){return!!currency&&!!GAUtilities.stringMatch(currency,/^[A-Z]{3}$/)},GAValidator.validateEventPartLength=function(eventPart,allowNull){return!(!allowNull||eventPart)||!!eventPart&&!(64<eventPart.length)},GAValidator.validateEventPartCharacters=function(eventPart){return!!GAUtilities.stringMatch(eventPart,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},GAValidator.validateEventIdLength=function(eventId){return!!eventId&&!!GAUtilities.stringMatch(eventId,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},GAValidator.validateEventIdCharacters=function(eventId){return!!eventId&&!!GAUtilities.stringMatch(eventId,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},GAValidator.validateAndCleanInitRequestResponse=function(initResponse){if(null==initResponse)return GALogger.w("validateInitRequestResponse failed - no response dictionary."),null;var validatedDict={};try{validatedDict.enabled=initResponse.enabled}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var serverTsNumber=initResponse.server_ts;if(!(0<serverTsNumber))return GALogger.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;validatedDict.server_ts=serverTsNumber}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof initResponse.server_ts+", value="+initResponse.server_ts+", "+e),null}try{var configurations=initResponse.configurations;validatedDict.configurations=configurations}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof initResponse.configurations+", value="+initResponse.configurations+", "+e),null}return validatedDict},GAValidator.validateBuild=function(build){return!!GAValidator.validateShortString(build,!1)},GAValidator.validateSdkWrapperVersion=function(wrapperVersion){return!!GAUtilities.stringMatch(wrapperVersion,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},GAValidator.validateEngineVersion=function(engineVersion){return!(!engineVersion||!GAUtilities.stringMatch(engineVersion,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},GAValidator.validateUserId=function(uId){return!!GAValidator.validateString(uId,!1)||(GALogger.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},GAValidator.validateShortString=function(shortString,canBeEmpty){return!(!canBeEmpty||shortString)||!(!shortString||32<shortString.length)},GAValidator.validateString=function(s,canBeEmpty){return!(!canBeEmpty||s)||!(!s||64<s.length)},GAValidator.validateLongString=function(longString,canBeEmpty){return!(!canBeEmpty||longString)||!(!longString||8192<longString.length)},GAValidator.validateConnectionType=function(connectionType){return GAUtilities.stringMatch(connectionType,/^(wwan|wifi|lan|offline)$/)},GAValidator.validateCustomDimensions=function(customDimensions){return GAValidator.validateArrayOfStrings(20,32,!1,"custom dimensions",customDimensions)},GAValidator.validateResourceCurrencies=function(resourceCurrencies){if(!GAValidator.validateArrayOfStrings(20,64,!1,"resource currencies",resourceCurrencies))return!1;for(var i=0;i<resourceCurrencies.length;++i)if(!GAUtilities.stringMatch(resourceCurrencies[i],/^[A-Za-z]+$/))return GALogger.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+resourceCurrencies[i]),!1;return!0},GAValidator.validateResourceItemTypes=function(resourceItemTypes){if(!GAValidator.validateArrayOfStrings(20,32,!1,"resource item types",resourceItemTypes))return!1;for(var i=0;i<resourceItemTypes.length;++i)if(!GAValidator.validateEventPartCharacters(resourceItemTypes[i]))return GALogger.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+resourceItemTypes[i]),!1;return!0},GAValidator.validateDimension01=function(dimension01,availableDimensions){return!dimension01||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension01)},GAValidator.validateDimension02=function(dimension02,availableDimensions){return!dimension02||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension02)},GAValidator.validateDimension03=function(dimension03,availableDimensions){return!dimension03||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension03)},GAValidator.validateArrayOfStrings=function(maxCount,maxStringLength,allowNoValues,logTag,arrayOfStrings){var arrayTag=logTag;if(arrayTag||(arrayTag="Array"),!arrayOfStrings)return GALogger.w(arrayTag+" validation failed: array cannot be null. "),!1;if(0==allowNoValues&&0==arrayOfStrings.length)return GALogger.w(arrayTag+" validation failed: array cannot be empty. "),!1;if(0<maxCount&&arrayOfStrings.length>maxCount)return GALogger.w(arrayTag+" validation failed: array cannot exceed "+maxCount+" values. It has "+arrayOfStrings.length+" values."),!1;for(var i=0;i<arrayOfStrings.length;++i){var stringLength=arrayOfStrings[i]?arrayOfStrings[i].length:0;if(0===stringLength)return GALogger.w(arrayTag+" validation failed: contained an empty string. Array="+JSON.stringify(arrayOfStrings)),!1;if(0<maxStringLength&&maxStringLength<stringLength)return GALogger.w(arrayTag+" validation failed: a string exceeded max allowed length (which is: "+maxStringLength+"). String was: "+arrayOfStrings[i]),!1}return!0},GAValidator.validateFacebookId=function(facebookId){return!!GAValidator.validateString(facebookId,!1)||(GALogger.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},GAValidator.validateGender=function(gender){if(isNaN(Number(gameanalytics.EGAGender[gender]))){if(gender==gameanalytics.EGAGender.Undefined||gender!=gameanalytics.EGAGender.Male&&gender!=gameanalytics.EGAGender.Female)return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+gender),!1}else if(gender==gameanalytics.EGAGender[gameanalytics.EGAGender.Undefined]||gender!=gameanalytics.EGAGender[gameanalytics.EGAGender.Male]&&gender!=gameanalytics.EGAGender[gameanalytics.EGAGender.Female])return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+gender),!1;return!0},GAValidator.validateBirthyear=function(birthYear){return!(birthYear<0||9999<birthYear)||(GALogger.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},GAValidator.validateClientTs=function(clientTs){return!(clientTs<-4294967294||4294967294<clientTs)},GAValidator}();validators.GAValidator=GAValidator}(gameanalytics.validators||(gameanalytics.validators={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(device){var NameValueVersion=function(name,value,version){this.name=name,this.value=value,this.version=version};device.NameValueVersion=NameValueVersion;var NameVersion=function(name,version){this.name=name,this.version=version};device.NameVersion=NameVersion;var GADevice=function(){function GADevice(){}return GADevice.touch=function(){},GADevice.getRelevantSdkVersion=function(){return GADevice.sdkGameEngineVersion?GADevice.sdkGameEngineVersion:GADevice.sdkWrapperVersion},GADevice.getConnectionType=function(){return GADevice.connectionType},GADevice.updateConnectionType=function(){GADevice.connectionType=navigator.onLine?"ios"===GADevice.buildPlatform||"android"===GADevice.buildPlatform?"wwan":"lan":"offline"},GADevice.getOSVersionString=function(){return GADevice.buildPlatform+" "+GADevice.osVersionPair.version},GADevice.runtimePlatformToString=function(){return GADevice.osVersionPair.name},GADevice.getBrowserVersionString=function(){var tem,ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==M.length&&"ios"===GADevice.buildPlatform)return"webkit_"+GADevice.osVersion;if(/trident/i.test(M[1]))return"IE "+((tem=/\brv[ :]+(\d+)/g.exec(ua)||[])[1]||"");if("Chrome"===M[1]&&null!=(tem=ua.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return tem.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(M[1]&&"fbav"===M[1].toLowerCase()&&(M[1]="facebook",M[2]))return"facebook "+M[2];var MString=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(tem=ua.match(/version\/(\d+)/i))&&MString.splice(1,1,tem[1]),MString.join(" ").toLowerCase()},GADevice.getDeviceModel=function(){return"unknown"},GADevice.getDeviceManufacturer=function(){return"unknown"},GADevice.matchItem=function(agent,data){var regexv,matches,mathcesResult,version,result=new NameVersion("unknown","0.0.0"),i=0,j=0;for(i=0;i<data.length;i+=1)if(new RegExp(data[i].value,"i").test(agent)){if(regexv=new RegExp(data[i].version+"[- /:;]([\\d._]+)","i"),version="",(matches=agent.match(regexv))&&matches[1]&&(mathcesResult=matches[1]),mathcesResult){var matchesArray=mathcesResult.split(/[._]+/);for(j=0;j<Math.min(matchesArray.length,3);j+=1)version+=matchesArray[j]+(j<Math.min(matchesArray.length,3)-1?".":"")}else version="0.0.0";return result.name=data[i].name,result.version=version,result}return result},GADevice.sdkWrapperVersion="javascript 3.1.2",GADevice.osVersionPair=GADevice.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new NameValueVersion("windows_phone","Windows Phone","OS"),new NameValueVersion("windows","Win","NT"),new NameValueVersion("ios","iPhone","OS"),new NameValueVersion("ios","iPad","OS"),new NameValueVersion("ios","iPod","OS"),new NameValueVersion("android","Android","Android"),new NameValueVersion("blackBerry","BlackBerry","/"),new NameValueVersion("mac_osx","Mac","OS X"),new NameValueVersion("tizen","Tizen","Tizen"),new NameValueVersion("linux","Linux","rv")]),GADevice.buildPlatform=GADevice.runtimePlatformToString(),GADevice.deviceModel=GADevice.getDeviceModel(),GADevice.deviceManufacturer=GADevice.getDeviceManufacturer(),GADevice.osVersion=GADevice.getOSVersionString(),GADevice.browserVersion=GADevice.getBrowserVersionString(),GADevice.maxSafeInteger=Math.pow(2,53)-1,GADevice}();device.GADevice=GADevice}(gameanalytics.device||(gameanalytics.device={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var TimedBlock=function(){function TimedBlock(deadline){this.deadline=deadline,this.ignore=!1,this.async=!1,this.running=!1,this.id=++TimedBlock.idCounter}return TimedBlock.idCounter=0,TimedBlock}();threading.TimedBlock=TimedBlock}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var PriorityQueue=function(){function PriorityQueue(priorityComparer){this.comparer=priorityComparer,this._subQueues={},this._sortedKeys=[]}return PriorityQueue.prototype.enqueue=function(priority,item){-1===this._sortedKeys.indexOf(priority)&&this.addQueueOfPriority(priority),this._subQueues[priority].push(item)},PriorityQueue.prototype.addQueueOfPriority=function(priority){var _this=this;this._sortedKeys.push(priority),this._sortedKeys.sort(function(x,y){return _this.comparer.compare(x,y)}),this._subQueues[priority]=[]},PriorityQueue.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},PriorityQueue.prototype.hasItems=function(){return 0<this._sortedKeys.length},PriorityQueue.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},PriorityQueue.prototype.dequeueFromHighPriorityQueue=function(){var firstKey=this._sortedKeys[0],nextItem=this._subQueues[firstKey].shift();return 0===this._subQueues[firstKey].length&&(this._sortedKeys.shift(),delete this._subQueues[firstKey]),nextItem},PriorityQueue}();threading.PriorityQueue=PriorityQueue}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(store_1){var EGAStoreArgsOperator,EGAStore,GALogger=gameanalytics.logging.GALogger;!function(EGAStoreArgsOperator){EGAStoreArgsOperator[EGAStoreArgsOperator.Equal=0]="Equal",EGAStoreArgsOperator[EGAStoreArgsOperator.LessOrEqual=1]="LessOrEqual",EGAStoreArgsOperator[EGAStoreArgsOperator.NotEqual=2]="NotEqual"}(EGAStoreArgsOperator=store_1.EGAStoreArgsOperator||(store_1.EGAStoreArgsOperator={})),function(EGAStore){EGAStore[EGAStore.Events=0]="Events",EGAStore[EGAStore.Sessions=1]="Sessions",EGAStore[EGAStore.Progression=2]="Progression"}(EGAStore=store_1.EGAStore||(store_1.EGAStore={}));var GAStore=function(){function GAStore(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{GAStore.storageAvailable="object"==typeof localStorage&&(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),!0)}catch(e){}}return GAStore.isStorageAvailable=function(){return GAStore.storageAvailable},GAStore.isStoreTooLargeForEvents=function(){return GAStore.instance.eventsStore.length+GAStore.instance.sessionsStore.length>GAStore.MaxNumberOfEntries},GAStore.select=function(store,args,sort,maxCount){void 0===args&&(args=[]),void 0===sort&&(sort=!1),void 0===maxCount&&(maxCount=0);var currentStore=GAStore.getStore(store);if(!currentStore)return null;for(var result=[],i=0;i<currentStore.length;++i){for(var entry=currentStore[i],add=!0,j=0;j<args.length;++j){var argsEntry=args[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:add=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:add=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:add=entry[argsEntry[0]]!=argsEntry[2];break;default:add=!1}else add=!1;if(!add)break}add&&result.push(entry)}return sort&&result.sort(function(a,b){return a.client_ts-b.client_ts}),0<maxCount&&result.length>maxCount&&(result=result.slice(0,maxCount+1)),result},GAStore.update=function(store,setArgs,whereArgs){void 0===whereArgs&&(whereArgs=[]);var currentStore=GAStore.getStore(store);if(!currentStore)return!1;for(var i=0;i<currentStore.length;++i){for(var entry=currentStore[i],update=!0,j=0;j<whereArgs.length;++j){var argsEntry=whereArgs[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:update=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:update=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:update=entry[argsEntry[0]]!=argsEntry[2];break;default:update=!1}else update=!1;if(!update)break}if(update)for(j=0;j<setArgs.length;++j){var setArgsEntry=setArgs[j];entry[setArgsEntry[0]]=setArgsEntry[1]}}return!0},GAStore.delete=function(store,args){var currentStore=GAStore.getStore(store);if(currentStore)for(var i=0;i<currentStore.length;++i){for(var entry=currentStore[i],del=!0,j=0;j<args.length;++j){var argsEntry=args[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:del=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:del=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:del=entry[argsEntry[0]]!=argsEntry[2];break;default:del=!1}else del=!1;if(!del)break}del&&(currentStore.splice(i,1),--i)}},GAStore.insert=function(store,newEntry,replace,replaceKey){void 0===replace&&(replace=!1),void 0===replaceKey&&(replaceKey=null);var currentStore=GAStore.getStore(store);if(currentStore)if(replace){if(!replaceKey)return;for(var replaced=!1,i=0;i<currentStore.length;++i){var entry=currentStore[i];if(entry[replaceKey]==newEntry[replaceKey]){for(var s in newEntry)entry[s]=newEntry[s];replaced=!0;break}}replaced||currentStore.push(newEntry)}else currentStore.push(newEntry)},GAStore.save=function(){GAStore.isStorageAvailable()?(localStorage.setItem(GAStore.KeyPrefix+GAStore.EventsStoreKey,JSON.stringify(GAStore.instance.eventsStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.SessionsStoreKey,JSON.stringify(GAStore.instance.sessionsStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.ProgressionStoreKey,JSON.stringify(GAStore.instance.progressionStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.ItemsStoreKey,JSON.stringify(GAStore.instance.storeItems))):GALogger.w("Storage is not available, cannot save.")},GAStore.load=function(){if(GAStore.isStorageAvailable()){try{GAStore.instance.eventsStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.EventsStoreKey)),GAStore.instance.eventsStore||(GAStore.instance.eventsStore=[])}catch(e){GALogger.w("Load failed for 'events' store. Using empty store."),GAStore.instance.eventsStore=[]}try{GAStore.instance.sessionsStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.SessionsStoreKey)),GAStore.instance.sessionsStore||(GAStore.instance.sessionsStore=[])}catch(e){GALogger.w("Load failed for 'sessions' store. Using empty store."),GAStore.instance.sessionsStore=[]}try{GAStore.instance.progressionStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.ProgressionStoreKey)),GAStore.instance.progressionStore||(GAStore.instance.progressionStore=[])}catch(e){GALogger.w("Load failed for 'progression' store. Using empty store."),GAStore.instance.progressionStore=[]}try{GAStore.instance.storeItems=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.ItemsStoreKey)),GAStore.instance.storeItems||(GAStore.instance.storeItems={})}catch(e){GALogger.w("Load failed for 'items' store. Using empty store."),GAStore.instance.progressionStore=[]}}else GALogger.w("Storage is not available, cannot load.")},GAStore.setItem=function(key,value){var keyWithPrefix=GAStore.KeyPrefix+key;value?GAStore.instance.storeItems[keyWithPrefix]=value:keyWithPrefix in GAStore.instance.storeItems&&delete GAStore.instance.storeItems[keyWithPrefix]},GAStore.getItem=function(key){var keyWithPrefix=GAStore.KeyPrefix+key;return keyWithPrefix in GAStore.instance.storeItems?GAStore.instance.storeItems[keyWithPrefix]:null},GAStore.getStore=function(store){switch(store){case EGAStore.Events:return GAStore.instance.eventsStore;case EGAStore.Sessions:return GAStore.instance.sessionsStore;case EGAStore.Progression:return GAStore.instance.progressionStore;default:return GALogger.w("GAStore.getStore(): Cannot find store: "+store),null}},GAStore.instance=new GAStore,GAStore.MaxNumberOfEntries=2e3,GAStore.KeyPrefix="GA::",GAStore.EventsStoreKey="ga_event",GAStore.SessionsStoreKey="ga_session",GAStore.ProgressionStoreKey="ga_progression",GAStore.ItemsStoreKey="ga_items",GAStore}();store_1.GAStore=GAStore}(gameanalytics.store||(gameanalytics.store={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(state){var GAValidator=gameanalytics.validators.GAValidator,GAUtilities=gameanalytics.utilities.GAUtilities,GALogger=gameanalytics.logging.GALogger,GAStore=gameanalytics.store.GAStore,GADevice=gameanalytics.device.GADevice,EGAStore=gameanalytics.store.EGAStore,EGAStoreArgsOperator=gameanalytics.store.EGAStoreArgsOperator,GAState=function(){function GAState(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return GAState.setUserId=function(userId){GAState.instance.userId=userId,GAState.cacheIdentifier()},GAState.getIdentifier=function(){return GAState.instance.identifier},GAState.isInitialized=function(){return GAState.instance.initialized},GAState.setInitialized=function(value){GAState.instance.initialized=value},GAState.getSessionStart=function(){return GAState.instance.sessionStart},GAState.getSessionNum=function(){return GAState.instance.sessionNum},GAState.getTransactionNum=function(){return GAState.instance.transactionNum},GAState.getSessionId=function(){return GAState.instance.sessionId},GAState.getCurrentCustomDimension01=function(){return GAState.instance.currentCustomDimension01},GAState.getCurrentCustomDimension02=function(){return GAState.instance.currentCustomDimension02},GAState.getCurrentCustomDimension03=function(){return GAState.instance.currentCustomDimension03},GAState.getGameKey=function(){return GAState.instance.gameKey},GAState.getGameSecret=function(){return GAState.instance.gameSecret},GAState.getAvailableCustomDimensions01=function(){return GAState.instance.availableCustomDimensions01},GAState.setAvailableCustomDimensions01=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions01=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom01 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableCustomDimensions02=function(){return GAState.instance.availableCustomDimensions02},GAState.setAvailableCustomDimensions02=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions02=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom02 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableCustomDimensions03=function(){return GAState.instance.availableCustomDimensions03},GAState.setAvailableCustomDimensions03=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions03=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom03 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableResourceCurrencies=function(){return GAState.instance.availableResourceCurrencies},GAState.setAvailableResourceCurrencies=function(value){GAValidator.validateResourceCurrencies(value)&&(GAState.instance.availableResourceCurrencies=value,GALogger.i("Set available resource currencies: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableResourceItemTypes=function(){return GAState.instance.availableResourceItemTypes},GAState.setAvailableResourceItemTypes=function(value){GAValidator.validateResourceItemTypes(value)&&(GAState.instance.availableResourceItemTypes=value,GALogger.i("Set available resource item types: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getBuild=function(){return GAState.instance.build},GAState.setBuild=function(value){GAState.instance.build=value,GALogger.i("Set build version: "+value)},GAState.getUseManualSessionHandling=function(){return GAState.instance.useManualSessionHandling},GAState.isEventSubmissionEnabled=function(){return GAState.instance._isEventSubmissionEnabled},GAState.prototype.setDefaultId=function(value){this.defaultUserId=value||"",GAState.cacheIdentifier()},GAState.getDefaultId=function(){return GAState.instance.defaultUserId},GAState.getSdkConfig=function(){var count=0;for(var json in GAState.instance.sdkConfig)0===count&&(first=json),++count;if(first&&0<count)return GAState.instance.sdkConfig;var first;count=0;for(var json in GAState.instance.sdkConfigCached)0===count&&(first=json),++count;return first&&0<count?GAState.instance.sdkConfigCached:GAState.instance.sdkConfigDefault},GAState.isEnabled=function(){var currentSdkConfig=GAState.getSdkConfig();return(!currentSdkConfig.enabled||"false"!=currentSdkConfig.enabled)&&!!GAState.instance.initAuthorized},GAState.setCustomDimension01=function(dimension){GAState.instance.currentCustomDimension01=dimension,GAStore.setItem(GAState.Dimension01Key,dimension),GALogger.i("Set custom01 dimension value: "+dimension)},GAState.setCustomDimension02=function(dimension){GAState.instance.currentCustomDimension02=dimension,GAStore.setItem(GAState.Dimension02Key,dimension),GALogger.i("Set custom02 dimension value: "+dimension)},GAState.setCustomDimension03=function(dimension){GAState.instance.currentCustomDimension03=dimension,GAStore.setItem(GAState.Dimension03Key,dimension),GALogger.i("Set custom03 dimension value: "+dimension)},GAState.setFacebookId=function(facebookId){GAState.instance.facebookId=facebookId,GAStore.setItem(GAState.FacebookIdKey,facebookId),GALogger.i("Set facebook id: "+facebookId)},GAState.setGender=function(gender){GAState.instance.gender=isNaN(Number(gameanalytics.EGAGender[gender]))?gameanalytics.EGAGender[gender].toString().toLowerCase():gameanalytics.EGAGender[gameanalytics.EGAGender[gender]].toString().toLowerCase(),GAStore.setItem(GAState.GenderKey,GAState.instance.gender),GALogger.i("Set gender: "+GAState.instance.gender)},GAState.setBirthYear=function(birthYear){GAState.instance.birthYear=birthYear,GAStore.setItem(GAState.BirthYearKey,birthYear.toString()),GALogger.i("Set birth year: "+birthYear)},GAState.incrementSessionNum=function(){var sessionNumInt=GAState.getSessionNum()+1;GAState.instance.sessionNum=sessionNumInt},GAState.incrementTransactionNum=function(){var transactionNumInt=GAState.getTransactionNum()+1;GAState.instance.transactionNum=transactionNumInt},GAState.incrementProgressionTries=function(progression){var tries=GAState.getProgressionTries(progression)+1;GAState.instance.progressionTries[progression]=tries;var values={};values.progression=progression,values.tries=tries,GAStore.insert(EGAStore.Progression,values,!0,"progression")},GAState.getProgressionTries=function(progression){return progression in GAState.instance.progressionTries?GAState.instance.progressionTries[progression]:0},GAState.clearProgressionTries=function(progression){progression in GAState.instance.progressionTries&&delete GAState.instance.progressionTries[progression];var parms=[];parms.push(["progression",EGAStoreArgsOperator.Equal,progression]),GAStore.delete(EGAStore.Progression,parms)},GAState.setKeys=function(gameKey,gameSecret){GAState.instance.gameKey=gameKey,GAState.instance.gameSecret=gameSecret},GAState.setManualSessionHandling=function(flag){GAState.instance.useManualSessionHandling=flag,GALogger.i("Use manual session handling: "+flag)},GAState.setEnabledEventSubmission=function(flag){GAState.instance._isEventSubmissionEnabled=flag},GAState.getEventAnnotations=function(){var annotations={v:2};annotations.user_id=GAState.instance.identifier,annotations.client_ts=GAState.getClientTsAdjusted(),annotations.sdk_version=GADevice.getRelevantSdkVersion(),annotations.os_version=GADevice.osVersion,annotations.manufacturer=GADevice.deviceManufacturer,annotations.device=GADevice.deviceModel,annotations.browser_version=GADevice.browserVersion,annotations.platform=GADevice.buildPlatform,annotations.session_id=GAState.instance.sessionId,annotations[GAState.SessionNumKey]=GAState.instance.sessionNum;var connection_type=GADevice.getConnectionType();return GAValidator.validateConnectionType(connection_type)&&(annotations.connection_type=connection_type),GADevice.gameEngineVersion&&(annotations.engine_version=GADevice.gameEngineVersion),GAState.instance.build&&(annotations.build=GAState.instance.build),GAState.instance.facebookId&&(annotations[GAState.FacebookIdKey]=GAState.instance.facebookId),GAState.instance.gender&&(annotations[GAState.GenderKey]=GAState.instance.gender),0!=GAState.instance.birthYear&&(annotations[GAState.BirthYearKey]=GAState.instance.birthYear),annotations},GAState.getSdkErrorEventAnnotations=function(){var annotations={v:2};annotations.category=GAState.CategorySdkError,annotations.sdk_version=GADevice.getRelevantSdkVersion(),annotations.os_version=GADevice.osVersion,annotations.manufacturer=GADevice.deviceManufacturer,annotations.device=GADevice.deviceModel,annotations.platform=GADevice.buildPlatform;var connection_type=GADevice.getConnectionType();return GAValidator.validateConnectionType(connection_type)&&(annotations.connection_type=connection_type),GADevice.gameEngineVersion&&(annotations.engine_version=GADevice.gameEngineVersion),annotations},GAState.getInitAnnotations=function(){var initAnnotations={};return initAnnotations.user_id=GAState.getIdentifier(),initAnnotations.sdk_version=GADevice.getRelevantSdkVersion(),initAnnotations.os_version=GADevice.osVersion,initAnnotations.platform=GADevice.buildPlatform,initAnnotations},GAState.getClientTsAdjusted=function(){var clientTs=GAUtilities.timeIntervalSince1970(),clientTsAdjustedInteger=clientTs+GAState.instance.clientServerTimeOffset;return GAValidator.validateClientTs(clientTsAdjustedInteger)?clientTsAdjustedInteger:clientTs},GAState.sessionIsStarted=function(){return 0!=GAState.instance.sessionStart},GAState.cacheIdentifier=function(){GAState.instance.userId?GAState.instance.identifier=GAState.instance.userId:GAState.instance.defaultUserId&&(GAState.instance.identifier=GAState.instance.defaultUserId)},GAState.ensurePersistedStates=function(){GAStore.isStorageAvailable()&&GAStore.load();var instance=GAState.instance;instance.setDefaultId(null!=GAStore.getItem(GAState.DefaultUserIdKey)?GAStore.getItem(GAState.DefaultUserIdKey):GAUtilities.createGuid()),instance.sessionNum=null!=GAStore.getItem(GAState.SessionNumKey)?Number(GAStore.getItem(GAState.SessionNumKey)):0,instance.transactionNum=null!=GAStore.getItem(GAState.TransactionNumKey)?Number(GAStore.getItem(GAState.TransactionNumKey)):0,instance.facebookId?GAStore.setItem(GAState.FacebookIdKey,instance.facebookId):(instance.facebookId=null!=GAStore.getItem(GAState.FacebookIdKey)?GAStore.getItem(GAState.FacebookIdKey):"",instance.facebookId),instance.gender?GAStore.setItem(GAState.GenderKey,instance.gender):(instance.gender=null!=GAStore.getItem(GAState.GenderKey)?GAStore.getItem(GAState.GenderKey):"",instance.gender),instance.birthYear&&0!=instance.birthYear?GAStore.setItem(GAState.BirthYearKey,instance.birthYear.toString()):(instance.birthYear=null!=GAStore.getItem(GAState.BirthYearKey)?Number(GAStore.getItem(GAState.BirthYearKey)):0,instance.birthYear),instance.currentCustomDimension01?GAStore.setItem(GAState.Dimension01Key,instance.currentCustomDimension01):(instance.currentCustomDimension01=null!=GAStore.getItem(GAState.Dimension01Key)?GAStore.getItem(GAState.Dimension01Key):"",instance.currentCustomDimension01),instance.currentCustomDimension02?GAStore.setItem(GAState.Dimension02Key,instance.currentCustomDimension02):(instance.currentCustomDimension02=null!=GAStore.getItem(GAState.Dimension02Key)?GAStore.getItem(GAState.Dimension02Key):"",instance.currentCustomDimension02),instance.currentCustomDimension03?GAStore.setItem(GAState.Dimension03Key,instance.currentCustomDimension03):(instance.currentCustomDimension03=null!=GAStore.getItem(GAState.Dimension03Key)?GAStore.getItem(GAState.Dimension03Key):"",instance.currentCustomDimension03);var sdkConfigCachedString=null!=GAStore.getItem(GAState.SdkConfigCachedKey)?GAStore.getItem(GAState.SdkConfigCachedKey):"";if(sdkConfigCachedString){var sdkConfigCached=JSON.parse(GAUtilities.decode64(sdkConfigCachedString));sdkConfigCached&&(instance.sdkConfigCached=sdkConfigCached)}var results_ga_progression=GAStore.select(EGAStore.Progression);if(results_ga_progression)for(var i=0;i<results_ga_progression.length;++i){var result=results_ga_progression[i];result&&(instance.progressionTries[result.progression]=result.tries)}},GAState.calculateServerTimeOffset=function(serverTs){return serverTs-GAUtilities.timeIntervalSince1970()},GAState.validateAndCleanCustomFields=function(fields){var result={};if(fields){var count=0;for(var key in fields){var value=fields[key];if(key&&value)if(count<GAState.MAX_CUSTOM_FIELDS_COUNT){var regex=new RegExp("^[a-zA-Z0-9_]{1,"+GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(GAUtilities.stringMatch(key,regex)){var type=typeof value;if("string"===type||value instanceof String){var valueAsString=value;valueAsString.length<=GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&0<valueAsString.length?(result[key]=valueAsString,++count):GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its value is an empty string or exceeds the max number of characters ("+GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===type||value instanceof Number){var valueAsNumber=value;result[key]=valueAsNumber,++count}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its value is not a string or number")}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because it exceeds the max number of custom fields ("+GAState.MAX_CUSTOM_FIELDS_COUNT+")");else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its key or value is null")}}return result},GAState.validateAndFixCurrentDimensions=function(){GAValidator.validateDimension01(GAState.getCurrentCustomDimension01(),GAState.getAvailableCustomDimensions01())||GAState.setCustomDimension01(""),GAValidator.validateDimension02(GAState.getCurrentCustomDimension02(),GAState.getAvailableCustomDimensions02())||GAState.setCustomDimension02(""),GAValidator.validateDimension03(GAState.getCurrentCustomDimension03(),GAState.getAvailableCustomDimensions03())||GAState.setCustomDimension03("")},GAState.getConfigurationStringValue=function(key,defaultValue){return GAState.instance.configurations[key]?GAState.instance.configurations[key].toString():defaultValue},GAState.isCommandCenterReady=function(){return GAState.instance.commandCenterIsReady},GAState.addCommandCenterListener=function(listener){GAState.instance.commandCenterListeners.indexOf(listener)<0&&GAState.instance.commandCenterListeners.push(listener)},GAState.removeCommandCenterListener=function(listener){var index=GAState.instance.commandCenterListeners.indexOf(listener);-1<index&&GAState.instance.commandCenterListeners.splice(index,1)},GAState.getConfigurationsContentAsString=function(){return JSON.stringify(GAState.instance.configurations)},GAState.populateConfigurations=function(sdkConfig){var configurations=sdkConfig.configurations;if(configurations)for(var i=0;i<configurations.length;++i){var configuration=configurations[i];if(configuration){var key=configuration.key,value=configuration.value,start_ts=configuration.start?configuration.start:Number.MIN_VALUE,end_ts=configuration.end?configuration.end:Number.MAX_VALUE,client_ts_adjusted=GAState.getClientTsAdjusted();key&&value&&start_ts<client_ts_adjusted&&client_ts_adjusted<end_ts&&(GAState.instance.configurations[key]=value)}}GAState.instance.commandCenterIsReady=!0;var listeners=GAState.instance.commandCenterListeners;for(i=0;i<listeners.length;++i)listeners[i]&&listeners[i].onCommandCenterUpdated()},GAState.CategorySdkError="sdk_error",GAState.MAX_CUSTOM_FIELDS_COUNT=50,GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,GAState.instance=new GAState,GAState.DefaultUserIdKey="default_user_id",GAState.SessionNumKey="session_num",GAState.TransactionNumKey="transaction_num",GAState.FacebookIdKey="facebook_id",GAState.GenderKey="gender",GAState.BirthYearKey="birth_year",GAState.Dimension01Key="dimension01",GAState.Dimension02Key="dimension02",GAState.Dimension03Key="dimension03",GAState.SdkConfigCachedKey="sdk_config_cached",GAState}();state.GAState=GAState}(gameanalytics.state||(gameanalytics.state={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(tasks){var GAUtilities=gameanalytics.utilities.GAUtilities,GALogger=gameanalytics.logging.GALogger,SdkErrorTask=function(){function SdkErrorTask(){}return SdkErrorTask.execute=function(url,type,payloadData,secretKey){if(SdkErrorTask.countMap[type]||(SdkErrorTask.countMap[type]=0),!(SdkErrorTask.countMap[type]>=SdkErrorTask.MaxCount)){var hashHmac=GAUtilities.getHmac(secretKey,payloadData),request=new XMLHttpRequest;request.onreadystatechange=function(){if(4===request.readyState){if(!request.responseText)return;if(200!=request.status)return void GALogger.w("sdk error failed. response code not 200. status code: "+request.status+", description: "+request.statusText+", body: "+request.responseText);SdkErrorTask.countMap[type]=SdkErrorTask.countMap[type]+1}},request.open("POST",url,!0),request.setRequestHeader("Content-Type","application/json"),request.setRequestHeader("Authorization",hashHmac);try{request.send(payloadData)}catch(e){console.error(e)}}},SdkErrorTask.MaxCount=10,SdkErrorTask.countMap={},SdkErrorTask}();tasks.SdkErrorTask=SdkErrorTask}(gameanalytics.tasks||(gameanalytics.tasks={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(http){var GAState=gameanalytics.state.GAState,GALogger=gameanalytics.logging.GALogger,GAUtilities=gameanalytics.utilities.GAUtilities,GAValidator=gameanalytics.validators.GAValidator,SdkErrorTask=gameanalytics.tasks.SdkErrorTask,GAHTTPApi=function(){function GAHTTPApi(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return GAHTTPApi.prototype.requestInit=function(callback){var gameKey=GAState.getGameKey(),url=(this.baseUrl,this.initializeUrlPath);url="https://rubick.gameanalytics.com/v2/command_center?game_key="+gameKey+"&interval_seconds=1000000";var initAnnotations=GAState.getInitAnnotations(),JSONstring=JSON.stringify(initAnnotations);if(JSONstring){var payloadData=this.createPayloadData(JSONstring,this.useGzip),extraArgs=[];extraArgs.push(JSONstring),GAHTTPApi.sendRequest(url,payloadData,extraArgs,this.useGzip,GAHTTPApi.initRequestCallback,callback)}else callback(http.EGAHTTPApiResponse.JsonEncodeFailed,null)},GAHTTPApi.prototype.sendEventsInArray=function(eventArray,requestId,callback){if(0!=eventArray.length){var gameKey=GAState.getGameKey(),url=this.baseUrl+"/"+gameKey+"/"+this.eventsUrlPath,JSONstring=JSON.stringify(eventArray);if(JSONstring){var payloadData=this.createPayloadData(JSONstring,this.useGzip),extraArgs=[];extraArgs.push(JSONstring),extraArgs.push(requestId),extraArgs.push(eventArray.length.toString()),GAHTTPApi.sendRequest(url,payloadData,extraArgs,this.useGzip,GAHTTPApi.sendEventInArrayRequestCallback,callback)}else callback(http.EGAHTTPApiResponse.JsonEncodeFailed,null,requestId,eventArray.length)}},GAHTTPApi.prototype.sendSdkErrorEvent=function(type){if(GAState.isEventSubmissionEnabled()){var gameKey=GAState.getGameKey(),secretKey=GAState.getGameSecret();if(GAValidator.validateSdkErrorEvent(gameKey,secretKey,type)){var payloadJSONString,url=this.baseUrl+"/"+gameKey+"/"+this.eventsUrlPath,json=GAState.getSdkErrorEventAnnotations(),typeString=GAHTTPApi.sdkErrorTypeToString(type);json.type=typeString;var eventArray=[];eventArray.push(json),(payloadJSONString=JSON.stringify(eventArray))?SdkErrorTask.execute(url,type,payloadJSONString,secretKey):GALogger.w("sendSdkErrorEvent: JSON encoding failed.")}}},GAHTTPApi.sendEventInArrayRequestCallback=function(request,url,callback,extra){void 0===extra&&(extra=null);extra[0],extra[1];var body,responseCode,requestId=extra[2],eventCount=parseInt(extra[3]);body=request.responseText,responseCode=request.status;var requestResponseEnum=GAHTTPApi.instance.processRequestResponse(responseCode,request.statusText,body,"Events");if(requestResponseEnum==http.EGAHTTPApiResponse.Ok||requestResponseEnum==http.EGAHTTPApiResponse.BadRequest){var requestJsonDict=body?JSON.parse(body):{};null!=requestJsonDict?(http.EGAHTTPApiResponse.BadRequest,callback(requestResponseEnum,requestJsonDict,requestId,eventCount)):callback(http.EGAHTTPApiResponse.JsonDecodeFailed,null,requestId,eventCount)}else callback(requestResponseEnum,null,requestId,eventCount)},GAHTTPApi.sendRequest=function(url,payloadData,extraArgs,gzip,callback,callback2){var request=new XMLHttpRequest,key=GAState.getGameSecret(),authorization=GAUtilities.getHmac(key,payloadData),args=[];for(var s in args.push(authorization),extraArgs)args.push(extraArgs[s]);if(request.onreadystatechange=function(){4===request.readyState&&callback(request,url,callback2,args)},request.open("POST",url,!0),request.setRequestHeader("Content-Type","text/plain"),request.setRequestHeader("Authorization",authorization),gzip)throw new Error("gzip not supported");try{request.send(payloadData)}catch(e){console.error(e.stack)}},GAHTTPApi.initRequestCallback=function(request,url,callback,extra){void 0===extra&&(extra=null);var body,responseCode;extra[0],extra[1];body=request.responseText,responseCode=request.status;var requestJsonDict=body?JSON.parse(body):{},requestResponseEnum=GAHTTPApi.instance.processRequestResponse(responseCode,request.statusText,body,"Init");if(requestResponseEnum==http.EGAHTTPApiResponse.Ok||requestResponseEnum==http.EGAHTTPApiResponse.BadRequest)if(null!=requestJsonDict)if(requestResponseEnum!==http.EGAHTTPApiResponse.BadRequest){var validatedInitValues=GAValidator.validateAndCleanInitRequestResponse(requestJsonDict);validatedInitValues?callback(http.EGAHTTPApiResponse.Ok,validatedInitValues,"",0):callback(http.EGAHTTPApiResponse.BadResponse,null,"",0)}else callback(requestResponseEnum,null,"",0);else callback(http.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else callback(requestResponseEnum,null,"",0)},GAHTTPApi.prototype.createPayloadData=function(payload,gzip){if(gzip)throw new Error("gzip not supported");return payload},GAHTTPApi.prototype.processRequestResponse=function(responseCode,responseMessage,body,requestId){return body?200===responseCode?http.EGAHTTPApiResponse.Ok:0===responseCode||401===responseCode?http.EGAHTTPApiResponse.Unauthorized:400===responseCode?http.EGAHTTPApiResponse.BadRequest:500===responseCode?http.EGAHTTPApiResponse.InternalServerError:http.EGAHTTPApiResponse.UnknownResponseCode:http.EGAHTTPApiResponse.NoResponse},GAHTTPApi.sdkErrorTypeToString=function(value){switch(value){case http.EGASdkErrorType.Rejected:return"rejected";default:return""}},GAHTTPApi.instance=new GAHTTPApi,GAHTTPApi}();http.GAHTTPApi=GAHTTPApi}(gameanalytics.http||(gameanalytics.http={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){var events_1,GAStore,EGAStore,EGAStoreArgsOperator,GAState,GALogger,GAUtilities,EGAHTTPApiResponse,GAHTTPApi,GAValidator,EGASdkErrorType,GAEvents;events_1=gameanalytics.events||(gameanalytics.events={}),GAStore=gameanalytics.store.GAStore,EGAStore=gameanalytics.store.EGAStore,EGAStoreArgsOperator=gameanalytics.store.EGAStoreArgsOperator,GAState=gameanalytics.state.GAState,GALogger=gameanalytics.logging.GALogger,GAUtilities=gameanalytics.utilities.GAUtilities,EGAHTTPApiResponse=gameanalytics.http.EGAHTTPApiResponse,GAHTTPApi=gameanalytics.http.GAHTTPApi,GAValidator=gameanalytics.validators.GAValidator,EGASdkErrorType=gameanalytics.http.EGASdkErrorType,GAEvents=function(){function GAEvents(){}return GAEvents.addSessionStartEvent=function(){if(GAState.isEventSubmissionEnabled()){var eventDict={};eventDict.category=GAEvents.CategorySessionStart,GAState.incrementSessionNum(),GAStore.setItem(GAState.SessionNumKey,GAState.getSessionNum().toString()),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addEventToStore(eventDict),GALogger.i("Add SESSION START event"),GAEvents.processEvents(GAEvents.CategorySessionStart,!1)}},GAEvents.addSessionEndEvent=function(){if(GAState.isEventSubmissionEnabled()){var session_start_ts=GAState.getSessionStart(),sessionLength=GAState.getClientTsAdjusted()-session_start_ts;sessionLength<0&&(GALogger.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),sessionLength=0);var eventDict={};eventDict.category=GAEvents.CategorySessionEnd,eventDict.length=sessionLength,GAEvents.addDimensionsToEvent(eventDict),GAEvents.addEventToStore(eventDict),GALogger.i("Add SESSION END event."),GAEvents.processEvents("",!1)}},GAEvents.addBusinessEvent=function(currency,amount,itemType,itemId,cartType,fields){if(void 0===cartType&&(cartType=null),GAState.isEventSubmissionEnabled())if(GAValidator.validateBusinessEvent(currency,amount,cartType,itemType,itemId)){var eventDict={};GAState.incrementTransactionNum(),GAStore.setItem(GAState.TransactionNumKey,GAState.getTransactionNum().toString()),eventDict.event_id=itemType+":"+itemId,eventDict.category=GAEvents.CategoryBusiness,eventDict.currency=currency,eventDict.amount=amount,eventDict[GAState.TransactionNumKey]=GAState.getTransactionNum(),cartType&&(eventDict.cart_type=cartType),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add BUSINESS event: {currency:"+currency+", amount:"+amount+", itemType:"+itemType+", itemId:"+itemId+", cartType:"+cartType+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addResourceEvent=function(flowType,currency,amount,itemType,itemId,fields){if(GAState.isEventSubmissionEnabled())if(GAValidator.validateResourceEvent(flowType,currency,amount,itemType,itemId,GAState.getAvailableResourceCurrencies(),GAState.getAvailableResourceItemTypes())){flowType===gameanalytics.EGAResourceFlowType.Sink&&(amount*=-1);var eventDict={},flowTypeString=GAEvents.resourceFlowTypeToString(flowType);eventDict.event_id=flowTypeString+":"+currency+":"+itemType+":"+itemId,eventDict.category=GAEvents.CategoryResource,eventDict.amount=amount,GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add RESOURCE event: {currency:"+currency+", amount:"+amount+", itemType:"+itemType+", itemId:"+itemId+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score,sendScore,fields){if(GAState.isEventSubmissionEnabled()){var progressionStatusString=GAEvents.progressionStatusToString(progressionStatus);if(GAValidator.validateProgressionEvent(progressionStatus,progression01,progression02,progression03)){var progressionIdentifier,eventDict={};progressionIdentifier=progression02?progression03?progression01+":"+progression02+":"+progression03:progression01+":"+progression02:progression01,eventDict.category=GAEvents.CategoryProgression,eventDict.event_id=progressionStatusString+":"+progressionIdentifier;var attempt_num=0;sendScore&&progressionStatus!=gameanalytics.EGAProgressionStatus.Start&&(eventDict.score=score),progressionStatus===gameanalytics.EGAProgressionStatus.Fail&&GAState.incrementProgressionTries(progressionIdentifier),progressionStatus===gameanalytics.EGAProgressionStatus.Complete&&(GAState.incrementProgressionTries(progressionIdentifier),attempt_num=GAState.getProgressionTries(progressionIdentifier),eventDict.attempt_num=attempt_num,GAState.clearProgressionTries(progressionIdentifier)),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add PROGRESSION event: {status:"+progressionStatusString+", progression01:"+progression01+", progression02:"+progression02+", progression03:"+progression03+", score:"+score+", attempt:"+attempt_num+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)}},GAEvents.addDesignEvent=function(eventId,value,sendValue,fields){if(GAState.isEventSubmissionEnabled())if(GAValidator.validateDesignEvent(eventId,value)){var eventData={};eventData.category=GAEvents.CategoryDesign,eventData.event_id=eventId,sendValue&&(eventData.value=value),GAEvents.addDimensionsToEvent(eventData),GAEvents.addFieldsToEvent(eventData,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add DESIGN event: {eventId:"+eventId+", value:"+value+"}"),GAEvents.addEventToStore(eventData)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addErrorEvent=function(severity,message,fields){if(GAState.isEventSubmissionEnabled()){var severityString=GAEvents.errorSeverityToString(severity);if(GAValidator.validateErrorEvent(severity,message)){var eventData={};eventData.category=GAEvents.CategoryError,eventData.severity=severityString,eventData.message=message,GAEvents.addDimensionsToEvent(eventData),GAEvents.addFieldsToEvent(eventData,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add ERROR event: {severity:"+severityString+", message:"+message+"}"),GAEvents.addEventToStore(eventData)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)}},GAEvents.processEvents=function(category,performCleanUp){if(GAState.isEventSubmissionEnabled())try{var requestIdentifier=GAUtilities.createGuid();performCleanUp&&(GAEvents.cleanupEvents(),GAEvents.fixMissingSessionEndEvents());var selectArgs=[];selectArgs.push(["status",EGAStoreArgsOperator.Equal,"new"]);var updateWhereArgs=[];updateWhereArgs.push(["status",EGAStoreArgsOperator.Equal,"new"]),category&&(selectArgs.push(["category",EGAStoreArgsOperator.Equal,category]),updateWhereArgs.push(["category",EGAStoreArgsOperator.Equal,category]));var updateSetArgs=[];updateSetArgs.push(["status",requestIdentifier]);var events=GAStore.select(EGAStore.Events,selectArgs);if(!events||0==events.length)return GALogger.i("Event queue: No events to send"),void GAEvents.updateSessionStore();if(events.length>GAEvents.MaxEventCount){if(!(events=GAStore.select(EGAStore.Events,selectArgs,!0,GAEvents.MaxEventCount)))return;var lastTimestamp=events[events.length-1].client_ts;if(selectArgs.push(["client_ts",EGAStoreArgsOperator.LessOrEqual,lastTimestamp]),!(events=GAStore.select(EGAStore.Events,selectArgs)))return;updateWhereArgs.push(["client_ts",EGAStoreArgsOperator.LessOrEqual,lastTimestamp])}if(GALogger.i("Event queue: Sending "+events.length+" events."),!GAStore.update(EGAStore.Events,updateSetArgs,updateWhereArgs))return;for(var payloadArray=[],i=0;i<events.length;++i){var ev=events[i],eventDict=JSON.parse(GAUtilities.decode64(ev.event));0!=eventDict.length&&payloadArray.push(eventDict)}GAHTTPApi.instance.sendEventsInArray(payloadArray,requestIdentifier,GAEvents.processEventsCallback)}catch(e){GALogger.e("Error during ProcessEvents(): "+e.stack)}},GAEvents.processEventsCallback=function(responseEnum,dataDict,requestId,eventCount){var requestIdWhereArgs=[];if(requestIdWhereArgs.push(["status",EGAStoreArgsOperator.Equal,requestId]),responseEnum===EGAHTTPApiResponse.Ok)GAStore.delete(EGAStore.Events,requestIdWhereArgs),GALogger.i("Event queue: "+eventCount+" events sent.");else if(responseEnum===EGAHTTPApiResponse.NoResponse){var setArgs=[];setArgs.push(["status","new"]),GALogger.w("Event queue: Failed to send events to collector - Retrying next time"),GAStore.update(EGAStore.Events,setArgs,requestIdWhereArgs)}else{if(dataDict){var json,count=0;for(var j in dataDict)0==count&&(json=dataDict[j]),++count;responseEnum===EGAHTTPApiResponse.BadRequest&&json.constructor===Array?GALogger.w("Event queue: "+eventCount+" events sent. "+count+" events failed GA server validation."):GALogger.w("Event queue: Failed to send events.")}else GALogger.w("Event queue: Failed to send events.");GAStore.delete(EGAStore.Events,requestIdWhereArgs)}},GAEvents.cleanupEvents=function(){GAStore.update(EGAStore.Events,[["status","new"]])},GAEvents.fixMissingSessionEndEvents=function(){if(GAState.isEventSubmissionEnabled()){var args=[];args.push(["session_id",EGAStoreArgsOperator.NotEqual,GAState.getSessionId()]);var sessions=GAStore.select(EGAStore.Sessions,args);if(sessions&&0!=sessions.length){GALogger.i(sessions.length+" session(s) located with missing session_end event.");for(var i=0;i<sessions.length;++i){var sessionEndEvent=JSON.parse(GAUtilities.decode64(sessions[i].event)),length=sessionEndEvent.client_ts-sessions[i].timestamp;length=Math.max(0,length),sessionEndEvent.category=GAEvents.CategorySessionEnd,sessionEndEvent.length=length,GAEvents.addEventToStore(sessionEndEvent)}}}},GAEvents.addEventToStore=function(eventData){if(GAState.isEventSubmissionEnabled())if(GAState.isInitialized())try{if(GAStore.isStoreTooLargeForEvents()&&!GAUtilities.stringMatch(eventData.category,/^(user|session_end|business)$/))return void GALogger.w("Database too large. Event has been blocked.");var ev=GAState.getEventAnnotations(),jsonDefaults=GAUtilities.encode64(JSON.stringify(ev));for(var e in eventData)ev[e]=eventData[e];var json=JSON.stringify(ev);GALogger.ii("Event added to queue: "+json);var values={status:"new"};values.category=ev.category,values.session_id=ev.session_id,values.client_ts=ev.client_ts,values.event=GAUtilities.encode64(JSON.stringify(ev)),GAStore.insert(EGAStore.Events,values),eventData.category==GAEvents.CategorySessionEnd?GAStore.delete(EGAStore.Sessions,[["session_id",EGAStoreArgsOperator.Equal,ev.session_id]]):((values={}).session_id=ev.session_id,values.timestamp=GAState.getSessionStart(),values.event=jsonDefaults,GAStore.insert(EGAStore.Sessions,values,!0,"session_id")),GAStore.isStorageAvailable()&&GAStore.save()}catch(e){GALogger.e("addEventToStore: error"),GALogger.e(e.stack)}else GALogger.w("Could not add event: SDK is not initialized")},GAEvents.updateSessionStore=function(){if(GAState.sessionIsStarted()){var values={};values.session_id=GAState.instance.sessionId,values.timestamp=GAState.getSessionStart(),values.event=GAUtilities.encode64(JSON.stringify(GAState.getEventAnnotations())),GAStore.insert(EGAStore.Sessions,values,!0,"session_id"),GAStore.isStorageAvailable()&&GAStore.save()}},GAEvents.addDimensionsToEvent=function(eventData){eventData&&(GAState.getCurrentCustomDimension01()&&(eventData.custom_01=GAState.getCurrentCustomDimension01()),GAState.getCurrentCustomDimension02()&&(eventData.custom_02=GAState.getCurrentCustomDimension02()),GAState.getCurrentCustomDimension03()&&(eventData.custom_03=GAState.getCurrentCustomDimension03()))},GAEvents.addFieldsToEvent=function(eventData,fields){eventData&&fields&&0<Object.keys(fields).length&&(eventData.custom_fields=fields)},GAEvents.resourceFlowTypeToString=function(value){return value==gameanalytics.EGAResourceFlowType.Source||value==gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Source]?"Source":value==gameanalytics.EGAResourceFlowType.Sink||value==gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Sink]?"Sink":""},GAEvents.progressionStatusToString=function(value){return value==gameanalytics.EGAProgressionStatus.Start||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Start]?"Start":value==gameanalytics.EGAProgressionStatus.Complete||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Complete]?"Complete":value==gameanalytics.EGAProgressionStatus.Fail||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Fail]?"Fail":""},GAEvents.errorSeverityToString=function(value){return value==gameanalytics.EGAErrorSeverity.Debug||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Debug]?"debug":value==gameanalytics.EGAErrorSeverity.Info||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Info]?"info":value==gameanalytics.EGAErrorSeverity.Warning||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Warning]?"warning":value==gameanalytics.EGAErrorSeverity.Error||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Error]?"error":value==gameanalytics.EGAErrorSeverity.Critical||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Critical]?"critical":""},GAEvents.instance=new GAEvents,GAEvents.CategorySessionStart="user",GAEvents.CategorySessionEnd="session_end",GAEvents.CategoryDesign="design",GAEvents.CategoryBusiness="business",GAEvents.CategoryProgression="progression",GAEvents.CategoryResource="resource",GAEvents.CategoryError="error",GAEvents.MaxEventCount=500,GAEvents}(),events_1.GAEvents=GAEvents}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var GALogger=gameanalytics.logging.GALogger,GAState=gameanalytics.state.GAState,GAEvents=gameanalytics.events.GAEvents,GAThreading=function(){function GAThreading(){this.blocks=new threading.PriorityQueue({compare:function(x,y){return x-y}}),this.id2TimedBlockMap={},GAThreading.startThread()}return GAThreading.createTimedBlock=function(delayInSeconds){void 0===delayInSeconds&&(delayInSeconds=0);var time=new Date;return time.setSeconds(time.getSeconds()+delayInSeconds),new threading.TimedBlock(time)},GAThreading.performTaskOnGAThread=function(taskBlock,delayInSeconds){void 0===delayInSeconds&&(delayInSeconds=0);var time=new Date;time.setSeconds(time.getSeconds()+delayInSeconds);var timedBlock=new threading.TimedBlock(time);timedBlock.block=taskBlock,GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock)},GAThreading.performTimedBlockOnGAThread=function(timedBlock){GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock)},GAThreading.scheduleTimer=function(interval,callback){var time=new Date;time.setSeconds(time.getSeconds()+interval);var timedBlock=new threading.TimedBlock(time);return timedBlock.block=callback,GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock),timedBlock.id},GAThreading.getTimedBlockById=function(blockIdentifier){return blockIdentifier in GAThreading.instance.id2TimedBlockMap?GAThreading.instance.id2TimedBlockMap[blockIdentifier]:null},GAThreading.ensureEventQueueIsRunning=function(){GAThreading.instance.keepRunning=!0,GAThreading.instance.isRunning||(GAThreading.instance.isRunning=!0,GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds,GAThreading.processEventQueue))},GAThreading.endSessionAndStopQueue=function(){GAState.isInitialized()&&(GALogger.i("Ending session."),GAThreading.stopEventQueue(),GAState.isEnabled()&&GAState.sessionIsStarted()&&(GAEvents.addSessionEndEvent(),GAState.instance.sessionStart=0))},GAThreading.stopEventQueue=function(){GAThreading.instance.keepRunning=!1},GAThreading.ignoreTimer=function(blockIdentifier){blockIdentifier in GAThreading.instance.id2TimedBlockMap&&(GAThreading.instance.id2TimedBlockMap[blockIdentifier].ignore=!0)},GAThreading.setEventProcessInterval=function(interval){0<interval&&(GAThreading.ProcessEventsIntervalInSeconds=interval)},GAThreading.prototype.addTimedBlock=function(timedBlock){this.blocks.enqueue(timedBlock.deadline.getTime(),timedBlock)},GAThreading.run=function(){clearTimeout(GAThreading.runTimeoutId);try{for(var timedBlock;timedBlock=GAThreading.getNextBlock();)if(!timedBlock.ignore)if(timedBlock.async){if(!timedBlock.running){timedBlock.running=!0,timedBlock.block();break}}else timedBlock.block();return void(GAThreading.runTimeoutId=setTimeout(GAThreading.run,GAThreading.ThreadWaitTimeInMs))}catch(e){GALogger.e("Error on GA thread"),GALogger.e(e.stack)}},GAThreading.startThread=function(){GAThreading.runTimeoutId=setTimeout(GAThreading.run,0)},GAThreading.getNextBlock=function(){var now=new Date;return GAThreading.instance.blocks.hasItems()&&GAThreading.instance.blocks.peek().deadline.getTime()<=now.getTime()?GAThreading.instance.blocks.peek().async&&GAThreading.instance.blocks.peek().running?GAThreading.instance.blocks.peek():GAThreading.instance.blocks.dequeue():null},GAThreading.processEventQueue=function(){GAEvents.processEvents("",!0),GAThreading.instance.keepRunning?GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds,GAThreading.processEventQueue):GAThreading.instance.isRunning=!1},GAThreading.instance=new GAThreading,GAThreading.ThreadWaitTimeInMs=1e3,GAThreading.ProcessEventsIntervalInSeconds=8,GAThreading}();threading.GAThreading=GAThreading}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){var GAThreading=gameanalytics.threading.GAThreading,GALogger=gameanalytics.logging.GALogger,GAStore=gameanalytics.store.GAStore,GAState=gameanalytics.state.GAState,GAHTTPApi=gameanalytics.http.GAHTTPApi,GADevice=gameanalytics.device.GADevice,GAValidator=gameanalytics.validators.GAValidator,EGAHTTPApiResponse=gameanalytics.http.EGAHTTPApiResponse,GAUtilities=gameanalytics.utilities.GAUtilities,GAEvents=gameanalytics.events.GAEvents,GameAnalytics=function(){function GameAnalytics(){}return GameAnalytics.init=function(){if(GADevice.touch(),GameAnalytics.methodMap.configureAvailableCustomDimensions01=GameAnalytics.configureAvailableCustomDimensions01,GameAnalytics.methodMap.configureAvailableCustomDimensions02=GameAnalytics.configureAvailableCustomDimensions02,GameAnalytics.methodMap.configureAvailableCustomDimensions03=GameAnalytics.configureAvailableCustomDimensions03,GameAnalytics.methodMap.configureAvailableResourceCurrencies=GameAnalytics.configureAvailableResourceCurrencies,GameAnalytics.methodMap.configureAvailableResourceItemTypes=GameAnalytics.configureAvailableResourceItemTypes,GameAnalytics.methodMap.configureBuild=GameAnalytics.configureBuild,GameAnalytics.methodMap.configureSdkGameEngineVersion=GameAnalytics.configureSdkGameEngineVersion,GameAnalytics.methodMap.configureGameEngineVersion=GameAnalytics.configureGameEngineVersion,GameAnalytics.methodMap.configureUserId=GameAnalytics.configureUserId,GameAnalytics.methodMap.initialize=GameAnalytics.initialize,GameAnalytics.methodMap.addBusinessEvent=GameAnalytics.addBusinessEvent,GameAnalytics.methodMap.addResourceEvent=GameAnalytics.addResourceEvent,GameAnalytics.methodMap.addProgressionEvent=GameAnalytics.addProgressionEvent,GameAnalytics.methodMap.addDesignEvent=GameAnalytics.addDesignEvent,GameAnalytics.methodMap.addErrorEvent=GameAnalytics.addErrorEvent,GameAnalytics.methodMap.addErrorEvent=GameAnalytics.addErrorEvent,GameAnalytics.methodMap.setEnabledInfoLog=GameAnalytics.setEnabledInfoLog,GameAnalytics.methodMap.setEnabledVerboseLog=GameAnalytics.setEnabledVerboseLog,GameAnalytics.methodMap.setEnabledManualSessionHandling=GameAnalytics.setEnabledManualSessionHandling,GameAnalytics.methodMap.setEnabledEventSubmission=GameAnalytics.setEnabledEventSubmission,GameAnalytics.methodMap.setCustomDimension01=GameAnalytics.setCustomDimension01,GameAnalytics.methodMap.setCustomDimension02=GameAnalytics.setCustomDimension02,GameAnalytics.methodMap.setCustomDimension03=GameAnalytics.setCustomDimension03,GameAnalytics.methodMap.setFacebookId=GameAnalytics.setFacebookId,GameAnalytics.methodMap.setGender=GameAnalytics.setGender,GameAnalytics.methodMap.setBirthYear=GameAnalytics.setBirthYear,GameAnalytics.methodMap.setEventProcessInterval=GameAnalytics.setEventProcessInterval,GameAnalytics.methodMap.startSession=GameAnalytics.startSession,GameAnalytics.methodMap.endSession=GameAnalytics.endSession,GameAnalytics.methodMap.onStop=GameAnalytics.onStop,GameAnalytics.methodMap.onResume=GameAnalytics.onResume,GameAnalytics.methodMap.addCommandCenterListener=GameAnalytics.addCommandCenterListener,GameAnalytics.methodMap.removeCommandCenterListener=GameAnalytics.removeCommandCenterListener,GameAnalytics.methodMap.getCommandCenterValueAsString=GameAnalytics.getCommandCenterValueAsString,GameAnalytics.methodMap.isCommandCenterReady=GameAnalytics.isCommandCenterReady,GameAnalytics.methodMap.getConfigurationsContentAsString=GameAnalytics.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var q=window.GameAnalytics.q;for(var i in q)GameAnalytics.gaCommand.apply(null,q[i])}},GameAnalytics.gaCommand=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];0<args.length&&args[0]in gameanalytics.GameAnalytics.methodMap&&(1<args.length?gameanalytics.GameAnalytics.methodMap[args[0]].apply(null,Array.prototype.slice.call(args,1)):gameanalytics.GameAnalytics.methodMap[args[0]]())},GameAnalytics.configureAvailableCustomDimensions01=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions01(customDimensions)})},GameAnalytics.configureAvailableCustomDimensions02=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions02(customDimensions)})},GameAnalytics.configureAvailableCustomDimensions03=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions03(customDimensions)})},GameAnalytics.configureAvailableResourceCurrencies=function(resourceCurrencies){void 0===resourceCurrencies&&(resourceCurrencies=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available resource currencies must be set before SDK is initialized"):GAState.setAvailableResourceCurrencies(resourceCurrencies)})},GameAnalytics.configureAvailableResourceItemTypes=function(resourceItemTypes){void 0===resourceItemTypes&&(resourceItemTypes=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available resource item types must be set before SDK is initialized"):GAState.setAvailableResourceItemTypes(resourceItemTypes)})},GameAnalytics.configureBuild=function(build){void 0===build&&(build=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Build version must be set before SDK is initialized."):GAValidator.validateBuild(build)?GAState.setBuild(build):GALogger.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+build)})},GameAnalytics.configureSdkGameEngineVersion=function(sdkGameEngineVersion){void 0===sdkGameEngineVersion&&(sdkGameEngineVersion=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)||(GAValidator.validateSdkWrapperVersion(sdkGameEngineVersion)?GADevice.sdkGameEngineVersion=sdkGameEngineVersion:GALogger.i("Validation fail - configure sdk version: Sdk version not supported. String: "+sdkGameEngineVersion))})},GameAnalytics.configureGameEngineVersion=function(gameEngineVersion){void 0===gameEngineVersion&&(gameEngineVersion=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)||(GAValidator.validateEngineVersion(gameEngineVersion)?GADevice.gameEngineVersion=gameEngineVersion:GALogger.i("Validation fail - configure game engine version: Game engine version not supported. String: "+gameEngineVersion))})},GameAnalytics.configureUserId=function(uId){void 0===uId&&(uId=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("A custom user id must be set before SDK is initialized."):GAValidator.validateUserId(uId)?GAState.setUserId(uId):GALogger.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+uId)})},GameAnalytics.initialize=function(gameKey,gameSecret){void 0===gameKey&&(gameKey=""),void 0===gameSecret&&(gameSecret=""),GADevice.updateConnectionType();var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("SDK already initialized. Can only be called once."):GAValidator.validateKeys(gameKey,gameSecret)?(GAState.setKeys(gameKey,gameSecret),GameAnalytics.internalInitialize()):GALogger.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+gameKey+", secretKey: "+gameSecret)},GAThreading.performTimedBlockOnGAThread(timedBlock)},GameAnalytics.addBusinessEvent=function(currency,amount,itemType,itemId,cartType){void 0===currency&&(currency=""),void 0===amount&&(amount=0),void 0===itemType&&(itemType=""),void 0===itemId&&(itemId=""),void 0===cartType&&(cartType=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add business event")&&GAEvents.addBusinessEvent(currency,amount,itemType,itemId,cartType,{})})},GameAnalytics.addResourceEvent=function(flowType,currency,amount,itemType,itemId){void 0===flowType&&(flowType=gameanalytics.EGAResourceFlowType.Undefined),void 0===currency&&(currency=""),void 0===amount&&(amount=0),void 0===itemType&&(itemType=""),void 0===itemId&&(itemId=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add resource event")&&GAEvents.addResourceEvent(flowType,currency,amount,itemType,itemId,{})})},GameAnalytics.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score){void 0===progressionStatus&&(progressionStatus=gameanalytics.EGAProgressionStatus.Undefined),void 0===progression01&&(progression01=""),void 0===progression02&&(progression02=""),void 0===progression03&&(progression03=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){if(GameAnalytics.isSdkReady(!0,!0,"Could not add progression event")){var sendScore="number"==typeof score;GAEvents.addProgressionEvent(progressionStatus,progression01,progression02,progression03,sendScore?score:0,sendScore,{})}})},GameAnalytics.addDesignEvent=function(eventId,value){GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){if(GameAnalytics.isSdkReady(!0,!0,"Could not add design event")){var sendValue="number"==typeof value;GAEvents.addDesignEvent(eventId,sendValue?value:0,sendValue,{})}})},GameAnalytics.addErrorEvent=function(severity,message){void 0===severity&&(severity=gameanalytics.EGAErrorSeverity.Undefined),void 0===message&&(message=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add error event")&&GAEvents.addErrorEvent(severity,message,{})})},GameAnalytics.setEnabledInfoLog=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GALogger.setInfoLog(flag),GALogger.i("Info logging enabled")):(GALogger.i("Info logging disabled"),GALogger.setInfoLog(flag))})},GameAnalytics.setEnabledVerboseLog=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GALogger.setVerboseLog(flag),GALogger.i("Verbose logging enabled")):(GALogger.i("Verbose logging disabled"),GALogger.setVerboseLog(flag))})},GameAnalytics.setEnabledManualSessionHandling=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){GAState.setManualSessionHandling(flag)})},GameAnalytics.setEnabledEventSubmission=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GAState.setEnabledEventSubmission(flag),GALogger.i("Event submission enabled")):(GALogger.i("Event submission disabled"),GAState.setEnabledEventSubmission(flag))})},GameAnalytics.setCustomDimension01=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension01(dimension,GAState.getAvailableCustomDimensions01())?GAState.setCustomDimension01(dimension):GALogger.w("Could not set custom01 dimension value to '"+dimension+"'. Value not found in available custom01 dimension values")})},GameAnalytics.setCustomDimension02=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension02(dimension,GAState.getAvailableCustomDimensions02())?GAState.setCustomDimension02(dimension):GALogger.w("Could not set custom02 dimension value to '"+dimension+"'. Value not found in available custom02 dimension values")})},GameAnalytics.setCustomDimension03=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension03(dimension,GAState.getAvailableCustomDimensions03())?GAState.setCustomDimension03(dimension):GALogger.w("Could not set custom03 dimension value to '"+dimension+"'. Value not found in available custom03 dimension values")})},GameAnalytics.setFacebookId=function(facebookId){void 0===facebookId&&(facebookId=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateFacebookId(facebookId)&&GAState.setFacebookId(facebookId)})},GameAnalytics.setGender=function(gender){void 0===gender&&(gender=gameanalytics.EGAGender.Undefined),GAThreading.performTaskOnGAThread(function(){GAValidator.validateGender(gender)&&GAState.setGender(gender)})},GameAnalytics.setBirthYear=function(birthYear){void 0===birthYear&&(birthYear=0),GAThreading.performTaskOnGAThread(function(){GAValidator.validateBirthyear(birthYear)&&GAState.setBirthYear(birthYear)})},GameAnalytics.setEventProcessInterval=function(intervalInSeconds){GAThreading.performTaskOnGAThread(function(){GAThreading.setEventProcessInterval(intervalInSeconds)})},GameAnalytics.startSession=function(){if(GAState.isInitialized()){var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GAState.isEnabled()&&GAState.sessionIsStarted()&&GAThreading.endSessionAndStopQueue(),GameAnalytics.resumeSessionAndStartQueue()},GAThreading.performTimedBlockOnGAThread(timedBlock)}},GameAnalytics.endSession=function(){GameAnalytics.onStop()},GameAnalytics.onStop=function(){GAThreading.performTaskOnGAThread(function(){try{GAThreading.endSessionAndStopQueue()}catch(Exception){}})},GameAnalytics.onResume=function(){var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GameAnalytics.resumeSessionAndStartQueue()},GAThreading.performTimedBlockOnGAThread(timedBlock)},GameAnalytics.getCommandCenterValueAsString=function(key,defaultValue){return void 0===defaultValue&&(defaultValue=null),GAState.getConfigurationStringValue(key,defaultValue)},GameAnalytics.isCommandCenterReady=function(){return GAState.isCommandCenterReady()},GameAnalytics.addCommandCenterListener=function(listener){GAState.addCommandCenterListener(listener)},GameAnalytics.removeCommandCenterListener=function(listener){GAState.removeCommandCenterListener(listener)},GameAnalytics.getConfigurationsContentAsString=function(){return GAState.getConfigurationsContentAsString()},GameAnalytics.internalInitialize=function(){GAState.ensurePersistedStates(),GAStore.setItem(GAState.DefaultUserIdKey,GAState.getDefaultId()),GAState.setInitialized(!0),GameAnalytics.newSession(),GAState.isEnabled()&&GAThreading.ensureEventQueueIsRunning()},GameAnalytics.newSession=function(){GALogger.i("Starting a new session."),GAState.validateAndFixCurrentDimensions(),GAHTTPApi.instance.requestInit(GameAnalytics.startNewSessionCallback)},GameAnalytics.startNewSessionCallback=function(initResponse,initResponseDict){if(initResponse===EGAHTTPApiResponse.Ok&&initResponseDict){var timeOffsetSeconds=0;if(initResponseDict.server_ts){var serverTs=initResponseDict.server_ts;timeOffsetSeconds=GAState.calculateServerTimeOffset(serverTs)}initResponseDict.time_offset=timeOffsetSeconds,GAStore.setItem(GAState.SdkConfigCachedKey,GAUtilities.encode64(JSON.stringify(initResponseDict))),GAState.instance.sdkConfigCached=initResponseDict,GAState.instance.sdkConfig=initResponseDict,GAState.instance.initAuthorized=!0}else initResponse==EGAHTTPApiResponse.Unauthorized?(GALogger.w("Initialize SDK failed - Unauthorized"),GAState.instance.initAuthorized=!1):(initResponse===EGAHTTPApiResponse.NoResponse||initResponse===EGAHTTPApiResponse.RequestTimeout?GALogger.i("Init call (session start) failed - no response. Could be offline or timeout."):initResponse===EGAHTTPApiResponse.BadResponse||initResponse===EGAHTTPApiResponse.JsonEncodeFailed||initResponse===EGAHTTPApiResponse.JsonDecodeFailed?GALogger.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):initResponse!==EGAHTTPApiResponse.BadRequest&&initResponse!==EGAHTTPApiResponse.UnknownResponseCode||GALogger.i("Init call (session start) failed - bad request or unknown response."),null==GAState.instance.sdkConfig?null!=GAState.instance.sdkConfigCached?(GALogger.i("Init call (session start) failed - using cached init values."),GAState.instance.sdkConfig=GAState.instance.sdkConfigCached):(GALogger.i("Init call (session start) failed - using default init values."),GAState.instance.sdkConfig=GAState.instance.sdkConfigDefault):GALogger.i("Init call (session start) failed - using cached init values."),GAState.instance.initAuthorized=!0);if(GAState.instance.clientServerTimeOffset=GAState.getSdkConfig().time_offset?GAState.getSdkConfig().time_offset:0,GAState.populateConfigurations(GAState.getSdkConfig()),!GAState.isEnabled())return GALogger.w("Could not start session: SDK is disabled."),void GAThreading.stopEventQueue();GAThreading.ensureEventQueueIsRunning();var newSessionId=GAUtilities.createGuid();GAState.instance.sessionId=newSessionId,GAState.instance.sessionStart=GAState.getClientTsAdjusted(),GAEvents.addSessionStartEvent();var timedBlock=GAThreading.getTimedBlockById(GameAnalytics.initTimedBlockId);null!=timedBlock&&(timedBlock.running=!1),GameAnalytics.initTimedBlockId=-1},GameAnalytics.resumeSessionAndStartQueue=function(){GAState.isInitialized()&&(GALogger.i("Resuming session."),GAState.sessionIsStarted()||GameAnalytics.newSession())},GameAnalytics.isSdkReady=function(needsInitialized,warn,message){return void 0===warn&&(warn=!0),void 0===message&&(message=""),message&&(message+=": "),needsInitialized&&!GAState.isInitialized()?(warn&&GALogger.w(message+"SDK is not initialized"),!1):needsInitialized&&!GAState.isEnabled()?(warn&&GALogger.w(message+"SDK is disabled"),!1):!(needsInitialized&&!GAState.sessionIsStarted())||(warn&&GALogger.w(message+"Session has not started yet"),!1)},GameAnalytics.initTimedBlockId=-1,GameAnalytics.methodMap={},GameAnalytics}();gameanalytics.GameAnalytics=GameAnalytics}(gameanalytics||(gameanalytics={})),gameanalytics.GameAnalytics.init();gameanalytics.GameAnalytics.gaCommand;var GameAnalytics_node=gameanalytics,GameAnalytics$1=function(){function GameAnalytics(){}return GameAnalytics.prototype.setup=function(key,secret,version){Branding$$1.analyticsEnabled&&(GameAnalytics_node.GameAnalytics.initialize(key,secret),GameAnalytics_node.GameAnalytics.configureBuild(version),GameAnalytics_node.GameAnalytics.startSession(),window.addEventListener("beforeunload",function(){GameAnalytics_node.GameAnalytics.endSession()}))},GameAnalytics.prototype.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score){Branding$$1.analyticsEnabled&&GameAnalytics_node.GameAnalytics.addProgressionEvent(progressionStatus,progression01,progression02,progression03,score)},GameAnalytics.prototype.addDesignEvent=function(eventId,value){Branding$$1.analyticsEnabled&&GameAnalytics_node.GameAnalytics.addDesignEvent(eventId,value)},GameAnalytics}();function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var progressbar=createCommonjsModule(function(module,exports){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i=commonjsRequire,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var mockTweenable,root=this||Function("return this")(),Tweenable=function(){var formula,DEFAULT_SCHEDULE_FUNCTION,timeoutHandler_endTime,timeoutHandler_currentTime,timeoutHandler_isEnded,timeoutHandler_offset,_now=Date.now?Date.now:function(){return+new Date},now="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:_now;function noop(){}function each(obj,fn){var key;for(key in obj)Object.hasOwnProperty.call(obj,key)&&fn(key)}function shallowCopy(targetObj,srcObj){return each(srcObj,function(prop){targetObj[prop]=srcObj[prop]}),targetObj}function defaults(target,src){each(src,function(prop){void 0===target[prop]&&(target[prop]=src[prop])})}function tweenProps(forPosition,currentState,originalState,targetState,duration,timestamp,easing){var prop,easingObjectProp,easingFn,normalizedPosition=forPosition<timestamp?0:(forPosition-timestamp)/duration;for(prop in currentState)currentState.hasOwnProperty(prop)&&(easingObjectProp=easing[prop],easingFn="function"==typeof easingObjectProp?easingObjectProp:formula[easingObjectProp],currentState[prop]=tweenProp(originalState[prop],targetState[prop],easingFn,normalizedPosition));return currentState}function tweenProp(start,end,easingFunc,position){return start+(end-start)*easingFunc(position)}function applyFilter(tweenable,filterName){var filters=Tweenable.prototype.filter,args=tweenable._filterArgs;each(filters,function(name){void 0!==filters[name][filterName]&&filters[name][filterName].apply(tweenable,args)})}function timeoutHandler(tweenable,timestamp,delay,duration,currentState,originalState,targetState,easing,step,schedule,opt_currentTimeOverride){timeoutHandler_endTime=timestamp+delay+duration,timeoutHandler_currentTime=Math.min(opt_currentTimeOverride||now(),timeoutHandler_endTime),timeoutHandler_isEnded=timeoutHandler_endTime<=timeoutHandler_currentTime,timeoutHandler_offset=duration-(timeoutHandler_endTime-timeoutHandler_currentTime),tweenable.isPlaying()&&(timeoutHandler_isEnded?(step(targetState,tweenable._attachment,timeoutHandler_offset),tweenable.stop(!0)):(tweenable._scheduleId=schedule(tweenable._timeoutHandler,1e3/60),applyFilter(tweenable,"beforeTween"),timeoutHandler_currentTime<timestamp+delay?tweenProps(1,currentState,originalState,targetState,1,1,easing):tweenProps(timeoutHandler_currentTime,currentState,originalState,targetState,duration,timestamp+delay,easing),applyFilter(tweenable,"afterTween"),step(currentState,tweenable._attachment,timeoutHandler_offset)))}function composeEasingObject(fromTweenParams,easing){var composedEasing={},typeofEasing=typeof easing;return each(fromTweenParams,"string"===typeofEasing||"function"===typeofEasing?function(prop){composedEasing[prop]=easing}:function(prop){composedEasing[prop]||(composedEasing[prop]=easing[prop]||"linear")}),composedEasing}function Tweenable(opt_initialState,opt_config){this._currentState=opt_initialState||{},this._configured=!1,this._scheduleFunction=DEFAULT_SCHEDULE_FUNCTION,void 0!==opt_config&&this.setConfig(opt_config)}return DEFAULT_SCHEDULE_FUNCTION="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,Tweenable.prototype.tween=function(opt_config){return this._isTweening?this:(void 0===opt_config&&this._configured||this.setConfig(opt_config),this._timestamp=now(),this._start(this.get(),this._attachment),this.resume())},Tweenable.prototype.setConfig=function(config){config=config||{},this._configured=!0,this._attachment=config.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=config.delay||0,this._start=config.start||noop,this._step=config.step||noop,this._finish=config.finish||noop,this._duration=config.duration||500,this._currentState=shallowCopy({},config.from||this.get()),this._originalState=this.get(),this._targetState=shallowCopy({},config.to||this.get());var self=this;this._timeoutHandler=function(){timeoutHandler(self,self._timestamp,self._delay,self._duration,self._currentState,self._originalState,self._targetState,self._easing,self._step,self._scheduleFunction)};var currentState=this._currentState,targetState=this._targetState;return defaults(targetState,currentState),this._easing=composeEasingObject(currentState,config.easing||"linear"),this._filterArgs=[currentState,this._originalState,targetState,this._easing],applyFilter(this,"tweenCreated"),this},Tweenable.prototype.get=function(){return shallowCopy({},this._currentState)},Tweenable.prototype.set=function(state){this._currentState=state},Tweenable.prototype.pause=function(){return this._pausedAtTime=now(),this._isPaused=!0,this},Tweenable.prototype.resume=function(){return this._isPaused&&(this._timestamp+=now()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},Tweenable.prototype.seek=function(millisecond){millisecond=Math.max(millisecond,0);var currentTime=now();return this._timestamp+millisecond===0||(this._timestamp=currentTime-millisecond,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,timeoutHandler(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,currentTime),this.pause())),this},Tweenable.prototype.stop=function(gotoEnd){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=noop,(root.cancelAnimationFrame||root.webkitCancelAnimationFrame||root.oCancelAnimationFrame||root.msCancelAnimationFrame||root.mozCancelRequestAnimationFrame||root.clearTimeout)(this._scheduleId),gotoEnd&&(applyFilter(this,"beforeTween"),tweenProps(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),applyFilter(this,"afterTween"),applyFilter(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},Tweenable.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},Tweenable.prototype.setScheduleFunction=function(scheduleFunction){this._scheduleFunction=scheduleFunction},Tweenable.prototype.dispose=function(){var prop;for(prop in this)this.hasOwnProperty(prop)&&delete this[prop]},Tweenable.prototype.filter={},formula=Tweenable.prototype.formula={linear:function(pos){return pos}},shallowCopy(Tweenable,{now:now,each:each,tweenProps:tweenProps,tweenProp:tweenProp,applyFilter:applyFilter,shallowCopy:shallowCopy,defaults:defaults,composeEasingObject:composeEasingObject}),"function"==typeof SHIFTY_DEBUG_NOW&&(root.timeoutHandler=timeoutHandler),"object"==typeof exports?module.exports=Tweenable:void 0===root.Tweenable&&(root.Tweenable=Tweenable),Tweenable}();Tweenable.shallowCopy(Tweenable.prototype.formula,{easeInQuad:function(pos){return Math.pow(pos,2)},easeOutQuad:function(pos){return-(Math.pow(pos-1,2)-1)},easeInOutQuad:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,2):-.5*((pos-=2)*pos-2)},easeInCubic:function(pos){return Math.pow(pos,3)},easeOutCubic:function(pos){return Math.pow(pos-1,3)+1},easeInOutCubic:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)},easeInQuart:function(pos){return Math.pow(pos,4)},easeOutQuart:function(pos){return-(Math.pow(pos-1,4)-1)},easeInOutQuart:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,4):-.5*((pos-=2)*Math.pow(pos,3)-2)},easeInQuint:function(pos){return Math.pow(pos,5)},easeOutQuint:function(pos){return Math.pow(pos-1,5)+1},easeInOutQuint:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,5):.5*(Math.pow(pos-2,5)+2)},easeInSine:function(pos){return 1-Math.cos(pos*(Math.PI/2))},easeOutSine:function(pos){return Math.sin(pos*(Math.PI/2))},easeInOutSine:function(pos){return-.5*(Math.cos(Math.PI*pos)-1)},easeInExpo:function(pos){return 0===pos?0:Math.pow(2,10*(pos-1))},easeOutExpo:function(pos){return 1===pos?1:1-Math.pow(2,-10*pos)},easeInOutExpo:function(pos){return 0===pos?0:1===pos?1:(pos/=.5)<1?.5*Math.pow(2,10*(pos-1)):.5*(2-Math.pow(2,-10*--pos))},easeInCirc:function(pos){return-(Math.sqrt(1-pos*pos)-1)},easeOutCirc:function(pos){return Math.sqrt(1-Math.pow(pos-1,2))},easeInOutCirc:function(pos){return(pos/=.5)<1?-.5*(Math.sqrt(1-pos*pos)-1):.5*(Math.sqrt(1-(pos-=2)*pos)+1)},easeOutBounce:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?7.5625*(pos-=1.5/2.75)*pos+.75:pos<2.5/2.75?7.5625*(pos-=2.25/2.75)*pos+.9375:7.5625*(pos-=2.625/2.75)*pos+.984375},easeInBack:function(pos){var s=1.70158;return pos*pos*((s+1)*pos-s)},easeOutBack:function(pos){var s=1.70158;return(pos-=1)*pos*((s+1)*pos+s)+1},easeInOutBack:function(pos){var s=1.70158;return(pos/=.5)<1?pos*pos*((1+(s*=1.525))*pos-s)*.5:.5*((pos-=2)*pos*((1+(s*=1.525))*pos+s)+2)},elastic:function(pos){return-1*Math.pow(4,-8*pos)*Math.sin((6*pos-1)*(2*Math.PI)/2)+1},swingFromTo:function(pos){var s=1.70158;return(pos/=.5)<1?pos*pos*((1+(s*=1.525))*pos-s)*.5:.5*((pos-=2)*pos*((1+(s*=1.525))*pos+s)+2)},swingFrom:function(pos){var s=1.70158;return pos*pos*((s+1)*pos-s)},swingTo:function(pos){var s=1.70158;return(pos-=1)*pos*((s+1)*pos+s)+1},bounce:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?7.5625*(pos-=1.5/2.75)*pos+.75:pos<2.5/2.75?7.5625*(pos-=2.25/2.75)*pos+.9375:7.5625*(pos-=2.625/2.75)*pos+.984375},bouncePast:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?2-(7.5625*(pos-=1.5/2.75)*pos+.75):pos<2.5/2.75?2-(7.5625*(pos-=2.25/2.75)*pos+.9375):2-(7.5625*(pos-=2.625/2.75)*pos+.984375)},easeFromTo:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,4):-.5*((pos-=2)*Math.pow(pos,3)-2)},easeFrom:function(pos){return Math.pow(pos,4)},easeTo:function(pos){return Math.pow(pos,.25)}}),function(){function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var ax=0,bx=0,cx=0,ay=0,by=0,cy=0;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function fabs(n){return 0<=n?n:0-n}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i,t;for(t2=x,i=0;i<8;i++){if(fabs(x2=sampleCurveX(t2)-x)<epsilon)return t2;if(fabs(d2=(3*ax*(t=t2)+2*bx)*t+cx)<1e-6)break;t2-=x2/d2}if(t1=1,(t2=x)<(t0=0))return t0;if(t1<t2)return t1;for(;t0<t1;){if(fabs((x2=sampleCurveX(t2))-x)<epsilon)return t2;x2<x?t0=t2:t1=t2,t2=.5*(t1-t0)+t0}return t2}return ax=1-(cx=3*p1x)-(bx=3*(p2x-p1x)-cx),ay=1-(cy=3*p1y)-(by=3*(p2y-p1y)-cy),function(x,epsilon){return t=solveCurveX(x,epsilon),((ay*t+by)*t+cy)*t;var t}(t,function(duration){return 1/(200*duration)}(duration))}Tweenable.setBezierFunction=function(name,x1,y1,x2,y2){var cubicBezierTransition=function(x1,y1,x2,y2){return function(pos){return cubicBezierAtTime(pos,x1,y1,x2,y2,1)}}(x1,y1,x2,y2);return cubicBezierTransition.displayName=name,cubicBezierTransition.x1=x1,cubicBezierTransition.y1=y1,cubicBezierTransition.x2=x2,cubicBezierTransition.y2=y2,Tweenable.prototype.formula[name]=cubicBezierTransition},Tweenable.unsetBezierFunction=function(name){delete Tweenable.prototype.formula[name]}}(),(mockTweenable=new Tweenable)._filterArgs=[],Tweenable.interpolate=function(from,targetState,position,easing,opt_delay){var current=Tweenable.shallowCopy({},from),delay=opt_delay||0,easingObject=Tweenable.composeEasingObject(from,easing||"linear");mockTweenable.set({});var filterArgs=mockTweenable._filterArgs;filterArgs.length=0,filterArgs[0]=current,filterArgs[1]=from,filterArgs[2]=targetState,filterArgs[3]=easingObject,Tweenable.applyFilter(mockTweenable,"tweenCreated"),Tweenable.applyFilter(mockTweenable,"beforeTween");var interpolatedValues=function(from,current,targetState,position,easing,delay){return Tweenable.tweenProps(position,current,from,targetState,1,delay,easing)}(from,current,targetState,position,easingObject,delay);return Tweenable.applyFilter(mockTweenable,"afterTween"),interpolatedValues},function(Tweenable){var R_NUMBER_COMPONENT=/(\d|\-|\.)/,R_FORMAT_CHUNKS=/([^\-0-9\.]+)/g,R_UNFORMATTED_VALUES=/[0-9.\-]+/g,R_RGB=new RegExp("rgb\\("+R_UNFORMATTED_VALUES.source+/,\s*/.source+R_UNFORMATTED_VALUES.source+/,\s*/.source+R_UNFORMATTED_VALUES.source+"\\)","g"),R_RGB_PREFIX=/^.*\(/,R_HEX=/#([0-9]|[a-f]){3,6}/gi,VALUE_PLACEHOLDER="VAL";function sanitizeObjectForHexProps(stateObject){Tweenable.each(stateObject,function(prop){var currentProp=stateObject[prop];"string"==typeof currentProp&&currentProp.match(R_HEX)&&(stateObject[prop]=filterStringChunks(R_HEX,currentProp,convertHexToRGB))})}function convertHexToRGB(hexString){var hex,rgbArr=(3===(hex=(hex=hexString).replace(/#/,"")).length&&(hex=(hex=hex.split(""))[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),hexToRGBArray_returnArray[0]=hexToDec(hex.substr(0,2)),hexToRGBArray_returnArray[1]=hexToDec(hex.substr(2,2)),hexToRGBArray_returnArray[2]=hexToDec(hex.substr(4,2)),hexToRGBArray_returnArray);return"rgb("+rgbArr[0]+","+rgbArr[1]+","+rgbArr[2]+")"}var hexToRGBArray_returnArray=[];function hexToDec(hex){return parseInt(hex,16)}function filterStringChunks(pattern,unfilteredString,filter){var pattenMatches=unfilteredString.match(pattern),filteredString=unfilteredString.replace(pattern,VALUE_PLACEHOLDER);if(pattenMatches)for(var currentChunk,pattenMatchesLength=pattenMatches.length,i=0;i<pattenMatchesLength;i++)currentChunk=pattenMatches.shift(),filteredString=filteredString.replace(VALUE_PLACEHOLDER,filter(currentChunk));return filteredString}function sanitizeRGBChunk(rgbChunk){for(var numbers=rgbChunk.match(R_UNFORMATTED_VALUES),numbersLength=numbers.length,sanitizedString=rgbChunk.match(R_RGB_PREFIX)[0],i=0;i<numbersLength;i++)sanitizedString+=parseInt(numbers[i],10)+",";return sanitizedString=sanitizedString.slice(0,-1)+")"}function getFormatManifests(stateObject){var manifestAccumulator={};return Tweenable.each(stateObject,function(prop){var formattedString,chunks,currentProp=stateObject[prop];if("string"==typeof currentProp){var rawValues=getValuesFrom(currentProp);manifestAccumulator[prop]={formatString:(formattedString=currentProp,chunks=formattedString.match(R_FORMAT_CHUNKS),chunks?(1===chunks.length||formattedString.charAt(0).match(R_NUMBER_COMPONENT))&&chunks.unshift(""):chunks=["",""],chunks.join(VALUE_PLACEHOLDER)),chunkNames:function(rawValues,prefix){var i,accumulator=[],rawValuesLength=rawValues.length;for(i=0;i<rawValuesLength;i++)accumulator.push("_"+prefix+"_"+i);return accumulator}(rawValues,prop)}}}),manifestAccumulator}function expandFormattedProperties(stateObject,formatManifests){Tweenable.each(formatManifests,function(prop){for(var currentProp=stateObject[prop],rawValues=getValuesFrom(currentProp),rawValuesLength=rawValues.length,i=0;i<rawValuesLength;i++)stateObject[formatManifests[prop].chunkNames[i]]=+rawValues[i];delete stateObject[prop]})}function collapseFormattedProperties(stateObject,formatManifests){Tweenable.each(formatManifests,function(prop){var currentProp=stateObject[prop],formatChunks=function(stateObject,chunkNames){for(var currentChunkName,extractedValues={},chunkNamesLength=chunkNames.length,i=0;i<chunkNamesLength;i++)currentChunkName=chunkNames[i],extractedValues[currentChunkName]=stateObject[currentChunkName],delete stateObject[currentChunkName];return extractedValues}(stateObject,formatManifests[prop].chunkNames),valuesList=function(stateObject,chunkNames){getValuesList_accumulator.length=0;for(var chunkNamesLength=chunkNames.length,i=0;i<chunkNamesLength;i++)getValuesList_accumulator.push(stateObject[chunkNames[i]]);return getValuesList_accumulator}(formatChunks,formatManifests[prop].chunkNames);currentProp=function(formatString,rawValues){for(var formattedValueString=formatString,rawValuesLength=rawValues.length,i=0;i<rawValuesLength;i++)formattedValueString=formattedValueString.replace(VALUE_PLACEHOLDER,+rawValues[i].toFixed(4));return formattedValueString}(formatManifests[prop].formatString,valuesList),stateObject[prop]=filterStringChunks(R_RGB,currentProp,sanitizeRGBChunk)})}var getValuesList_accumulator=[];function getValuesFrom(formattedString){return formattedString.match(R_UNFORMATTED_VALUES)}Tweenable.prototype.filter.token={tweenCreated:function(currentState,fromState,toState,easingObject){sanitizeObjectForHexProps(currentState),sanitizeObjectForHexProps(fromState),sanitizeObjectForHexProps(toState),this._tokenData=getFormatManifests(currentState)},beforeTween:function(currentState,fromState,toState,easingObject){!function(easingObject,tokenData){Tweenable.each(tokenData,function(prop){var i,currentProp=tokenData[prop],chunkNames=currentProp.chunkNames,chunkLength=chunkNames.length,easing=easingObject[prop];if("string"==typeof easing){var easingChunks=easing.split(" "),lastEasingChunk=easingChunks[easingChunks.length-1];for(i=0;i<chunkLength;i++)easingObject[chunkNames[i]]=easingChunks[i]||lastEasingChunk}else for(i=0;i<chunkLength;i++)easingObject[chunkNames[i]]=easing;delete easingObject[prop]})}(easingObject,this._tokenData),expandFormattedProperties(currentState,this._tokenData),expandFormattedProperties(fromState,this._tokenData),expandFormattedProperties(toState,this._tokenData)},afterTween:function(currentState,fromState,toState,easingObject){collapseFormattedProperties(currentState,this._tokenData),collapseFormattedProperties(fromState,this._tokenData),collapseFormattedProperties(toState,this._tokenData),function(easingObject,tokenData){Tweenable.each(tokenData,function(prop){var currentProp=tokenData[prop],chunkNames=currentProp.chunkNames,chunkLength=chunkNames.length,firstEasing=easingObject[chunkNames[0]],typeofEasings=typeof firstEasing;if("string"===typeofEasings){for(var composedEasingString="",i=0;i<chunkLength;i++)composedEasingString+=" "+easingObject[chunkNames[i]],delete easingObject[chunkNames[i]];easingObject[prop]=composedEasingString.substr(1)}else easingObject[prop]=firstEasing})}(easingObject,this._tokenData)}}}(Tweenable)}).call(null)},{}],2:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Circle=function(container,options){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,Shape.apply(this,arguments)};((Circle.prototype=new Shape).constructor=Circle).prototype._pathString=function(opts){var widthOfWider=opts.strokeWidth;opts.trailWidth&&opts.trailWidth>opts.strokeWidth&&(widthOfWider=opts.trailWidth);var r=50-widthOfWider/2;return utils.render(this._pathTemplate,{radius:r,"2radius":2*r})},Circle.prototype._trailString=function(opts){return this._pathString(opts)},module.exports=Circle},{"./shape":7,"./utils":9}],3:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Line=function(container,options){this._pathTemplate="M 0,{center} L 100,{center}",Shape.apply(this,arguments)};((Line.prototype=new Shape).constructor=Line).prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 "+opts.strokeWidth),svg.setAttribute("preserveAspectRatio","none")},Line.prototype._pathString=function(opts){return utils.render(this._pathTemplate,{center:opts.strokeWidth/2})},Line.prototype._trailString=function(opts){return this._pathString(opts)},module.exports=Line},{"./shape":7,"./utils":9}],4:[function(require,module,exports){module.exports={Line:require("./line"),Circle:require("./circle"),SemiCircle:require("./semicircle"),Square:require("./square"),Path:require("./path"),Shape:require("./shape"),utils:require("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(require,module,exports){var Tweenable=require("shifty"),utils=require("./utils"),EASING_ALIASES={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},Path=function Path(path,opts){if(!(this instanceof Path))throw new Error("Constructor was called without new keyword");var element;opts=utils.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},opts),element=utils.isString(path)?document.querySelector(path):path,this.path=element,this._opts=opts,this._tweenable=null;var length=this.path.getTotalLength();this.path.style.strokeDasharray=length+" "+length,this.set(0)};Path.prototype.value=function(){var offset=this._getComputedDashOffset(),length=this.path.getTotalLength(),progress=1-offset/length;return parseFloat(progress.toFixed(6),10)},Path.prototype.set=function(progress){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(progress);var step=this._opts.step;if(utils.isFunction(step)){var easing=this._easing(this._opts.easing),values=this._calculateTo(progress,easing),reference=this._opts.shape||this;step(values,reference,this._opts.attachment)}},Path.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},Path.prototype.animate=function(progress,opts,cb){opts=opts||{},utils.isFunction(opts)&&(cb=opts,opts={});var passedOpts=utils.extend({},opts),defaultOpts=utils.extend({},this._opts);opts=utils.extend(defaultOpts,opts);var shiftyEasing=this._easing(opts.easing),values=this._resolveFromAndTo(progress,shiftyEasing,passedOpts);this.stop(),this.path.getBoundingClientRect();var offset=this._getComputedDashOffset(),newOffset=this._progressToOffset(progress),self=this;this._tweenable=new Tweenable,this._tweenable.tween({from:utils.extend({offset:offset},values.from),to:utils.extend({offset:newOffset},values.to),duration:opts.duration,easing:shiftyEasing,step:function(state){self.path.style.strokeDashoffset=state.offset;var reference=opts.shape||self;opts.step(state,reference,opts.attachment)},finish:function(state){utils.isFunction(cb)&&cb()}})},Path.prototype._getComputedDashOffset=function(){var computedStyle=window.getComputedStyle(this.path,null);return parseFloat(computedStyle.getPropertyValue("stroke-dashoffset"),10)},Path.prototype._progressToOffset=function(progress){var length=this.path.getTotalLength();return length-progress*length},Path.prototype._resolveFromAndTo=function(progress,easing,opts){return opts.from&&opts.to?{from:opts.from,to:opts.to}:{from:this._calculateFrom(easing),to:this._calculateTo(progress,easing)}},Path.prototype._calculateFrom=function(easing){return Tweenable.interpolate(this._opts.from,this._opts.to,this.value(),easing)},Path.prototype._calculateTo=function(progress,easing){return Tweenable.interpolate(this._opts.from,this._opts.to,progress,easing)},Path.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},Path.prototype._easing=function(easing){return EASING_ALIASES.hasOwnProperty(easing)?EASING_ALIASES[easing]:easing},module.exports=Path},{"./utils":9,shifty:1}],6:[function(require,module,exports){var Shape=require("./shape"),Circle=require("./circle"),utils=require("./utils"),SemiCircle=function(container,options){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,Shape.apply(this,arguments)};((SemiCircle.prototype=new Shape).constructor=SemiCircle).prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 50")},SemiCircle.prototype._initializeTextContainer=function(opts,container,textContainer){opts.text.style&&(textContainer.style.top="auto",textContainer.style.bottom="0",opts.text.alignToBottom?utils.setStyle(textContainer,"transform","translate(-50%, 0)"):utils.setStyle(textContainer,"transform","translate(-50%, 50%)"))},SemiCircle.prototype._pathString=Circle.prototype._pathString,SemiCircle.prototype._trailString=Circle.prototype._trailString,module.exports=SemiCircle},{"./circle":2,"./shape":7,"./utils":9}],7:[function(require,module,exports){var Path=require("./path"),utils=require("./utils"),Shape=function Shape(container,opts){if(!(this instanceof Shape))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=utils.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},opts,!0),utils.isObject(opts)&&void 0!==opts.svgStyle&&(this._opts.svgStyle=opts.svgStyle),utils.isObject(opts)&&utils.isObject(opts.text)&&void 0!==opts.text.style&&(this._opts.text.style=opts.text.style);var element,svgView=this._createSvgView(this._opts);if(!(element=utils.isString(container)?document.querySelector(container):container))throw new Error("Container does not exist: "+container);this._container=element,this._container.appendChild(svgView.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&utils.setStyles(svgView.svg,this._opts.svgStyle),this.svg=svgView.svg,this.path=svgView.path,this.trail=svgView.trail,this.text=null;var newOpts=utils.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new Path(svgView.path,newOpts),utils.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};Shape.prototype.animate=function(progress,opts,cb){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.animate(progress,opts,cb)},Shape.prototype.stop=function(){if(null===this._progressPath)throw new Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()},Shape.prototype.destroy=function(){if(null===this._progressPath)throw new Error("Object is destroyed");this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},Shape.prototype.set=function(progress){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.set(progress)},Shape.prototype.value=function(){if(null===this._progressPath)throw new Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()},Shape.prototype.setText=function(newText){if(null===this._progressPath)throw new Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),utils.isObject(newText)?(utils.removeChildren(this.text),this.text.appendChild(newText)):this.text.innerHTML=newText},Shape.prototype._createSvgView=function(opts){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(svg,opts);var trailPath=null;(opts.trailColor||opts.trailWidth)&&(trailPath=this._createTrail(opts),svg.appendChild(trailPath));var path=this._createPath(opts);return svg.appendChild(path),{svg:svg,path:path,trail:trailPath}},Shape.prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 100")},Shape.prototype._createPath=function(opts){var pathString=this._pathString(opts);return this._createPathElement(pathString,opts)},Shape.prototype._createTrail=function(opts){var pathString=this._trailString(opts),newOpts=utils.extend({},opts);return newOpts.trailColor||(newOpts.trailColor="#eee"),newOpts.trailWidth||(newOpts.trailWidth=newOpts.strokeWidth),newOpts.color=newOpts.trailColor,newOpts.strokeWidth=newOpts.trailWidth,newOpts.fill=null,this._createPathElement(pathString,newOpts)},Shape.prototype._createPathElement=function(pathString,opts){var path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d",pathString),path.setAttribute("stroke",opts.color),path.setAttribute("stroke-width",opts.strokeWidth),opts.fill?path.setAttribute("fill",opts.fill):path.setAttribute("fill-opacity","0"),path},Shape.prototype._createTextContainer=function(opts,container){var textContainer=document.createElement("div");textContainer.className=opts.text.className;var textStyle=opts.text.style;return textStyle&&(opts.text.autoStyleContainer&&(container.style.position="relative"),utils.setStyles(textContainer,textStyle),textStyle.color||(textContainer.style.color=opts.color)),this._initializeTextContainer(opts,container,textContainer),textContainer},Shape.prototype._initializeTextContainer=function(opts,container,element){},Shape.prototype._pathString=function(opts){throw new Error("Override this function for each progress bar")},Shape.prototype._trailString=function(opts){throw new Error("Override this function for each progress bar")},Shape.prototype._warnContainerAspectRatio=function(container){if(this.containerAspectRatio){var computedStyle=window.getComputedStyle(container,null),width=parseFloat(computedStyle.getPropertyValue("width"),10),height=parseFloat(computedStyle.getPropertyValue("height"),10);utils.floatEquals(this.containerAspectRatio,width/height)||(console.warn("Incorrect aspect ratio of container","#"+container.id,"detected:",computedStyle.getPropertyValue("width")+"(width)","/",computedStyle.getPropertyValue("height")+"(height)","=",width/height),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},module.exports=Shape},{"./path":5,"./utils":9}],8:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Square=function(container,options){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",Shape.apply(this,arguments)};((Square.prototype=new Shape).constructor=Square).prototype._pathString=function(opts){var w=100-opts.strokeWidth/2;return utils.render(this._pathTemplate,{width:w,strokeWidth:opts.strokeWidth,halfOfStrokeWidth:opts.strokeWidth/2})},Square.prototype._trailString=function(opts){var w=100-opts.strokeWidth/2;return utils.render(this._trailTemplate,{width:w,strokeWidth:opts.strokeWidth,halfOfStrokeWidth:opts.strokeWidth/2,startMargin:opts.strokeWidth/2-opts.trailWidth/2})},module.exports=Square},{"./shape":7,"./utils":9}],9:[function(require,module,exports){var PREFIXES="Webkit Moz O ms".split(" ");function setStyle(element,style,value){for(var elStyle=element.style,i=0;i<PREFIXES.length;++i){var prefix=PREFIXES[i];elStyle[prefix+capitalize(style)]=value}elStyle[style]=value}function capitalize(text){return text.charAt(0).toUpperCase()+text.slice(1)}function isObject(obj){if(function(obj){return"[object Array]"===Object.prototype.toString.call(obj)}(obj))return!1;var type=typeof obj;return"object"===type&&!!obj}function forEachObject(object,callback){for(var key in object)if(object.hasOwnProperty(key)){var val=object[key];callback(val,key)}}module.exports={extend:function extend(destination,source,recursive){for(var attrName in destination=destination||{},recursive=recursive||!1,source=source||{})if(source.hasOwnProperty(attrName)){var destVal=destination[attrName],sourceVal=source[attrName];recursive&&isObject(destVal)&&isObject(sourceVal)?destination[attrName]=extend(destVal,sourceVal,recursive):destination[attrName]=sourceVal}return destination},render:function(template,vars){var rendered=template;for(var key in vars)if(vars.hasOwnProperty(key)){var val=vars[key],regExpString="\\{"+key+"\\}",regExp=new RegExp(regExpString,"g");rendered=rendered.replace(regExp,val)}return rendered},setStyle:setStyle,setStyles:function(element,styles){forEachObject(styles,function(styleValue,styleName){null!=styleValue&&(isObject(styleValue)&&!0===styleValue.prefix?setStyle(element,styleName,styleValue.value):element.style[styleName]=styleValue)})},capitalize:capitalize,isString:function(obj){return"string"==typeof obj||obj instanceof String},isFunction:function(obj){return"function"==typeof obj},isObject:isObject,forEachObject:forEachObject,floatEquals:function(a,b){return Math.abs(a-b)<.001},removeChildren:function(el){for(;el.firstChild;)el.removeChild(el.firstChild)}}},{}]},{},[4])(4)});var SplashLoader=function(){function SplashLoader(options){this.circleLoader=null,this.loaded=!1,this.showPlayButton="undefined"==typeof playBtn||playBtn,this.progress=0,this.options={gameId:"12346",gameTitle:"Place Holder",gameName:"place-holder",libs:[],version:"dev",barColor:"white",gaMeasurementId:"none"},this.options.gameId=options.gameId,this.options.gameTitle=options.gameTitle,this.options.version=options.version,this.options.barColor=options.barColor?options.barColor:this.options.barColor,this.options.libs=options.libs,this.options.gaMeasurementId=options.gaMeasurementId}return SplashLoader.getInstance=function(options){if(!SplashLoader.instance){if(!options)throw new Error("Can not create new SplashLoader instance without options!");SplashLoader.instance=new SplashLoader(options)}return SplashLoader.instance},SplashLoader.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var css,html,head,style,container,body,versionDiv;return __generator(this,function(_a){switch(_a.label){case 0:return css="\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-version {\n            position: absolute;\n            right: 5px;\n            font-family: Helvetica, Arial, sans-serif;\n            color: #ffffff;\n            font-size: 0.5em;\n            top: 5px;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n\n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n\n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n\n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n\n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n\n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n\n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n\n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n\n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        ",gameLogo=this.getGameLogoUrl(this.options.gameId),gameTitle=this.options.gameTitle,html='\n        <div id="h5branding-background"></div>\n        <div id="h5branding-version"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="'+gameLogo+'" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">'+gameTitle+"</div>\n    ",head=document.head||document.getElementsByTagName("head")[0],(style=document.createElement("style")).type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),(container=document.createElement("div")).innerHTML=html,container.id="h5branding-container",(body=document.body||document.getElementsByTagName("body")[0]).insertBefore(container,body.firstChild),this.circleLoader=new progressbar.Circle("#h5branding-bar",{strokeWidth:3,color:this.options.barColor}),this.options.gaMeasurementId&&(GoogleAnalytics.GAMeasurementId=this.options.gaMeasurementId),(versionDiv=document.getElementById("h5branding-version"))&&(versionDiv.innerHTML=this.options.version),[4,Promise.all([this.loadBranding(),this.loadLibs(),GoogleAnalytics.preload()])];case 1:return _a.sent(),this.loaded=!0,[2]}var gameLogo,gameTitle})})},SplashLoader.prototype.loadBranding=function(){return __awaiter(this,void 0,void 0,function(){var background,logoContainer,logo;return __generator(this,function(_a){switch(_a.label){case 0:return[4,Branding$$1.preload(Date.now().toString())];case 1:return _a.sent(),(background=document.getElementById("h5branding-background"))&&(background.style.backgroundImage="url("+this.getGameLogoUrl(this.options.gameId)+")",background.style.backgroundColor=Branding$$1.brandingBackgroundColor),(logoContainer=document.getElementById("h5branding-logo"))&&Utils.getBrandingDomain()!==exports.BrandingDomain.Neutral&&((logo=document.createElement("img")).src=Branding$$1.brandingLogoUrl.replace("_small",""),logoContainer.appendChild(logo)),[2]}})})},SplashLoader.prototype.loadLibs=function(){var _this=this,scripts=this.options.libs.map(function(url,index){return Loader.instance.loadScript(url,!0,function(){_this.setScriptloadProgress(scripts.length,index+1)})});return Promise.all(scripts)},Object.defineProperty(SplashLoader.prototype,"bannerAllowed",{get:function(){var width=document.body.clientWidth,height=document.body.clientHeight;return this.progress<100&&!(height<width&&height<=460)&&!(width<600&&height<850)},enumerable:!1,configurable:!0}),SplashLoader.prototype.showBanner=function(){if(!this.bannerAllowed)return null;var banner=document.getElementById("h5branding-ad");return banner?(banner.style.display="inline-flex",banner):null},SplashLoader.prototype.setScriptloadProgress=function(maxScripts,increment){var progress=.3*increment/maxScripts;this.circleLoader.animate(progress,null,function(){})},SplashLoader.prototype.setLoadProgress=function(progress){var _this=this;if(this.loaded)if(progress=30+.7*progress,100===(this.progress=progress)){var button_1=document.querySelector("#h5branding-button");this.circleLoader.animate(1,null,function(){!Utils.inGDGameZone()&&button_1&&!0===_this.showPlayButton?button_1.style.display="block":(Utils.inGDGameZone()||!1===_this.showPlayButton)&&_this.onPlayButtonClick()})}else this.circleLoader.animate(progress/100,null,function(){})},SplashLoader.prototype.setButtonCallback=function(cb){this.buttonCallback=cb},SplashLoader.prototype.onPlayButtonClick=function(){this.buttonCallback&&this.buttonCallback()},SplashLoader.prototype.destroy=function(){var element=document.querySelector("#h5branding-container");null!==element&&null!==element.parentNode&&element.parentNode.removeChild(element)},SplashLoader.prototype.getGameLogoUrl=function(gameId){var imagePath=gameId+"-512x512.jpeg";return window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/"+imagePath:"https://img.gamedistribution.com/"+imagePath},SplashLoader}(),EGAProgressionStatus$1=GameAnalytics_node.EGAProgressionStatus,google=new GoogleAnalytics,gameanalytics$1=new GameAnalytics$1;exports.EGAProgressionStatus=EGAProgressionStatus$1,exports.google=google,exports.gameanalytics=gameanalytics$1,exports.Utils=Utils,exports.Domain=Domain,exports.Branding=Branding$$1,exports.SplashLoader=SplashLoader,Object.defineProperty(exports,"__esModule",{value:!0})}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.h5ads=global.h5ads||{})}(this,function(exports){"use strict";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var module,CocoonProvider,eventemitter3=(function(module){var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter}(module={exports:{}},module.exports),module.exports);!function(CocoonProvider){CocoonProvider[CocoonProvider.AdMob=0]="AdMob",CocoonProvider[CocoonProvider.MoPub=1]="MoPub",CocoonProvider[CocoonProvider.Chartboost=2]="Chartboost",CocoonProvider[CocoonProvider.Heyzap=3]="Heyzap"}(CocoonProvider||(CocoonProvider={}));var GameDistributionAdType,GameDistributionBannerSize,GameDistributionAlignment,CocoonAds$$1=function(){function CocoonAds$$1(provider,config){if(this.adsEnabled=!1,this.bannerShowable=!1,this.interstitialShowable=!1,this.insentiveShowable=!1,Cocoon&&Cocoon.Ad){switch(this.adsEnabled=!0,provider){default:case CocoonProvider.AdMob:this.cocoonProvider=Cocoon.Ad.AdMob;break;case CocoonProvider.Chartboost:this.cocoonProvider=Cocoon.Ad.Chartboost;break;case CocoonProvider.Heyzap:this.cocoonProvider=Cocoon.Ad.Heyzap;break;case CocoonProvider.MoPub:this.cocoonProvider=Cocoon.Ad.MoPub}this.cocoonProvider.configure(config)}}return CocoonAds$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CocoonAds$$1.prototype.showAd=function(adType){if(this.adsEnabled){if(adType===exports.AdType.banner){if(!this.bannerShowable||null===this.banner)return;this.adManager.emit(exports.AdEvents.BANNER_SHOWN,this.banner.width,this.banner.height),this.adManager.bannerActive=!0,this.banner.show()}if(adType===exports.AdType.interstitial){if(!this.interstitialShowable||null===this.interstitial)return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.interstitial);this.interstitial.show()}if(adType===exports.AdType.rewarded){if(!this.insentiveShowable||null===this.insentive)return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.rewarded);this.insentive.show()}}else adType!==exports.AdType.banner&&this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CocoonAds$$1.prototype.adAvailable=function(adType){return!0},CocoonAds$$1.prototype.preloadAd=function(adType,adId,bannerPosition){var _this=this;this.adsEnabled&&(this.destroyAd(adType),adType===exports.AdType.banner&&(this.banner=this.cocoonProvider.createBanner(adId),bannerPosition&&this.banner.setLayout(bannerPosition),this.banner.on("load",function(){_this.bannerShowable=!0}),this.banner.on("fail",function(){_this.bannerShowable=!1,_this.banner=null}),this.banner.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.banner)}),this.banner.on("show",function(){}),this.banner.on("dismiss",function(){}),this.banner.load()),adType===exports.AdType.interstitial&&(this.interstitial=this.cocoonProvider.createInterstitial(adId),this.interstitial.on("load",function(){_this.interstitialShowable=!0}),this.interstitial.on("fail",function(){_this.interstitialShowable=!1,_this.interstitial=null}),this.interstitial.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.interstitial)}),this.interstitial.on("show",function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED,exports.AdType.interstitial)}),this.interstitial.on("dismiss",function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.interstitial),_this.interstitialShowable=!1,_this.interstitial=null}),this.interstitial.load()),adType===exports.AdType.rewarded&&(this.insentive=this.cocoonProvider.createRewardedVideo(adId),this.insentive.on("load",function(){_this.insentiveShowable=!0}),this.insentive.on("fail",function(){_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.rewarded)}),this.insentive.on("show",function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED,exports.AdType.rewarded)}),this.insentive.on("dismiss",function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.rewarded),_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.on("reward",function(){_this.adManager.emit(exports.AdEvents.AD_REWARDED,exports.AdType.rewarded),_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.load()))},CocoonAds$$1.prototype.destroyAd=function(adType){if(this.adsEnabled){if(adType===exports.AdType.banner&&null!==this.banner){try{this.cocoonProvider.releaseBanner(this.banner)}catch(e){}this.banner=null,this.bannerShowable=!1}adType===exports.AdType.interstitial&&null!==this.interstitial&&(this.cocoonProvider.releaseInterstitial(this.interstitial),this.interstitial=null,this.interstitialShowable=!1)}},CocoonAds$$1.prototype.hideAd=function(adType){this.adsEnabled&&(adType===exports.AdType.interstitial&&null!==this.interstitial&&this.interstitial.hide(),adType===exports.AdType.banner&&null!==this.banner&&(this.adManager.bannerActive&&(this.adManager.bannerActive=!1,this.adManager.emit(exports.AdEvents.BANNER_HIDDEN,this.banner.width,this.banner.height)),this.banner.hide()),adType===exports.AdType.rewarded&&null!==this.insentive&&this.insentive.hide())},CocoonAds$$1}(),CordovaGamedistribution$$1=function(){function CordovaGamedistribution$$1(gameId,userId,debug){void 0===debug&&(debug=!1),this.adsEnabled=!1,void 0===cordova.plugins||void 0!==cordova.plugins&&void 0===cordova.plugins.gdApi?console.log("gdApi not available!"):(debug&&cordova.plugins.gdApi.enableTestAds(),this.setAdListeners(),cordova.plugins.gdApi.init([gameId,userId],function(data){console.log("API init success!",data)},function(error){console.log("API init error!",error)}))}return CordovaGamedistribution$$1.prototype.setAdListeners=function(){var _this=this;cordova.plugins.gdApi.setAdListener(function(data){switch(console.log("banner reply, data.event",data.event,data),data.event){case"BANNER_STARTED":_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);break;case"API_IS_READY":_this.adsEnabled=!0;break;case"API_ALREADY_INITIALIZED":break;case"BANNER_CLOSED":case"API_NOT_READY":case"BANNER_FAILED":_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)}},function(error){console.log("Set listener error:",error),_this.adsEnabled=!1})},CordovaGamedistribution$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaGamedistribution$$1.prototype.showAd=function(adType){var _this=this;this.adsEnabled?(console.log("show banner called"),cordova.plugins.gdApi.showBanner(function(data){console.log("Show banner worked",data)},function(data){console.log("Could not show banner:",data),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)})):(console.log("Ads not enabled, resuming"),this.adManager.emit(exports.AdEvents.CONTENT_RESUMED))},CordovaGamedistribution$$1.prototype.adAvailable=function(adType){return!0},CordovaGamedistribution$$1.prototype.preloadAd=function(adType){},CordovaGamedistribution$$1.prototype.destroyAd=function(adType){},CordovaGamedistribution$$1.prototype.hideAd=function(adType){},CordovaGamedistribution$$1}(),CordovaGamedock$$1=function(){function CordovaGamedock$$1(){var _this=this;if(this.adsEnabled=!1,this.rewardedLoaded=!1,"undefined"!=typeof gamedockSDK){gamedockSDK.on("PrivacyPolicyStatus",function(data){_this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)}),gamedockSDK.initialise(!1,{shouldBlock:!0,requiredAge:12},!0,"PRODUCTION",[]),gamedockSDK.on("AdAvailable",function(data){switch(data.type){case"interstitial":_this.interstitalAvailable();break;case"rewardVideo":_this.rewardedChanged(!0);break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdNotAvailable",function(data){switch(data.type){case"interstitial":case"rewardVideo":_this.resumeGameplay();break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdFinished",function(data){switch(data.type){case"interstitial":_this.resumeGameplay();break;case"rewardVideo":_this.rewardVideoFinished(data.reason);break;case"banner":throw new Error("Not yet implemented.")}})}}return CordovaGamedock$$1.prototype.setManager=function(manager){this.adManager=manager},CordovaGamedock$$1.prototype.showAd=function(adType){if(void 0===adType&&(adType=exports.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(adType){case exports.AdType.interstitial:this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),gamedockSDK.requestInterstitial();break;case exports.AdType.rewarded:if(!this.adAvailable(exports.AdType.rewarded)){this.resumeGameplay();break}this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),this.rewardedChanged(!1),gamedockSDK.playRewardVideo();break;default:this.resumeGameplay()}},CordovaGamedock$$1.prototype.interstitalAvailable=function(){"undefined"!=typeof gamedockSDK&&gamedockSDK.playInterstitial()},CordovaGamedock$$1.prototype.rewardVideoFinished=function(reason){switch(reason){case"dismiss":this.resumeGameplay();break;case"close":this.adManager.emit(exports.AdEvents.AD_REWARDED)}},CordovaGamedock$$1.prototype.resumeGameplay=function(){this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CordovaGamedock$$1.prototype.preloadAd=function(adType){if(void 0===adType&&(adType=exports.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(adType){case exports.AdType.rewarded:if(this.rewardedLoaded)return;gamedockSDK.requestRewardVideo()}},CordovaGamedock$$1.prototype.destroyAd=function(){},CordovaGamedock$$1.prototype.hideAd=function(){},CordovaGamedock$$1.prototype.adAvailable=function(adType){switch(adType){case exports.AdType.rewarded:return this.rewardedLoaded}return!1},CordovaGamedock$$1.prototype.rewardedChanged=function(available){this.rewardedLoaded=available},CordovaGamedock$$1}(),CordovaHeyzap$$1=function(){function CordovaHeyzap$$1(publisherId){var _this=this;this.adsEnabled=!1,this.adsEnabled=!0,HeyzapAds.start(publisherId).then(function(){},function(e){_this.adsEnabled=!1})}return CordovaHeyzap$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaHeyzap$$1.prototype.showAd=function(adType,bannerAdPositions){var _this=this;switch(this.adsEnabled||this.adManager.emit(exports.AdEvents.CONTENT_RESUMED),adType){case exports.AdType.interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.interstitial:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.banner:if(void 0===bannerAdPositions)return;HeyzapAds.BannerAd.show(bannerAdPositions).then(function(){},function(e){})}},CordovaHeyzap$$1.prototype.adAvailable=function(adType){return!0},CordovaHeyzap$$1.prototype.preloadAd=function(adType){this.adsEnabled&&adType===exports.AdType.rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(e){})},CordovaHeyzap$$1.prototype.destroyAd=function(adType){this.adsEnabled&&adType===exports.AdType.banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(e){})},CordovaHeyzap$$1.prototype.hideAd=function(adType){this.adsEnabled&&adType===exports.AdType.banner&&HeyzapAds.BannerAd.hide().then(function(){},function(e){})},CordovaHeyzap$$1}(),CordovaIronSource$$1=function(){function CordovaIronSource$$1(appKey){var _this=this;if(this.adsEnabled=!1,this.interstitialLoaded=!1,this.rewardedLoaded=!1,"undefined"!=typeof IronSourceAds){IronSourceAds.init({appKey:appKey});var resume=function(){return _this.resumeGameplay()};window.addEventListener("interstitialClosed",resume),window.addEventListener("interstitialShowFailed",resume),window.addEventListener("interstitialLoaded",function(){return _this.interstitialChanged(!0)}),window.addEventListener("rewardedVideoClosed",resume),window.addEventListener("rewardedVideoFailed",resume),IronSourceAds.hasRewardedVideo({onSuccess:this.rewardedChanged.bind(this)}),window.addEventListener("rewardedVideoAvailabilityChanged",function(event){return _this.rewardedChanged(event.available)})}}return CordovaIronSource$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaIronSource$$1.prototype.showAd=function(adType){switch(void 0===adType&&(adType=exports.AdType.interstitial),adType){case exports.AdType.interstitial:if(!this.interstitialLoaded){this.resumeGameplay();break}this.interstitialChanged(!1),this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),IronSourceAds.showInterstitial();break;case exports.AdType.rewarded:if(!this.rewardedLoaded){this.resumeGameplay();break}this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),IronSourceAds.showRewardedVideo();break;default:this.resumeGameplay()}},CordovaIronSource$$1.prototype.resumeGameplay=function(){this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CordovaIronSource$$1.prototype.preloadAd=function(adType){void 0===adType&&(adType=exports.AdType.interstitial),adType===exports.AdType.interstitial&&IronSourceAds.loadInterstitial()},CordovaIronSource$$1.prototype.destroyAd=function(){},CordovaIronSource$$1.prototype.hideAd=function(){},CordovaIronSource$$1.prototype.adAvailable=function(adType){switch(adType){case exports.AdType.interstitial:return this.interstitialLoaded;case exports.AdType.rewarded:return this.rewardedLoaded}return!1},CordovaIronSource$$1.prototype.interstitialChanged=function(available){this.interstitialLoaded=available},CordovaIronSource$$1.prototype.rewardedChanged=function(available){this.rewardedLoaded=available},CordovaIronSource$$1}();!function(GameDistributionAdType){GameDistributionAdType.interstitial="interstitial",GameDistributionAdType.rewarded="rewarded",GameDistributionAdType.display="display"}(GameDistributionAdType||(GameDistributionAdType={})),(GameDistributionBannerSize=exports.GameDistributionBannerSize||(exports.GameDistributionBannerSize={}))[GameDistributionBannerSize.LargeRectangle=0]="LargeRectangle",GameDistributionBannerSize[GameDistributionBannerSize.MediumRectangle=1]="MediumRectangle",GameDistributionBannerSize[GameDistributionBannerSize.Billboard=2]="Billboard",GameDistributionBannerSize[GameDistributionBannerSize.Leaderboard=3]="Leaderboard",GameDistributionBannerSize[GameDistributionBannerSize.Skyscraper=4]="Skyscraper",GameDistributionBannerSize[GameDistributionBannerSize.WideSkyscraper=5]="WideSkyscraper",(GameDistributionAlignment=exports.GameDistributionAlignment||(exports.GameDistributionAlignment={}))[GameDistributionAlignment.TopLeft=0]="TopLeft",GameDistributionAlignment[GameDistributionAlignment.TopCenter=1]="TopCenter",GameDistributionAlignment[GameDistributionAlignment.TopRight=2]="TopRight",GameDistributionAlignment[GameDistributionAlignment.CenterLeft=3]="CenterLeft",GameDistributionAlignment[GameDistributionAlignment.Center=4]="Center",GameDistributionAlignment[GameDistributionAlignment.CenterRight=5]="CenterRight",GameDistributionAlignment[GameDistributionAlignment.BottomLeft=6]="BottomLeft",GameDistributionAlignment[GameDistributionAlignment.BottomCenter=7]="BottomCenter",GameDistributionAlignment[GameDistributionAlignment.BottomRight=8]="BottomRight";var GoogleAdEvent,GameDistributionBanner$$1=function(){function GameDistributionBanner$$1(){this.scaleFactor=1,this.offsetX=0,this.offsetY=0,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.id="banner-"+Date.now()+(1e7*Math.random()|0),document.body.appendChild(this.element)}return GameDistributionBanner$$1.prototype.loadBanner=function(){return"undefined"==typeof gdsdk?Promise.reject("GD Sdk not available, probably due to adblocker"):gdsdk.showAd(GameDistributionAdType.display,{containerId:this.element.id})},GameDistributionBanner$$1.prototype.destroy=function(){document.body.removeChild(this.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),delete this.element,delete this.parent,delete this.alignment},GameDistributionBanner$$1.prototype.alignIn=function(element,position){var _this=this;this.parent?console.warn("Banner already aligned, ignoring..."):(this.parent=element,this.alignment=position,this.resizeListener=function(){return _this.resize()},window.addEventListener("resize",this.resizeListener),this.resize())},GameDistributionBanner$$1.prototype.setOffset=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.offsetX=x,this.offsetY=y,this.resize()},GameDistributionBanner$$1.prototype.resize=function(){if(this.parent){var parentBoundingRect=this.parent.getBoundingClientRect();switch(this.alignment){case exports.GameDistributionAlignment.TopLeft:this.position(parentBoundingRect.left,parentBoundingRect.top);break;case exports.GameDistributionAlignment.TopCenter:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top);break;case exports.GameDistributionAlignment.TopRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top);break;case exports.GameDistributionAlignment.CenterLeft:this.position(parentBoundingRect.left,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.Center:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.CenterRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.BottomLeft:this.position(parentBoundingRect.left,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor);break;case exports.GameDistributionAlignment.BottomCenter:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor);break;case exports.GameDistributionAlignment.BottomRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor)}}},GameDistributionBanner$$1.prototype.setSize=function(size){var width,height;switch(size){default:case exports.GameDistributionBannerSize.LargeRectangle:width=336,height=280;break;case exports.GameDistributionBannerSize.MediumRectangle:width=300,height=250;break;case exports.GameDistributionBannerSize.Billboard:width=970,height=250;break;case exports.GameDistributionBannerSize.Leaderboard:width=728,height=90;break;case exports.GameDistributionBannerSize.Skyscraper:width=120,height=600;break;case exports.GameDistributionBannerSize.WideSkyscraper:width=160,height=600}this.width=width,this.height=height,this.element.style.width=width+"px",this.element.style.height=height+"px"},GameDistributionBanner$$1.prototype.position=function(x,y){this.element.style.left=x+this.offsetX+"px",this.element.style.top=y+this.offsetY+"px"},GameDistributionBanner$$1.prototype.scale=function(factor){this.element.style.transformOrigin="left top",this.scaleFactor=factor,this.element.style.transform="scale("+factor+")"},GameDistributionBanner$$1}(),GameDistribution$$1=function(){function GameDistribution$$1(gameId){var d,s,id,js,fjs,_this=this;this.adsEnabled=!1,this.hasRewarded=!1,this.adShowing=!1,this.areAdsEnabled(),window.GD_OPTIONS={gameId:gameId,advertisementSettings:{autoplay:!1},onEvent:function(event){switch(event.name){case"SDK_GAME_PAUSE":_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);break;case"SDK_READY":_this.sdkLoaded()}}},d=document,s="script",id="gamedistribution-jssdk",fjs=d.getElementsByTagName(s)[0],d.getElementById(id)||((js=d.createElement(s)).id=id,js.src="",fjs.parentNode&&fjs.parentNode.insertBefore(js,fjs))}return GameDistribution$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},GameDistribution$$1.prototype.sdkLoaded=function(){var _this=this;this.areAdsEnabled().then(function(enabled){enabled&&(_this.adsEnabled=!0)})},GameDistribution$$1.prototype.showAd=function(adType){var _this=this;if(this.adsEnabled){if("undefined"==typeof gdsdk||gdsdk&&void 0===gdsdk.showAd)return this.adsEnabled=!1,void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);gdsdk.showAd(adType===exports.AdType.rewarded?GameDistributionAdType.rewarded:GameDistributionAdType.interstitial).then(function(){adType===exports.AdType.rewarded&&(_this.adManager.emit(exports.AdEvents.AD_REWARDED),_this.hasRewarded=!1),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)}).catch(function(){adType===exports.AdType.rewarded&&_this.hasRewarded&&(_this.hasRewarded=!1),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)})}else this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},GameDistribution$$1.prototype.createBanner=function(size){if(this.adsEnabled){var banner=new GameDistributionBanner$$1;return banner.setSize(size),banner}},GameDistribution$$1.prototype.loadBanner=function(size){if(this.adsEnabled){var banner=new GameDistributionBanner$$1;return banner.setSize(size),banner.loadBanner(),banner}},GameDistribution$$1.prototype.preloadAd=function(adType){var _this=this;!this.hasRewarded&&this.adsEnabled&&adType===exports.AdType.rewarded&&(console.log("preloading ad"),gdsdk.preloadAd(GameDistributionAdType.rewarded).then(function(){_this.hasRewarded=!0,_this.adManager.emit(exports.AdEvents.AD_LOADED,adType)}))},GameDistribution$$1.prototype.adAvailable=function(adType){return adType!==exports.AdType.rewarded||this.hasRewarded},GameDistribution$$1.prototype.destroyAd=function(){},GameDistribution$$1.prototype.hideAd=function(){},GameDistribution$$1.prototype.areAdsEnabled=function(){var test=document.createElement("div");test.innerHTML="&nbsp;",test.className="adsbox",test.style.position="absolute",test.style.fontSize="10px",document.body.appendChild(test);return new Promise(function(resolve){window.setTimeout(function(){var enabled;resolve((enabled=!0,0===test.offsetHeight&&(enabled=!1),test.parentNode&&test.parentNode.removeChild(test),enabled))},100)})},GameDistribution$$1}();!function(GoogleAdEvent){GoogleAdEvent[GoogleAdEvent.start=0]="start",GoogleAdEvent[GoogleAdEvent.firstQuartile=1]="firstQuartile",GoogleAdEvent[GoogleAdEvent.midPoint=2]="midPoint",GoogleAdEvent[GoogleAdEvent.thirdQuartile=3]="thirdQuartile",GoogleAdEvent[GoogleAdEvent.complete=4]="complete"}(GoogleAdEvent||(GoogleAdEvent={}));var AdEvents,AdType,Ima3$$1=function(){function Ima3$$1(canvas,adTagUrl){this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof canvas.parentElement?document.getElementById(canvas.parentElement):canvas.parentElement,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.adTagUrl=adTagUrl,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return Ima3$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},Ima3$$1.prototype.showAd=function(adType,customParams){if(console.log("Ad Requested"),!this.adRequested)if(this.adsEnabled||this.adManager.emit(exports.AdEvents.AD_DISABLED,!0),this.googleEnabled){this.adDisplay.initialize();var adsRequest=new google.ima.AdsRequest;adsRequest.adTagUrl=this.adTagUrl+this.parseCustomParams(customParams);var width=window.innerWidth,height=window.innerHeight;document.body.clientHeight<window.innerHeight&&(height=document.body.clientHeight,width=document.body.clientWidth),adsRequest.linearAdSlotWidth=width,adsRequest.linearAdSlotHeight=height,adsRequest.nonLinearAdSlotWidth=width,adsRequest.nonLinearAdSlotHeight=height,adsRequest.forceNonLinearFullSlot=!0;try{this.adRequested=!0,this.adLoader.requestAds(adsRequest)}catch(e){console.log(e),this.onContentResumeRequested()}}else this.onContentResumeRequested()},Ima3$$1.prototype.adAvailable=function(adType){return!0},Ima3$$1.prototype.preloadAd=function(){},Ima3$$1.prototype.destroyAd=function(){},Ima3$$1.prototype.hideAd=function(){},Ima3$$1.prototype.onAdManagerLoader=function(adsManagerLoadedEvent){var _this=this;console.log("AdsManager loaded");var adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0;var adsManager=adsManagerLoadedEvent.getAdsManager(this.gameContent,adsRenderingSettings);this.adsManager=adsManager,console.log(adsManager.isCustomClickTrackingUsed()),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(event){adsManager.addEventListener(event,_this.onAdEvent,!1,_this)});try{this.adContent.style.display="block";var width=window.innerWidth,height=window.innerHeight;this.adsManager.init(width,height,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){null!==_this.adsManager&&(console.log("Resizing ad size"),_this.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL))},window.addEventListener("resize",this.resizeListener)}catch(adError){console.log("Adsmanager error:",adError),this.onAdError(adError)}},Ima3$$1.prototype.onAdEvent=function(adEvent){switch(console.log("onAdEvent",adEvent),adEvent.type){case google.ima.AdEvent.Type.CLICK:this.adManager.emit(exports.AdEvents.AD_CLICKED);break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var ad=adEvent.getAd();console.log("is ad linear?",ad.isLinear()),ad.isLinear()||this.onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},Ima3$$1.prototype.onAdError=function(error){console.log("gneric ad error",error),null!==this.adsManager&&(this.adsManager.destroy(),null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},Ima3$$1.prototype.onContentPauseRequested=function(){console.log("onContentPauseRequested",arguments),this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},Ima3$$1.prototype.onContentResumeRequested=function(){console.log("onContentResumeRequested",arguments),"undefined"!=typeof google&&(this.adContent.style.display="none"),this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},Ima3$$1.prototype.parseCustomParams=function(customParams){if(void 0===customParams)return"";var customDataString="";for(var key in customParams){if(customParams.hasOwnProperty(key))0<customDataString.length&&(customDataString+="&"),customDataString+=key+"="+(Array.isArray(customParams[key])?customParams[key].join(","):customParams[key])}return"&cust_params="+encodeURIComponent(customDataString)},Ima3$$1.prototype.areAdsEnabled=function(){var _this=this,test=document.createElement("div");test.innerHTML="&nbsp;",test.className="adsbox",test.style.position="absolute",test.style.fontSize="10px",document.body.appendChild(test);window.setTimeout(function(){var enabled;_this.adsEnabled=(enabled=!0,0===test.offsetHeight&&(enabled=!1),test.parentNode&&test.parentNode.removeChild(test),enabled)},100)},Ima3$$1}();(AdEvents=exports.AdEvents||(exports.AdEvents={})).CONTENT_PAUSED="onContentPaused",AdEvents.CONTENT_RESUMED="onContentResumed",AdEvents.AD_PROGRESSION="onAdProgression",AdEvents.AD_DISABLED="onAdsDisabled",AdEvents.AD_CLICKED="onAdClicked",AdEvents.AD_REWARDED="onAdRewardGranted",AdEvents.BANNER_SHOWN="onBannerShown",AdEvents.BANNER_HIDDEN="onBannerHidden",AdEvents.AD_LOADED="onAdLoaded",AdEvents.AD_PROVIDER_LOADED="onAdProviderLoaded",(AdType=exports.AdType||(exports.AdType={}))[AdType.interstitial=0]="interstitial",AdType[AdType.rewarded=1]="rewarded",AdType[AdType.banner=2]="banner";var H5AdWrapper=function(_super){function H5AdWrapper(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.bannerActive=!1,_this.provider=null,_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(H5AdWrapper,_super),H5AdWrapper.prototype.setAdProvider=function(provider){this.provider=provider,this.provider.setManager(this)},H5AdWrapper.prototype.showAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.showAd.apply(this.provider,args)},H5AdWrapper.prototype.createBanner=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return this.provider.loadBanner.apply(this.provider,args)},H5AdWrapper.prototype.loadBanner=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return"function"==typeof this.provider.loadBanner?this.provider.loadBanner.apply(this.provider,args):null},H5AdWrapper.prototype.preloadAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.preloadAd.apply(this.provider,args)},H5AdWrapper.prototype.destroyAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.destroyAd.apply(this.provider,args)},H5AdWrapper.prototype.hideAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.hideAd.apply(this.provider,args)},H5AdWrapper.prototype.adsEnabled=function(){if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return this.provider.adsEnabled},H5AdWrapper.prototype.adAvailable=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return args.unshift(adType),this.provider.adAvailable.apply(this.provider,args)},H5AdWrapper}(eventemitter3),adWrapper=new H5AdWrapper;exports.H5AdWrapper=H5AdWrapper,exports.adWrapper=adWrapper,exports.CocoonAds=CocoonAds$$1,exports.CordovaGamedistribution=CordovaGamedistribution$$1,exports.CordovaGamedock=CordovaGamedock$$1,exports.CordovaHeyzap=CordovaHeyzap$$1,exports.CordovaIronSource=CordovaIronSource$$1,exports.GameDistribution=GameDistribution$$1,exports.GameDistributionBanner=GameDistributionBanner$$1,exports.Ima3=Ima3$$1,Object.defineProperty(exports,"__esModule",{value:!0})}),function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).i18nextBrowserLanguageDetector=o()}(this,function(){"use strict";function e(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=[],t=o.forEach,n=o.slice;function i(e){return t.call(n.call(arguments,1),function(o){if(o)for(var t in o)void 0===e[t]&&(e[t]=o[t])}),e}var a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,s=function(e,o,t,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*t*1e3)),n&&(i.domain=n),document.cookie=function(e,o,t){var n=t||{};n.path=n.path||"/";var i=e+"="+encodeURIComponent(o);if(0<n.maxAge){var r=n.maxAge-0;if(isNaN(r))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(r)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}(e,encodeURIComponent(o),i)},l={name:"cookie",lookup:function(e){var o;if(e.lookupCookie&&"undefined"!=typeof document){var t=function(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(o))return i.substring(o.length,i.length)}return null}(e.lookupCookie);t&&(o=t)}return o},cacheUserLanguage:function(e,o){o.lookupCookie&&"undefined"!=typeof document&&s(o.lookupCookie,e,o.cookieMinutes,o.cookieDomain,o.cookieOptions)}},c={name:"querystring",lookup:function(e){var o;if("undefined"!=typeof window)for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("=");0<i&&t[n].substring(0,i)===e.lookupQuerystring&&(o=t[n].substring(i+1))}return o}},p=null,d=function(){if(null!==p)return p;try{p="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){p=!1}return p},f={name:"localStorage",lookup:function(e){var o;if(e.lookupLocalStorage&&d()){var t=window.localStorage.getItem(e.lookupLocalStorage);t&&(o=t)}return o},cacheUserLanguage:function(e,o){o.lookupLocalStorage&&d()&&window.localStorage.setItem(o.lookupLocalStorage,e)}},g=null,h=function(){if(null!==g)return g;try{g="undefined"!==window&&null!==window.sessionStorage,window.sessionStorage.setItem("i18next.translate.boo","foo"),window.sessionStorage.removeItem("i18next.translate.boo")}catch(e){g=!1}return g},m={name:"sessionStorage",lookup:function(e){var o;if(e.lookupSessionStorage&&h()){var t=window.sessionStorage.getItem(e.lookupSessionStorage);t&&(o=t)}return o},cacheUserLanguage:function(e,o){o.lookupSessionStorage&&h()&&window.sessionStorage.setItem(o.lookupSessionStorage,e)}},v={name:"navigator",lookup:function(e){var o=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var t=0;t<navigator.languages.length;t++)o.push(navigator.languages[t]);navigator.userLanguage&&o.push(navigator.userLanguage),navigator.language&&o.push(navigator.language)}return 0<o.length?o:void 0}},k={name:"htmlTag",lookup:function(e){var o,t=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return t&&"function"==typeof t.getAttribute&&(o=t.getAttribute("lang")),o}},w={name:"path",lookup:function(e){var o;if("undefined"!=typeof window){var t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(t instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof t[e.lookupFromPathIndex])return;o=t[e.lookupFromPathIndex].replace("/","")}else o=t[0].replace("/","")}return o}},S={name:"subdomain",lookup:function(e){var o;if("undefined"!=typeof window){var t=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);t instanceof Array&&(o="number"==typeof e.lookupFromSubdomainIndex?t[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):t[0].replace("http://","").replace("https://","").replace(".",""))}return o}},y=function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),this.type="languageDetector",this.detectors={},this.init(e,t)}var n;return n=[{key:"init",value:function(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=i(o,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=t,this.addDetector(l),this.addDetector(c),this.addDetector(f),this.addDetector(m),this.addDetector(v),this.addDetector(k),this.addDetector(w),this.addDetector(S)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var o=this;e||(e=this.options.order);var t=[];return e.forEach(function(e){if(o.detectors[e]){var n=o.detectors[e].lookup(o.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}}),this.services.languageUtils.getBestMatchFromCodes?t:0<t.length?t[0]:null}},{key:"cacheUserLanguage",value:function(e,o){var t=this;o||(o=this.options.caches),o&&(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(e)||o.forEach(function(o){t.detectors[o]&&t.detectors[o].cacheUserLanguage(e,t.options)}))}}],e(o.prototype,n),o}();return y.type="languageDetector",y}),function(global){var NativePromise=global.Promise,nativePromiseSupported=NativePromise&&"resolve"in NativePromise&&"reject"in NativePromise&&"all"in NativePromise&&"race"in NativePromise&&function(){var resolve;return new NativePromise(function(r){resolve=r}),"function"==typeof resolve}();"undefined"!=typeof exports&&exports?(exports.Promise=nativePromiseSupported?NativePromise:Promise,exports.Polyfill=Promise):"function"==typeof define&&define.amd?define(function(){return nativePromiseSupported?NativePromise:Promise}):nativePromiseSupported||(global.Promise=Promise);var PENDING="pending",SEALED="sealed",FULFILLED="fulfilled",REJECTED="rejected",NOOP=function(){};function isArray(value){return"[object Array]"===Object.prototype.toString.call(value)}var asyncTimer,asyncSetTimer="undefined"!=typeof setImmediate?setImmediate:setTimeout,asyncQueue=[];function asyncFlush(){for(var i=0;i<asyncQueue.length;i++)asyncQueue[i][0](asyncQueue[i][1]);asyncTimer=!(asyncQueue=[])}function asyncCall(callback,arg){asyncQueue.push([callback,arg]),asyncTimer||(asyncTimer=!0,asyncSetTimer(asyncFlush,0))}function invokeCallback(subscriber){var owner=subscriber.owner,settled=owner.state_,value=owner.data_,callback=subscriber[settled],promise=subscriber.then;if("function"==typeof callback){settled=FULFILLED;try{value=callback(value)}catch(e){reject(promise,e)}}handleThenable(promise,value)||(settled===FULFILLED&&resolve(promise,value),settled===REJECTED&&reject(promise,value))}function handleThenable(promise,value){var resolved;try{if(promise===value)throw new TypeError("A promises callback cannot return that same promise.");if(value&&("function"==typeof value||"object"==typeof value)){var then=value.then;if("function"==typeof then)return then.call(value,function(val){resolved||(resolved=!0,value!==val?resolve(promise,val):fulfill(promise,val))},function(reason){resolved||(resolved=!0,reject(promise,reason))}),!0}}catch(e){return resolved||reject(promise,e),!0}return!1}function resolve(promise,value){promise!==value&&handleThenable(promise,value)||fulfill(promise,value)}function fulfill(promise,value){promise.state_===PENDING&&(promise.state_=SEALED,promise.data_=value,asyncCall(publishFulfillment,promise))}function reject(promise,reason){promise.state_===PENDING&&(promise.state_=SEALED,promise.data_=reason,asyncCall(publishRejection,promise))}function publish(promise){var callbacks=promise.then_;promise.then_=void 0;for(var i=0;i<callbacks.length;i++)invokeCallback(callbacks[i])}function publishFulfillment(promise){promise.state_=FULFILLED,publish(promise)}function publishRejection(promise){promise.state_=REJECTED,publish(promise)}function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("Promise constructor takes a function argument");if(this instanceof Promise==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(resolver,promise){function rejectPromise(reason){reject(promise,reason)}try{resolver(function(value){resolve(promise,value)},rejectPromise)}catch(e){rejectPromise(e)}}(resolver,this)}Promise.prototype={constructor:Promise,state_:PENDING,then_:null,data_:void 0,then:function(onFulfillment,onRejection){var subscriber={owner:this,then:new this.constructor(NOOP),fulfilled:onFulfillment,rejected:onRejection};return this.state_===FULFILLED||this.state_===REJECTED?asyncCall(invokeCallback,subscriber):this.then_.push(subscriber),subscriber.then},catch:function(onRejection){return this.then(null,onRejection)}},Promise.all=function(promises){if(!isArray(promises))throw new TypeError("You must pass an array to Promise.all().");return new this(function(resolve,reject){var results=[],remaining=0;function resolver(index){return remaining++,function(value){results[index]=value,--remaining||resolve(results)}}for(var promise,i=0;i<promises.length;i++)(promise=promises[i])&&"function"==typeof promise.then?promise.then(resolver(i),reject):results[i]=promise;remaining||resolve(results)})},Promise.race=function(promises){if(!isArray(promises))throw new TypeError("You must pass an array to Promise.race().");return new this(function(resolve,reject){for(var promise,i=0;i<promises.length;i++)(promise=promises[i])&&"function"==typeof promise.then?promise.then(resolve,reject):resolve(promise)})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===this?value:new this(function(resolve){resolve(value)})},Promise.reject=function(reason){return new this(function(resolve,reject){reject(reason)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=60)}([function(t,e,n){"use strict";n.r(e),n.d(e,"BaseTextureCache",function(){return U}),n.d(e,"CanvasRenderTarget",function(){return G}),n.d(e,"DATA_URI",function(){return z}),n.d(e,"ProgramCache",function(){return F}),n.d(e,"TextureCache",function(){return j}),n.d(e,"clearTextureCache",function(){return X}),n.d(e,"correctBlendMode",function(){return x}),n.d(e,"createIndicesForQuads",function(){return P}),n.d(e,"decomposeDataUri",function(){return Y}),n.d(e,"deprecation",function(){return N}),n.d(e,"destroyTextureCache",function(){return V}),n.d(e,"determineCrossOrigin",function(){return q}),n.d(e,"getBufferType",function(){return O}),n.d(e,"getResolutionOfUrl",function(){return K}),n.d(e,"hex2rgb",function(){return m}),n.d(e,"hex2string",function(){return v}),n.d(e,"interleaveTypedArrays",function(){return A}),n.d(e,"isPow2",function(){return C}),n.d(e,"isWebGLSupported",function(){return g}),n.d(e,"log2",function(){return M}),n.d(e,"nextPow2",function(){return I}),n.d(e,"premultiplyBlendMode",function(){return b}),n.d(e,"premultiplyRgba",function(){return w}),n.d(e,"premultiplyTint",function(){return T}),n.d(e,"premultiplyTintToRgba",function(){return S}),n.d(e,"removeItems",function(){return R}),n.d(e,"rgb2hex",function(){return _}),n.d(e,"sayHello",function(){return f}),n.d(e,"sign",function(){return k}),n.d(e,"skipHello",function(){return d}),n.d(e,"string2hex",function(){return y}),n.d(e,"trimCanvas",function(){return H}),n.d(e,"uid",function(){return L});var i=n(4);n.d(e,"isMobile",function(){return i.a});var r=n(39),o=n.n(r);n.d(e,"EventEmitter",function(){return o.a});var s=n(40),a=n.n(s);n.d(e,"earcut",function(){return a.a});var u=n(28),h=n.n(u);n.d(e,"url",function(){return h.a});var l=n(1);i.b.RETINA_PREFIX=/@([0-9\.]+)x/;var c,p=!(i.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0);function d(){p=!0}function f(t){var e;if(!p){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var n=["\n %c %c %c PixiJS 5.3.9 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,n)}else window.console&&window.console.log("PixiJS 5.3.9 - "+t+" - http://www.pixijs.com/");p=!0}}function g(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:i.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,r}catch(t){return!1}}()),c}function m(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function v(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function y(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function _(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var b=function(){for(var t=[],e=[],n=0;n<32;n++)e[t[n]=n]=n;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function x(t,e){return b[e?1:0][t]}function w(t,e,n,i){return n=n||new Float32Array(4),i||void 0===i?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function T(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,i=t>>8&255,r=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(r*e+.5|0)}function S(t,e,n,i){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(i||void 0===i)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function P(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var i=0,r=0;i<n;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}function O(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var E={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function A(t,e){for(var n=0,i=0,r={},o=0;o<t.length;o++)i+=e[o],n+=t[o].length;var s=new ArrayBuffer(4*n),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],l=t[o],c=O(l);r[c]||(r[c]=new E[c](s)),a=r[c];for(var p=0;p<l.length;p++)a[(p/h|0)*i+u+p%h]=l[p];u+=h}return new Float32Array(s)}function I(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function C(t){return!(t&t-1||!t)}function M(t){var e=(65535<t?1:0)<<4,n=(255<(t>>>=e)?1:0)<<3;return e|=n,e|=n=(15<(t>>>=n)?1:0)<<2,(e|=n=(3<(t>>>=n)?1:0)<<1)|(t>>>=n)>>1}function R(t,e,n){var i,r=t.length;if(!(r<=e||0===n)){var o=r-(n=r<e+n?r-e:n);for(i=e;i<o;++i)t[i]=t[i+n];t.length=o}}function k(t){return 0===t?0:t<0?-1:1}var D=0;function L(){return++D}var B={};function N(t,e,n){if(void 0===n&&(n=3),!B[e]){var i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),B[e]=!0}}var F={},j=Object.create(null),U=Object.create(null);function V(){var t;for(t in j)j[t].destroy();for(t in U)U[t].destroy()}function X(){var t;for(t in j)delete j[t];for(t in U)delete U[t]}var G=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||i.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function H(t){var e,n,i,r=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,r,o).data,u=a.length,h={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<u;e+=4)0!==a[e+3]&&(n=e/4%r,i=~~(e/4/r),null===h.top&&(h.top=i),(null===h.left||n<h.left)&&(h.left=n),(null===h.right||h.right<n)&&(h.right=n+1),(null===h.bottom||h.bottom<i)&&(h.bottom=i));return null!==h.top&&(r=h.right-h.left,o=h.bottom-h.top+1,l=s.getImageData(h.left,h.top,r,o)),{height:o,width:r,data:l}}var W,z=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Y(t){var e=z.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function q(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,W||(W=document.createElement("a")),W.href=t;var n=Object(u.parse)(W.href),i=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&i&&n.protocol===e.protocol?"":"anonymous"}function K(t,e){var n=i.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},function(t,e,n){"use strict";var i,r,o,s,a,u,h,l,c,p,d,f,g,m,v,y,_;n.d(e,"a",function(){return f}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return g}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return m}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return _}),n.d(e,"l",function(){return v}),n.d(e,"m",function(){return r}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return l}),n.d(e,"q",function(){return p}),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(i||(i={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(r||(r={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(s||(s={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(h||(h={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(c||(c={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(d||(d={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(f||(f={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(m||(m={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(_||(_={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return r}),n.d(e,"g",function(){return p}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return o}),n.d(e,"j",function(){return a}),n.d(e,"k",function(){return c}),n.d(e,"l",function(){return i}),n.d(e,"m",function(){return T}),n.d(e,"n",function(){return w});var i,r=2*Math.PI,o=180/Math.PI,s=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(i||(i={}));var a=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=i.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=i,this.height=Math.max(r-i,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=i,this.height=r-i,this},t}(),u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=i.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,r=this.y-e;return(i*=i)+(r*=r)<=n},t.prototype.getBounds=function(){return new a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),h=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r,this.type=i.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return(n*=n)+(i*=i)<=1},t.prototype.getBounds=function(){return new a(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),l=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var o=[],s=0,a=r.length;s<a;s++)o.push(r[s].x,r[s].y);r=o}this.points=r,this.type=i.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,i=this.points.length/2,r=0,o=i-1;r<i;o=r++){var s=this.points[2*r],a=this.points[2*r+1],u=this.points[2*o],h=this.points[2*o+1];e<a!=e<h&&t<(e-a)/(h-a)*(u-s)+s&&(n=!n)}return n},t}(),c=function(){function t(t,e,n,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=n,this.height=r,this.radius=o,this.type=i.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),i=e-(this.y+this.radius),r=this.radius*this.radius;if(n*n+i*i<=r)return!0;if((n=t-(this.x+this.width-this.radius))*n+i*i<=r)return!0;if(n*n+(i=e-(this.y+this.height-this.radius))*i<=r)return!0;if((n=t-(this.x+this.radius))*n+i*i<=r)return!0}return!1},t}(),p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),d=function(){function t(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,n,i,r,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,i,r,o){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0),n[8]=1,n},t.prototype.apply=function(t,e){e=e||new p;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new p;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,r=t.y;return e.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,o=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,i=this.c,r=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*r,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*r,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,n,i,r,o,s,a,u){return this.a=Math.cos(s+u)*r,this.b=Math.sin(s+u)*r,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(n*this.a+i*this.c),this.ty=e-(n*this.b+i*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,i=this.c,o=this.d,s=-Math.atan2(-i,o),a=Math.atan2(n,e),u=Math.abs(s+a);return u<1e-5||Math.abs(r-u)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,o=t*i-e*n;return this.a=i/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],m=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],y=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],_=[],b=[],x=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];_.push(e);for(var n=0;n<16;n++)for(var i=x(g[t]*g[n]+v[t]*m[n]),r=x(m[t]*g[n]+y[t]*m[n]),o=x(g[t]*v[n]+v[t]*y[n]),s=x(m[t]*v[n]+y[t]*y[n]),a=0;a<16;a++)if(g[a]===i&&m[a]===r&&v[a]===o&&y[a]===s){e.push(a);break}}for(t=0;t<16;t++){var u=new f;u.set(g[t],m[t],v[t],y[t],0,0),b.push(u)}}();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return g[t]},uY:function(t){return m[t]},vX:function(t){return v[t]},vY:function(t){return y[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return _[t][e]},sub:function(t,e){return _[t][w.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?w.S:w.N:2*Math.abs(e)<=Math.abs(t)?0<t?w.E:w.W:0<e?0<t?w.SE:w.SW:0<t?w.NE:w.NW},matrixAppendRotationInv:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=b[w.inv(e)];r.tx=n,r.ty=i,t.append(r)}},T=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new d(this.onChange,this,0,0),this.scale=new d(this.onChange,this,1,1),this.pivot=new d(this.onChange,this,0,0),this.skew=new d(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return de}),n.d(e,"b",function(){return oe}),n.d(e,"c",function(){return N}),n.d(e,"d",function(){return C}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return le}),n.d(e,"g",function(){return ge}),n.d(e,"h",function(){return ye}),n.d(e,"i",function(){return _e}),n.d(e,"j",function(){return fe}),n.d(e,"k",function(){return ce}),n.d(e,"l",function(){return j}),n.d(e,"m",function(){return Lt}),n.d(e,"n",function(){return Z}),n.d(e,"o",function(){return I}),n.d(e,"p",function(){return nt}),n.d(e,"q",function(){return Kt}),n.d(e,"r",function(){return ee}),n.d(e,"s",function(){return W}),n.d(e,"t",function(){return qt}),n.d(e,"u",function(){return ut}),n.d(e,"v",function(){return J}),n.d(e,"w",function(){return Rt}),n.d(e,"x",function(){return z}),n.d(e,"y",function(){return Y}),n.d(e,"z",function(){return L}),n.d(e,"A",function(){return B}),n.d(e,"B",function(){return se}),n.d(e,"C",function(){return kt}),n.d(e,"D",function(){return Ft}),n.d(e,"E",function(){return Dt}),n.d(e,"F",function(){return E}),n.d(e,"G",function(){return k}),n.d(e,"H",function(){return Nt}),n.d(e,"I",function(){return M}),n.d(e,"J",function(){return K}),n.d(e,"K",function(){return pe}),n.d(e,"L",function(){return ae}),n.d(e,"M",function(){return It}),n.d(e,"N",function(){return he}),n.d(e,"O",function(){return ue}),n.d(e,"P",function(){return O}),n.d(e,"Q",function(){return ie}),n.d(e,"R",function(){return Tt});var i=n(4),r=n(1),o=n(0),s=n(11),a=n(8),u=n(2);i.b.PREFER_ENV=o.isMobile.any?r.f.WEBGL:r.f.WEBGL2,i.b.STRICT_TEXTURE_CACHE=!1;var h=[];function l(t,e){if(!t)return null;var n="";if("string"==typeof t){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(n=i[1].toLowerCase())}for(var r=h.length-1;0<=r;--r){var o=h[r];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new s.a("setRealSize"),this.onUpdate=new s.a("update"),this.onError=new s.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),f=function(t){function e(e,n){var i=this,r=n||{},o=r.width,s=r.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(i=t.call(this,o,s)||this).data=e,i}return p(e,t),e.prototype.upload=function(t,e,n){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK),n.width===e.width&&n.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,i.texImage2D(e.target,0,n.internalFormat,e.width,e.height,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(d),g={scaleMode:r.n.NEAREST,format:r.g.RGBA,alphaMode:r.a.NPM},m=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var s=t.call(this)||this,a=(n=n||{}).alphaMode,u=n.mipmap,h=n.anisotropicLevel,c=n.scaleMode,p=n.width,f=n.height,g=n.wrapMode,m=n.format,v=n.type,y=n.target,_=n.resolution,b=n.resourceOptions;return!e||e instanceof d||((e=l(e,b)).internal=!0),s.width=p||0,s.height=f||0,s.resolution=_||i.b.RESOLUTION,s.mipmap=void 0!==u?u:i.b.MIPMAP_TEXTURES,s.anisotropicLevel=void 0!==h?h:i.b.ANISOTROPIC_LEVEL,s.wrapMode=g||i.b.WRAP_MODE,s.scaleMode=void 0!==c?c:i.b.SCALE_MODE,s.format=m||r.g.RGBA,s.type=v||r.p.UNSIGNED_BYTE,s.target=y||r.o.TEXTURE_2D,s.alphaMode=void 0!==a?a:r.a.UNPACK,void 0!==n.premultiplyAlpha&&(s.premultiplyAlpha=n.premultiplyAlpha),s.uid=Object(o.uid)(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=0<p&&0<f,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(e),s}return p(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(o.isPow2)(this.realWidth)&&Object(o.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,r){void 0===r&&(r=i.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;a=s?t:(t._pixiId||(t._pixiId="pixiid_"+Object(o.uid)()),t._pixiId);var u=o.BaseTextureCache[a];if(s&&r&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,i,o){t=t||new Float32Array(n*i*4);var s=new f(t,{width:n,height:i}),a=t instanceof Float32Array?r.p.FLOAT:r.p.UNSIGNED_BYTE;return new e(s,Object.assign(g,o||{width:n,height:i,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return-1<n&&e.textureCacheIds.splice(n,1),delete o.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete o.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(o.EventEmitter),v=function(t){function e(e,n){var i=this,r=n||{},o=r.width,s=r.height;(i=t.call(this,o,s)||this).items=[],i.itemDirtyIds=[];for(var a=0;a<e;a++){var u=new m;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return p(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof d?this.addResourceAt(t[n],n):this.addResourceAt(l(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(e).then(function(){var e=t.items[0],n=e.realWidth,i=e.realHeight;return t.resize(n,i),Promise.resolve(t)}),this._load},e}(d),y=function(t){function e(e,n){var i,r,o=this,s=n||{},a=s.width,u=s.height;return r=Array.isArray(e)?(i=e).length:e,o=t.call(this,r,{width:a,height:u})||this,i&&o.initFromArray(i,n),o}return p(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.o.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var i=this.length,r=this.itemDirtyIds,o=this.items,s=t.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var u=o[a];r[a]<u.dirtyId&&(r[a]=u.dirtyId,u.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,u.resource.width,u.resource.height,1,e.format,e.type,u.resource.source))}return!0},e}(v),_=function(t){function e(e){var n=this,i=e,r=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return(n=t.call(this,r,o)||this).source=e,n.noSubImage=!1,n}return p(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(o.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,i){var o=t.gl,s=e.realWidth,a=e.realHeight;return i=i||this.source,o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==s||n.height!==a?(n.width=s,n.height=a,o.texImage2D(e.target,0,e.format,e.format,e.type,i)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(n,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(d),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(_),x=function(t){function e(n,i){var o=this,s=i||{},a=s.width,u=s.height,h=s.autoLoad,l=s.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:a,height:u})||this;for(var c=0;c<e.SIDES;c++)o.items[c].target=r.o.TEXTURE_CUBE_MAP_POSITIVE_X+c;return o.linkBaseTexture=!1!==l,n&&o.initFromArray(n,i),!1!==h&&o.load(),o}return p(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.o.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=r.o.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,i){for(var r=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];r[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,i),r[o]=s.dirtyId):r[o]<-1&&(t.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),r[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(v),w=function(t){function e(e,n){var r=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;_.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:i.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return p(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,n){var i=e.source;e.url=i.src;var r=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?r():(i.onload=r,i.onerror=function(t){n(t),e.onError.emit(t)})})),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===r.a.UNPACK?"premultiply":"none"}).then(function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))}),this._process):Promise.resolve(this)},e.prototype.upload=function(e,n,i){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,i,this.bitmap),!this.preserveBitmap){var r=!0,o=n._glTextures;for(var s in o){var a=o[s];if(a!==i&&a.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(_),T=function(t){function e(e,n){var i=this;return n=n||{},(i=t.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=e,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,!1!==n.autoLoad&&i.load(),i}return p(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;_.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,i=e.height;if(!n||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=n*t.scale,s=i*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/i*n,s=t._overrideHeight||t._overrideWidth/n*i),r=Math.round(r),s=Math.round(s);var a=t.source;a.width=r,a.height=s,a._pixiId="canvas_"+Object(o.uid)(),a.getContext("2d").drawImage(e,0,0,n,i,0,0,r,s),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(_),S=function(t){function e(n,i){var r=this;if(i=i||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var s=n[0].src||n[0];_.crossOrigin(o,s,i.crossorigin);for(var a=0;a<n.length;++a){var u=document.createElement("source"),h=n[a],l=h.src,c=h.mime,p=(l=l||n[a]).split("?").shift().toLowerCase(),d=p.substr(p.lastIndexOf(".")+1);c=c||e.MIME_TYPES[d]||"video/"+d,u.src=l,u.type=c,o.appendChild(u)}n=o}return(r=t.call(this,n)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=i.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==i.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==i.autoLoad&&r.load(),r}return p(e,t),e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var n=a.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,e.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&a.a.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return t instanceof HTMLVideoElement||-1<e.TYPES.indexOf(n)},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(_),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(_);h.push(w,P,b,S,T,f,x,y);var O={Resource:d,BaseImageResource:_,INSTALLED:h,autoDetectResource:l,AbstractMultiResource:v,ArrayResource:y,BufferResource:f,CanvasResource:b,CubeResource:x,ImageResource:w,SVGResource:T,VideoResource:S,ImageBitmapResource:P},E=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.upload=function(t,e,n){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK),n.width===e.width&&n.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(f),I=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new s.a("disposeFramebuffer"),this.multisample=r.k.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new m(null,{scaleMode:r.n.NEAREST,resolution:1,mipmap:r.j.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new m(new A(null,{width:this.width,height:this.height}),{scaleMode:r.n.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:r.j.OFF,format:r.g.DEPTH_COMPONENT,type:r.p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],r=i.resolution;i.setSize(t/r,e/r)}this.depthTexture&&(r=this.depthTexture.resolution,this.depthTexture.setSize(t/r,e/r))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),C=function(t){function e(e){var n=this;"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});n=t.call(this,null,e)||this;var a=e||{},u=a.width,h=a.height;return n.mipmap=0,n.width=Math.ceil(u)||100,n.height=Math.ceil(h)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new I(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return p(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(m),M=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var i=e.width,r=e.height;if(n){var o=t.width/2/i,s=t.height/2/r,a=t.x/i+o,h=t.y/r+s;n=u.n.add(n,u.n.NW),this.x0=a+o*u.n.uX(n),this.y0=h+s*u.n.uY(n),n=u.n.add(n,2),this.x1=a+o*u.n.uX(n),this.y1=h+s*u.n.uY(n),n=u.n.add(n,2),this.x2=a+o*u.n.uX(n),this.y2=h+s*u.n.uY(n),n=u.n.add(n,2),this.x3=a+o*u.n.uX(n),this.y3=h+s*u.n.uY(n)}else this.x0=t.x/i,this.y0=t.y/r,this.x1=(t.x+t.width)/i,this.y1=t.y/r,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/r,this.x3=t.x/i,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),R=new M,k=function(t){function e(n,i,r,o,s,a){var h=t.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new u.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),h.baseTexture=n,h._frame=i,h.trim=o,h.valid=!1,h._uvs=R,h.uvMatrix=null,h.orig=r||i,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new u.g(a.x,a.y):new u.g(0,0),h._updateID=0,h.textureCacheIds=[],n.valid?h.noFrame?n.valid&&h.onBaseTextureUpdated(n):h.frame=i:n.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&n.on("update",h.onBaseTextureUpdated,h),h}return p(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture;n&&n.url&&o.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===R&&(this._uvs=new M),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=i.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;a=s?t:(t._pixiId||(t._pixiId="pixiid_"+Object(o.uid)()),t._pixiId);var u=o.TextureCache[a];if(s&&r&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||(n.resolution||(n.resolution=Object(o.getResolutionOfUrl)(t)),(u=new e(new m(t,n))).baseTexture.cacheId=a,m.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,n){var i=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),r=e.from(t,Object.assign({resourceOptions:i},n),!1),o=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):o.load().then(function(){return Promise.resolve(r)})},e.fromBuffer=function(t,n,i,r){return new e(m.fromBuffer(t,n,i,r))},e.fromLoader=function(t,n,r){var s=new w(t);s.url=n;var a=new e(new m(s,{scaleMode:i.b.SCALE_MODE,resolution:Object(o.getResolutionOfUrl)(n)}));return r||(r=n),m.addToCache(a.baseTexture,r),e.addToCache(a,r),r!==n&&(m.addToCache(a.baseTexture,n),e.addToCache(a,n)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return-1<n&&e.textureCacheIds.splice(n,1),delete o.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)o.TextureCache[t.textureCacheIds[i]]===t&&delete o.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,i=t.width,r=t.height,o=e+i>this.baseTexture.width,s=n+r>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,h="Y: "+n+" + "+r+" = "+(n+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=i&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(o.EventEmitter);function D(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}k.EMPTY=new k(new m),D(k.EMPTY),D(k.EMPTY.baseTexture),k.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new k(new m(new b(t)))}(),D(k.WHITE),D(k.WHITE.baseTexture);var L=function(t){function e(e,n){var i=this,r=null;if(!(e instanceof C)){var o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly."),r=arguments[0],n=null,e=new C({width:o,height:s,scaleMode:a,resolution:u})}return(i=t.call(this,e,n)||this).legacyRenderer=r,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return p(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new C(t))},e}(k),B=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var n=new C(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new L(n)},t.prototype.getOptimalTexture=function(e,n,i){void 0===i&&(i=1);var r=t.SCREEN_KEY;e*=i,n*=i,this.enableFullScreen&&e===this._pixelsWidth&&n===this._pixelsHeight||(r=(65535&(e=Object(o.nextPow2)(e)))<<16|65535&(n=Object(o.nextPow2)(n))),this.texturePool[r]||(this.texturePool[r]=[]);var s=this.texturePool[r].pop();return s||(s=this.createTexture(e,n)),s.filterPoolKey=r,s.setResolution(i),s},t.prototype.getFilterTexture=function(t,e){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var n=t.SCREEN_KEY,i=this.texturePool[n];if(this.enableFullScreen=0<e.width&&0<e.height,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),N=function(){function t(t,e,n,i,r,o,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=n,this.type=i,this.stride=r,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,i,r,o){return new t(e,n,i,r,o)},t}(),F=0,j=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=F++,this.disposeRunner=new s.a("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function U(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var V={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},X={5126:4,5123:2,5121:1},G=0,H={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},W=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=G++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new s.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,i,r,o,s,a){if(void 0===n&&(n=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof j||(e instanceof Array&&(e=new Float32Array(e)),e=new j(e));var u=t.split("|");if(1<u.length){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,n,i,r);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new N(l,n,i,r,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof j||(t instanceof Array&&(t=new Uint16Array(t)),t=new j(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],i=new j;for(t in this.attributes){var r=this.attributes[t],o=this.buffers[r.buffer];e.push(o.data),n.push(r.size*X[r.type]/4),r.buffer=0}for(i.data=function(t,e){for(var n=0,i=0,r={},o=0;o<t.length;o++)i+=e[o],n+=t[o].length;var s=new ArrayBuffer(4*n),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],l=t[o],c=U(l);r[c]||(r[c]=new V[c](s)),a=r[c];for(var p=0;p<l.length;p++)a[(p/h|0)*i+u+p%h]=l[p];u+=h}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new j(this.buffers[n].data.slice(0));for(var n in this.attributes){var i=this.attributes[n];e.attributes[n]=new N(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n,i=new t,r=[],o=[],s=[],a=0;a<e.length;a++){n=e[a];for(var u=0;u<n.buffers.length;u++)o[u]=o[u]||0,o[u]+=n.buffers[u].data.length,s[u]=0}for(a=0;a<n.buffers.length;a++)r[a]=new(H[U(n.buffers[a].data)])(o[a]),i.buffers[a]=new j(r[a]);for(a=0;a<e.length;a++)for(n=e[a],u=0;u<n.buffers.length;u++)r[u].set(n.buffers[u].data,s[u]),s[u]+=n.buffers[u].data.length;if(i.attributes=n.attributes,n.indexBuffer){i.indexBuffer=i.buffers[n.buffers.indexOf(n.indexBuffer)],i.indexBuffer.index=!0;var h=0,l=0,c=0,p=0;for(a=0;a<n.buffers.length;a++)if(n.buffers[a]!==n.indexBuffer){p=a;break}for(var a in n.attributes){var d=n.attributes[a];(0|d.buffer)===p&&(l+=d.size*X[d.type]/4)}for(a=0;a<e.length;a++){var f=e[a].indexBuffer.data;for(u=0;u<f.length;u++)i.indexBuffer.data[u+c]+=h;h+=n.buffers[p].data.length/l,c+=f.length}}return i},t}(),z=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return p(e,t),e}(W),Y=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new j(e.vertices),e.uvBuffer=new j(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return p(e,t),e.prototype.map=function(t,e){var n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+e.width/t.width,this.uvs[3]=i,this.uvs[4]=n+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=n,this.uvs[7]=i+e.height/t.height,n=e.x,i=e.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+e.width,this.vertices[3]=i,this.vertices[4]=n+e.width,this.vertices[5]=i+e.height,this.vertices[6]=n,this.vertices[7]=i+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(W),q=0,K=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=q++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,n,i){this.uniforms[e]=new t(n,i)},t.from=function(e,n){return new t(e,n)},t}(),Z=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Q=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultFilterStack=[{}],n.texturePool=new B,n.texturePool.setScreenSize(e.view),n.statePool=[],n.quad=new z,n.quadUv=new Y,n.tempRect=new u.j,n.activeState={},n.globalUniforms=new K({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return p(e,t),e.prototype.push=function(t,e){for(var n=this.renderer,i=this.defaultFilterStack,r=this.statePool.pop()||new Z,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,u=e[0].legacy,h=1;h<e.length;h++){var l=e[h];o=Math.min(o,l.resolution),s=this.useMaxPadding?Math.max(s,l.padding):s+l.padding,a=a&&l.autoFit,u=u||l.legacy}1===i.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),i.push(r),r.resolution=o,r.legacy=u,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(s),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(o),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,o),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var c=this.tempRect;c.width=r.sourceFrame.width,c.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,n.renderTexture.bind(r.renderTexture,r.sourceFrame,c),n.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=o[0]*e.resolution,s[1]=o[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=e.sourceFrame.width*o[2]-.5*s[2],a[3]=e.sourceFrame.height*o[3]-.5*s[3],e.legacy){var u=i.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,h.renderTexture,r.d.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,e.resolution);c.filterFrame=l.filterFrame;var p=0;for(p=0;p<n.length-1;++p){n[p].apply(this,l,c,r.d.CLEAR,e);var d=l;l=c,c=d}n[p].apply(this,l,h.renderTexture,r.d.BLEND,e),this.returnFilterTexture(l),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=r.d.CLEAR),t&&t.filterFrame){var n=this.tempRect;n.width=t.filterFrame.width,n.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,n)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?r.d.CLEAR:r.d.BLEND,Object(o.deprecation)("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===r.d.CLEAR||e===r.d.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,e,n,i){var o=this.renderer;this.bindAndClear(n,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.state.set(t.state),o.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(r.e.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(r.e.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,i=n.sourceFrame,r=n.destinationFrame,o=e._texture.orig,s=t.set(r.width,0,0,r.height,i.x,i.y),a=e.worldTransform.copyTo(u.d.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(t,e,n)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(E),J=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),$=function(t){function e(e){var n=t.call(this,e)||this;return n.emptyRenderer=new J(e),n.currentRenderer=n.emptyRenderer,n}return p(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,e,n,i){for(var r=t.elements,o=t.ids,s=t.count,a=0,u=0;u<s;u++){var h=r[u],l=h._batchLocation;if(0<=l&&l<i&&e[l]===h)o[u]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==n||c._batchLocation!==a){o[u]=a,e[h._batchLocation=a]=h;break}a++}}},e}(E),tt=0,et=function(t){function e(e){var n=t.call(this,e)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),e.view.addEventListener("webglcontextlost",n.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return p(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var n;if(i.b.PREFER_ENV>=r.f.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=i)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(E),nt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=r.k.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},it=new u.j,rt=function(t){function e(e){var n=t.call(this,e)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new I(10,10),n.msaaSamples=null,n}return p(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;i.b.PREFER_ENV===r.f.WEBGL_LEGACY&&(n=e=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var n=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++){var o=t.colorTextures[r];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,n,i){var r=this.viewport;r.width===n&&r.height===i&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=n,r.height=i,this.gl.viewport(t,e,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,n,i,o){void 0===o&&(o=r.c.COLOR|r.c.DEPTH);var s=this.gl;s.clearColor(t,e,n,i),s.clear(o)},e.prototype.initFramebuffer=function(t){var e=this.gl,n=new nt(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,r=0;r<i.length;r++)this.renderer.texture.bind(i[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<n.multisample&&(n.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n.msaaBuffer));for(var r=[],o=0;o<i;o++)if(!(0===o&&1<n.multisample)){var s=t.colorTextures[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,s.target,a._glTextures[this.CONTEXT_UID].texture,0),r.push(e.COLOR_ATTACHMENT0+o)}if(1<r.length&&e.drawBuffers(r),t.depthTexture&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)}n.stencil||!t.stencil&&!t.depth||(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,n=r.k.NONE;if(t<=1||null===e)return n;for(var i=0;i<e.length;i++)if(e[i]<=t){n=e[i];break}return 1===n&&(n=r.k.NONE),n},e.prototype.blit=function(t,e,n){var i=this.current,r=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===r.context.webGLVersion&&i){var a=i.glFramebuffers[s];if(a){if(!t){if(a.multisample<=1)return;a.blitFramebuffer||(a.blitFramebuffer=new I(i.width,i.height),a.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=a.blitFramebuffer).width=i.width,t.height=i.height}e||((e=it).width=i.width,e.height=i.height),n||(n=e);var u=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);0<=r&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(n.framebuffer),n.stencil&&i.deleteRenderbuffer(n.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var n=t.width,i=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n,i),e.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.j},e}(E),ot=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},st={5126:4,5123:2,5121:1},at=function(t){function e(e){var n=t.call(this,e)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return p(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;i.b.PREFER_ENV===r.f.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,i,r){return o.drawElementsInstancedANGLE(t,e,n,i,r)},t.drawArraysInstanced=function(t,e,n,i){return o.drawArraysInstancedANGLE(t,e,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},r=!0);var o=i[e.program.id]||this.initGeometryVao(t,e.program,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,n=0;n<t.buffers.length;n++){var i=t.buffers[n],r=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==r.updateID){r.updateID=i._updateID;var o=i.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,r.buffer),(this._boundBuffer=r).byteLength>=i.data.byteLength)e.bufferSubData(o,0,i.data);else{var s=i.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=i.data.byteLength,e.bufferData(o,i.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var n=t.attributes,i=e.attributeData;for(var r in i)if(!n[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var n=t.attributes,i=e.attributeData,r=["g",t.id];for(var o in n)i[o]&&r.push(o);return r.join("-")},e.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0),this.checkCompatibility(t,e);var i=this.gl,r=this.CONTEXT_UID,o=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],a=s[o];if(a)return s[e.id]=a;var u=t.buffers,h=t.attributes,l={},c={};for(var p in u)l[p]=0,c[p]=0;for(var p in h)!h[p].size&&e.attributeData[p]?h[p].size=e.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[h[p].buffer]+=h[p].size*st[h[p].type];for(var p in h){var d=h[p],f=d.size;void 0===d.stride&&(l[d.buffer]===f*st[d.type]?d.stride=0:d.stride=l[d.buffer]),void 0===d.start&&(d.start=c[d.buffer],c[d.buffer]+=f*st[d.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var g=0;g<u.length;g++){var m=u[g];m._glBuffers[r]||(m._glBuffers[r]=new ot(i.createBuffer()),(this.managedBuffers[m.id]=m).disposeRunner.add(this)),n&&m._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=a,s[e.id]=a,s[o]=a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(e||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),n){for(var o=0;o<r.length;o++){var s=r[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(r[o],e)}if(!e)for(var a in n)if("g"===a[0]){var u=n[a];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t);for(e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var n=this.gl,i=this.CONTEXT_UID,r=t.buffers,o=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var s=null;for(var a in o){var u=o[a],h=r[u.buffer]._glBuffers[i];if(e.attributeData[a]){s!==h&&(n.bindBuffer(n.ARRAY_BUFFER,h.buffer),s=h);var l=e.attributeData[a].location;if(n.enableVertexAttribArray(l),n.vertexAttribPointer(l,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(l,1)}}}},e.prototype.draw=function(t,e,n,i){var r=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(n||0)*s,i||1):r.drawElements(t,e||o.indexBuffer.data.length,a,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,n,e||o.getSize(),i||1):r.drawArrays(t,n,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(E),ut=function(){function t(t){void 0===t&&(t=null),this.type=r.i.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=r.i.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ht(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function lt(t,e,n,i){var r=ht(t,t.VERTEX_SHADER,e),o=ht(t,t.FRAGMENT_SHADER,n),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,o),i)for(var a in i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(n),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(r),t.deleteShader(o),s}function ct(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function pt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return ct(2*e);case"bvec3":return ct(3*e);case"bvec4":return ct(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var dt,ft={},gt=ft;function mt(){if(gt===ft||gt&&gt.isContextLost()){var t=document.createElement("canvas"),e=void 0;i.b.PREFER_ENV>=r.f.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),gt=e}return gt}function vt(t,e,n){if("precision"===t.substring(0,9))return n!==r.l.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;var i=e;return e===r.l.HIGH&&n!==r.l.HIGH&&(i=r.l.MEDIUM),"precision "+i+" float;\n"+t}var yt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _t(t){return yt[t]}var bt=null,xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function wt(t,e){if(!bt){var n=Object.keys(xt);bt={};for(var i=0;i<n.length;++i){var r=n[i];bt[t[r]]=xt[r]}}return bt[e]}var Ot,Tt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],St={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Pt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Et=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function At(t){for(var e="",n=0;n<t;++n)0<n&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}function It(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var i=Et.replace(/%forloop%/gi,At(t));if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}var Ct=0,Mt={},Rt=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=Ct++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Mt[o]?(Mt[o]++,o+="-"+Mt[o]):Mt[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=vt(this.vertexSrc,i.b.PRECISION_VERTEX,r.l.HIGH),this.fragmentSrc=vt(this.fragmentSrc,i.b.PRECISION_FRAGMENT,function(){if(!dt){dt=r.l.MEDIUM;var t=mt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);dt=e.precision?r.l.HIGH:r.l.MEDIUM}}return dt}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var n=mt();if(n){var i=lt(n,t,e);this.attributeData=this.getAttributeData(i,n),this.uniformData=this.getUniformData(i,n),n.deleteProgram(i)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var n={},i=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=e.getActiveAttrib(t,o),a=wt(e,s.type),u={type:a,name:s.name,size:_t(a),location:0};n[s.name]=u,i.push(u)}for(i.sort(function(t,e){return t.name>e.name?1:-1}),o=0;o<i.length;o++)i[o].location=o;return n},t.prototype.getUniformData=function(t,e){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;r++){var o=e.getActiveUniform(t,r),s=o.name.replace(/\[.*?\]$/,""),a=o.name.match(/\[.*?\]$/),u=wt(e,o.type);n[s]={type:u,size:o.size,isArray:a,value:pt(u,o.size)}}return n},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,i){var r=e+n,s=o.ProgramCache[r];return s||(o.ProgramCache[r]=s=new t(e,n,i)),s},t}(),kt=function(){function t(t,e){for(var n in this.program=t,this.uniformGroup=e?e instanceof K?e:new K(e):new K({}),t.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var i=e.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,i){return new t(Rt.from(e,n),i)},t}(),Dt=function(){function t(){this.data=0,this.blendMode=r.b.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==r.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Lt=function(t){function e(n,r,o){var s=this,a=Rt.from(n||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(s=t.call(this,a,o)||this).padding=0,s.resolution=i.b.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new Dt,s}return p(e,t),e.prototype.apply=function(t,e,n,i,r){t.applyFilter(this,e,n,i)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(kt),Bt=new u.d,Nt=function(){function t(t,e){this._texture=t,this.mapCoord=new u.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var r=t[i],o=t[i+1];e[i]=r*n.a+o*n.c+n.tx,e[i+1]=r*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=e.orig,r=e.trim;r&&(Bt.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Bt));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Ft=function(t){function e(e){var n=this,i=new u.d;return n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,n.maskSprite=e,n.maskMatrix=i,n}return p(e,t),e.prototype.apply=function(t,e,n,i){var r=this.maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Nt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,i))},e}(Lt),jt=function(t){function e(e){var n=t.call(this,e)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return p(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var i=this.maskDataPool.pop()||new ut;i.pooled=!0,i.maskObject=e,n=i}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case r.i.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case r.i.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case r.i.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case r.i.SCISSOR:this.renderer.scissor.pop();break;case r.i.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case r.i.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=r.i.SPRITE;else if(t.type=r.i.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var n=e.worldTransform,i=Math.atan2(n.b,n.a),o=Math.atan2(n.d,n.c);i=Math.round(i*(180/Math.PI)*100),o=((o=Math.round(o*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0==(i=(i%9e3+9e3)%9e3)&&9e3===o&&(t.type=r.i.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,n=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Ft(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var r=n.filterArea;n.filterArea=e.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(E),Ut=function(t){function e(e){var n=t.call(this,e)||this;return n.maskStack=[],n.glConst=0,n}return p(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(E),Vt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return p(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var n=t._scissorRect,i=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,n?i.fit(n):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,n=this.renderer.projection,i=n.transform,r=n.sourceFrame,o=n.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-r.x)*s+o.x,u=(t.y-r.y)*s+o.y,h=t.width*s,l=t.height*s;i&&(a+=i.tx*s,u+=i.ty*s),e||(u=this.renderer.height-l-u),this.renderer.gl.scissor(a,u,h,l)},e}(Ut),Xt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return p(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,i,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Ut),Gt=function(t){function e(e){var n=t.call(this,e)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new u.d,n.transform=null,n}return p(e,t),e.prototype.update=function(t,e,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,n,i){var r=this.projectionMatrix,o=i?-1:1;r.identity(),r.a=1/e.width*2,r.d=o*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-o-e.y*r.d},e.prototype.setTransform=function(t){},e}(E),Ht=new u.j,Wt=new u.j,zt=new u.j,Yt=function(t){function e(e){var n=t.call(this,e)||this;return n.clearColor=e._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new u.j,n.destinationFrame=new u.j,n}return p(e,t),e.prototype.bind=function(t,e,n){void 0===t&&(t=null);var i,r,o,s=this.renderer;(this.current=t)?(o=(i=t.baseTexture).resolution,e||(Ht.width=t.frame.width,Ht.height=t.frame.height,e=Ht),n||(Wt.x=t.frame.x,Wt.y=t.frame.y,Wt.width=e.width,Wt.height=e.height,n=Wt),r=i.framebuffer):(o=s.resolution,e||(Ht.width=s.screen.width,Ht.height=s.screen.height,e=Ht),n||((n=Ht).width=e.width,n.height=e.height)),zt.x=n.x*o,zt.y=n.y*o,zt.width=n.width*o,zt.height=n.height*o,this.renderer.framebuffer.bind(r,zt),this.renderer.projection.update(n,e,o,!r),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(E),qt=function(){},Kt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),Zt=0,Qt={textureCount:0},Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=Zt++,n}return p(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Ot)return Ot;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ot=!0===t({a:"b"},"a","b")}catch(t){Ot=!1}return Ot}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),e||(Qt.textureCount=0,this.syncUniformGroup(t.uniformGroup,Qt)),i},e.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var n=this.getglProgram();t.static&&t.dirtyId===n.uniformGroups[t.id]||(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},e.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in t.uniforms){var r=e[i];if(r){for(var o=t.uniforms[i],s=!1,a=0;a<Tt.length;a++)if(Tt[a].test(r,o)){n.push(Tt[a].code(i,o)),s=!0;break}if(!s){var u=(1===r.size?St:Pt)[r.type].replace("location",'ud["'+i+'"].location');n.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+u+";")}}else t.uniforms[i].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var n=t.uniforms,i=[];for(var r in n)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,n=t.program,i={};for(var r in n.attributeData)i[r]=n.attributeData[r].location;var o=lt(e,n.vertexSrc,n.fragmentSrc,i),s={};for(var r in n.uniformData){var a=n.uniformData[r];s[r]={location:e.getUniformLocation(o,r),value:pt(a.type,a.size)}}var u=new Kt(o,s);return n.glPrograms[this.renderer.CONTEXT_UID]=u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(E),$t=function(t){function e(e){var n=t.call(this,e)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=r.b.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new Dt,n.defaultState.blend=!0,n}return p(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[r.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.ADD]=[t.ONE,t.ONE],e[r.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.NONE]=[0,0],e[r.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[r.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[r.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[r.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[r.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[r.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[r.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(E),te=function(t){function e(e){var n=t.call(this,e)||this;return n.count=0,n.checkCount=0,n.maxIdle=i.b.GC_MAX_IDLE,n.checkCountMax=i.b.GC_MAX_CHECK_COUNT,n.mode=i.b.GC_MODE,n}return p(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==r.h.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,i=0;i<e.length;i++){var r=e[i];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),n=!(e[i]=null))}if(n){var o=0;for(i=0;i<e.length;i++)null!==e[i]&&(e[o++]=e[i]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},e}(E),ee=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},ne=function(t){function e(e){var n=t.call(this,e)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new m,n}return p(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new ee(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ee(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)},e.prototype.initTexture=function(t){var e=new ee(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA32F),t.type===r.p.HALF_FLOAT&&(e.type=n.HALF_FLOAT),e.type===n.HALF_FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e));else{var i=t.realWidth,r=t.realHeight,o=n.gl;(e.width!==i||e.height!==r||e.dirtyId<0)&&(e.width=i,e.height=r,o.texImage2D(t.target,0,e.internalFormat,i,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&Object(o.removeItems)(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==r.j.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=r.q.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&0<t.anisotropicLevel&&t.scaleMode===r.n.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR:n.NEAREST)},e}(E),ie={FilterSystem:Q,BatchSystem:$,ContextSystem:et,FramebufferSystem:rt,GeometrySystem:at,MaskSystem:jt,ScissorSystem:Vt,StencilSystem:Xt,ProjectionSystem:Gt,RenderTextureSystem:Yt,ShaderSystem:Jt,StateSystem:$t,TextureGCSystem:te,TextureSystem:ne},re=new u.d,oe=function(t){function e(e,n){void 0===e&&(e=r.m.UNKNOWN);var s=t.call(this)||this;return(n=Object.assign({},i.b.RENDER_OPTIONS,n)).roundPixels&&(i.b.ROUND_PIXELS=n.roundPixels,Object(o.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),s.options=n,s.type=e,s.screen=new u.j(0,0,n.width,n.height),s.view=n.view||document.createElement("canvas"),s.resolution=n.resolution||i.b.RESOLUTION,s.transparent=n.transparent,s.autoDensity=n.autoDensity||n.autoResize||!1,s.preserveDrawingBuffer=n.preserveDrawingBuffer,s.clearBeforeRender=n.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,0],s._backgroundColorString="#000000",s.backgroundColor=n.backgroundColor||s._backgroundColor,s._lastObjectRendered=null,s.plugins={},s}return p(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,n,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var r=L.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:n});return re.tx=-i.x,re.ty=-i.y,this.render(t,r,!1,re,!!t.parent),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=r.m.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(o.hex2string)(t),Object(o.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(o.EventEmitter),se=function(t){function e(n){var i=t.call(this,r.m.WEBGL,n)||this;return n=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new s.a("destroy"),contextChange:new s.a("contextChange"),reset:new s.a("reset"),update:new s.a("update"),postrender:new s.a("postrender"),prerender:new s.a("prerender"),resize:new s.a("resize")},i.globalUniforms=new K({projectionMatrix:new u.d},!0),i.addSystem(jt,"mask").addSystem(et,"context").addSystem($t,"state").addSystem(Jt,"shader").addSystem(ne,"texture").addSystem(at,"geometry").addSystem(rt,"framebuffer").addSystem(Vt,"scissor").addSystem(Xt,"stencil").addSystem(Gt,"projection").addSystem(te,"textureGC").addSystem(Q,"filter").addSystem(Yt,"renderTexture").addSystem($,"batch"),i.initPlugins(e.__plugins),n.context?i.context.initFromContext(n.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:n.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Object(o.sayHello)(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return p(e,t),e.create=function(t){if(Object(o.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var i in this[e]=n,this.runners)this.runners[i].add(n);return this},e.prototype.render=function(t,e,n,i,r){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(e||(this._lastObjectRendered=t),!r){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(e,n)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,n){(e.__plugins=e.__plugins||{})[t]=n},e}(oe);function ae(t){return se.create(t)}var ue="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",he="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",le=function(){this.texArray=null,this.blend=0,this.type=r.e.TRIANGLES,this.start=0,this.size=0,this.data=null},ce=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),pe=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),de=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Dt.for2d(),n.size=4*i.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return p(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;i.b.PREFER_ENV===r.f.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),i.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=It(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new le);for(;n.length<r;)n.push(new ce);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,i=e._textureArrayPool,r=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++m._globalBatch,u=0,h=i[0],l=0;r.copyBoundTextures(o,n);for(var c=0;c<this._bufferSize;++c){var p=t[c];t[c]=null,p._batchEnabled!==a&&(h.count>=n&&(r.boundArray(h,o,a,n),this.buildDrawCalls(h,l,c),l=c,h=i[++u],++a),p._batchEnabled=a,p.touched=s,h.elements[h.count++]=p)}for(0<h.count&&(r.boundArray(h,o,a,n),this.buildDrawCalls(h,l,this._bufferSize),++u,++a),c=0;c<o.length;c++)o[c]=null;m._globalBatch=a},e.prototype.buildDrawCalls=function(t,n,i){var r=this._bufferedElements,s=this._attributeBuffer,a=this._indexBuffer,u=this.vertexSize,h=e._drawCallPool,l=this._dcIndex,c=this._aIndex,p=this._iIndex,d=h[l];d.start=this._iIndex,d.texArray=t;for(var f=n;f<i;++f){var g=r[f],m=g._texture.baseTexture,v=o.premultiplyBlendMode[m.alphaMode?1:0][g.blendMode];r[f]=null,n<f&&d.blend!==v&&(d.size=p-d.start,n=f,(d=h[++l]).texArray=t,d.start=p),this.packInterleavedGeometry(g,s,a,c,p),c+=g.vertexData.length/2*u,p+=g.indices.length,d.blend=v}n<i&&(d.size=p-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;i.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,i=n.gl,r=n.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var u=o[a],h=u.texArray,l=u.type,c=u.size,p=u.start,d=u.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=d,r.set(this.state),i.drawElements(l,c,i.UNSIGNED_SHORT,2*p)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),i.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/8)),n=Object(o.log2)(e),i=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new pe(i*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/12)),n=Object(o.log2)(e),i=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r},e.prototype.packInterleavedGeometry=function(t,e,n,i,r){for(var s=e.uint32View,a=e.float32View,u=i/this.vertexSize,h=t.uvs,l=t.indices,c=t.vertexData,p=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?Object(o.premultiplyTint)(t._tintRGB,d):t._tintRGB+(255*d<<24),g=0;g<c.length;g+=2)a[i++]=c[g],a[i++]=c[g+1],a[i++]=h[g],a[i++]=h[g+1],s[i++]=f,a[i++]=p;for(g=0;g<l.length;g++)n[r++]=u+l[g]},e._drawCallPool=[],e._textureArrayPool=[],e}(J),fe=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=K.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Rt(this.vertexSrc,i)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.d,default:this.defaultGroupCache[t]};return new kt(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)0<n&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),ge=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new j(null,e,!1),n._indexBuffer=new j(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,r.p.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,r.p.FLOAT).addAttribute("aColor",n._buffer,4,!0,r.p.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,r.p.FLOAT).addIndex(n._indexBuffer),n}return p(e,t),e}(W),me="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ve="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ye=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:me,fragment:ve,geometryClass:ge,vertexSize:6},t),n=e.vertex,i=e.fragment,r=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new fe(n,i),s.geometryClass=o,s.vertexSize=r,s}return p(e,t),e}(de)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return me},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return ve},enumerable:!1,configurable:!0}),t}(),_e=ye.create()},function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"b",function(){return b});var i=/iPhone/i,r=/iPod/i,o=/iPad/i,s=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,h=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,f=/BB10/i,g=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,y=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream},_=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,_=n.split("[FBAN");void 0!==_[1]&&(n=_[0]),void 0!==(_=n.split("Twitter"))[1]&&(n=_[0]);var b=function(t){return function(e){return e.test(t)}}(n),x={apple:{phone:b(i)&&!b(c),ipod:b(r),tablet:!b(i)&&(b(o)||y(e))&&!b(c),universal:b(s),device:(b(i)||b(r)||b(o)||b(s)||y(e))&&!b(c)},amazon:{phone:b(h),tablet:!b(h)&&b(l),device:b(h)||b(l)},android:{phone:!b(c)&&b(h)||!b(c)&&b(a),tablet:!b(c)&&!b(h)&&!b(a)&&(b(l)||b(u)),device:!b(c)&&(b(h)||b(l)||b(a)||b(u))||b(/\bokhttp\b/i)},windows:{phone:b(c),tablet:b(p),device:b(c)||b(p)},other:{blackberry:b(d),blackberry10:b(f),opera:b(g),firefox:b(v),chrome:b(m),device:b(d)||b(f)||b(g)||b(v)||b(m)},any:!1,phone:!1,tablet:!1};return x.any=x.apple.device||x.android.device||x.windows.device||x.other.device,x.phone=x.apple.phone||x.android.phone||x.windows.phone,x.tablet=x.apple.tablet||x.android.tablet||x.windows.tablet,x}(window.navigator),b={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var n,e=!0;(_.tablet||_.phone)&&(_.apple.device&&(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(n[1],10)<11&&(e=!1),_.android.device&&(n=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(n[1],10)<7&&(e=!1));return e?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:_.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!_.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,n){var i,r;i=[n,e,n(73),n(42),n(74),n(75),n(76),n(77),n(78),n(79)],void 0===(r=function(t,e,n,i,r,o,s,a,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Images",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Atlases",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"JsonData",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Fonts",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Events",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Spines",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Sounds",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return h.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"utils",function(){return c}),n.d(e,"AccessibilityManager",function(){return w}),n.d(e,"accessibleTarget",function(){return x}),n.d(e,"InteractionData",function(){return S}),n.d(e,"InteractionEvent",function(){return O}),n.d(e,"InteractionManager",function(){return M}),n.d(e,"InteractionTrackingData",function(){return E}),n.d(e,"interactiveTarget",function(){return I}),n.d(e,"Application",function(){return k}),n.d(e,"AbstractBatchRenderer",function(){return R.a}),n.d(e,"AbstractRenderer",function(){return R.b}),n.d(e,"Attribute",function(){return R.c}),n.d(e,"BaseRenderTexture",function(){return R.d}),n.d(e,"BaseTexture",function(){return R.e}),n.d(e,"BatchDrawCall",function(){return R.f}),n.d(e,"BatchGeometry",function(){return R.g}),n.d(e,"BatchPluginFactory",function(){return R.h}),n.d(e,"BatchRenderer",function(){return R.i}),n.d(e,"BatchShaderGenerator",function(){return R.j}),n.d(e,"BatchTextureArray",function(){return R.k}),n.d(e,"Buffer",function(){return R.l}),n.d(e,"Filter",function(){return R.m}),n.d(e,"FilterState",function(){return R.n}),n.d(e,"Framebuffer",function(){return R.o}),n.d(e,"GLFramebuffer",function(){return R.p}),n.d(e,"GLProgram",function(){return R.q}),n.d(e,"GLTexture",function(){return R.r}),n.d(e,"Geometry",function(){return R.s}),n.d(e,"IGLUniformData",function(){return R.t}),n.d(e,"MaskData",function(){return R.u}),n.d(e,"ObjectRenderer",function(){return R.v}),n.d(e,"Program",function(){return R.w}),n.d(e,"Quad",function(){return R.x}),n.d(e,"QuadUv",function(){return R.y}),n.d(e,"RenderTexture",function(){return R.z}),n.d(e,"RenderTexturePool",function(){return R.A}),n.d(e,"Renderer",function(){return R.B}),n.d(e,"Shader",function(){return R.C}),n.d(e,"SpriteMaskFilter",function(){return R.D}),n.d(e,"State",function(){return R.E}),n.d(e,"System",function(){return R.F}),n.d(e,"Texture",function(){return R.G}),n.d(e,"TextureMatrix",function(){return R.H}),n.d(e,"TextureUvs",function(){return R.I}),n.d(e,"UniformGroup",function(){return R.J}),n.d(e,"ViewableBuffer",function(){return R.K}),n.d(e,"autoDetectRenderer",function(){return R.L}),n.d(e,"checkMaxIfStatementsInShader",function(){return R.M}),n.d(e,"defaultFilterVertex",function(){return R.N}),n.d(e,"defaultVertex",function(){return R.O}),n.d(e,"resources",function(){return R.P}),n.d(e,"systems",function(){return R.Q}),n.d(e,"uniformParsers",function(){return R.R}),n.d(e,"Extract",function(){return B}),n.d(e,"AppLoaderPlugin",function(){return N.a}),n.d(e,"Loader",function(){return N.b}),n.d(e,"LoaderResource",function(){return N.c}),n.d(e,"TextureLoader",function(){return N.d}),n.d(e,"ParticleContainer",function(){return G}),n.d(e,"ParticleRenderer",function(){return W}),n.d(e,"BasePrepare",function(){return qt}),n.d(e,"CountLimiter",function(){return Ut}),n.d(e,"Prepare",function(){return Jt}),n.d(e,"TimeLimiter",function(){return $t}),n.d(e,"Spritesheet",function(){return te}),n.d(e,"SpritesheetLoader",function(){return ee}),n.d(e,"TilingSprite",function(){return oe}),n.d(e,"TilingSpriteRenderer",function(){return ue}),n.d(e,"BitmapFont",function(){return Oe}),n.d(e,"BitmapFontData",function(){return ye}),n.d(e,"BitmapFontLoader",function(){return Ce}),n.d(e,"BitmapText",function(){return Ie}),n.d(e,"Ticker",function(){return T.a}),n.d(e,"TickerPlugin",function(){return T.b}),n.d(e,"UPDATE_PRIORITY",function(){return T.c}),n.d(e,"ALPHA_MODES",function(){return F.a}),n.d(e,"BLEND_MODES",function(){return F.b}),n.d(e,"BUFFER_BITS",function(){return F.c}),n.d(e,"CLEAR_MODES",function(){return F.d}),n.d(e,"DRAW_MODES",function(){return F.e}),n.d(e,"ENV",function(){return F.f}),n.d(e,"FORMATS",function(){return F.g}),n.d(e,"GC_MODES",function(){return F.h}),n.d(e,"MASK_TYPES",function(){return F.i}),n.d(e,"MIPMAP_MODES",function(){return F.j}),n.d(e,"MSAA_QUALITY",function(){return F.k}),n.d(e,"PRECISION",function(){return F.l}),n.d(e,"RENDERER_TYPE",function(){return F.m}),n.d(e,"SCALE_MODES",function(){return F.n}),n.d(e,"TARGETS",function(){return F.o}),n.d(e,"TYPES",function(){return F.p}),n.d(e,"WRAP_MODES",function(){return F.q}),n.d(e,"Bounds",function(){return f}),n.d(e,"Container",function(){return b}),n.d(e,"DisplayObject",function(){return v}),n.d(e,"TemporaryDisplayObject",function(){return y}),n.d(e,"FillStyle",function(){return Y}),n.d(e,"GRAPHICS_CURVES",function(){return z}),n.d(e,"Graphics",function(){return wt}),n.d(e,"GraphicsData",function(){return gt}),n.d(e,"GraphicsGeometry",function(){return yt}),n.d(e,"LINE_CAP",function(){return X}),n.d(e,"LINE_JOIN",function(){return V}),n.d(e,"LineStyle",function(){return _t}),n.d(e,"graphicsUtils",function(){return ft}),n.d(e,"Circle",function(){return d.a}),n.d(e,"DEG_TO_RAD",function(){return d.b}),n.d(e,"Ellipse",function(){return d.c}),n.d(e,"Matrix",function(){return d.d}),n.d(e,"ObservablePoint",function(){return d.e}),n.d(e,"PI_2",function(){return d.f}),n.d(e,"Point",function(){return d.g}),n.d(e,"Polygon",function(){return d.h}),n.d(e,"RAD_TO_DEG",function(){return d.i}),n.d(e,"Rectangle",function(){return d.j}),n.d(e,"RoundedRectangle",function(){return d.k}),n.d(e,"SHAPES",function(){return d.l}),n.d(e,"Transform",function(){return d.m}),n.d(e,"groupD8",function(){return d.n}),n.d(e,"Mesh",function(){return fe}),n.d(e,"MeshBatchUvs",function(){return ce}),n.d(e,"MeshGeometry",function(){return me}),n.d(e,"MeshMaterial",function(){return ge}),n.d(e,"NineSlicePlane",function(){return bn}),n.d(e,"PlaneGeometry",function(){return gn}),n.d(e,"RopeGeometry",function(){return mn}),n.d(e,"SimpleMesh",function(){return _n}),n.d(e,"SimplePlane",function(){return yn}),n.d(e,"SimpleRope",function(){return vn}),n.d(e,"Runner",function(){return xn.a}),n.d(e,"Sprite",function(){return Et}),n.d(e,"AnimatedSprite",function(){return Tn}),n.d(e,"TEXT_GRADIENT",function(){return St}),n.d(e,"Text",function(){return Ft}),n.d(e,"TextMetrics",function(){return Lt}),n.d(e,"TextStyle",function(){return Mt}),n.d(e,"isMobile",function(){return p.a}),n.d(e,"settings",function(){return p.b}),n.d(e,"VERSION",function(){return An}),n.d(e,"filters",function(){return In}),n.d(e,"useDeprecated",function(){return En}),n.d(e,"CanvasRenderer",function(){return Ln}),n.d(e,"canvasUtils",function(){return Bn}),n.d(e,"CanvasMeshRenderer",function(){return Fn}),n.d(e,"CanvasGraphicsRenderer",function(){return Vn}),n.d(e,"CanvasSpriteRenderer",function(){return Hn}),n.d(e,"CanvasExtract",function(){return zn}),n.d(e,"CanvasPrepare",function(){return Kn});var i=n(57),r=n(58),o=n.n(r);if(window.Promise||(window.Promise=i.Polyfill),Object.assign||(Object.assign=o.a),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var s=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-s}}for(var a=Date.now(),u=["ms","moz","webkit","o"],h=0;h<u.length&&!window.requestAnimationFrame;++h){var l=u[h];window.requestAnimationFrame=window[l+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l+"CancelAnimationFrame"]||window[l+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+a-e;return n<0&&(n=0),a=e,window.setTimeout(function(){a=Date.now(),t(performance.now())},n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var c=n(0),p=n(4),d=n(2);p.b.SORTABLE_CHILDREN=!1;var f=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?d.j.EMPTY:((t=t||new d.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,n=s<n?s:n,i=i<o?o:i,r=r<s?s:r,e=(o=t[2])<e?o:e,n=(s=t[3])<n?s:n,i=i<o?o:i,r=r<s?s:r,e=(o=t[4])<e?o:e,n=(s=t[5])<n?s:n,i=i<o?o:i,r=r<s?s:r,e=(o=t[6])<e?o:e,n=(s=t[7])<n?s:n,i=i<o?o:i,r=r<s?s:r,this.minX=e,this.minY=n,this.maxX=i,this.maxY=r},t.prototype.addFrame=function(t,e,n,i,r){this.addFrameMatrix(t.worldTransform,e,n,i,r)},t.prototype.addFrameMatrix=function(t,e,n,i,r){var o=t.a,s=t.b,a=t.c,u=t.d,h=t.tx,l=t.ty,c=this.minX,p=this.minY,d=this.maxX,f=this.maxY,g=o*e+a*n+h,m=s*e+u*n+l;c=g<c?g:c,p=m<p?m:p,d=d<g?g:d,f=f<m?m:f,c=(g=o*i+a*n+h)<c?g:c,p=(m=s*i+u*n+l)<p?m:p,d=d<g?g:d,f=f<m?m:f,c=(g=o*e+a*r+h)<c?g:c,p=(m=s*e+u*r+l)<p?m:p,d=d<g?g:d,f=f<m?m:f,c=(g=o*i+a*r+h)<c?g:c,p=(m=s*i+u*r+l)<p?m:p,d=d<g?g:d,f=f<m?m:f,this.minX=c,this.minY=p,this.maxX=d,this.maxY=f},t.prototype.addVertexData=function(t,e,n){for(var i=this.minX,r=this.minY,o=this.maxX,s=this.maxY,a=e;a<n;a+=2){var u=t[a],h=t[a+1];i=u<i?u:i,r=h<r?h:r,o=o<u?u:o,s=s<h?h:s}this.minX=i,this.minY=r,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,n,i){this.addVerticesMatrix(t.worldTransform,e,n,i)},t.prototype.addVerticesMatrix=function(t,e,n,i,r,o){void 0===r&&(r=0),void 0===o&&(o=r);for(var s=t.a,a=t.b,u=t.c,h=t.d,l=t.tx,c=t.ty,p=this.minX,d=this.minY,f=this.maxX,g=this.maxY,m=n;m<i;m+=2){var v=e[m],y=e[m+1],_=s*v+u*y+l,b=h*y+a*v+c;p=Math.min(p,_-r),f=Math.max(f,_+r),d=Math.min(d,b-o),g=Math.max(g,b+o)}this.minX=p,this.minY=d,this.maxX=f,this.maxY=g},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=r&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=n<s?n:s,this.minY=i<a?i:a,this.maxX=u<r?r:u,this.maxY=h<o?o:h}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=r&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=n<s?n:s,this.minY=i<a?i:a,this.maxX=u<r?r:u,this.maxY=h<o?o:h}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,i,r,o){t-=r,e-=o,n+=r,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},t}(),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function m(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new d.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new f,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return m(e,t),e.mixin=function(t){for(var n=Object.keys(t),i=0;i<n.length;++i){var r=n[i];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new d.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new d.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new f);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-r,o},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,i){return e&&(t=e.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,i,r,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=i||1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new y),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*d.i},set:function(t){this.transform.rotation=t*d.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(c.EventEmitter),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return m(e,t),e}(v);function _(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}v.prototype.displayObjectUpdateTransform=v.prototype.updateTransform;var b=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=p.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return m(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var r=e[0];r.parent&&r.parent.removeChild(r),(r.parent=this).sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=t,this.onChildrenChange(n<i?n:i)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(c.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var r=e[0],o=this.children.indexOf(r);if(-1===o)return null;r.parent=null,r.transform._parentID=-1,Object(c.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),r.emit("removed",this),this.emit("childRemoved",r,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(c.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,i=t,r=e-i;if(0<r&&r<=e){n=this.children.splice(i,r);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(_),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var i=t.prototype.getLocalBounds.call(this,e);if(!n)for(var r=0,o=this.children.length;r<o;++r){var s=this.children[r];s.visible&&s.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t),i=0;for(var r=this.children.length;i<r;i++)this.children[i].render(t);t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(n)for(var r=0;r<i.length;++r)i[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(v);b.prototype.containerUpdateTransform=b.prototype.updateTransform;var x={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};v.mixin(x);var w=function(){function t(t){this._hookDiv=null,(c.isMobile.tablet||c.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(c.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=this.renderer.resolution,i=e.width/this.renderer.width*n,r=e.height/this.renderer.height*n,o=this.div;o.style.left=e.left+"px",o.style.top=e.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,Object(c.removeItems)(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--;else{o=a._accessibleDiv;var u=a.hitArea,h=a.worldTransform;a.hitArea?(o.style.left=(h.tx+u.x*h.a)*i+"px",o.style.top=(h.ty+u.y*h.d)*r+"px",o.style.width=u.width*h.a*i+"px",o.style.height=u.height*h.d*r+"px"):(u=a.getBounds(),this.capHitArea(u),o.style.left=u.x*i+"px",o.style.top=u.y*r+"px",o.style.width=u.width*i+"px",o.style.height=u.height*r+"px",o.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(o.title=a.accessibleTitle),o.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&o.setAttribute("aria-label",a.accessibleHint)),a.accessibleTitle===o.title&&a.tabIndex===o.tabIndex||(o.title=a.accessibleTitle,o.tabIndex=a.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),T=n(8),S=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new d.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},O=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),E=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),A=function(){function t(){this._tempPoint=new d.g}return t.prototype.recursiveFindHit=function(t,e,n,i,r){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=r=e.interactive||r,u=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:u=i=!1),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(i=!1)),u&&e.interactiveChildren&&e.children)for(var h=e.children,l=h.length-1;0<=l;l--){var c=h[l],p=this.recursiveFindHit(t,c,n,i,a);if(p){if(!c.parent)continue;a=!1,p&&(t.target&&(i=!1),s=!0)}}return r&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},t.prototype.findHit=function(t,e,n,i){this.recursiveFindHit(t,e,n,i,!1)},t}(),I={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};v.mixin(I);var C={target:null,data:{global:null}},M=function(t){function e(e,n){var i=t.call(this)||this;return n=n||{},i.renderer=e,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new S,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new O,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new A,i._tempDisplayObject=new y,i._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(t,e){function n(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){(this._useSystemTicker=t)?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return C.target=null,C.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(C,e,null,!0),C.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(T.a.system.add(this.tickerUpdate,this,T.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(T.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*r,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*r},e.prototype.processInteractive=function(t,e,n,i){var r=this.search.findHit(t,e,n,i),o=this.delayedEvents;if(!o.length)return r;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var u=o[a],h=u.displayObject,l=u.eventString,c=u.eventData;c.stopsPropagatingAt===h&&(c.stopPropagationHint=!0),this.dispatchEvent(h,l,c)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var r=e[i],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data,r=t.data.identifier;if(n)if(e.trackedPointers[r]||(e.trackedPointers[r]=new E(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),r=i.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var a=i[s],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data,r=t.data.identifier,o=e.trackedPointers[r],s="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,u=!1;if(a){var h=2===i.button,l=E.FLAGS,c=h?l.RIGHT_DOWN:l.LEFT_DOWN,p=void 0!==o&&o.flags&c;n?(this.dispatchEvent(e,h?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,h?"rightclick":"click",t),u=!0)):p&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),o&&(h?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var r=e[i],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var i=t.data,r="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data,r=t.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[r];n&&!s&&(s=e.trackedPointers[r]=new E(r)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);"mouse"===(i.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new S).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var r=t.changedTouches[n];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(c.EventEmitter),R=n(3),k=function(){function t(e){var n=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Object(R.L)(e),this.stage=new b,t._plugins.forEach(function(t){t.init.call(n,e)})}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var i=this,r=t._plugins.slice(0);r.reverse(),r.forEach(function(t){t.destroy.call(i)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();k._plugins=[];var D=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),(this._resizeTo=t)&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,n=window.innerHeight;else{var i=e._resizeTo;t=i.clientWidth,n=i.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();k.registerPlugin(D);var L=new d.j,B=function(){function t(t){(this.renderer=t).extract=this}return t.prototype.image=function(t,e,n){var i=new Image;return i.src=this.base64(t,e,n),i},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,i,r,o=this.renderer,s=!1,a=!1;e&&(e instanceof R.z?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(n=r.baseTexture.resolution,i=r.frame,s=!1,o.renderTexture.bind(r)):(n=this.renderer.resolution,s=!0,(i=L).width=this.renderer.width,i.height=this.renderer.height,o.renderTexture.bind(null));var u=Math.floor(i.width*n+1e-4),h=Math.floor(i.height*n+1e-4),l=new c.CanvasRenderTarget(u,h,1),p=new Uint8Array(4*u*h),d=o.gl;d.readPixels(i.x*n,i.y*n,u,h,d.RGBA,d.UNSIGNED_BYTE,p);var f=l.context.getImageData(0,0,u,h);if(t.arrayPostDivide(p,f.data),l.context.putImageData(f,0,0),s){var g=new c.CanvasRenderTarget(l.width,l.height,1);g.context.scale(1,-1),g.context.drawImage(l.canvas,0,-h),l.destroy(),l=g}return a&&r.destroy(!0),l.canvas},t.prototype.pixels=function(e){var n,i,r,o=this.renderer,s=!1;e&&(e instanceof R.z?r=e:(r=this.renderer.generateTexture(e),s=!0)),r?(n=r.baseTexture.resolution,i=r.frame,o.renderTexture.bind(r)):(n=o.resolution,(i=L).width=o.width,i.height=o.height,o.renderTexture.bind(null));var a=i.width*n,u=i.height*n,h=new Uint8Array(4*a*u),l=o.gl;return l.readPixels(i.x*n,i.y*n,a,u,l.RGBA,l.UNSIGNED_BYTE,h),s&&r.destroy(!0),t.arrayPostDivide(h,h),h},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var i=e[n+3]=t[n+3];0!==i?(e[n]=Math.round(Math.min(255*t[n]/i,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/i,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),N=n(9),F=n(1),j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function U(t,e){function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var V,X,G=function(t){function e(e,n,i,r){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===r&&(r=!1);var o=t.call(this)||this;return 16384<i&&(i=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=F.b.NORMAL,o.autoResize=r,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return U(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(c.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(b),H=function(){function t(t,e,n){this.geometry=new R.s,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var r=t[i];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||F.p.FLOAT,offset:r.offset},e[i]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new R.l(Object(c.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer);for(var n=this.dynamicStride=0;n<this.dynamicProperties.length;++n)(s=this.dynamicProperties[n]).offset=e,e+=s.size,this.dynamicStride+=s.size;var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new R.l(this.dynamicData,!1,!1);var r=0;for(n=this.staticStride=0;n<this.staticProperties.length;++n)(s=this.staticProperties[n]).offset=r,r+=s.size,this.staticStride+=s.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new R.l(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var s=this.dynamicProperties[n];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===F.p.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(n=0;n<this.staticProperties.length;++n)s=this.staticProperties[n],t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===F.p.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)},t.prototype.uploadDynamic=function(t,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var r=this.dynamicProperties[i];r.uploadFunction(t,e,n,r.type===F.p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var i=0;i<this.staticProperties.length;i++){var r=this.staticProperties[i];r.uploadFunction(t,e,n,r.type===F.p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),W=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new d.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:F.p.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=R.C.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=R.E.for2d(),n}return U(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,i=t._batchSize,r=this.renderer,o=e.length;if(0!==o){n<o&&!t.autoResize&&(o=n);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=Object(c.correctBlendMode)(t.blendMode,a.alphaMode),r.state.set(this.state);var u=r.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=Object(c.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var l=!1,p=0,d=0;p<o;p+=i,d+=1){var f=o-p;i<f&&(f=i),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var g=s[d];g.uploadDynamic(e,p,f);var m=t._bufferUpdateIDs[d]||0;(l=l||g._updateID<m)&&(g._updateID=t._updateID,g.uploadStatic(e,p,f)),r.geometry.bind(g.geometry),u.drawElements(u.TRIANGLES,6*f,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,i=t._batchSize,r=t._properties,o=0;o<n;o+=i)e.push(new H(this.properties,r,i));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new H(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,i,r,o){for(var s=0,a=0,u=0,h=0,l=0;l<n;++l){var c=t[e+l],p=c._texture,d=c.scale.x,f=c.scale.y,g=p.trim,m=p.orig;g?(s=(a=g.x-c.anchor.x*m.width)+g.width,u=(h=g.y-c.anchor.y*m.height)+g.height):(s=m.width*(1-c.anchor.x),a=m.width*-c.anchor.x,u=m.height*(1-c.anchor.y),h=m.height*-c.anchor.y),i[o]=a*d,i[o+1]=h*f,i[o+r]=s*d,i[o+r+1]=h*f,i[o+2*r]=s*d,i[o+2*r+1]=u*f,i[o+3*r]=a*d,i[o+3*r+1]=u*f,o+=4*r}},e.prototype.uploadPosition=function(t,e,n,i,r,o){for(var s=0;s<n;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+r]=a.x,i[o+r+1]=a.y,i[o+2*r]=a.x,i[o+2*r+1]=a.y,i[o+3*r]=a.x,i[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,n,i,r,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;i[o]=a,i[o+r]=a,i[o+2*r]=a,i[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,n,i,r,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+r]=a.x1,i[o+r+1]=a.y1,i[o+2*r]=a.x2,i[o+2*r+1]=a.y2,i[o+3*r]=a.x3,i[o+3*r+1]=a.y3):(i[o]=0,i[o+1]=0,i[o+r]=0,i[o+r+1]=0,i[o+2*r]=0,i[o+2*r+1]=0,i[o+3*r]=0,i[o+3*r+1]=0),o+=4*r}},e.prototype.uploadTint=function(t,e,n,i,r,o){for(var s=0;s<n;++s){var a=t[e+s],u=0<a._texture.baseTexture.alphaMode,h=a.alpha,l=h<1&&u?Object(c.premultiplyTint)(a._tintRGB,h):a._tintRGB+(255*h<<24);i[o]=l,i[o+r]=l,i[o+2*r]=l,i[o+3*r]=l,o+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(R.v);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(V||(V={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(X||(X={}));var z={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},Y=function(){function t(){this.color=16777215,this.alpha=1,this.texture=R.G.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=R.G.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),q=function(t,e){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function K(t,e){function n(){this.constructor=t}q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Z={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,i=t.holes,r=e.points,o=e.indices;if(6<=n.length){for(var s=[],a=0;a<i.length;a++){var u=i[a];s.push(n.length/2),n=n.concat(u.points)}var h=Object(c.earcut)(n,s,2);if(!h)return;var l=r.length/2;for(a=0;a<h.length;a+=3)o.push(h[a]+l),o.push(h[a+1]+l),o.push(h[a+2]+l);for(a=0;a<n.length;a++)r.push(n[a])}}},Q={build:function(t){var e,n,i=t.shape,r=t.points,o=i.x,s=i.y;if(r.length=0,t.type===d.l.CIRC)e=i.radius,n=i.radius;else{var a=t.shape;e=a.width,n=a.height}if(0!==e&&0!==n){var u=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(e+n));u/=2.3;for(var h=2*Math.PI/u,l=0;l<u-.5;l++)r.push(o+Math.sin(-h*l)*e,s+Math.cos(-h*l)*n);r.push(r[0],r[1])}},triangulate:function(t,e){var n=t.points,i=e.points,r=e.indices,o=i.length/2,s=o,a=t.shape,u=t.matrix,h=a.x,l=a.y;i.push(t.matrix?u.a*h+u.c*l+u.tx:h,t.matrix?u.b*h+u.d*l+u.ty:l);for(var c=0;c<n.length;c+=2)i.push(n[c],n[c+1]),r.push(o++,s,o)}},J={build:function(t){var e=t.shape,n=e.x,i=e.y,r=e.width,o=e.height,s=t.points;s.length=0,s.push(n,i,n+r,i,n+r,i+o,n,i+o)},triangulate:function(t,e){var n=t.points,i=e.points,r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function $(t,e,n){return t+(e-t)*n}function tt(t,e,n,i,r,o,s){void 0===s&&(s=[]);for(var a=s,u=0,h=0,l=0,c=0,p=0,d=0,f=0,g=0;f<=20;++f)u=$(t,n,g=f/20),h=$(e,i,g),l=$(n,r,g),c=$(i,o,g),p=$(u,l,g),d=$(h,c,g),a.push(p,d);return a}var et={build:function(t){var e=t.shape,n=t.points,i=e.x,r=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));n.length=0,a?(tt(i,r+a,i,r,i+a,r,n),tt(i+o-a,r,i+o,r,i+o,r+a,n),tt(i+o,r+s-a,i+o,r+s,i+o-a,r+s,n),tt(i+a,r+s,i,r+s,i,r+s-a,n)):n.push(i,r,i+o,r,i+o,r+s,i,r+s)},triangulate:function(t,e){for(var n=t.points,i=e.points,r=e.indices,o=i.length/2,s=Object(c.earcut)(n,null,2),a=0,u=s.length;a<u;a+=3)r.push(s[a]+o),r.push(s[a+1]+o),r.push(s[a+2]+o);for(a=0,u=n.length;a<u;a++)i.push(n[a],n[++a])}};function nt(t,e,n,i,r,o,s,a){var u,h;h=s?(u=i,-n):(u=-i,n);var l=t-n*r+u,c=e-i*r+h,p=t+n*o+u,d=e+i*o+h;return a.push(l,c),a.push(p,d),2}function it(t,e,n,i,r,o,s,a){var u=n-t,h=i-e,l=Math.atan2(u,h),c=Math.atan2(r-t,o-e);a&&l<c?l+=2*Math.PI:!a&&c<l&&(c+=2*Math.PI);var p=l,d=c-l,f=Math.abs(d),g=Math.sqrt(u*u+h*h),m=1+(15*f*Math.sqrt(g)/Math.PI>>0),v=d/m;if(p+=v,a){s.push(t,e),s.push(n,i);for(var y=1,_=p;y<m;y++,_+=v)s.push(t,e),s.push(t+Math.sin(_)*g,e+Math.cos(_)*g);s.push(t,e),s.push(r,o)}else{for(s.push(n,i),s.push(t,e),y=1,_=p;y<m;y++,_+=v)s.push(t+Math.sin(_)*g,e+Math.cos(_)*g),s.push(t,e);s.push(r,o),s.push(t,e)}return 2*m}function rt(t,e){t.lineStyle.native?function(t,e){var n=0,i=t.shape,r=t.points||i.points,o=i.type!==d.l.POLY||i.closeStroke;if(0!==r.length){var s=e.points,a=e.indices,u=r.length/2,h=s.length/2,l=h;for(s.push(r[0],r[1]),n=1;n<u;n++)s.push(r[2*n],r[2*n+1]),a.push(l,l+1),l++;o&&a.push(l,h)}}(t,e):function(t,e){var n=t.shape,i=t.points||n.points.slice(),r=e.closePointEps;if(0!==i.length){var o=t.lineStyle,s=new d.g(i[0],i[1]),a=new d.g(i[i.length-2],i[i.length-1]),u=n.type!==d.l.POLY||n.closeStroke,h=Math.abs(s.x-a.x)<r&&Math.abs(s.y-a.y)<r;if(u){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var l=.5*(s.x+a.x),c=.5*(a.y+s.y);i.unshift(l,c),i.push(l,c)}var p=e.points,f=i.length/2,g=i.length,m=p.length/2,v=o.width/2,y=v*v,_=o.miterLimit*o.miterLimit,b=i[0],x=i[1],w=i[2],T=i[3],S=0,P=0,O=-(x-T),E=b-w,A=0,I=0,C=Math.sqrt(O*O+E*E);O/=C,E/=C,O*=v,E*=v;var M=o.alignment,R=2*(1-M),k=2*M;u||(o.cap===X.ROUND?g+=it(b-O*(R-k)*.5,x-E*(R-k)*.5,b-O*R,x-E*R,b+O*k,x+E*k,p,!0)+2:o.cap===X.SQUARE&&(g+=nt(b,x,O,E,R,k,!0,p))),p.push(b-O*R,x-E*R),p.push(b+O*k,x+E*k);for(var D=1;D<f-1;++D){b=i[2*(D-1)],x=i[2*(D-1)+1],w=i[2*D],T=i[2*D+1],S=i[2*(D+1)],P=i[2*(D+1)+1],O=-(x-T),E=b-w,O/=C=Math.sqrt(O*O+E*E),E/=C,O*=v,E*=v,A=-(T-P),I=w-S,A/=C=Math.sqrt(A*A+I*I),I/=C,A*=v,I*=v;var L=w-b,B=x-T,N=w-S,F=P-T,j=B*N-F*L,U=j<0;if(Math.abs(j)<.1)p.push(w-O*R,T-E*R),p.push(w+O*k,T+E*k);else{var G=(-O+b)*(-E+T)-(-O+w)*(-E+x),H=(-A+S)*(-I+T)-(-A+w)*(-I+P),W=(L*H-N*G)/j,Y=(F*G-B*H)/j,q=(W-w)*(W-w)+(Y-T)*(Y-T),K=w+(W-w)*R,Z=T+(Y-T)*R,Q=w-(W-w)*k,J=T-(Y-T)*k,$=U?R:k;q<=Math.min(L*L+B*B,N*N+F*F)+$*$*y?o.join===V.BEVEL||_<q/y?(U?(p.push(K,Z),p.push(w+O*k,T+E*k),p.push(K,Z),p.push(w+A*k,T+I*k)):(p.push(w-O*R,T-E*R),p.push(Q,J),p.push(w-A*R,T-I*R),p.push(Q,J)),g+=2):o.join===V.ROUND?U?(p.push(K,Z),p.push(w+O*k,T+E*k),g+=it(w,T,w+O*k,T+E*k,w+A*k,T+I*k,p,!0)+4,p.push(K,Z),p.push(w+A*k,T+I*k)):(p.push(w-O*R,T-E*R),p.push(Q,J),g+=it(w,T,w-O*R,T-E*R,w-A*R,T-I*R,p,!1)+4,p.push(w-A*R,T-I*R),p.push(Q,J)):(p.push(K,Z),p.push(Q,J)):(p.push(w-O*R,T-E*R),p.push(w+O*k,T+E*k),o.join===V.BEVEL||_<q/y||(o.join===V.ROUND?g+=U?it(w,T,w+O*k,T+E*k,w+A*k,T+I*k,p,!0)+2:it(w,T,w-O*R,T-E*R,w-A*R,T-I*R,p,!1)+2:(U?(p.push(Q,J),p.push(Q,J)):(p.push(K,Z),p.push(K,Z)),g+=2)),p.push(w-A*R,T-I*R),p.push(w+A*k,T+I*k),g+=2)}}b=i[2*(f-2)],x=i[2*(f-2)+1],w=i[2*(f-1)],O=-(x-(T=i[2*(f-1)+1])),E=b-w,O/=C=Math.sqrt(O*O+E*E),E/=C,O*=v,E*=v,p.push(w-O*R,T-E*R),p.push(w+O*k,T+E*k),u||(o.cap===X.ROUND?g+=it(w-O*(R-k)*.5,T-E*(R-k)*.5,w-O*R,T-E*R,w+O*k,T+E*k,p,!1)+2:o.cap===X.SQUARE&&(g+=nt(w,T,O,E,R,k,!1,p)));var tt=e.indices,et=z.epsilon*z.epsilon;for(D=m;D<g+m-2;++D)b=p[2*D],x=p[2*D+1],w=p[2*(D+1)],T=p[2*(D+1)+1],S=p[2*(D+2)],P=p[2*(D+2)+1],Math.abs(b*(T-P)+w*(P-x)+S*(x-T))<et||tt.push(D,D+1,D+2)}}(t,e)}var ot,St,st=function(t){function e(e,n,i,r,o,s){void 0===s&&(s=0),o=o||r/2;for(var a=-1*Math.PI/2+s,u=2*i,h=d.f/u,l=[],c=0;c<u;c++){var p=c%2?o:r,f=c*h+a;l.push(e+p*Math.cos(f),n+p*Math.sin(f))}return t.call(this,l)||this}return K(e,t),e}(d.h),at=function(){function t(){}return t.curveTo=function(t,e,n,i,r,o){var s=o[o.length-2],a=o[o.length-1]-e,u=s-t,h=i-e,l=n-t,c=Math.abs(a*l-u*h);if(c<1e-8||0===r)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var p=a*a+u*u,d=h*h+l*l,f=a*h+u*l,g=r*Math.sqrt(p)/c,m=r*Math.sqrt(d)/c,v=g*f/p,y=m*f/d,_=g*l+m*u,b=g*h+m*a,x=u*(m+v),w=a*(m+v),T=l*(g+y),S=h*(g+y);return{cx:_+t,cy:b+e,radius:r,startAngle:Math.atan2(w-b,x-_),endAngle:Math.atan2(S-b,T-_),anticlockwise:l*a<u*h}},t.arc=function(t,e,n,i,r,o,s,a,u){for(var h=s-o,l=z._segmentsCount(Math.abs(h)*r,40*Math.ceil(Math.abs(h)/d.f)),c=h/(2*l),p=2*c,f=Math.cos(c),g=Math.sin(c),m=l-1,v=m%1/m,y=0;y<=m;++y){var _=c+o+p*(y+v*y),b=Math.cos(_),x=-Math.sin(_);u.push((f*b+g*x)*r+n,(f*-x+g*b)*r+i)}},t}(),ut=function(){function t(){}return t.curveLength=function(t,e,n,i,r,o,s,a){for(var u=0,h=0,l=0,c=0,p=0,d=0,f=0,g=0,m=0,v=0,y=0,_=t,b=e,x=1;x<=10;++x)v=_-(g=(f=(d=(p=1-(h=x/10))*p)*p)*t+3*d*h*n+3*p*(l=h*h)*r+(c=l*h)*s),y=b-(m=f*e+3*d*h*i+3*p*l*o+c*a),_=g,b=m,u+=Math.sqrt(v*v+y*y);return u},t.curveTo=function(e,n,i,r,o,s,a){var u=a[a.length-2],h=a[a.length-1];a.length-=2;var l=z._segmentsCount(t.curveLength(u,h,e,n,i,r,o,s)),c=0,p=0,d=0,f=0,g=0;a.push(u,h);for(var m=1,v=0;m<=l;++m)d=(p=(c=1-(v=m/l))*c)*c,g=(f=v*v)*v,a.push(d*u+3*p*v*e+3*c*f*i+g*o,d*h+3*p*v*n+3*c*f*r+g*s)},t}(),ht=function(){function t(){}return t.curveLength=function(t,e,n,i,r,o){var s=t-2*n+r,a=e-2*i+o,u=2*n-2*t,h=2*i-2*e,l=4*(s*s+a*a),c=4*(s*u+a*h),p=u*u+h*h,d=2*Math.sqrt(l+c+p),f=Math.sqrt(l),g=2*l*f,m=2*Math.sqrt(p),v=c/f;return(g*d+f*c*(d-m)+(4*p*l-c*c)*Math.log((2*f+v+d)/(v+m)))/(4*g)},t.curveTo=function(e,n,i,r,o){for(var s=o[o.length-2],a=o[o.length-1],u=z._segmentsCount(t.curveLength(s,a,e,n,i,r)),h=0,l=0,c=1;c<=u;++c){var p=c/u;h=s+(e-s)*p,l=a+(n-a)*p,o.push(h+(e+(i-e)*p-h)*p,l+(n+(r-n)*p-l)*p)}},t}(),lt=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ct=((ot={})[d.l.POLY]=Z,ot[d.l.CIRC]=Q,ot[d.l.ELIP]=Q,ot[d.l.RECT]=J,ot[d.l.RREC]=et,ot),pt=[],dt=[],ft={buildPoly:Z,buildCircle:Q,buildRectangle:J,buildRoundedRectangle:et,FILL_COMMANDS:ct,BATCH_POOL:pt,DRAW_CALL_POOL:dt,buildLine:rt,Star:st,ArcUtils:at,BezierUtils:ut,QuadraticUtils:ht,BatchPart:lt},gt=function(){function t(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),mt=new d.g,vt=new f,yt=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new f,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return K(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var t=this.textureIds.length=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),dt.push(this.drawCalls[t]);for(t=this.drawCalls.length=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),pt.push(e)}this.batches.length=0},e.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null);var r=new gt(t,e,n,i);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new gt(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var i=e[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,mt):mt.copyFrom(t),i.shape.contains(mt.x,mt.y))){var r=!1;if(i.holes)for(var o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(mt.x,mt.y)){r=!0;break}if(!r)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,i=null,r=null;0<this.batches.length&&(r=(i=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var s=n[o],a=s.fillStyle,u=s.lineStyle;ct[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix);for(var h=0;h<2;h++){var l=0===h?a:u;if(l.visible){var c=l.texture.baseTexture,p=this.indices.length,d=this.points.length/2;c.wrapMode=F.q.REPEAT,0===h?this.processFill(s):this.processLine(s);var f=this.points.length/2-d;0!==f&&(i&&!this._compareStyles(r,l)&&(i.end(p,d),i=null),i||((i=pt.pop()||new lt).begin(l,p,d),this.batches.push(i),r=l),this.addUvs(this.points,e,l.texture,d,f,l.matrix))}}}var g=this.indices.length,m=this.points.length/2;if(i&&i.end(g,m),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=65535<m&&t;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var i=t[e],r=0;r<i.size;r++){var o=i.start+r;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}},e.prototype.isBatchable=function(){if(131070<this.points.length)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++R.e._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),dt.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,i=this.textureIds,r=dt.pop();r||((r=new R.f).texArray=new R.k),r.texArray.count=0,r.start=0,r.size=0,r.type=F.e.TRIANGLES;var o=0,s=null,a=0,u=!1,h=F.e.TRIANGLES,l=0;for(this.drawCalls.push(r),e=0;e<this.batches.length;e++){var c=this.batches[e],p=c.style,d=p.texture.baseTexture;u!==!!p.native&&(h=(u=!!p.native)?F.e.LINES:F.e.TRIANGLES,s=null,o=8,t++),s!==d&&((s=d)._batchEnabled!==t&&(8===o&&(t++,(o=0)<r.size&&((r=dt.pop())||((r=new R.f).texArray=new R.k),this.drawCalls.push(r)),r.start=l,r.size=0,r.texArray.count=0,r.type=h),d.touched=1,d._batchEnabled=t,d._batchLocation=o,d.wrapMode=10497,r.texArray.elements[r.texArray.count++]=d,o++)),r.size+=c.size,l+=c.size,a=d._batchLocation,this.addColors(n,p.color,p.alpha,c.attribSize),this.addTextureIds(i,a,c.attribSize)}R.e._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(3*t.length*4),o=new Float32Array(r),s=new Uint32Array(r),a=0,u=0;u<t.length/2;u++)o[a++]=t[2*u],o[a++]=t[2*u+1],o[a++]=e[2*u],o[a++]=e[2*u+1],s[a++]=n[u],o[a++]=i[u];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),Z.triangulate(t,this)):ct[t.type].triangulate(t,this)},e.prototype.processLine=function(t){rt(t,this);for(var e=0;e<t.holes.length;e++)rt(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];ct[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=vt,n=d.d.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var r=this.graphicsData[i],o=r.shape,s=r.type,a=r.lineStyle,u=r.matrix||d.d.IDENTITY,h=0;if(a&&a.visible){var l=a.alignment;h=a.width,s===d.l.POLY?h*=.5+Math.abs(.5-l):h*=Math.max(0,l)}if(n!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=u),s===d.l.RECT||s===d.l.RREC){var c=o;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,h,h)}else if(s===d.l.CIRC){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.radius+h,p.radius+h)}else if(s===d.l.ELIP){var f=o;e.addFramePad(f.x,f.y,f.x,f.y,f.width+h,f.height+h)}else{var g=o;t.addVerticesMatrix(n,g.points,0,g.points.length,h,h)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var i=t[2*n],r=t[2*n+1];t[2*n]=e.a*i+e.c*r+e.tx,t[2*n+1]=e.b*i+e.d*r+e.ty}},e.prototype.addColors=function(t,e,n,i){for(var r=(e>>16)+(65280&e)+((255&e)<<16),o=Object(c.premultiplyTint)(r,n);0<i--;)t.push(o)},e.prototype.addTextureIds=function(t,e,n){for(;0<n--;)t.push(e)},e.prototype.addUvs=function(t,e,n,i,r,o){void 0===o&&(o=null);for(var s=0,a=e.length,u=n.frame;s<r;){var h=t[2*(i+s)],l=t[2*(i+s)+1];if(o){var c=o.a*h+o.c*l+o.tx;l=o.b*h+o.d*l+o.ty,h=c}s++,e.push(h/u.width,l/u.height)}var p=n.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(e,n,a,r)},e.prototype.adjustUvs=function(t,e,n,i){for(var r=e.baseTexture,o=1e-6,s=n+2*i,a=e.frame,u=a.width/r.width,h=a.height/r.height,l=a.x/a.width,c=a.y/a.height,p=Math.floor(t[n]+o),d=Math.floor(t[n+1]+o),f=n+2;f<s;f+=2)p=Math.min(p,Math.floor(t[f]+o)),d=Math.min(d,Math.floor(t[f+1]+o));for(l-=p,c-=d,f=n;f<s;f+=2)t[f]=(t[f]+l)*u,t[f+1]=(t[f+1]+c)*h},e.BATCHABLE_SIZE=100,e}(R.g),_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=X.BUTT,e.join=V.MITER,e.miterLimit=10,e}return K(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Y),bt=new Float32Array(3),xt={},wt=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._geometry=e||new yt,n._geometry.refCount++,n.shader=null,n.state=R.E.for2d(),n._fillStyle=new Y,n._lineStyle=new _t,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=F.b.NORMAL,n}return K(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Object(c.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6];t={width:n,texture:i,color:r,alpha:o,matrix:s,alignment:a,native:u},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({width:0,texture:R.G.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:X.BUTT,join:V.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var h=0<t.width&&0<t.alpha;return h?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:h},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;2<e&&(this.drawShape(this.currentPath),this.currentPath=new d.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new d.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,i=n[n.length-2],r=n[n.length-1];return i===t&&r===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,i){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),ht.curveTo(t,e,n,i,r),this},e.prototype.bezierCurveTo=function(t,e,n,i,r,o){return this._initCurve(),ut.curveTo(t,e,n,i,r,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,i,r){this._initCurve(t,e);var o=this.currentPath.points,s=at.curveTo(t,e,n,i,r,o);if(s){var a=s.cx,u=s.cy,h=s.radius,l=s.startAngle,c=s.endAngle,p=s.anticlockwise;this.arc(a,u,h,l,c,p)}return this},e.prototype.arc=function(t,e,n,i,r,o){if(void 0===o&&(o=!1),i===r)return this;if(!o&&r<=i?r+=d.f:o&&i<=r&&(i+=d.f),0==r-i)return this;var s=t+Math.cos(i)*n,a=e+Math.sin(i)*n,u=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var l=Math.abs(h[h.length-2]-s),c=Math.abs(h[h.length-1]-a);l<u&&c<u||h.push(s,a)}else this.moveTo(s,a),h=this.currentPath.points;return at.arc(s,a,t,e,n,i,r,o,h),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:R.G.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof R.G){Object(c.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,n=e[0],i=e[1],r=e[2],o=e[3];t={texture:n,color:i,alpha:r,matrix:o},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({texture:R.G.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var s=0<t.alpha;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,i){return this.drawShape(new d.j(t,e,n,i))},e.prototype.drawRoundedRect=function(t,e,n,i,r){return this.drawShape(new d.k(t,e,n,i,r))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new d.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,i){return this.drawShape(new d.c(t,e,n,i))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];var r=!0,o=n[0];t=o.points?(r=o.closeStroke,o.points):Array.isArray(n[0])?n[0]:n;var s=new d.h(t);return s.closeStroke=r,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,n,i,r,o){return void 0===o&&(o=0),this.drawPolygon(new st(t,e,n,i,r,o))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===d.l.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var i=0;i<n;i++){var r=t.batches[i],o=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),u={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:Object(c.hex2rgb)(o),_tintRGB:o,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,i=this.tint,r=this.worldAlpha,o=e.uniforms,s=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(i>>16&255)/255*r,o.tint[1]=(i>>8&255)/255*r,o.tint[2]=(255&i)/255*r,o.tint[3]=r,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var a=0,u=s.length;a<u;a++)this._renderDrawCallDirect(t,n.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,i=e.type,r=e.size,o=e.start,s=n.count,a=0;a<s;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(i,r,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!xt[n]){for(var i=t.plugins.batch.MAX_TEXTURES,r=new Int32Array(i),o=0;o<i;o++)r[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new d.d,default:R.J.from({uSamplers:r},!0)},a=t.plugins[n]._shader.program;xt[n]=new R.C(a,s)}e=xt[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,i=e.minY,r=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,i,r,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(c.hex2rgb)(this.tint,bt),e=0;e<this.batches.length;e++){var n=this.batches[e],i=n._batchRGB,r=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);n._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,u=this._geometry.points,h=this.vertexData,l=0,c=0;c<u.length;c+=2){var p=u[c],d=u[c+1];h[l++]=n*p+r*d+s,h[l++]=o*d+i*p+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new d.g,e}(b),Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Pt=new d.g,Ot=new Uint16Array([0,1,2,0,2,3]),Et=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new d.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=F.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||R.G.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Ot,n.pluginName="batch",n.isSprite=!0,n._roundPixels=p.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(c.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(c.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,d=0,f=0,g=0,m=0;if(g=h?(d=(f=h.x-c._x*l.width)+h.width,(m=h.y-c._y*l.height)+h.height):(d=(f=-c._x*l.width)+l.width,(m=-c._y*l.height)+l.height),u[0]=n*f+r*m+s,u[1]=o*m+i*f+a,u[2]=n*d+r*m+s,u[3]=o*m+i*d+a,u[4]=n*d+r*g+s,u[5]=o*g+i*d+a,u[6]=n*f+r*g+s,u[7]=o*g+i*f+a,this._roundPixels)for(var v=p.b.RESOLUTION,y=0;y<u.length;++y)u[y]=Math.round((u[y]*v|0)/v)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,i=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,u=r.d,h=r.tx,l=r.ty,c=-i._x*n.width,p=c+n.width,d=-i._y*n.height,f=d+n.height;e[0]=o*c+a*d+h,e[1]=u*d+s*c+l,e[2]=o*p+a*d+h,e[3]=u*d+s*p+l,e[4]=o*p+a*f+h,e[5]=u*f+s*p+l,e[6]=o*c+a*f+h,e[7]=u*f+s*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new d.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Pt);var e=this._texture.orig.width,n=this._texture.orig.height,i=-e*this.anchor.x,r=0;return Pt.x>=i&&Pt.x<i+e&&(r=-n*this.anchor.y,Pt.y>=r&&Pt.y<r+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof R.G?t:R.G.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(c.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(c.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||R.G.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(b),At=function(t,e){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(St||(St={}));var It={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:St.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ct=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Mt=function(){function t(t){this.styleID=0,this.reset(),Dt(this,t,t)}return t.prototype.clone=function(){var e={};return Dt(e,this,It),new t(e)},t.prototype.reset=function(){Dt(this,It,It)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=kt(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=kt(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=kt(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;0<=n;n--){var i=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&Ct.indexOf(i)<0&&(i='"'+i+'"'),e[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Rt(t){return"number"==typeof t?Object(c.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function kt(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Rt(t[e]);return t}return Rt(t)}function Dt(t,e,n){for(var i in n)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Lt=function(){function t(t,e,n,i,r,o,s,a,u){this.text=t,this.style=e,this.width=n,this.height=i,this.lines=r,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}return t.measureText=function(e,n,i,r){void 0===r&&(r=t._canvas),i=null==i?n.wordWrap:i;var o=n.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);var a=r.getContext("2d");a.font=o;for(var u=(i?t.wordWrap(e,n,r):e).split(/(?:\r\n|\r|\n)/),h=new Array(u.length),l=0,c=0;c<u.length;c++){var p=a.measureText(u[c]).width+(u[c].length-1)*n.letterSpacing;h[c]=p,l=Math.max(l,p)}var d=l+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);var f=n.lineHeight||s.fontSize+n.strokeThickness,g=Math.max(f,s.fontSize+n.strokeThickness)+(u.length-1)*(f+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new t(e,n,d,g,u,h,f+n.leading,l,s)},t.wordWrap=function(e,n,i){void 0===i&&(i=t._canvas);for(var r=i.getContext("2d"),o=0,s="",a="",u=Object.create(null),h=n.letterSpacing,l=n.whiteSpace,c=t.collapseSpaces(l),p=t.collapseNewlines(l),d=!c,f=n.wordWrapWidth+h,g=t.tokenize(e),m=0;m<g.length;m++){var v=g[m];if(t.isNewline(v)){if(!p){a+=t.addLine(s),d=!c,s="",o=0;continue}v=" "}if(c){var y=t.isBreakingSpace(v),_=t.isBreakingSpace(s[s.length-1]);if(y&&_)continue}var b=t.getFromCache(v,h,u,r);if(f<b)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(v,n.breakWords))for(var x=t.wordWrapSplit(v),w=0;w<x.length;w++){for(var T=x[w],S=1;x[w+S];){var P=x[w+S],O=T[T.length-1];if(t.canBreakChars(O,P,v,w,n.breakWords))break;T+=P,S++}w+=T.length-1;var E=t.getFromCache(T,h,u,r);f<E+o&&(a+=t.addLine(s),d=!1,s="",o=0),s+=T,o+=E}else{0<s.length&&(a+=t.addLine(s),s="",o=0);var A=m===g.length-1;a+=t.addLine(v,!A),d=!1,s="",o=0}else f<b+o&&(d=!1,a+=t.addLine(s),s="",o=0),(0<s.length||!t.isBreakingSpace(v)||d)&&(s+=v,o+=b)}return a+t.addLine(s,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),n?e+"\n":e},t.getFromCache=function(t,e,n,i){var r=n[t];if("number"!=typeof r){var o=t.length*e;r=i.measureText(t).width+o,n[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;0<=n;n--){var i=e[n];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&0<=t._newlines.indexOf(e.charCodeAt(0))},t.isBreakingSpace=function(e){return"string"==typeof e&&0<=t._breakingSpaces.indexOf(e.charCodeAt(0))},t.tokenize=function(e){var n=[],i="";if("string"!=typeof e)return n;for(var r=0;r<e.length;r++){var o=e[r];t.isBreakingSpace(o)||t.isNewline(o)?(""!==i&&(n.push(i),i=""),n.push(o)):i+=o}return""!==i&&n.push(i),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,i,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},i=t._canvas,r=t._context;r.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(r.measureText(o).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),u=2*a;a=a*t.BASELINE_MULTIPLIER|0,i.width=s,i.height=u,r.fillStyle="#f00",r.fillRect(0,0,s,u),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o,0,a);var h=r.getImageData(0,0,s,u).data,l=h.length,c=4*s,p=0,d=0,f=!1;for(p=0;p<a;++p){for(var g=0;g<c;g+=4)if(255!==h[d+g]){f=!0;break}if(f)break;d+=c}for(n.ascent=a-p,d=l-c,f=!1,p=u;a<p;--p){for(g=0;g<c;g+=4)if(255!==h[d+g]){f=!0;break}if(f)break;d-=c}return n.descent=p-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Bt=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Bt.width=Bt.height=10,Lt._canvas=Bt,Lt._context=Bt.getContext("2d"),Lt._fonts={},Lt.METRICS_STRING="|q",Lt.BASELINE_SYMBOL="M",Lt.BASELINE_MULTIPLIER=1.4,Lt._newlines=[10,13];var Nt={texture:!0,children:!(Lt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0},Ft=function(t){function e(e,n,i){var r=this,o=!1;i||(i=document.createElement("canvas"),o=!0),i.width=3,i.height=3;var s=R.G.from(i);return s.orig=new d.j,s.trim=new d.j,(r=t.call(this,s)||this)._ownCanvas=o,r.canvas=i,r.context=r.canvas.getContext("2d"),r._resolution=p.b.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=n,r.localStyleID=-1,r}return function(t,e){function n(){this.constructor=t}At(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,i,r=this.context,o=Lt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,u=o.lines,h=o.lineHeight,l=o.lineWidths,p=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var f=e.dropShadow?2:1,g=0;g<f;++g){var m=e.dropShadow&&0===g,v=m?Math.ceil(Math.max(1,a)+2*e.padding):0,y=v*this._resolution;if(m){r.fillStyle="black",r.strokeStyle="black";var _=e.dropShadowColor,b=Object(c.hex2rgb)("number"==typeof _?_:Object(c.string2hex)(_));r.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+y}else r.fillStyle=this._generateFillStyle(e,u,o),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var x=0;x<u.length;x++)n=e.strokeThickness/2,i=e.strokeThickness/2+x*h+d.ascent,"right"===e.align?n+=p-l[x]:"center"===e.align&&(n+=(p-l[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[x],n+e.padding,i+e.padding-v,!0),e.fill&&this.drawLetterSpacing(u[x],n+e.padding,i+e.padding-v)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n,i){void 0===i&&(i=!1);var r=this._style.letterSpacing;if(0!==r)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,u=0,h=0;h<s.length;++h){var l=s[h];i?this.context.strokeText(l,o,n):this.context.fillText(l,o,n),o+=a-(u=this.context.measureText(t.substring(h+1)).width)+r,a=u}else i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(c.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,i=this._style,r=i.trim?0:i.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-r,n.trim.y=-r,n.orig.width=n._frame.width-2*r,n.orig.height=n._frame.height-2*r,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var i,r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-o-2*s,u=Math.ceil(this.canvas.height/this._resolution)-o-2*s,h=r.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=h.length+1,p=1;p<c;++p)l.push(p/c);if(h.unshift(r[0]),l.unshift(0),h.push(r[r.length-1]),l.push(1),t.fillGradientType===St.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,s,a/2,u+s);var d=0,f=(n.fontProperties.fontSize+t.strokeThickness)/u;for(p=0;p<e.length;p++)for(var g=n.lineHeight*p,m=0;m<h.length;m++){var v=g/u+("number"==typeof l[m]?l[m]:m/h.length)*f,y=Math.max(d,v);y=Math.min(y,1),i.addColorStop(y,h[m]),d=y}}else{i=this.context.createLinearGradient(s,u/2,a+s,u/2);var _=h.length+1,b=1;for(p=0;p<h.length;p++){var x;x="number"==typeof l[p]?l[p]:b/_,i.addColorStop(x,h[p]),b++}}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Nt,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(c.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(c.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Mt?t:new Mt(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(Et);p.b.UPLOADS_PER_FRAME=4;var jt=function(t,e){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Ut=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},t}();function Vt(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof R.G){var r=t._textures[i].baseTexture;-1===e.indexOf(r)&&(e.push(r),n=!0)}return n}function Xt(t,e){if(t.baseTexture instanceof R.e){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Gt(t,e){if(t._texture&&t._texture instanceof R.G){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Ht(t,e){return e instanceof Ft&&(e.updateText(!0),!0)}function Wt(t,e){if(e instanceof Mt){var n=e.toFontString();return Lt.measureFont(n),!0}return!1}function zt(t,e){if(t instanceof Ft){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Yt(t,e){return t instanceof Mt&&(-1===e.indexOf(t)&&e.push(t),!0)}var qt=function(){function t(t){var e=this;this.limiter=new Ut(p.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(zt),this.registerFindHook(Yt),this.registerFindHook(Vt),this.registerFindHook(Xt),this.registerFindHook(Gt),this.registerUploadHook(Ht),this.registerUploadHook(Wt)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,T.a.system.addOnce(this.tick,this,T.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)T.a.system.addOnce(this.tick,this,T.c.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);for(n=this.completes.length=0,i=r.length;n<i;n++)r[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof b)for(e=t.children.length-1;0<=e;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&T.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Kt(t,e){return e instanceof R.e&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Zt(t,e){if(!(e instanceof wt))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var i=n.batches,r=0;r<i.length;r++){var o=i[r].style.texture;o&&Kt(t,o.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function Qt(t,e){return t instanceof wt&&(e.push(t),!0)}var Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Qt),n.registerUploadHook(Kt),n.registerUploadHook(Zt),n}return function(t,e){function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(qt),$t=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),te=function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof R.G?t:null,this.baseTexture=t instanceof R.e?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(c.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,i=t.BATCH_SIZE;n-e<i&&n<this._frameKeys.length;){var r=this._frameKeys[n],o=this._frames[r],s=o.frame;if(s){var a,u=null,h=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,l=new d.j(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);a=o.rotated?new d.j(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new d.j(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new d.j(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new R.G(this.baseTexture,a,l,u,o.rotated?2:0,o.anchor),R.G.addToCache(this.textures[r],r)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var i=t[e][n];this.animations[e].push(this.textures[i])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),ee=function(){function t(){}return t.use=function(e,n){var i=e.name+"_image";if(e.data&&e.type===N.c.TYPE.JSON&&e.data.frames&&!this.resources[i]){var r={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},o=t.getResourcePath(e,this.baseUrl);this.add(i,o,r,function(t){if(t.error)n(t.error);else{var i=new te(t.texture,e.data,e.url);i.parse(function(){e.spritesheet=i,e.textures=i.textures,n()})}})}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:c.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ie(t,e){function n(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var re=new d.g,oe=function(t){function e(e,n,i){void 0===n&&(n=100),void 0===i&&(i=100);var r=t.call(this,e)||this;return r.tileTransform=new d.m,r._width=n,r._height=i,r.uvMatrix=r.texture.uvMatrix||new R.H(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return ie(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,i)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new d.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,re);var e=this._width,n=this._height,i=-e*this.anchor._x;if(re.x>=i&&re.x<i+e){var r=-n*this.anchor._y;if(re.y>=r&&re.y<r+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return"number"==typeof n&&(Object(c.deprecation)("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new e(R.G.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Et),se="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",ae=new d.d,ue=function(t){function e(e){var n=t.call(this,e)||this,i={globals:n.renderer.globalUniforms};return n.shader=R.C.from(se,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),n.simpleShader=R.C.from(se,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),n.quad=new R.y,n.state=R.E.for2d(),n}return ie(e,t),e.prototype.render=function(t){var e=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((i=n.uvs)[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y),n.invalidate();var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,u=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==F.q.CLAMP:o.wrapMode===F.q.CLAMP&&(o.wrapMode=F.q.REPEAT));var h=u?this.simpleShader:this.shader,l=r.width,p=r.height,d=t._width,f=t._height;ae.set(s.a*l/d,s.b*l/f,s.c*p/d,s.d*p/f,s.tx/d,s.ty/f),ae.invert(),u?ae.prepend(a.mapCoord):(h.uniforms.uMapCoord=a.mapCoord.toArray(!0),h.uniforms.uClampFrame=a.uClampFrame,h.uniforms.uClampOffset=a.uClampOffset),h.uniforms.uTransform=ae.toArray(!0),h.uniforms.uColor=Object(c.premultiplyTintToRgba)(t.tint,t.worldAlpha,h.uniforms.uColor,o.alphaMode),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=r,e.shader.bind(h),e.geometry.bind(n),this.state.blendMode=Object(c.correctBlendMode)(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(R.v),he=function(t,e){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function le(t,e){function n(){this.constructor=t}he(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ce=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),pe=new d.g,de=new d.h,fe=function(t){function e(e,n,i,r){void 0===r&&(r=F.e.TRIANGLES);var o=t.call(this)||this;return(o.geometry=e).refCount++,o.shader=n,o.state=i||R.E.for2d(),o.drawMode=r,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o._roundPixels=p.b.ROUND_PIXELS,o.batchUvs=null,o}return le(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===F.e.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,i=n.a,r=n.b,o=n.c,s=n.d,a=n.tx,u=n.ty,h=this.vertexData,l=0;l<h.length/2;l++){var c=e[2*l],d=e[2*l+1];h[2*l]=i*c+o*d+a,h[2*l+1]=r*c+s*d+u}if(this._roundPixels){var f=p.b.RESOLUTION;for(l=0;l<h.length;++l)h[l]=Math.round((h[l]*f|0)/f)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new ce(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,pe);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=de.points,i=this.geometry.getIndex().data,r=i.length,o=4===this.drawMode?3:1,s=0;s+2<r;s+=o){var a=2*i[s],u=2*i[s+1],h=2*i[s+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[h],n[5]=e[h+1],de.contains(pe.x,pe.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(b),ge=function(t){function e(e,n){var i=this,r={uSampler:e,alpha:1,uTextureMatrix:d.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(r,n.uniforms),(i=t.call(this,n.program||R.w.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,i.uvMatrix=new R.H(e),i.batchable=void 0===n.program,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return le(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(c.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(R.C),me=function(t){function e(e,n,i){var r=t.call(this)||this,o=new R.l(e),s=new R.l(n,!0),a=new R.l(i,!0,!0);return r.addAttribute("aVertexPosition",o,2,!1,F.p.FLOAT).addAttribute("aTextureCoord",s,2,!1,F.p.FLOAT).addIndex(a),r._updateId=-1,r}return le(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(R.s),ve=function(t,e){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ye=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},_e=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in e){var r=e[i].match(/^[a-z]+/gm)[0],o=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var u=o[a].split("="),h=u[0],l=u[1].replace(/"/gm,""),c=parseFloat(l),p=isNaN(c)?l:c;s[h]=p}n[r].push(s)}var d=new ye;return n.info.forEach(function(t){return d.info.push({face:t.face,size:parseInt(t.size,10)})}),n.common.forEach(function(t){return d.common.push({lineHeight:parseInt(t.lineHeight,10)})}),n.page.forEach(function(t){return d.page.push({id:parseInt(t.id,10),file:t.file})}),n.char.forEach(function(t){return d.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})}),n.kerning.forEach(function(t){return d.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})}),d},t}(),be=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new ye,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=0;a<n.length;a++)e.info.push({face:n[a].getAttribute("face"),size:parseInt(n[a].getAttribute("size"),10)});for(a=0;a<i.length;a++)e.common.push({lineHeight:parseInt(i[a].getAttribute("lineHeight"),10)});for(a=0;a<r.length;a++)e.page.push({id:parseInt(r[a].getAttribute("id"),10)||0,file:r[a].getAttribute("file")});for(a=0;a<o.length;a++){var u=o[a];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(a=0;a<s.length;a++)e.kerning.push({first:parseInt(s[a].getAttribute("first"),10),second:parseInt(s[a].getAttribute("second"),10),amount:parseInt(s[a].getAttribute("amount"),10)});return e},t}(),xe=function(){function t(){}return t.test=function(t){if("string"==typeof t&&-1<t.indexOf("<font>")){var e=(new self.DOMParser).parseFromString(t,"text/xml");return be.test(e)}return!1},t.parse=function(t){var e=(new window.DOMParser).parseFromString(t,"text/xml");return be.parse(e)},t}(),we=[_e,be,xe];function Te(t){for(var e=0;e<we.length;e++)if(we[e].test(t))return we[e];return null}function Se(t,e,n,i,r,o){var s,a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var u=n.dropShadow?n.dropShadowDistance:0,h=n.padding||0,l=Math.ceil(t.width/i)-u-2*h,c=Math.ceil(t.height/i)-u-2*h,p=a.slice(),d=n.fillGradientStops.slice();if(!d.length)for(var f=p.length+1,g=1;g<f;++g)d.push(g/f);if(p.unshift(a[0]),d.unshift(0),p.push(a[a.length-1]),d.push(1),n.fillGradientType===St.LINEAR_VERTICAL){s=e.createLinearGradient(l/2,h,l/2,c+h);var m=0,v=(o.fontProperties.fontSize+n.strokeThickness)/c;for(g=0;g<r.length;g++)for(var y=o.lineHeight*g,_=0;_<p.length;_++){var b=y/c+("number"==typeof d[_]?d[_]:_/p.length)*v,x=Math.max(m,b);x=Math.min(x,1),s.addColorStop(x,p[_]),m=x}}else{s=e.createLinearGradient(h,c/2,l+h,c/2);var w=p.length+1,T=1;for(g=0;g<p.length;g++){var S;S="number"==typeof d[g]?d[g]:T/w,s.addColorStop(S,p[g]),T++}}return s}function Pe(t,e,n,i,r,o,s){var a=n.text,u=n.fontProperties;e.translate(i,r),e.scale(o,o);var h=s.strokeThickness/2,l=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=Se(t,e,s,o,[a],n),e.strokeStyle=s.stroke,e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=Se(t,e,s,o,[a],n),e.strokeStyle=s.stroke;var p=s.dropShadowColor,d=Object(c.hex2rgb)("number"==typeof p?p:Object(c.string2hex)(p));s.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(a,h,l+n.lineHeight-u.descent),s.fill&&e.fillText(a,h,l+n.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var Oe=function(){function t(t,e,n){var i=t.info[0],r=t.common[0],o=t.page[0],s=Object(c.getResolutionOfUrl)(o.file),a={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/s,this.chars={},this.pageTextures=a;for(var u=0;u<t.page.length;u++){var h=t.page[u],l=h.id,p=h.file;a[l]=e instanceof Array?e[u]:e[p]}for(u=0;u<t.char.length;u++){var f=t.char[u],g=(l=f.id,f.page),m=t.char[u],v=m.x,y=m.y,_=m.width,b=m.height,x=m.xoffset,w=m.yoffset,T=m.xadvance;v/=s,y/=s,_/=s,b/=s,x/=s,w/=s,T/=s;var S=new d.j(v+a[g].frame.x/s,y+a[g].frame.y/s,_,b);this.chars[l]={xOffset:x,yOffset:w,xAdvance:T,kerning:{},texture:new R.G(a[g].baseTexture,S),page:g}}for(u=0;u<t.kerning.length;u++){var P=t.kerning[u],O=P.first,E=P.second,A=P.amount;O/=s,E/=s,A/=s,this.chars[E]&&(this.chars[E].kerning[O]=A)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,i){var r;if(e instanceof ye)r=e;else{var o=Te(e);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(e)}n instanceof R.G&&(n=[n]);var s=new t(r,n,i);return t.available[s.font]=s},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,i),o=r.chars,s=r.padding,a=r.resolution,u=r.textureWidth,h=r.textureHeight,l=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var o=r[0].charCodeAt(0),s=r[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,u=s;a<=u;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,r.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),c=n instanceof Mt?n:new Mt(n),p=u,d=new ye;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var f,g,m,v=0,y=0,_=0,b=[],x=0;x<l.length;x++){f||((f=document.createElement("canvas")).width=u,f.height=h,g=f.getContext("2d"),m=new R.e(f,{resolution:a}),b.push(new R.G(m)),d.page.push({id:b.length-1,file:""}));var w=Lt.measureText(l[x],c,!1,f),T=w.width,S=Math.ceil(w.height),P=Math.ceil(("italic"===c.fontStyle?2:1)*T);if(h-S*a<=y){if(0===y)throw new Error("[BitmapFont] textureHeight "+h+"px is too small for "+c.fontSize+"px fonts");--x,m=g=f=null,_=v=y=0}else if(_=Math.max(S+w.fontProperties.descent,_),p<=P*a+v)--x,y+=_*a,y=Math.ceil(y),_=v=0;else{Pe(f,g,w,v,y,a,c);var O=w.text.charCodeAt(0);d.char.push({id:O,page:b.length-1,x:v/a,y:y/a,width:P,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(T-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),v+=(P+2*s)*a,v=Math.ceil(v)}}var E=new t(d,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=E},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Ee=[],Ae=[],Ie=function(t){function e(n,i){void 0===i&&(i={});var r=t.call(this)||this;r._tint=16777215,i.font&&(Object(c.deprecation)("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),r._upgradeStyle(i));var o=Object.assign({},e.styleDefaults,i),s=o.align,a=o.tint,u=o.maxWidth,h=o.letterSpacing,l=o.fontName,f=o.fontSize;if(!Oe.available[l])throw new Error('Missing BitmapFont "'+l+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=s,r._tint=a,r._fontName=l,r._fontSize=f||Oe.available[l].size,r._text=n,r._maxWidth=u,r._maxLineHeight=0,r._letterSpacing=h,r._anchor=new d.e(function(){r.dirty=!0},r,0,0),r._roundPixels=p.b.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}return function(t,e){function n(){this.constructor=t}ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(){for(var t,e=Oe.available[this._fontName],n=this._fontSize/e.size,i=new d.g,r=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,u=this._maxWidth*e.size/this._fontSize,h=null,l=0,p=0,f=0,g=-1,m=0,v=0,y=0,_=0;_<a;_++){var b=s.charCodeAt(_),x=s.charAt(_);if(/(?:\s)/.test(x)&&(g=_,m=l),"\r"!==x&&"\n"!==x){var w=e.chars[b];if(w){h&&w.kerning[h]&&(i.x+=w.kerning[h]);var T=Ae.pop()||{texture:R.G.EMPTY,line:0,charCode:0,position:new d.g};T.texture=w.texture,T.line=f,T.charCode=b,T.position.x=i.x+w.xOffset+this._letterSpacing/2,T.position.y=i.y+w.yOffset,r.push(T),i.x+=w.xAdvance+this._letterSpacing,l=i.x,y=Math.max(y,w.yOffset+w.texture.height),h=b,-1!==g&&0<u&&i.x>u&&(++v,Object(c.removeItems)(r,1+g-v,1+_-g),_=g,g=-1,o.push(m),p=Math.max(p,m),f++,i.x=0,i.y+=e.lineHeight,h=null)}}else o.push(l),p=Math.max(p,l),++f,++v,i.x=0,i.y+=e.lineHeight,h=null}var S=s.charAt(s.length-1);"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(l=m),o.push(l),p=Math.max(p,l));var P=[];for(_=0;_<=f;_++){var O=0;"right"===this._align?O=p-o[_]:"center"===this._align&&(O=(p-o[_])/2),P.push(O)}var E=r.length,A={},I=[],C=this._activePagesMeshData;for(_=0;_<C.length;_++)Ee.push(C[_]);for(_=0;_<E;_++){var M=(V=r[_].texture).baseTexture.uid;if(!A[M]){if(!(q=Ee.pop())){var k=new me,D=new ge(R.G.EMPTY);q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new fe(k,D),vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var L=this._textureCache;L[M]=L[M]||new R.G(V.baseTexture),q.mesh.texture=L[M],q.mesh.tint=this._tint,I.push(q),A[M]=q}A[M].total++}for(_=0;_<C.length;_++)-1===I.indexOf(C[_])&&this.removeChild(C[_].mesh);for(_=0;_<I.length;_++)I[_].mesh.parent!==this&&this.addChild(I[_].mesh);for(var _ in this._activePagesMeshData=I,A){var B=(q=A[_]).total;if(!((null===(t=q.indices)||void 0===t?void 0:t.length)>6*B)||q.vertices.length<2*fe.BATCHABLE_SIZE)q.vertices=new Float32Array(8*B),q.uvs=new Float32Array(8*B),q.indices=new Uint16Array(6*B);else for(var N=q.total,F=q.vertices,j=4*N*2;j<F.length;j++)F[j]=0;q.mesh.size=6*B}for(_=0;_<E;_++){var U=(x=r[_]).position.x+P[x.line];this._roundPixels&&(U=Math.round(U));var V,X=U*n,G=x.position.y*n,H=A[(V=x.texture).baseTexture.uid],W=V.frame,z=V._uvs,Y=H.index++;H.indices[6*Y+0]=0+4*Y,H.indices[6*Y+1]=1+4*Y,H.indices[6*Y+2]=2+4*Y,H.indices[6*Y+3]=0+4*Y,H.indices[6*Y+4]=2+4*Y,H.indices[6*Y+5]=3+4*Y,H.vertices[8*Y+0]=X,H.vertices[8*Y+1]=G,H.vertices[8*Y+2]=X+W.width*n,H.vertices[8*Y+3]=G,H.vertices[8*Y+4]=X+W.width*n,H.vertices[8*Y+5]=G+W.height*n,H.vertices[8*Y+6]=X,H.vertices[8*Y+7]=G+W.height*n,H.uvs[8*Y+0]=z.x0,H.uvs[8*Y+1]=z.y0,H.uvs[8*Y+2]=z.x1,H.uvs[8*Y+3]=z.y1,H.uvs[8*Y+4]=z.x2,H.uvs[8*Y+5]=z.y2,H.uvs[8*Y+6]=z.x3,H.uvs[8*Y+7]=z.y3}for(var _ in this._textWidth=p*n,this._textHeight=(i.y+e.lineHeight)*n,A){var q=A[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var K=0,Z=this._textWidth*this.anchor.x,Q=this._textHeight*this.anchor.y,J=0;J<q.total;J++)q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q;this._maxLineHeight=y*n;var $=q.mesh.geometry.getBuffer("aVertexPosition"),tt=q.mesh.geometry.getBuffer("aTextureCoord"),et=q.mesh.geometry.getIndex();$.data=q.vertices,tt.data=q.uvs,et.data=q.indices,$.update(),tt.update(),et.update()}for(_=0;_<r.length;_++)Ae.push(r[_])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Oe.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),2<=e.length&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(e){var n=this._textureCache;for(var i in n)n[i].destroy(),delete n[i];this._textureCache=null,t.prototype.destroy.call(this,e)},e.registerFont=function(t,e){return Object(c.deprecation)("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Oe.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return Object(c.deprecation)("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Oe.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(b),Ce=function(){function t(){}return t.add=function(){N.c.setExtensionXhrType("fnt",N.c.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var i=Te(e.data);if(i)for(var r=t.getBaseUrl(this,e),o=i.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=Oe.install(o,s,!0),n())},u=0;u<o.page.length;++u){var h=o.page[u].file,l=r+h,c=!1;for(var p in this.resources){var d=this.resources[p];if(d.url===l){d.metadata.pageFile=h,d.texture?a(d):d.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:N.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},e.metadata.imageMetadata),parentResource:e};this.add(l,f,a)}}else n()},t.getBaseUrl=function(e,n){var i=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===i&&(i=""),e.baseUrl&&i&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(i+="/")),(i=i.replace(e.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),Me=function(t,e){return(Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Re=function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,R.O,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}return function(t,e){function n(){this.constructor=t}Me(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(R.m),ke=function(t,e){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function De(t,e){function n(){this.constructor=t}ke(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Le,Be,Ne,Fe,je,Ue,Ve,Xe,Ge,He,We,ze,Ye,qe,Ke,Ze,Qe,Je={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},$e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Le||(Le={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Be||(Be={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Ne||(Ne={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Fe||(Fe={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(je||(je={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ue||(Ue={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ve||(Ve={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Xe||(Xe={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ge||(Ge={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(He||(He={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(We||(We={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(ze||(ze={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Ye||(Ye={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(qe||(qe={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Ke||(Ke={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Ze||(Ze={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Qe||(Qe={}));var tn=function(t){function e(e,n,i,r,o){void 0===n&&(n=8),void 0===i&&(i=4),void 0===r&&(r=p.b.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var n,i=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=n.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(i-1)+".0"),o+="\n"}return(r=r.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),u=function(t){for(var e,n=Je[t],i=n.length,r=$e,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());i<=(e=s)&&(e=t-s-1),o+=a=a.replace("%value%",n[e].toString()),o+="\n"}return(r=r.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,u)||this).horizontal=e,s.resolution=r,s._quality=0,s.quality=i,s.blur=n,s}return De(e,t),e.prototype.apply=function(t,e,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,i);else{var r=t.getFilterTexture(),o=t.renderer,s=e,a=r;this.state.blend=!1,t.applyFilter(this,s,a,Ye.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(s,Ye.BLIT);var h=this.uniforms.uSampler=a;a=s,s=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,n,i),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(R.m),en=function(t){function e(e,n,i,r){void 0===e&&(e=8),void 0===n&&(n=4),void 0===i&&(i=p.b.FILTER_RESOLUTION),void 0===r&&(r=5);var o=t.call(this)||this;return o.blurXFilter=new tn(!0,e,n,i,r),o.blurYFilter=new tn(!1,e,n,i,r),o.resolution=i,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}return De(e,t),e.prototype.apply=function(t,e,n,i){var r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Ye.CLEAR),this.blurYFilter.apply(t,s,n,i),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,n,i):this.blurXFilter.apply(t,e,n,i)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(R.m),nn=function(t,e){return(nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},rn=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,R.N,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}nn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),i=Math.sin(t),r=1/3,o=(0,Math.sqrt)(r),s=[n+(1-n)*r,r*(1-n)-o*i,r*(1-n)+o*i,0,0,r*(1-n)+o*i,n+r*(1-n),r*(1-n)-o*i,0,0,r*(1-n)-o*i,r*(1-n)+o*i,n+r*(1-n),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,i=-.5*(n-1),r=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,i=-.5*(n-1),r=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,i,r){var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,u=((i=i||3375104)>>16&255)/255,h=(i>>8&255)/255,l=(255&i)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,h,l,e=e||.15,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(R.m);rn.prototype.grayscale=rn.prototype.greyscale;var on=function(t,e){return(on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},sn=function(t){function e(e,n){var i=this,r=new d.d;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,i.maskMatrix=r,null==n&&(n=20),i.scale=new d.g(n,n),i}return function(t,e){function n(){this.constructor=t}on(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),s=Math.sqrt(r.c*r.c+r.d*r.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/s,this.uniforms.rotation[3]=r.d/s),t.applyFilter(this,e,n,i)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(R.m),an=function(t,e){return(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},un=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function n(){this.constructor=t}an(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(R.m),hn=function(t,e){return(hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ln=function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var i=t.call(this,R.N,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=n,i}return function(t,e){function n(){this.constructor=t}hn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(R.m),cn=new d.d;v.prototype._cacheAsBitmap=!1,v.prototype._cacheData=null;var pn=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(v.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&((this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new pn),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),v.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},v.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;n.pad(i)}n.ceil(p.b.RESOLUTION);var r=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,u=R.z.create({width:n.width,height:n.height}),h="cacheAsBitmap_"+Object(c.uid)();this._cacheData.textureCacheId=h,R.e.addToCache(u.baseTexture,h),R.G.addToCache(u,h);var l=this.transform.localTransform.copyTo(cn).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,u,!0,l,!1),t.projection.transform=a,t.renderTexture.bind(r,o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new Et(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},v.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},v.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,r=t._projTransform;e.ceil(p.b.RESOLUTION);var o=R.z.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Object(c.uid)();this._cacheData.textureCacheId=s,R.e.addToCache(o.baseTexture,s),R.G.addToCache(o,s);var a=cn;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,o,!0,a,!1),t.context=i,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new Et(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},v.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},v.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},v.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,R.e.removeFromCache(this._cacheData.textureCacheId),R.G.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},v.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},v.prototype.name=null,b.prototype.getChildByName=function(t,e){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,i=this.children.length;n<i;n++)if(this.children[n].getChildByName){var r=this.children[n].getChildByName(t,!0);if(r)return r}return null},v.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new d.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var dn=function(t,e){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function fn(t,e){function n(){this.constructor=t}dn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var gn=function(t){function e(e,n,i,r){void 0===e&&(e=100),void 0===n&&(n=100),void 0===i&&(i=10),void 0===r&&(r=10);var o=t.call(this)||this;return o.segWidth=i,o.segHeight=r,o.width=e,o.height=n,o.build(),o}return fn(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],i=[],r=this.segWidth-1,o=this.segHeight-1,s=this.width/r,a=this.height/o,u=0;u<t;u++){var h=u%this.segWidth,l=u/this.segWidth|0;e.push(h*s,l*a),n.push(h/r,l/o)}var c=r*o;for(u=0;u<c;u++){var p=u%r,d=u/r|0,f=d*this.segWidth+p,g=d*this.segWidth+p+1,m=(d+1)*this.segWidth+p,v=(d+1)*this.segWidth+p+1;i.push(f,g,m,g,v,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(me),mn=function(t){function e(e,n,i){void 0===e&&(e=200),void 0===i&&(i=0);var r=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return r.points=n,r._width=e,r.textureScale=i,r.build(),r}return fn(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));var r=n.data,o=i.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var s=0,a=t[0],u=this._width*this.textureScale,h=t.length,l=0;l<h;l++){var c=4*l;if(0<this.textureScale){var p=a.x-t[l].x,d=a.y-t[l].y,f=Math.sqrt(p*p+d*d);a=t[l],s+=f/u}else s=l/(h-1);r[c]=s,r[c+1]=0,r[c+2]=s,r[c+3]=1}var g=0;for(l=0;l<h-1;l++)c=2*l,o[g++]=c,o[g++]=c+1,o[g++]=c+2,o[g++]=c+2,o[g++]=c+1,o[g++]=c+3;n.update(),i.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],i=0,r=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;r=-((e=a<t.length-1?t[a+1]:u).x-n.x),i=e.y-n.y;var l=Math.sqrt(i*i+r*r),c=0<this.textureScale?this.textureScale*this._width/2:this._width/2;i/=l,r/=l,i*=c,r*=c,o[h]=u.x+i,o[h+1]=u.y+r,o[h+2]=u.x-i,o[h+3]=u.y-r,n=u}this.buffers[0].update()}},e.prototype.update=function(){0<this.textureScale?this.build():this.updateVertices()},e}(me),vn=function(t){function e(e,n,i){void 0===i&&(i=0);var r=this,o=new mn(e.height,n,i),s=new ge(e);return 0<i&&(e.baseTexture.wrapMode=F.q.REPEAT),(r=t.call(this,o,s)||this).autoUpdate=!0,r}return fn(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)},e}(fe),yn=function(t){function e(e,n,i){var r=this,o=new gn(e.width,e.height,n,i),s=new ge(R.G.WHITE);return(r=t.call(this,o,s)||this).texture=e,r}return fn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(fe),_n=function(t){function e(e,n,i,r,o){void 0===e&&(e=R.G.EMPTY);var s=this,a=new me(n,i,r);a.getBuffer("aVertexPosition").static=!1;var u=new ge(e);return(s=t.call(this,a,u,null,o)||this).autoUpdate=!0,s}return fn(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(fe),bn=function(t){function e(e,n,i,r,o){void 0===n&&(n=10),void 0===i&&(i=10),void 0===r&&(r=10),void 0===o&&(o=10);var s=t.call(this,R.G.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=r,s._topHeight=i,s._bottomHeight=o,s.texture=e,s}return fn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(e,i)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(yn),xn=n(11),wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Tn=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this,e[0]instanceof R.G?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return function(t,e){function n(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(T.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(T.a.shared.add(this.update,this,T.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],i=0;i<t.length;++i)n.push(R.G.from(t[i]));return new e(n)},e.fromImages=function(t){for(var n=[],i=0;i<t.length;++i)n.push(R.G.from(t[i]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof R.G)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(T.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(T.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Et),Sn=function(t,e){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pn(t,e){function n(){this.constructor=t}Sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var On="5.0.0";function En(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return Object(c.deprecation)(On,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Object(c.deprecation)(On,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return Object(c.deprecation)(On,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return Object(c.deprecation)(On,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Object(c.deprecation)(On,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return Object(c.deprecation)(On,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return Object(c.deprecation)(On,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return Object(c.deprecation)(On,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return Object(c.deprecation)("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return Object(c.deprecation)("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.accessibility={},Object.defineProperties(t.accessibility,{AccessibilityManager:{get:function(){return Object(c.deprecation)("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),t.AccessibilityManager}}}),t.interaction={},Object.defineProperties(t.interaction,{InteractionManager:{get:function(){return Object(c.deprecation)("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),t.InteractionManager}},InteractionData:{get:function(){return Object(c.deprecation)("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),t.InteractionData}},InteractionEvent:{get:function(){return Object(c.deprecation)("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),t.InteractionEvent}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return Object(c.deprecation)("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return Object(c.deprecation)("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return Object(c.deprecation)("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return Object(c.deprecation)("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return Object(c.deprecation)("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return Object(c.deprecation)(On,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return Object(c.deprecation)(On,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Object(c.deprecation)(On,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return Object(c.deprecation)(On,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),t.TilingSprite.fromFrame=function(e,n,i){return Object(c.deprecation)("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),t.TilingSprite.from(e,{width:n,height:i})},t.TilingSprite.fromImage=function(e,n,i,r){return void 0===r&&(r={}),Object(c.deprecation)("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),r&&"object"!=typeof r&&(r={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),r.width=n,r.height=i,t.TilingSprite.from(e,r)},Object.defineProperties(t.utils,{getSvgSize:{get:function(){return Object(c.deprecation)(On,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.resources.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Object(c.deprecation)(On,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return Object(c.deprecation)(On,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return Object(c.deprecation)(On,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return Object(c.deprecation)(On,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return Object(c.deprecation)(On,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return Object(c.deprecation)(On,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return Object(c.deprecation)(On,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return Object(c.deprecation)(On,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){Object(c.deprecation)(On,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return Object(c.deprecation)(On,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return Object(c.deprecation)(On,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return Object(c.deprecation)(On,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})};var e=function(t){return"on"+t.charAt(0).toUpperCase()+t.slice(1)};Object.assign(t.Loader.prototype,{on:function(t){var n=e(t);Object(c.deprecation)(On,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+n+".add")},once:function(t){var n=e(t);Object(c.deprecation)(On,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+n+".once")},off:function(t){var n=e(t);Object(c.deprecation)(On,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+n+".detach")}}),Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return Object(c.deprecation)(On,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return Object(c.deprecation)(On,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){Object(c.deprecation)(On,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){Object(c.deprecation)(On,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){Object(c.deprecation)(On,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){Object(c.deprecation)(On,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return Object(c.deprecation)(On,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Object(c.deprecation)(On,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var n=t.BaseTexture,i=!(n.prototype.loadSource=function(e){Object(c.deprecation)(On,"PIXI.BaseTexture.loadSource method has been deprecated");var n=t.resources.autoDetectResource(e);n.internal=!0,this.setResource(n),this.update()});Object.defineProperties(n.prototype,{hasLoaded:{get:function(){return Object(c.deprecation)(On,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var t;return Object(c.deprecation)(On,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(t=this.resource)||void 0===t?void 0:t.url},set:function(t){Object(c.deprecation)(On,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return Object(c.deprecation)(On,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(t){Object(c.deprecation)(On,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return Object(c.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Object(c.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return i||(Object(c.deprecation)("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),n.fromImage=function(t,e,i,r){Object(c.deprecation)(On,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:e};return n.from(t,{scaleMode:i,resourceOptions:o})},n.fromCanvas=function(t,e){return Object(c.deprecation)(On,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),n.from(t,{scaleMode:e})},n.fromSVG=function(t,e,i,r){Object(c.deprecation)(On,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:e};return n.from(t,{scaleMode:i,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Object(c.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Object(c.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return Object(c.deprecation)(On,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return Object(c.deprecation)(On,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return Object(c.deprecation)(On,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return Object(c.deprecation)(On,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return Object(c.deprecation)("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return Object(c.deprecation)(On,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,e)},returnRenderTarget:function(t){Object(c.deprecation)(On,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){Object(c.deprecation)(On,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),n=this.activeState,i=n.sourceFrame,r=n.destinationFrame;return e.translate(i.x/r.width,i.y/r.height),e.scale(r.width,r.height),e},calculateNormalizedScreenSpaceMatrix:function(t){Object(c.deprecation)(On,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,n=e.sourceFrame,i=e.destinationFrame,r=t.identity();r.translate(n.x/i.width,n.y/i.height);var o=i.width/n.width,s=i.height/n.height;return r.scale(o,s),r}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return Object(c.deprecation)(On,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Object(c.deprecation)(On,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var r=function(t){function e(e,n,i,r){return Object(c.deprecation)(On,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,n,i,r)||this}return Pn(e,t),e}(t.filters.BlurFilterPass),o=function(t){function e(e,n,i,r){return Object(c.deprecation)(On,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,n,i,r)||this}return Pn(e,t),e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:r,BlurYFilter:o});var s=t.Sprite,a=t.Texture,u=t.Graphics;function h(t,e,n,i){return Object(c.deprecation)(On,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),s.from(e,{resourceOptions:{scale:i,crossorigin:n}})}function l(t,e,n,i){return Object(c.deprecation)(On,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),a.from(e,{resourceOptions:{scale:i,crossorigin:n}})}u.prototype.generateCanvasTexture||(u.prototype.generateCanvasTexture=function(){Object(c.deprecation)(On,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(u.prototype,"graphicsData",{get:function(){return Object(c.deprecation)(On,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),s.fromImage=h.bind(null,"fromImage"),s.fromSVG=h.bind(null,"fromSVG"),s.fromCanvas=h.bind(null,"fromCanvas"),s.fromVideo=h.bind(null,"fromVideo"),s.fromFrame=h.bind(null,"fromFrame"),a.fromImage=l.bind(null,"fromImage"),a.fromSVG=l.bind(null,"fromSVG"),a.fromCanvas=l.bind(null,"fromCanvas"),a.fromVideo=l.bind(null,"fromVideo"),a.fromFrame=l.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return Object(c.deprecation)(On,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){Object(c.deprecation)(On,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return Object(c.deprecation)(On,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){Object(c.deprecation)(On,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Object(c.deprecation)(On,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Object(c.deprecation)(On,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(t.BitmapText.prototype,"font",{get:function(){return Object(c.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){if(Object(c.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),e){var n={font:e};this._upgradeStyle(n),n.fontSize=n.fontSize||t.BitmapFont.available[n.fontName].size,this._fontName=n.fontName,this._fontSize=n.fontSize,this.dirty=!0}}})}R.B.registerPlugin("accessibility",w),R.B.registerPlugin("extract",B),R.B.registerPlugin("interaction",M),R.B.registerPlugin("particle",W),R.B.registerPlugin("prepare",Jt),R.B.registerPlugin("batch",R.i),R.B.registerPlugin("tilingSprite",ue),N.b.registerPlugin(Ce),N.b.registerPlugin(ee),k.registerPlugin(T.b),k.registerPlugin(N.a);var An="5.3.9",In={AlphaFilter:Re,BlurFilter:en,BlurFilterPass:tn,ColorMatrixFilter:rn,DisplacementFilter:sn,FXAAFilter:un,NoiseFilter:ln},Cn=function(t,e){return(Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Mn=function(){function t(t){this.renderer=t,this._foundShapes=[]}return t.prototype.pushMask=function(t){var e=this.renderer,n=t.maskObject||t;e.context.save();var i=this._foundShapes;if(this.recursiveFindShapes(n,i),0<i.length){var r=e.context;r.beginPath();for(var o=0;o<i.length;o++){var s=i[o],a=s.transform.worldTransform;this.renderer.setContextTransform(a),this.renderGraphicsShape(s)}i.length=0,r.clip()}},t.prototype.recursiveFindShapes=function(t,e){t.geometry&&t.geometry.graphicsData&&e.push(t);var n=t.children;if(n)for(var i=0;i<n.length;i++)this.recursiveFindShapes(n[i],e)},t.prototype.renderGraphicsShape=function(t){t.finishPoly();var e=this.renderer.context,n=t.geometry.graphicsData,i=n.length;if(0!==i)for(var r=0;r<i;r++){var o=n[r].shape;if(o.type===d.l.POLY){var s=o.points;e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===d.l.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(o.type===d.l.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(o.type===d.l.ELIP){var u=2*o.width,h=2*o.height,l=o.x-u/2,c=o.y-h/2,p=u/2*.5522848,f=h/2*.5522848,g=l+u,m=c+h,v=l+u/2,y=c+h/2;e.moveTo(l,y),e.bezierCurveTo(l,y-f,v-p,c,v,c),e.bezierCurveTo(v+p,c,g,y-f,g,y),e.bezierCurveTo(g,y+f,v+p,m,v,m),e.bezierCurveTo(v-p,m,l,y+f,l,y),e.closePath()}else if(o.type===d.l.RREC){var _=o.x,b=o.y,x=o.width,w=o.height,T=o.radius,S=Math.min(x,w)/2|0;T=S<T?S:T,e.moveTo(_,b+T),e.lineTo(_,b+w-T),e.quadraticCurveTo(_,b+w,_+T,b+w),e.lineTo(_+x-T,b+w),e.quadraticCurveTo(_+x,b+w,_+x,b+w-T),e.lineTo(_+x,b+T),e.quadraticCurveTo(_+x,b,_+x-T,b),e.lineTo(_+T,b),e.quadraticCurveTo(_,b,_,b+T),e.closePath()}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();function Rn(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function kn(){if("undefined"==typeof document)return!1;var t=Rn("#ff00ff"),e=Rn("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var i=n.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var r=i.getImageData(2,0,1,1);if(!r)return!1;var o=r.data;return 255===o[0]&&0===o[1]&&0===o[2]}var Dn=new d.d,Ln=function(t){function e(n){var i,r=t.call(this,F.m.CANVAS,n)||this;if(r.rootContext=r.view.getContext("2d",{alpha:r.transparent}),r.context=r.rootContext,r.refresh=!0,r.maskManager=new Mn(r),r.smoothProperty="imageSmoothingEnabled",!r.rootContext.imageSmoothingEnabled){var o=r.rootContext;o.webkitImageSmoothingEnabled?r.smoothProperty="webkitImageSmoothingEnabled":o.mozImageSmoothingEnabled?r.smoothProperty="mozImageSmoothingEnabled":o.oImageSmoothingEnabled?r.smoothProperty="oImageSmoothingEnabled":o.msImageSmoothingEnabled&&(r.smoothProperty="msImageSmoothingEnabled")}return r.initPlugins(e.__plugins),r.blendModes=(void 0===i&&(i=[]),kn()?(i[F.b.NORMAL]="source-over",i[F.b.ADD]="lighter",i[F.b.MULTIPLY]="multiply",i[F.b.SCREEN]="screen",i[F.b.OVERLAY]="overlay",i[F.b.DARKEN]="darken",i[F.b.LIGHTEN]="lighten",i[F.b.COLOR_DODGE]="color-dodge",i[F.b.COLOR_BURN]="color-burn",i[F.b.HARD_LIGHT]="hard-light",i[F.b.SOFT_LIGHT]="soft-light",i[F.b.DIFFERENCE]="difference",i[F.b.EXCLUSION]="exclusion",i[F.b.HUE]="hue",i[F.b.SATURATION]="saturate",i[F.b.COLOR]="color",i[F.b.LUMINOSITY]="luminosity"):(i[F.b.NORMAL]="source-over",i[F.b.ADD]="lighter",i[F.b.MULTIPLY]="source-over",i[F.b.SCREEN]="source-over",i[F.b.OVERLAY]="source-over",i[F.b.DARKEN]="source-over",i[F.b.LIGHTEN]="source-over",i[F.b.COLOR_DODGE]="source-over",i[F.b.COLOR_BURN]="source-over",i[F.b.HARD_LIGHT]="source-over",i[F.b.SOFT_LIGHT]="source-over",i[F.b.DIFFERENCE]="source-over",i[F.b.EXCLUSION]="source-over",i[F.b.HUE]="source-over",i[F.b.SATURATION]="source-over",i[F.b.COLOR]="source-over",i[F.b.LUMINOSITY]="source-over"),i[F.b.NORMAL_NPM]=i[F.b.NORMAL],i[F.b.ADD_NPM]=i[F.b.ADD],i[F.b.SCREEN_NPM]=i[F.b.SCREEN],i[F.b.SRC_IN]="source-in",i[F.b.SRC_OUT]="source-out",i[F.b.SRC_ATOP]="source-atop",i[F.b.DST_OVER]="destination-over",i[F.b.DST_IN]="destination-in",i[F.b.DST_OUT]="destination-out",i[F.b.DST_ATOP]="destination-atop",i[F.b.XOR]="xor",i[F.b.SUBTRACT]="source-over",i),r._activeBlendMode=null,r._outerBlend=!1,r._projTransform=null,r.renderingToScreen=!1,Object(c.sayHello)("Canvas"),r.resize(r.options.width,r.options.height),r}return function(t,e){function n(){this.constructor=t}Cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(t,e,n,i,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?((e=e.castToBaseTexture())._canvasRenderTarget||(e._canvasRenderTarget=new c.CanvasRenderTarget(e.width,e.height,e.resolution),e.resource=new R.P.CanvasResource(e._canvasRenderTarget.canvas),e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(this._projTransform=i||null,e||(this._lastObjectRendered=t),!r){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}if(s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=F.b.NORMAL,this._outerBlend=!1,s.globalCompositeOperation=this.blendModes[F.b.NORMAL],void 0!==n?n:this.clearBeforeRender)if(this.renderingToScreen)this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height));else{(e=e)._canvasRenderTarget.clear();var u=e.clearColor;0<u[3]&&(s.fillStyle=Object(c.hex2string)(Object(c.rgb2hex)(u)),s.fillRect(0,0,e.realWidth,e.realHeight))}var h=this.context;this.context=s,t.renderCanvas(this),this.context=h,s.restore(),this.resolution=o,this._projTransform=null,this.emit("postrender")}},e.prototype.setContextTransform=function(t,e,n){var i=t,r=this._projTransform,o=this.resolution;n=n||o,r&&((i=Dn).copyFrom(t),i.prepend(r)),e?this.context.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*o|0,i.ty*o|0):this.context.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*o,i.ty*o)},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t,e){var n=t===F.b.SRC_IN||t===F.b.SRC_OUT||t===F.b.DST_IN||t===F.b.DST_ATOP;!e&&n&&(t=F.b.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=n,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=p.b.SCALE_MODE===F.n.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e.registerPlugin=function(t,n){(e.__plugins=e.__plugins||{})[t]=n},e}(R.b),Bn={canvas:null,getTintedCanvas:function(t,e){var n=t.texture,i="#"+("00000"+(0|(e=Bn.roundColor(e))).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var r,o=n.tintCache[i];if(o){if(o.tintId===n._updateID)return n.tintCache[i];r=n.tintCache[i]}else r=document.createElement("canvas");if(Bn.tintMethod(n,e,r),r.tintId=n._updateID,Bn.convertTintToImage){var s=new Image;s.src=r.toDataURL(),n.tintCache[i]=s}else n.tintCache[i]=r;return r},getTintedPattern:function(t,e){var n="#"+("00000"+(0|(e=Bn.roundColor(e))).toString(16)).substr(-6);t.patternCache=t.patternCache||{};var i=t.patternCache[n];return i&&i.tintId===t._updateID||(Bn.canvas||(Bn.canvas=document.createElement("canvas")),Bn.tintMethod(t,e,Bn.canvas),(i=Bn.canvas.getContext("2d").createPattern(Bn.canvas,"repeat")).tintId=t._updateID,t.patternCache[n]=i),i},tintWithMultiply:function(t,e,n){var i=n.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),i.save(),i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="multiply";var s=t.baseTexture.getDrawableSource();i.drawImage(s,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(s,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore()},tintWithOverlay:function(t,e,n){var i=n.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),i.save(),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.getDrawableSource(),r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore()},tintWithPerPixel:function(t,e,n){var i=n.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.getDrawableSource(),r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore();for(var s=Object(c.hex2rgb)(e),a=s[0],u=s[1],h=s[2],l=i.getImageData(0,0,r.width,r.height),p=l.data,d=0;d<p.length;d+=4)p[d+0]*=a,p[d+1]*=u,p[d+2]*=h;i.putImageData(l,0,0)},roundColor:function(t){var e=Bn.cacheStepsPerColorChannel,n=Object(c.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),Object(c.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:kn(),tintMethod:null};Bn.tintMethod=Bn.canUseMultiply?Bn.tintWithMultiply:Bn.tintWithPerPixel;var Nn=R.B.create;R.B.create=function(t){if(!t||!t.forceCanvas)try{return Nn(t)}catch(t){}return new Ln(t)},R.e.prototype.getDrawableSource=function(){var t=this.resource;return t?t.bitmap||t.source:null},R.d.prototype._canvasRenderTarget=null,R.G.prototype.patternCache=null,R.G.prototype.tintCache=null;var Fn=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,n=t.worldTransform;e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),e.setContextTransform(n,t.roundPixels),t.drawMode!==F.e.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,n=0;n<e-2;n++){var i=2*n;this._renderDrawTriangle(t,i,i+2,i+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,n=e.length,i=0;i<n;i+=3){var r=2*e[i],o=2*e[i+1],s=2*e[i+2];this._renderDrawTriangle(t,r,o,s)}},t.prototype._renderDrawTriangle=function(t,e,n,i){var r=this.renderer.context,o=t.geometry.buffers[0].data,s=t.uvs,a=t.texture;if(a.valid){var u=16777215!==t.tint,h=a.baseTexture,l=h.width,c=h.height;u&&t._cachedTint!==t.tint&&(t._cachedTint=t.tint,t._tintedCanvas=Bn.getTintedCanvas(t,t.tint));var p=u?t._tintedCanvas:h.getDrawableSource(),d=s[e]*h.width,f=s[n]*h.width,g=s[i]*h.width,m=s[e+1]*h.height,v=s[n+1]*h.height,y=s[i+1]*h.height,_=o[e],b=o[n],x=o[i],w=o[e+1],T=o[n+1],S=o[i+1],P=t.canvasPadding/this.renderer.resolution;if(0<P){var O=P/Math.abs(t.worldTransform.a),E=P/Math.abs(t.worldTransform.d),A=(_+b+x)/3,I=(w+T+S)/3,C=_-A,M=w-I,R=Math.sqrt(C*C+M*M);_=A+C/R*(R+O),w=I+M/R*(R+E),M=T-I,b=A+(C=b-A)/(R=Math.sqrt(C*C+M*M))*(R+O),T=I+M/R*(R+E),M=S-I,x=A+(C=x-A)/(R=Math.sqrt(C*C+M*M))*(R+O),S=I+M/R*(R+E)}r.save(),r.beginPath(),r.moveTo(_,w),r.lineTo(b,T),r.lineTo(x,S),r.closePath(),r.clip();var k=d*v+m*g+f*y-v*g-m*f-d*y,D=_*v+m*x+b*y-v*x-m*b-_*y,L=d*b+_*g+f*x-b*g-_*f-d*x,B=d*v*x+m*b*g+_*f*y-_*v*g-m*f*x-d*b*y,N=w*v+m*S+T*y-v*S-m*T-w*y,F=d*T+w*g+f*S-T*g-w*f-d*S,j=d*v*S+m*T*g+w*f*y-w*v*g-m*f*S-d*T*y;r.transform(D/k,N/k,L/k,F/k,B/k,j/k),r.drawImage(p,0,0,l*h.resolution,c*h.resolution,0,0,l,c),r.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.geometry.getBuffer("aVertexPosition").data,i=n.length/2;e.beginPath();for(var r=1;r<i-2;++r){var o=2*r,s=n[o],a=n[o+1],u=n[o+2],h=n[o+3],l=n[o+4],c=n[o+5];e.moveTo(s,a),e.lineTo(u,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();p.b.MESH_CANVAS_PADDING=0,ge.prototype._renderCanvas=function(t,e){t.plugins.mesh.render(e)},bn.prototype._cachedTint=16777215,bn.prototype._tintedCanvas=null,bn.prototype._canvasUvs=null;var jn=!(bn.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,i=16777215!==this.tint,r=this.texture;if(r.valid){i&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=Bn.getTintedCanvas(this,this.tint));var o=i?this._tintedCanvas:r.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var s=this.vertices,a=this._canvasUvs,u=i?0:r.frame.x,h=i?0:r.frame.y,l=u+r.frame.width,c=h+r.frame.height;a[0]=u,a[1]=u+this._leftWidth,a[2]=l-this._rightWidth,a[3]=l,a[4]=h,a[5]=h+this._topHeight,a[6]=c-this._bottomHeight,a[7]=c;for(var p=0;p<8;p++)a[p]*=r.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(n,this.roundPixels);for(var d=0;d<3;d++)for(var f=0;f<3;f++){var g=2*f+8*d,m=Math.max(1,a[f+1]-a[f]),v=Math.max(1,a[d+5]-a[d+4]),y=Math.max(1,s[g+10]-s[g]),_=Math.max(1,s[g+11]-s[g+1]);e.drawImage(o,a[f],a[d+4],m,v,s[g],s[g+1],y,_)}}});fe.prototype._cachedTint=16777215,fe.prototype._tintedCanvas=null,fe.prototype._renderCanvas=function(t){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(t,this):jn||(jn=!0,window.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},fe.prototype._canvasPadding=null,Object.defineProperty(fe.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:p.b.MESH_CANVAS_PADDING},set:function(t){this._canvasPadding=t}}),_n.prototype._renderCanvas=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)},vn.prototype._renderCanvas=function(t){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)};var Un,Vn=function(){function t(t){this.renderer=t,this._svgMatrix=null,this._tempMatrix=new d.d}return t.prototype._calcCanvasStyle=function(t,e){var n;return t.texture&&t.texture.baseTexture!==R.G.WHITE.baseTexture?t.texture.valid?(n=Bn.getTintedPattern(t.texture,e),this.setPatternTransform(n,t.matrix||d.d.IDENTITY)):n="#808080":n="#"+("00000"+(0|e).toString(16)).substr(-6),n},t.prototype.render=function(t){var e=this.renderer,n=e.context,i=t.worldAlpha,r=t.transform.worldTransform;e.setContextTransform(r),e.setBlendMode(t.blendMode);for(var o,s,a=t.geometry.graphicsData,u=(t.tint>>16&255)/255,h=(t.tint>>8&255)/255,l=(255&t.tint)/255,c=0;c<a.length;c++){var p=a[c],f=p.shape,g=p.fillStyle,m=p.lineStyle,v=0|p.fillStyle.color,y=0|p.lineStyle.color;if(p.matrix&&e.setContextTransform(r.copyTo(this._tempMatrix).append(p.matrix)),g.visible){var _=((v>>16&255)/255*u*255<<16)+((v>>8&255)/255*h*255<<8)+(255&v)/255*l*255;o=this._calcCanvasStyle(g,_)}if(m.visible){var b=((y>>16&255)/255*u*255<<16)+((y>>8&255)/255*h*255<<8)+(255&y)/255*l*255;s=this._calcCanvasStyle(m,b)}if(n.lineWidth=m.width,n.lineCap=m.cap,n.lineJoin=m.join,n.miterLimit=m.miterLimit,p.type===d.l.POLY){n.beginPath();var x=(I=f).points,w=p.holes,T=void 0,S=void 0,P=void 0,O=void 0;n.moveTo(x[0],x[1]);for(var E=2;E<x.length;E+=2)n.lineTo(x[E],x[E+1]);if(I.closeStroke&&n.closePath(),0<w.length){for(P=x[T=0],O=x[1],E=2;E+2<x.length;E+=2)T+=(x[E]-P)*(x[E+3]-O)-(x[E+2]-P)*(x[E+1]-O);for(var A=0;A<w.length;A++)if(x=w[A].shape.points){for(P=x[S=0],O=x[1],E=2;E+2<x.length;E+=2)S+=(x[E]-P)*(x[E+3]-O)-(x[E+2]-P)*(x[E+1]-O);if(S*T<0)for(n.moveTo(x[0],x[1]),E=2;E<x.length;E+=2)n.lineTo(x[E],x[E+1]);else for(n.moveTo(x[x.length-2],x[x.length-1]),E=x.length-4;0<=E;E-=2)n.lineTo(x[E],x[E+1]);w[A].shape.closeStroke&&n.closePath()}}g.visible&&(n.globalAlpha=g.alpha*i,n.fillStyle=o,n.fill()),m.visible&&(n.globalAlpha=m.alpha*i,n.strokeStyle=s,n.stroke())}else if(p.type===d.l.RECT){var I=f;g.visible&&(n.globalAlpha=g.alpha*i,n.fillStyle=o,n.fillRect(I.x,I.y,I.width,I.height)),m.visible&&(n.globalAlpha=m.alpha*i,n.strokeStyle=s,n.strokeRect(I.x,I.y,I.width,I.height))}else if(p.type===d.l.CIRC)I=f,n.beginPath(),n.arc(I.x,I.y,I.radius,0,2*Math.PI),n.closePath(),g.visible&&(n.globalAlpha=g.alpha*i,n.fillStyle=o,n.fill()),m.visible&&(n.globalAlpha=m.alpha*i,n.strokeStyle=s,n.stroke());else if(p.type===d.l.ELIP){var C=2*(I=f).width,M=2*I.height,R=I.x-C/2,k=I.y-M/2;n.beginPath();var D=C/2*.5522848,L=M/2*.5522848,B=R+C,N=k+M,F=R+C/2,j=k+M/2;n.moveTo(R,j),n.bezierCurveTo(R,j-L,F-D,k,F,k),n.bezierCurveTo(F+D,k,B,j-L,B,j),n.bezierCurveTo(B,j+L,F+D,N,F,N),n.bezierCurveTo(F-D,N,R,j+L,R,j),n.closePath(),g.visible&&(n.globalAlpha=g.alpha*i,n.fillStyle=o,n.fill()),m.visible&&(n.globalAlpha=m.alpha*i,n.strokeStyle=s,n.stroke())}else if(p.type===d.l.RREC){var U=(I=f).x,V=I.y,X=I.width,G=I.height,H=I.radius,W=Math.min(X,G)/2|0;H=W<H?W:H,n.beginPath(),n.moveTo(U,V+H),n.lineTo(U,V+G-H),n.quadraticCurveTo(U,V+G,U+H,V+G),n.lineTo(U+X-H,V+G),n.quadraticCurveTo(U+X,V+G,U+X,V+G-H),n.lineTo(U+X,V+H),n.quadraticCurveTo(U+X,V,U+X-H,V),n.lineTo(U+H,V),n.quadraticCurveTo(U,V,U,V+H),n.closePath(),g.visible&&(n.globalAlpha=g.alpha*i,n.fillStyle=o,n.fill()),m.visible&&(n.globalAlpha=m.alpha*i,n.strokeStyle=s,n.stroke())}}},t.prototype.setPatternTransform=function(t,e){if(!1!==this._svgMatrix){if(!this._svgMatrix){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!t.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=e.a,this._svgMatrix.b=e.b,this._svgMatrix.c=e.c,this._svgMatrix.d=e.d,this._svgMatrix.e=e.tx,this._svgMatrix.f=e.ty,t.setTransform(this._svgMatrix.inverse())}},t.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},t}(),Xn=new d.d;wt.prototype.generateCanvasTexture=function(t,e){void 0===e&&(e=1);var n=this.getLocalBounds(),i=R.z.create({width:n.width,height:n.height,scaleMode:t,resolution:e});Un||(Un=new Ln),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(Xn),Xn.invert(),Xn.tx-=n.x,Xn.ty-=n.y,Un.render(this,i,!0,Xn);var r=R.G.from(i.baseTexture._canvasRenderTarget.canvas,{scaleMode:t});return r.baseTexture.setResolution(e),r},wt.prototype.cachedGraphicsData=[],wt.prototype._renderCanvas=function(t){!0!==this.isMask&&(this.finishPoly(),t.plugins.graphics.render(this))};var Gn=new d.d,Hn=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,i=n.context,r=e._frame.width,o=e._frame.height,s=t.transform.worldTransform,a=0,u=0,h=e.baseTexture.getDrawableSource();if(!(e.orig.width<=0||e.orig.height<=0)&&e.valid&&h&&e.valid){n.setBlendMode(t.blendMode,!0),n.context.globalAlpha=t.worldAlpha;var l=e.baseTexture.scaleMode===F.n.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==l&&(i[n.smoothProperty]=l),u=e.trim?(a=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(a=(.5-t.anchor.x)*e.orig.width,(.5-t.anchor.y)*e.orig.height),e.rotate&&(s.copyTo(Gn),s=Gn,d.n.matrixAppendRotationInv(s,e.rotate,a,u),u=a=0),a-=r/2,u-=o/2,n.setContextTransform(s,t.roundPixels,1),t.roundPixels&&(a|=0,u|=0);var c=e.baseTexture.resolution,p=n._outerBlend;p&&(i.save(),i.beginPath(),i.rect(a*n.resolution,u*n.resolution,r*n.resolution,o*n.resolution),i.clip()),16777215!==t.tint?(t._cachedTint===t.tint&&t._tintedCanvas.tintId===t._texture._updateID||(t._cachedTint=t.tint,t._tintedCanvas=Bn.getTintedCanvas(t,t.tint)),i.drawImage(t._tintedCanvas,0,0,Math.floor(r*c),Math.floor(o*c),Math.floor(a*n.resolution),Math.floor(u*n.resolution),Math.floor(r*n.resolution),Math.floor(o*n.resolution))):i.drawImage(h,e._frame.x*c,e._frame.y*c,Math.floor(r*c),Math.floor(o*c),Math.floor(a*n.resolution),Math.floor(u*n.resolution),Math.floor(r*n.resolution),Math.floor(o*n.resolution)),p&&i.restore(),n.setBlendMode(F.b.NORMAL)}},t.prototype.destroy=function(){this.renderer=null},t}();Et.prototype._tintedCanvas=null,Et.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};var Wn=new d.j,zn=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var i=new Image;return i.src=this.base64(t,e,n),i},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(t){var e,n,i,r,o=this.renderer;t&&(r=t instanceof R.z?t:o.generateTexture(t)),r?(e=r.baseTexture._canvasRenderTarget.context,n=r.baseTexture._canvasRenderTarget.resolution,i=r.frame):(e=o.rootContext,n=o.resolution,(i=Wn).width=this.renderer.width,i.height=this.renderer.height);var s=Math.floor(i.width*n+1e-4),a=Math.floor(i.height*n+1e-4),u=new c.CanvasRenderTarget(s,a,1),h=e.getImageData(i.x*n,i.y*n,s,a);return u.context.putImageData(h,0,0),u.canvas},t.prototype.pixels=function(t){var e,n,i,r,o=this.renderer;return t&&(r=t instanceof R.z?t:o.generateTexture(t)),r?(e=r.baseTexture._canvasRenderTarget.context,n=r.baseTexture._canvasRenderTarget.resolution,i=r.frame):(e=o.rootContext,(i=Wn).width=o.width,i.height=o.height),e.getImageData(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer=null},t}();Object.defineProperty(Ln.prototype,"extract",{get:function(){return Object(c.deprecation)("v5.3.0","CanvasRenderer#extract is deprecated, use CanvasRenderer#plugins.extract"),this.plugins.extract}});var Yn=function(t,e){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function qn(t,e){var n=t;if(e instanceof R.e){var i=e.source,r=0===i.width?n.canvas.width:Math.min(n.canvas.width,i.width),o=0===i.height?n.canvas.height:Math.min(n.canvas.height,i.height);return n.ctx.drawImage(i,0,0,r,o,0,0,n.canvas.width,n.canvas.height),!0}return!1}var Kn=function(t){function e(e){var n=t.call(this,e)||this;return(n.uploadHookHelper=n).canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(qn),n}return function(t,e){function n(){this.constructor=t}Yn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(qt);oe.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.valid){var n=t.context,i=this.worldTransform,r=e.baseTexture,o=r.getDrawableSource(),s=r.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,u=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new c.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this._tintedCanvas=Bn.getTintedCanvas(this,this.tint),h.context.drawImage(this._tintedCanvas,0,0)):h.context.drawImage(o,-e._frame.x*s,-e._frame.y*s),this._cachedTint=this.tint,this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}n.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(i),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/s,this.tileScale.y/s);var l=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(a,u),n.fillRect(-a+l,-u+p,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(n.translate(a+l,u+p),n.fillRect(-a,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},G.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,i=!0,r=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible&&h._texture.valid){var l=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)i&&(t.setContextTransform(n,!1,1),i=!1),r=h.anchor.x*(-l.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-l.height*h.scale.y)+h.position.y+.5,s=l.width*h.scale.x,a=l.height*h.scale.y;else{i||(i=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.setContextTransform(c,this.roundPixels,1),r=h.anchor.x*-l.width+.5,o=h.anchor.y*-l.height+.5,s=l.width,a=l.height}var p=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.getDrawableSource(),l.x*p,l.y*p,l.width*p,l.height*p,r*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},b.prototype._renderCanvas=function(t){},b.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},v.prototype.renderCanvas=function(t){},Ft.prototype._renderCanvas=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),Et.prototype._renderCanvas.call(this,t)},Ln.registerPlugin("accessibility",w),Ln.registerPlugin("extract",zn),Ln.registerPlugin("graphics",Vn),Ln.registerPlugin("interaction",M),Ln.registerPlugin("mesh",Fn),Ln.registerPlugin("prepare",Kn),Ln.registerPlugin("sprite",Hn)},function(t,e,n){var i,r;i=[n,e,n(71),n(81),n(18),n(43),n(82),n(19),n(83),n(84)],void 0===(r=function(t,e,n,i,r,o,s,a,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Button",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"TextButton",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Scene",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"TopInterface",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"SliceSprite",{enumerable:!0,get:function(){return h.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return i});var i,r=n(4);r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(i||(i={}));var o=function(){function t(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=0),void 0===i&&(i=!1),this.fn=t,this.context=e,this.priority=n,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),s=function(){function t(){var t=this;this._head=new o(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=i.NORMAL),this._addListener(new o(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=i.NORMAL),this._addListener(new o(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}e=(n=e).next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,i.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return I}),n.d(e,"b",function(){return A}),n.d(e,"c",function(){return P}),n.d(e,"d",function(){return E});var i=n(38),r=n.n(i),o=n(17),s=n.n(o);function a(){}function u(t,e,n,i){var r=0,o=t.length;!function s(a){a||r===o?n&&n(a):i?setTimeout(function(){e(t[r++],s)},1):e(t[r++],s)}()}function h(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}var c={};function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}var f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),g=null;function m(){}var v=function(){function t(e,n,i){if("string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=m,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new s.a,this.onProgress=new s.a,this.onComplete=new s.a,this.onAfterMiddleware=new s.a}t.setExtensionLoadType=function(e,n){y(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){y(t._xhrTypeMap,e,n)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(n)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=n,i},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(_(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(_(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(_(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,n="",i=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===i&&(0<n.length||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2==(i/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,g||(g=document.createElement("a")),g.href=t;var n=!(t=r()(g.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),r=t.indexOf("#"),o=Math.min(-1<i?i:t.length,-1<r?r:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function y(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function _(t){return t.toString().replace("object ","")}v.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},v.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},v.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},v.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},v._loadTypeMap={gif:v.LOAD_TYPE.IMAGE,png:v.LOAD_TYPE.IMAGE,bmp:v.LOAD_TYPE.IMAGE,jpg:v.LOAD_TYPE.IMAGE,jpeg:v.LOAD_TYPE.IMAGE,tif:v.LOAD_TYPE.IMAGE,tiff:v.LOAD_TYPE.IMAGE,webp:v.LOAD_TYPE.IMAGE,tga:v.LOAD_TYPE.IMAGE,svg:v.LOAD_TYPE.IMAGE,"svg+xml":v.LOAD_TYPE.IMAGE,mp3:v.LOAD_TYPE.AUDIO,ogg:v.LOAD_TYPE.AUDIO,wav:v.LOAD_TYPE.AUDIO,mp4:v.LOAD_TYPE.VIDEO,webm:v.LOAD_TYPE.VIDEO},v._xhrTypeMap={xhtml:v.XHR_RESPONSE_TYPE.DOCUMENT,html:v.XHR_RESPONSE_TYPE.DOCUMENT,htm:v.XHR_RESPONSE_TYPE.DOCUMENT,xml:v.XHR_RESPONSE_TYPE.DOCUMENT,tmx:v.XHR_RESPONSE_TYPE.DOCUMENT,svg:v.XHR_RESPONSE_TYPE.DOCUMENT,tsx:v.XHR_RESPONSE_TYPE.DOCUMENT,gif:v.XHR_RESPONSE_TYPE.BLOB,png:v.XHR_RESPONSE_TYPE.BLOB,bmp:v.XHR_RESPONSE_TYPE.BLOB,jpg:v.XHR_RESPONSE_TYPE.BLOB,jpeg:v.XHR_RESPONSE_TYPE.BLOB,tif:v.XHR_RESPONSE_TYPE.BLOB,tiff:v.XHR_RESPONSE_TYPE.BLOB,webp:v.XHR_RESPONSE_TYPE.BLOB,tga:v.XHR_RESPONSE_TYPE.BLOB,json:v.XHR_RESPONSE_TYPE.JSON,text:v.XHR_RESPONSE_TYPE.TEXT,txt:v.XHR_RESPONSE_TYPE.TEXT,ttf:v.XHR_RESPONSE_TYPE.BUFFER,otf:v.XHR_RESPONSE_TYPE.BUFFER},v.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var b=window.URL||window.webkitURL,x={caching:function(t,e){var n=this;c[t.url]?(t.data=c[t.url],t.complete()):t.onComplete.once(function(){return c[n.url]=n.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===v.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=b.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=v.TYPE.IMAGE,void(t.data.onload=function(){b.revokeObjectURL(n),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var i=[0,0,0],r=[0,0,0,0],o=0;o<i.length;++o)n<t.length?i[o]=255&t.charCodeAt(n++):i[o]=0;switch(r[0]=i[0]>>2,r[1]=(3&i[0])<<4|i[1]>>4,r[2]=(15&i[1])<<2|i[2]>>6,r[3]=63&i[2],n-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var s=0;s<r.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[s])}return e}(t.xhr.responseText),t.type=v.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},w=/(#[\w-]+)?$/,T=function(){function t(e,n){var i=this;void 0===e&&(e=""),void 0===n&&(n=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,i={_tasks:[],concurrency:e,saturated:a,unsaturated:a,buffer:e/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){n=0,i.drain=a,i.started=!1,i._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!i.paused&&n<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(n+=1)===i.concurrency&&i.saturated(),t(e.data,h(o(e)))}},length:function(){return i._tasks.length},running:function(){return n},idle:function(){return i._tasks.length+n===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout(function(){return i.drain()},1);else{var r={data:t,callback:"function"==typeof n?n:a};e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1)}}function o(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),n<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new s.a,this.onError=new s.a,this.onLoad=new s.a,this.onStart=new s.a,this.onComplete=new s.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,n,i){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(n=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new v(t,e,n),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var h=0;h<s.length;++h)s[h].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,n=r()(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=w.exec(e)[0];-1!==(e=e.substr(0,e.length-i.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=i}return e},e._loadResource=function(t,e){var n=this;t._dequeue=e,u(this._beforeMiddleware,function(e,i){e.call(n,t,function(){i(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),u(this._afterMiddleware,function(n,i){n.call(e,t,i)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},d(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();T._defaultBeforeMiddleware=[],T._defaultAfterMiddleware=[],T.pre=function(t){return T._defaultBeforeMiddleware.push(t),T},T.use=function(t){return T._defaultAfterMiddleware.push(t),T};var S=n(3),P=v,O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},E=function(){function t(){}return t.use=function(t,e){t.data&&t.type===v.TYPE.IMAGE&&(t.texture=S.G.fromLoader(t.data,t.url,t.name)),e()},t}(),A=function(t){function e(n,i){for(var r=t.call(this,n,i)||this,o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,u=s.use;a&&r.pre(a),u&&r.use(u)}return r._protected=!1,r}return function(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(T);A.registerPlugin({use:x.parsing}),A.registerPlugin(E);var I=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?A.shared:new A},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}()},function(t,e,n){var i,r;i=[n,e,n(72),n(80)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Config",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Utils",{enumerable:!0,get:function(){return i.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,i,r,o,s,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,l=this.items;this._aliasCount++;for(var c=0,p=l.length;c<p;c++)l[c][h](t,e,n,i,r,o,s,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(i.prototype,{dispatch:{value:i.prototype.emit},run:{value:i.prototype.emit}})},function(t,e,n){var i,r;i=[n,e,n(88),n(89),n(90),n(91),n(92)],void 0===(r=function(t,e,n,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Easing",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Timeline",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Tween",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"TweenPath",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"MathUtils",{enumerable:!0,get:function(){return s.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",function(){return r})},function(t,e,n){var i,r;i=[n,e,n(93),n(94),n(95),n(96),n(97),n(126),n(127),n(128),n(129),n(136),n(137),n(138),n(139),n(140),n(141)],void 0===(r=function(t,e,n,i,r,o,s,a,u,h,l,c,p,d,f,g,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ExerciseMan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"ColoredSprite",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"LineMover",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"LoadingLine",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"UserInterface",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"DebugInterface",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Slider",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"PopupController",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"StatsContainer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Lock",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"ColoredText",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"AchievementPanel",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"Cursor",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"TanLoading",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"GameOverPanel",{enumerable:!0,get:function(){return m.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(98),n(99),n(26),n(45),n(46),n(100)],void 0===(r=function(t,e,n,i,r,o,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DataBaseButtons",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"GameplayButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"InterfaceButton",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"PlayButton",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SmallButton",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"StylesButton",{enumerable:!0,get:function(){return a.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,n,i){void 0===n&&(n=!1),r(this,t),this._fn=e,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.app=e,o.resources=r||e.loader.resources,o.setTexture(n,i),o}return s(e,t),e.prototype.setFrame=function(t){this.textures&&this.textures[t]?(this.name=t,this.frame=t,this.texture=this.textures[t]):console.error("Image not found in textures: "+t+".")},e.prototype.setTexture=function(t,e){if("string"==typeof t){var n=t,i=this.resources[n];i?(this.key=n,e?(this.textures=i.textures,this.setFrame(e)):(this.frame=null,this.name=n,this.texture=i.texture)):console.error("Atlas not found: "+n)}else this.frame=null,this.key=null,this.texture=t},e.prototype.destroy=function(e){this.app=null,this.textures=null,this.resources=null,this.name=null,this.frame=null,this.key=null,t.prototype.destroy.call(this,e)},e}((n=h(n)).Sprite);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});i=[n,e,n(6),n(7)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n._pause=!1,n._enabled=!1,n.app=e,n.isInit=!1,n.enabled=!1,n}return s(e,t),Object.defineProperty(e.prototype,"pause",{get:function(){return this._pause},set:function(t){this.interactive=!t,this.interactiveChildren=!t,this._pause=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.pause=!t,this.visible=t},enumerable:!1,configurable:!0}),e.prototype.clear=function(){for(;0!==this.children.length;)this.children[0].destroy({children:!0})},e.prototype.addSprite=function(t,e,n){var r=new i.Sprite(this.app,t,e,n);return this.addChild(r),r},e.prototype.addAnimatedSprite=function(t,e,n){var r=new i.AnimatedSprite(this.app,t,e,n);return this.addChild(r),r},e.prototype.addText=function(t,e,n,r,o){var s=i.Text.create(this.app,t,e,n,r,o);return this.addChild(s),s},e.prototype.addButton=function(t,e,n,r,o){var s=new i.Button(this.app,t,e,n,r,o);return this.addChild(s),s},e.prototype.addTextButton=function(t,e,n,r,o){var s=new i.TextButton(this.app,t,e,n,r,o);return this.addChild(s),s},e.prototype.init=function(){},e.prototype.update=function(t){},e.prototype.resize=function(){},e.prototype.final=function(){},e}(n.Container);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0,function(t){t.IDLE="idle",t.ACT_1="act_1",t.ACT_2="act_2",t.ACT_3="act_3",t.ACT_4="act_4",t.ACT_5="act_5",t.ACT_6="act_6",t.ACT_7="act_7",t.ACT_8="act_8"}(e.State||(e.State={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdHandler=void 0;var n=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(t){console.log("init"),this.app=t;var e=new h5ads.GameDistribution("3c6959b8087c448e865fa5d5762cfc81");h5ads.adWrapper.setAdProvider(e),window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA&&(h5branding.Utils.ASSET_LOCATION="assets/")},t.prototype.setGameState=function(t){this.app.pause=t,this.app.sound.context.muted=t,this.app.sound.context.paused=t,this.app.sound.music&&(this.app.sound.music.volume=t?0:1)},t.prototype.showAd=function(t,e,n){var i=this;console.log("showAd"),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){n&&n.call(i),i.setGameState(!0)}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){console.log("content resumed"),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED),i.setGameState(!1),e&&e.call(i)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},t}();e.AdHandler=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyType=void 0,function(t){t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.UP="ArrowUp",t.DOWN="ArrowDown",t.SPACE=" "}(e.KeyType||(e.KeyType={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(36),n(116),n(117),n(119),n(120)],void 0===(r=function(t,e,n,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Popup",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"PopupButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"PopupCheckBox",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"TitlePopup",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SubtitlePopup",{enumerable:!0,get:function(){return s.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(23)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.bgHeight=0,n.mainText=i.Text.create(n.app,"",r.Fonts.Kimberley,24,3552822),n.sideText=i.Text.create(n.app,"",r.Fonts.Kimberley,14,3552822),n.button=new o.PopupButton(n.app,""),n.addChild(n.mainText,n.button,n.sideText),n.visible=!1,n}return s(e,t),e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.changeText=function(t,e,n,i){t.style.fontSize=e||t.style.fontSize,t.style.font=n||t.style.font,t.style.color=i||t.style.color},e.prototype.resize=function(){},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(15),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,o,s){var a=t.call(this)||this;return a.tweenStash=[],a.scene=e,a.app=e.app,a.insideButtonArea=!1,a.background=new i.ColoredSprite(a.app,n,o),a.background.anchor.set(.5),a.frame=new i.ColoredSprite(a.app,n,s),a.frame.anchor.set(.5),a.lineMover=new i.LineMover(a.app,n,o),a.on(r.Events.POINTER_MOVE,a.onMove.bind(a),a),a.on(r.Events.POINTER_DOWN,a.onDown.bind(a),a),a.addChild(a.background,a.frame,a.lineMover),a.interactive=!0,a}return s(e,t),e.prototype.setCursorInstace=function(t){this.cursorHint=t},e.prototype.respawnAnimation=function(){this.onOut()},e.prototype.onOut=function(){this.lineMover.CanMove=!0,this.insideButtonArea=!1,this.clearTweenStash()},e.prototype.onOver=function(){this.lineMover.CanMove=!1,this.insideButtonArea=!0,this.clearTweenStash()},e.prototype.onDown=function(){},e.prototype.onMove=function(){},e.prototype.clearTweenStash=function(){for(var t=0;t<this.tweenStash.length;t++)this.tweenStash[t].stop();this.tweenStash.length=0},e.prototype.resize=function(){this.background.position.set(0,0),this.frame.position.set(0,0)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(37),n(130),n(131),n(132),n(133),n(134),n(135)],void 0===(r=function(t,e,n,i,r,o,s,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FillingPanel",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"LevelPanel",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"BoosterElement",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"StatBar",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"StatPanel",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"StatBarsContainer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"StatPanelsContainer",{enumerable:!0,get:function(){return u.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";var i=n(64),r=n(66);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){return r.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),c=["%","/","?",";","#"].concat(l),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(67);function _(t,e,n){if(t&&r.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,n),i}o.prototype.parse=function(t,e,n){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var _=t=h.join(a);if(_=_.trim(),!n&&1===t.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,_=_.substr(x.length)}if(n||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||x&&m[x]||(_=_.substr(2),this.slashes=!0)}if(!m[x]&&(T||x&&!v[x])){for(var S,P,O=-1,E=0;E<p.length;E++)-1!==(A=_.indexOf(p[E]))&&(-1===O||A<O)&&(O=A);for(-1!==(P=-1===O?_.lastIndexOf("@"):_.lastIndexOf("@",O))&&(S=_.slice(0,P),_=_.slice(P+1),this.auth=decodeURIComponent(S)),O=-1,E=0;E<c.length;E++){var A;-1!==(A=_.indexOf(c[E]))&&(-1===O||A<O)&&(O=A)}-1===O&&(O=_.length),this.host=_.slice(0,O),_=_.slice(O),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var C=this.hostname.split(/\./),M=(E=0,C.length);E<M;E++){var R=C[E];if(R&&!R.match(d)){for(var k="",D=0,L=R.length;D<L;D++)127<R.charCodeAt(D)?k+="x":k+=R[D];if(!k.match(d)){var B=C.slice(0,E),N=C.slice(E+1),F=R.match(f);F&&(B.push(F[1]),N.unshift(F[2])),N.length&&(_="/"+N.join(".")+_),this.hostname=B.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=i.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[w])for(E=0,M=l.length;E<M;E++){var V=l[E];if(-1!==_.indexOf(V)){var X=encodeURIComponent(V);X===V&&(X=escape(V)),_=_.split(V).join(X)}}var G=_.indexOf("#");-1!==G&&(this.hash=_.substr(G),_=_.slice(0,G));var H=_.indexOf("?");if(-1!==H?(this.search=_.substr(H),this.query=_.substr(H+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,H)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),h=0;h<u.length;h++){var l=u[h];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var d=c[p];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||n.host&&t.pathname,w=x,T=n.pathname&&n.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===T[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),n.search=t.search,n.query=t.query;else if(!r.isNullOrUndefined(t.search))return S&&(n.hostname=n.host=T.shift(),(I=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=t.search,n.query=t.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var P=T.slice(-1)[0],O=(n.host||t.host||1<T.length)&&("."===P||".."===P)||""===P,E=0,A=T.length;0<=A;A--)"."===(P=T[A])?T.splice(A,1):".."===P?(T.splice(A,1),E++):E&&(T.splice(A,1),E--);if(!x&&!w)for(;E--;E)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),O&&"/"!==T.join("/").substr(-1)&&T.push("");var I,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);return S&&(n.hostname=n.host=C?"":T.length?T.shift():"",(I=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),(x=x||n.host&&T.length)&&!C&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var i,r;i=[n,e,n(70),n(146),n(147),n(51),n(52)],void 0===(r=function(t,e,n,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Boot",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Gameplay",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Preloader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SplashScreen",{enumerable:!0,get:function(){return s.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(85),n(86),n(87)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"MenuMan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Man",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Logo",{enumerable:!0,get:function(){return r.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(16),n(12),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,r){var s=t.call(this)||this;return s.scene=e,s.app=e.app,s.blockedButtons=r.blockedButtons,s.isFirstShowing=!1,s.point=new n.Point,s.step=204,s.gridsController=r,s.buttonsArray=[],s.crossButton=new i.SmallButton(e,o.Atlases.Preloader,"sb_background","sb_frame","white_cross_icon","sb_frame_fill"),s.crossButton.visible=!1,s.height=s.lineCount*s.step,s.addChild(s.crossButton),s}return s(e,t),e.prototype.appearAnimation=function(t){var e,n=this;void 0===t&&(t=0);for(var i,r=0,o=0,s=0;s<this.config.buttons.length;s++)e=this.getRandomPoint(),r=this.buttonsArray[s].x,o=this.buttonsArray[s].y,i=this.app.timeline.tween(this.buttonsArray[s]).from({x:e.x,y:e.y}).to({x:r,y:o}).setting({duration:.3,delay:t}),s===this.config.buttons.length-1&&(i.onStart=function(){return n.gridsController.visible=!0}),i.start()},e.prototype.getRandomPoint=function(){var t=this.app.scale.width,e=this.app.scale.height,n=Math.random()*t,i=Math.random()*e;return.5<Math.random()?this.point.x=t-n<t/2?n+(t-n):n-(t-n)-2*this.step:this.point.y=e-i<e/2?i+(e-i):i-(e-i)-2*this.step,this.point},e.prototype.boosterAnimation=function(t,e){for(var n=this,i=0;i<this.config.buttons.length;i++)this.buttonsArray[i].visible=t===i;return this.crossButton.visible=!1,this.app.timeline.callback(e,1),this.app.timeline.tween(this.buttonsArray[t]).to({x:800,y:-100,alpha:0}).setting({easing:r.Easing.OutExpo,duration:1.5,onComplete:function(){n.switchElementsVisible(!0),n.buttonsArray[t].alpha=1,n.resize()}}).start(),1.5},e.prototype.switchElementsVisible=function(t){for(var e=0;e<this.config.buttons.length;e++)this.buttonsArray[e].visible=t;this.crossButton.visible=t},e.prototype.show=function(t){var e=this.config&&t.roomName!==this.config.roomName?.4:0;this.config=t;for(var n=0;n<this.buttonsArray.length;n++)this.buttonsArray[n].visible=!1;this.isEven=t.buttons.length%2==0,this.lineCount=Math.ceil(t.buttons.length/2),this.resize();var i="main"!==t.name;this.isFirstShowing||(i?this.app.timeline.callback(this.switchCrossButton.bind(this,i),e):this.switchCrossButton(!1),this.appearAnimation(e)),this.isFirstShowing=!1},e.prototype.switchCrossButton=function(t){this.crossButton.visible=t},e.prototype.hide=function(){this.switchCrossButton(!1)},e.prototype.addChilds=function(){for(var t=0;t<this.buttonsArray.length;t++)this.addChild(this.buttonsArray[t])},e.prototype.hidePanel=function(){},e.prototype.resize=function(){for(var t=0,e=0,n=void 0!==this.config.offsetX?this.config.offsetX:0,i=void 0!==this.config.offsetY?this.config.offsetY:0,r=void 0!==this.config.scale?this.config.scale:1,o=0;o<this.buttonsArray.length;o++)this.buttonsArray[o].position.set(t+n,e+i),e+=this.step+15,o===this.lineCount-1&&(t+=this.step+15,e=this.isEven?0:this.step/2);this.scale.set(r);var s=2*(this.step+15)+n,a=this.lineCount*(this.step+15)/2-(this.step+15)/2+i;this.crossButton.position.set(s,a)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(108),n(109),n(110),n(33),n(111),n(112),n(113),n(114)],void 0===(r=function(t,e,n,i,r,o,s,a,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"WorkoutInterface",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"WorkoutSlider",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"WorkoutMenu",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"WorkoutInfo",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"WorkoutArrow",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"WorkoutSpace",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"WorkoutKeyArrow",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"WorkoutKeySpace",{enumerable:!0,get:function(){return h.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var r=t.call(this)||this;return r.timeline=e.app.timeline,r.blinkScale=1.05,r.blinkDuration=.08,r.bkg=e.addSprite(i.Atlases.Interface,n),r.bkg.anchor.set(.5),r.addChild(r.bkg),r}return s(e,t),e.prototype.show=function(t,e,n){if(void 0===n&&(n=.1),this.stop(),this.visible=!0,t){this.scale.set(2);var i=this.timeline.tween(this.scale).to({x:1,y:1}).setting({duration:n}).start();e&&(i.onComplete=this.blink.bind(this))}},e.prototype.blink=function(){this.stop(),this.timeline.tween(this.scale).from({x:1,y:1}).to({x:this.blinkScale,y:this.blinkScale}).setting({duration:this.blinkDuration,pingPong:!0,repeat:-1}).start()},e.prototype.stop=function(){this.timeline.clearTweens(this.scale)},e.prototype.hide=function(){this.stop(),this.visible=!1},e}((n=h(n)).Container);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(5),n(18)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,r,o){var s=t.call(this,e,r,o)||this;return s.anchor.set(.5),s.interactive=!0,s.isDown=!1,s.isUp=!0,s.pressed=!1,s.released=!1,s.value=i,s.on(n.Events.POINTER_DOWN,s.onDown.bind(s),!1),s.on(n.Events.POINTER_UP,s.onUp.bind(s),!1),s}return s(e,t),e.prototype.onDown=function(){this.isDown||(this.pressed=!0,this.isDown=!0,this.isUp=!1,this.emit(n.Events.KEY_DOWN,this.value))},e.prototype.onUp=function(){this.isUp||(this.released=!0,this.isDown=!1,this.isUp=!0,this.emit(n.Events.KEY_UP,this.value))},e.prototype.clear=function(){this.pressed=!1,this.released=!1},e}((i=a(i)).default);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(115),n(24),n(121),n(122),n(123),n(124),n(125)],void 0===(r=function(t,e,n,i,r,o,s,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Tutorial",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"TutorialFilling",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"FirstFilling",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"SecondFilling",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"ThirdFilling",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"FourthFilling",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ListElement",{enumerable:!0,get:function(){return u.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(16)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,s){var a=t.call(this)||this;a.app=e.app,a.popupController=s,a.startX=60,a.startY=60,a.stepX=400,a.stepY=75,a.elementsArray=[],a.background=new i.SliceSprite(a.app,r.Atlases.Interface,"popup_background",55,55,55,55),a.background.width=800,a.background.height=500,a.backgroundIcon=new i.Sprite(a.app,r.Atlases.Interface,"popup_gear"),a.iconBackground=new i.Sprite(a.app,r.Atlases.Preloader,"sb_mask"),a.iconBackground.anchor.set(.5),a.iconBackground.scale.set(.8),a.icon=new i.Sprite(a.app,r.Atlases.Preloader,"white_cassete_icon"),a.icon.anchor.set(.5),a.icon.tint=10086143;var u=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:36,fill:2500134});return a.titleText=new i.Text(a.app,"TITLE",u),a.titleText.anchor.set(0,.5),a.crossButton=new o.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_cross_icon","sb_frame_fill"),a.initEvents(),a.addChild(a.background,a.iconBackground,a.icon,a.titleText,a.crossButton,a.backgroundIcon),a}return s(e,t),e.prototype.initEvents=function(){this.on(r.Events.SWITCH_TRACK,this.changeMusicArray,this),this.on(r.Events.TRANSITION,this.referenceTransition,this)},e.prototype.changeMusicArray=function(t){this.app.saveManager.stats.musicPlaylist[t]=!this.app.saveManager.stats.musicPlaylist[t],this.app.sound.updateMusic(),this.app.saveManager.save()},e.prototype.referenceTransition=function(t){window.open(t)},e.prototype.call=function(t,e){this.emit(t,e)},e.prototype.show=function(t){this.config=t;for(var e=0;e<this.elementsArray.length;e++)this.elementsArray[e].visible=!1;this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.resize=function(){this.background.position.set(0,0),this.iconBackground.position.set(0,5),this.icon.position.set(this.iconBackground.x,this.iconBackground.y),this.titleText.position.set(this.iconBackground.position.x+this.iconBackground.width/2+15,this.iconBackground.position.y),this.crossButton.position.set(75-this.icon.position.x,this.background.height+50)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(10),n(7),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=t.call(this)||this;i._value=0,i.app=e,i.percent=0,i.minValue=0,i.maxValue=100,i.deltaValue=100,i.fullWidth=226,i.sortableChildren=!0,i.interactive=!0,i.background=new r.Sprite(i.app,o.Atlases.Interface,"stats_background"),i.frame=new r.Sprite(i.app,o.Atlases.Interface,"stats_frame"),i.frame.anchor.set(.5),i.frame.alpha=0,i.fillingContainer=new r.Sprite(i.app,o.Atlases.Interface,"progress_line_element"),i.fillingContainer.anchor.set(0,.5),i.fillingLine=new n.TilingSprite(i.app.loader.resources[o.Images.FillingLine].texture,i.fullWidth,22),i.fillingLine.anchor.set(0,.5),i.fillingLine.tilePosition.set(-2,-1),i.fillingLine.tint=52479;var s=new n.TextStyle({fontFamily:o.Fonts.Kimberley,fontSize:20,fill:2500134});return i.text=new r.Text(i.app,"",s),i.text.anchor.set(0,.5),i.text.alpha=.7,i.on(o.Events.POINTER_OUT,i.onOut,i),i.on(o.Events.POINTER_OVER,i.onOver,i),i.value=0,i.addChild(i.frame,i.background,i.fillingContainer,i.fillingLine,i.text),i.frame.zIndex=-1,i.background.zIndex=0,i}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.text.setText(Math.floor(this._value)+" / "+this.maxValue),this.percent=i.Utils.floatClamp((this._value-this.minValue)/this.deltaValue),this.fillingLine.width=Math.floor(this.fullWidth*this.percent)},enumerable:!1,configurable:!0}),e.prototype.setting=function(t,e){void 0===t&&(t=this.maxValue),void 0===e&&(e=this.minValue),this.maxValue=t,this.minValue=e,this.deltaValue=this.maxValue-this.minValue},e.prototype.onOut=function(){this.app.timeline.tween(this.frame).from({scale:{x:1.01,y:1.01}}).to({scale:{x:.85,y:.85},alpha:0}).setting({duration:.2}).start()},e.prototype.onOver=function(){this.app.sound.playSfx(o.Sounds.FillingPanelOnOver),this.app.timeline.tween(this.frame).from({scale:{x:.85,y:.85}}).to({scale:{x:1.01,y:1.01},alpha:1}).setting({duration:.2}).start()},e.prototype.resize=function(){this.background.width=337,this.background.height=61,this.fillingContainer.position.set(8,this.background.height/2),this.fillingLine.position.set(20,this.fillingContainer.position.y),this.text.position.set(35,this.fillingContainer.position.y),this.frame.position.set(this.background.width/2,this.background.height/2)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";t.exports=function(t,e){if(t){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[n.key[o]]=i[o]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(t,e,i){e&&(r[n.q.name][e]=i)}),r}}},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||t,o),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function h(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),h.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},h.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},h.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},h.prototype.emit=function(t,e,n,i,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var u,h,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,o),!0;case 6:return l.fn.call(l.context,e,n,i,o,s),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var p,d=l.length;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,n);break;case 4:l[h].fn.call(l[h].context,e,n,i);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];l[h].fn.apply(l[h].context,u)}}return!0},h.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},h.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},h.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||n&&s.context!==n||u(this,o);else{for(var a=0,h=[],l=s.length;a<l;a++)(s[a].fn!==e||i&&!s[a].once||n&&s[a].context!==n)&&h.push(s[a]);h.length?this._events[o]=1===h.length?h[0]:h:u(this,o)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,t.exports=h},function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,a,u,h,l,d,f,m=e&&e.length,v=m?e[0]*n:t.length,y=r(t,0,v,n,!0),_=[];if(!y||y.next===y.prev)return _;if(m&&(y=function(t,e,n,i){var s,a,l,d=[];for(s=0,a=e.length;s<a;s++)(l=r(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i,!1))===l.next&&(l.steiner=!0),d.push(g(l));for(d.sort(c),s=0;s<d.length;s++)p(d[s],n),n=o(n,n.next);return n}(t,e,y,n)),t.length>80*n){i=u=t[0],a=h=t[1];for(var b=n;b<v;b+=n)(l=t[b])<i&&(i=l),(d=t[b+1])<a&&(a=d),u<l&&(u=l),h<d&&(h=d);f=0!==(f=Math.max(u-i,h-a))?1/f:0}return s(y,_,n,i,a,f),_}function r(t,e,n,i,r){var o,s;if(r===0<A(t,e,n,i))for(o=e;o<n;o+=i)s=P(o,t[o],t[o+1],s);else for(o=n-i;e<=o;o-=i)s=P(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(O(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(O(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function s(t,e,n,i,r,c,p){if(t){!p&&c&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=f(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,u,h=1;do{for(n=t,o=t=null,s=0;n;){for(s++,i=n,e=a=0;e<h&&(a++,i=i.nextZ);e++);for(u=h;0<a||0<u&&i;)0!==a&&(0===u||!i||n.z<=i.z)?(n=(r=n).nextZ,a--):(i=(r=i).nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,h*=2}while(1<s)}(r)}(t,i,r,c);for(var d,g,m=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?u(t,i,r,c):a(t))e.push(d.i/n),e.push(t.i/n),e.push(g.i/n),O(t),t=g.next,m=g.next;else if((t=g)===m){p?1===p?s(t=h(o(t),e,n),e,n,i,r,c,2):2===p&&l(t,e,n,i,r,c):s(o(t),e,n,i,r,c,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(0<=y(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(m(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=y(r.prev,r,r.next))return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,s=t.next;if(0<=y(r,o,s))return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,h=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=f(a,u,e,n,i),p=f(h,l,e,n,i),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=p;){if(d!==t.prev&&d!==t.next&&m(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=y(d.prev,d,d.next))return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&m(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&0<=y(g.prev,g,g.next))return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&m(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=y(d.prev,d,d.next))return!1;d=d.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&m(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&0<=y(g.prev,g,g.next))return!1;g=g.nextZ}return!0}function h(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!_(r,s)&&b(r,i,i.next,s)&&T(r,s)&&T(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),O(i),O(i.next),i=t=s),i=i.next}while(i!==t);return o(i)}function l(t,e,n,i,r,a){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&v(u,h)){var l=S(u,h);return u=o(u,u.next),l=o(l,l.next),s(u,e,n,i,r,a),void s(l,e,n,i,r,a)}h=h.next}u=u.next}while(u!==t)}function c(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&s<a){if((s=a)===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n;var u,h=n,l=n.x,c=n.y,p=1/0;for(i=n;r>=i.x&&i.x>=l&&r!==i.x&&m(o<c?r:s,o,l,c,o<c?s:r,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(r-i.x),T(i,t)&&(u<p||u===p&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,p=u)),(i=i.next)!==h;);return n}(t,e)){var n=S(e,t);o(e,e.next),o(n,n.next)}}function d(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){for(var e=t,n=t;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),(e=e.next)!==t;);return n}function m(t,e,n,i,r,o,s,a){return 0<=(r-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(i-a)-(n-s)*(e-a)&&0<=(n-s)*(o-a)-(r-s)*(i-a)}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){for(var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),(n=n.next)!==t;);return i}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||_(t,e)&&0<y(t.prev,t,t.next)&&0<y(e.prev,e,e.next))}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,i){var r=w(y(t,e,n)),o=w(y(t,e,i)),s=w(y(n,i,t)),a=w(y(n,i,e));return r!==o&&s!==a||!(0!==r||!x(t,n,e))||!(0!==o||!x(t,i,e))||!(0!==s||!x(n,t,i))||!(0!==a||!x(n,e,i))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return 0<t?1:t<0?-1:0}function T(t,e){return y(t.prev,t,t.next)<0?0<=y(t,e,t.next)&&0<=y(t,t.prev,e):y(t,e,t.prev)<0||y(t,t.next,e)<0}function S(t,e){var n=new E(t.i,t.x,t.y),i=new E(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=r).prev=n,(i.next=n).prev=i,(o.next=i).prev=o,i}function P(t,e,n,i){var r=new E(t,e,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=i,(t.exports.default=i).deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(A(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var h=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(A(t,h,l,n))}var c=0;for(a=0;a<i.length;a+=3){var p=i[a]*n,d=i[a+1]*n,f=i[a+2]*n;c+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);0<r&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleType=void 0;var i,r=function(){function t(t,e,n,r){void 0===r&&(r=i.NONE),this.app=t,this.scaleType=r,this.width=e||this.app.renderer.width,this.height=n||this.app.renderer.height,this.scaleType!==i.NONE&&(window.onresize=this.resize.bind(this),window.onresize(null)),this.resize()}return t.prototype.setWrap=function(t,e){this.wrapWidth=t,this.wrapHeight=e,this.wrapWidth&&this.wrapHeight&&(this.scaleType=i.WRAP,this.resize())},t.prototype.setMode=function(t){this.scaleType=t,this.resize()},t.prototype.setSize=function(t,e){this.width=t,this.height=e,this.updateSize()},t.prototype.setHeight=function(t){this.height=t,this.updateSize()},t.prototype.setWidth=function(t){this.width=t,this.updateSize()},t.prototype.updateSize=function(){this.app.renderer.resize(this.width,this.height),this.resize()},t.prototype.resize=function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(!this.app.resizeTo)if(this.scaleType===i.CENTER)this.app.view.style.width=Math.floor(this.width)+"px",this.app.view.style.height=Math.floor(this.height)+"px",this.app.view.style.marginLeft=(t-Math.floor(this.width))/2+"px",this.app.view.style.marginTop=(e-Math.floor(this.height))/2+"px";else if(this.scaleType===i.WRAP){var r=this.wrapHeight/this.height>this.wrapWidth/this.width?this.wrapWidth/this.width:this.wrapHeight/this.height;this.width=Math.floor(this.width*r),this.height=Math.floor(this.height*r),this.app.view.style.width=this.width+"px",this.app.view.style.height=this.height+"px",this.app.view.style.marginLeft=(this.wrapWidth-Math.floor(this.width))/2+"px",this.app.view.style.marginTop=(this.wrapHeight-Math.floor(this.height))/2+"px"}else this.scaleType===i.NONE?(this.app.view.style.width=Math.floor(this.width)+"px",this.app.view.style.height=Math.floor(this.height)+"px"):(r=Math.min(t/this.width,e/this.height),this.app.view.style.width=Math.floor(r*this.width)+"px",this.app.view.style.height=Math.floor(r*this.height)+"px",this.app.view.style.marginLeft=this.app.view.style.marginRight=(t-Math.floor(r*this.width))/2+"px",this.app.view.style.marginTop=this.app.view.style.marginBottom=(e-Math.floor(r*this.height))/2+"px");this.app.stage.emit(n.Events.RESIZE,t,e)},t}();e.default=r,function(t){t[t.CENTER=0]="CENTER",t[t.WRAP=1]="WRAP",t[t.FIT=2]="FIT",t[t.NONE=3]="NONE"}(i=e.ScaleType||(e.ScaleType={}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.Interface="interface",t.Preloader="preloader",t.Man1="man_1",t.Man2="man_2",t.Menu="menu",t.MenuMan="menu_man",t.Animation1="animation_1",t.Animation2="animation_2",t.list=[t.Interface,t.MenuMan,t.Man1,t.Man2,t.Explode="explode",t.Logo="logo",t.Menu,t.Pictures="pictures",t.Animation1,t.Animation2],t.prelist=[t.Preloader],t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,r){var o=t.call(this,n,i,r)||this;return o.app=e,o.isSaved=!1,o.setText(n),o}return s(e,t),e.create=function(t,i,r,o,s,a){void 0===r&&(r="arial"),void 0===o&&(o=50),void 0===s&&(s=0),void 0===a&&(a="center");var u=new e(t,i,new n.TextStyle({fontFamily:r,fontSize:o,fill:s,align:a}));return u.roundPixels=!0,u.anchor.set(.5),u},e.prototype.setText=function(t,e){return(t||""===t)&&(this.app.localization.i18n.exists(t)?(this.save(),this.key=t,this.options=e,this.updateLocalization()):(this.removeSave(),this.text=t)),this},e.prototype.save=function(){this.isSaved||(this.isSaved=!0,this.app.localization.saveText(this))},e.prototype.removeSave=function(){this.isSaved&&(this.isSaved=!1,this.app.localization.removeText(this),this.key=null,this.options=null)},e.prototype.updateLocalization=function(){this.text=this.app.localization.t(this.key,this.options)},e.prototype.destroy=function(e){this.removeSave(),t.prototype.destroy.call(this,e)},e}((n=h(n)).Text);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Body=void 0,function(t){t.LEFT_HAND="lhand_",t.LEFT_FOOT="lfoot_",t.LEFT_LOWER_ARM="llarm_",t.LEFT_UPPER_ARM="luarm_",t.LEFT_LOWER_LEG="llleg_",t.LEFT_UPPER_LEG="luleg_",t.RIGHT_HAND="rhand_",t.RIGHT_FOOT="rfoot_",t.RIGHT_LOWER_ARM="rlarm_",t.RIGHT_UPPER_ARM="ruarm_",t.RIGHT_LOWER_LEG="rlleg_",t.RIGHT_UPPER_LEG="ruleg_",t.ABS="abs_",t.LOWER_ABS="lower_abs_",t.UPPER_ABS="upper_abs_",t.UPPER_BODY="ubody_",t.TRAPEZE="trapeze_",t.HEAD="head_",t.BAGS="bags_",t.EYES="eyes_",t.BELLY="belly_",t.GLASSES="glasses_",t.HAIR="hair_",t.MOUTH="mouth_",t.BLING="bling_",t.DUMBBELLS_1_1="dumbbells_1_1_",t.DUMBBELLS_1_2="dumbbells_1_2_",t.BAR_BENCH="bar_bench_",t.DUMBBELLS_5_1="dumbbells_5_1_",t.DUMBBELLS_5_2="dumbbells_5_2_",t.DUMBBELLS_6_1="dumbbells_6_1_",t.DUMBBELLS_6_2="dumbbells_6_2_",t.WRIST_1="wrist_1_",t.WRIST_2="wrist_2_",t.HANDS_1="hands_1_",t.HANDS_2="hands_2_",t.POID="poid_"}(e.Body||(e.Body={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(15),n(12),n(5),n(46)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,i,o,s,a,u){var h=t.call(this,e,i,o,s,a,u)||this;h.icon.position.y+=22;var l=new PIXI.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:28,fill:16777215});return h.text=new n.ColoredText(h.app,"play",l),h.text.tint=0,h.sortableChildren=!0,h.text.zIndex=2,h.text.anchor.set(.5),h.removeAllListeners(),h.on(r.Events.POINTER_OUT,h.onOut,h),h.on(r.Events.POINTER_OVER,h.onOver,h),h.addChild(h.text),h.resize(),h}return s(e,t),e.prototype.onOut=function(){t.prototype.onOut.call(this),this.tweenStash.push(this.app.timeline.tween(this.text).from({scale:{x:1.2,y:1.2},red:255,blue:0,green:0}).to({scale:{x:1,y:1},red:0,green:0,blue:0,y:0}).setting({duration:.5,easing:i.Easing.OutBounce}).start())},e.prototype.onOver=function(){var e=this;t.prototype.onOver.call(this),this.tweenStash.push(this.app.timeline.tween(this.text).from({green:0,blue:0,red:0}).to({scale:{x:1.45,y:1.45},y:-5,red:255,green:255,blue:255}).setting({duration:.3,easing:i.Easing.Linear,onComplete:function(){return e.secondTween()}}).start())},e.prototype.secondTween=function(){this.tweenStash.push(this.app.timeline.tween(this.text).from({scale:{x:1.45,y:1.45},green:0,blue:0,red:0}).to({scale:{x:1.2,y:1.2},red:255,green:0,blue:0}).setting({duration:.6,easing:i.Easing.OutExpo}).start())},e}((o=a(o)).default);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(15),n(7),n(12),n(5),n(26)],void 0===(r=function(t,e,n,i,r,o,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(e,r,s,a,u,h){var l=t.call(this,e,r,s,a)||this;return l.frameFill=new i.Sprite(l.app,o.Atlases.Preloader,h),l.frameFill.anchor.set(.5),l.icon=new n.ColoredSprite(l.app,r,u),l.icon.anchor.set(.5),l.addChild(l.frameFill,l.icon),l.sortableChildren=!0,l.frameFill.zIndex=1,l.icon.zIndex=2,l.icon.tint=0,l.on(o.Events.POINTER_OUT,l.onOut,l),l.on(o.Events.POINTER_OVER,l.onOver,l),l.on(o.Events.POINTER_UP,l.onUp,l),l.lineMover.lineMoving(),l.resize(),l}return s(e,t),e.prototype.onUp=function(){this.scene&&this.scene.emit(o.Events.HIDE_CURSOR)},e.prototype.onOut=function(){this.scene.emit(o.Events.HIDE_CURSOR),t.prototype.onOut.call(this),this.lineMover.lineMoving(),this.tweenStash.push(this.app.timeline.tween(this.background).from({scale:{x:1.05,y:1.05},green:150,blue:150}).to({scale:{x:1,y:1},green:255,blue:255}).setting({duration:.5,easing:r.Easing.OutExpo}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).from({scale:{x:1.45,y:1.45}}).to({scale:{x:1,y:1}}).setting({duration:.5,easing:r.Easing.OutExpo}).start()),this.tweenStash.push(this.app.timeline.tween(this.frameFill).from({scale:{x:1.2,y:1.2}}).to({scale:{x:1,y:1}}).setting({duration:.5,easing:r.Easing.OutExpo}).start()),this.tweenStash.push(this.app.timeline.tween(this.icon).from({red:255,blue:0,green:0,scale:{x:1.2,y:1.2}}).to({scale:{x:1,y:1},red:0,green:0,blue:0}).setting({duration:.5,easing:r.Easing.OutBounce}).start())},e.prototype.onOver=function(){t.prototype.onOver.call(this),this.app.sound.playSfx(o.Sounds.SmallButtonOnOver),this.scene.emit(o.Events.SHOW_CURSOR,{index:this.icon.frame,isBlocked:!1,color:16711680}),this.firstIconTween(),this.lineMover.stopTween(),this.tweenStash.push(this.app.timeline.tween(this.background).from({scale:{x:1,y:1}}).to({scale:{x:1.05,y:1.05},green:150,blue:150}).setting({duration:1,easing:r.Easing.OutExpo}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).from({scale:{x:1,y:1}}).to({scale:{x:1.45,y:1.45}}).setting({duration:1,easing:r.Easing.OutExpo}).start()),this.tweenStash.push(this.app.timeline.tween(this.frameFill).from({scale:{x:1,y:1}}).to({scale:{x:1.2,y:1.2}}).setting({duration:1,easing:r.Easing.OutExpo}).start())},e.prototype.firstIconTween=function(){var t=this;this.tweenStash.push(this.app.timeline.tween(this.icon).from({green:0,blue:0,red:0}).to({scale:{x:1.45,y:1.45},red:255,green:255,blue:255}).setting({duration:.3,easing:r.Easing.Linear,onComplete:function(){return t.secondIconTween()}}).start())},e.prototype.secondIconTween=function(){this.tweenStash.push(this.app.timeline.tween(this.icon).from({scale:{x:1.45,y:1.45},green:0,blue:0,red:0}).to({scale:{x:1.2,y:1.2},red:255,green:0,blue:0}).setting({duration:.6,easing:r.Easing.OutExpo}).start())},e.prototype.resize=function(){t.prototype.resize.call(this),this.frameFill.position.set(0,0),this.scale.set(.75,.75)},e}((u=a(u)).default);e.default=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(101),n(102)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BoosterSellerAnimation",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"MessageBox",{enumerable:!0,get:function(){return i.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(31),n(103),n(104),n(105)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ButtonsGrid",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"IconsGrid",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"StylesGrid",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"GridsController",{enumerable:!0,get:function(){return o.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(106),n(107)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"PhotosController",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"PhotosContainer",{enumerable:!0,get:function(){return i.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkoutType=void 0,function(t){t.PRESS="press",t.DROP="drop",t.HOLD="hold"}(e.WorkoutType||(e.WorkoutType={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(19),n(5),n(52),n(21)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=a(r);var u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.init=function(){var t=this;this.app.analytics.startScene(e.Name),this.resize(),this.app.assetLoader.event.on(i.Events.ASSET_LOADED,function(){h5branding.SplashLoader.getInstance().setLoadProgress(t.app.assetLoader.percent)}),this.app.assetLoader.event.on(i.Events.LOAD_COMPLETE,this.onLoadComplete,this),this.app.assetLoader.load(),h5branding.SplashLoader.getInstance().setButtonCallback(function(){h5branding.SplashLoader.getInstance().destroy(),o.AdHandler.getInstance().showAd("splash",function(){t.app.localization.init(),t.startSplashScreen()})})},e.prototype.onLoadComplete=function(){h5branding.SplashLoader.getInstance().setLoadProgress(100)},e.prototype.startSplashScreen=function(){this.app.scene.start(r.default.Name),this.app.scene.stop(e.Name)},e.prototype.final=function(){this.app.timeline.clear(),this.clear()},e.Name="Preloader",e}(n.default);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(29),n(7),n(19),n(5),n(30),n(16)],void 0===(r=function(t,e,n,i,r,o,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.init=function(){this.app.analytics.startScene(e.Name),this.background=new i.Sprite(this.app,o.Atlases.Preloader,"black_square"),this.background.anchor.set(.5),this.logo=new u.Logo(this),this.animation=new PIXI.spine.Spine(this.app.loader.resources[o.Spines.Animation.name].spineData),this.animation.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this)}),this.animation.autoUpdate=!1,this.animation.state.timeScale=1.6,this.animation.visible=!1,this.logo.on(o.Events.COMPLETE,this.startAnimation,this),this.skipButton=new h.SmallButton(this,o.Atlases.Preloader,"sb_background","sb_frame","white_arrow","sb_frame_fill"),this.skipButton.alpha=0,this.skipButton.on(o.Events.POINTER_UP,this.skip,this),this.app.timeline.tween(this.skipButton).to({alpha:1}).setting({duration:.5}).start(),this.savesText=i.Text.create(this.app,"saves",o.Fonts.Kimberley,20,16777215),this.savesText.visible=!1,this.icon=new i.Sprite(this.app,o.Atlases.Logo,"save_icon"),this.icon.anchor.set(1,.5),this.icon.x=-this.savesText.width/2-10,this.savesText.addChild(this.icon),this.addChild(this.background,this.logo,this.animation,this.skipButton,this.savesText),this.resize(),this.start()},e.prototype.start=function(){var t=this;this.app.timeline.callback(function(){return t.savesText.visible=!0},.2),this.app.timeline.callback(function(){return t.savesText.visible=!1},3),this.app.timeline.callback(this.logo.show,3.2,!1,this.logo)},e.prototype.startAnimation=function(){this.logo.visible=!0,this.animation.visible=!0,this.app.timeline.callback(this.animation.state.setAnimation.bind(this.animation.state,0,"animation",!1),.5)},e.prototype.skip=function(){this.app.sound.stopSfx(o.Sounds.MusicIntro),this.app.sound.stopSfx(o.Sounds.Intro1),this.app.sound.stopSfx(o.Sounds.Intro2),this.app.sound.stopSfx(o.Sounds.Intro3),this.app.sound.stopSfx(o.Sounds.Intro4),this.app.sound.stopSfx(o.Sounds.Contempt),this.app.sound.stopSfx(o.Sounds.Laughter),this.startMenu()},e.prototype.onComplete=function(t){this.startMenu()},e.prototype.onEvent=function(t,e){"music"===e.data.name?this.app.sound.playSfx(o.Sounds.MusicIntro,.3):"text"===e.data.name?1===e.intValue?this.app.sound.playSfx(o.Sounds.Intro1,.3):2===e.intValue?this.app.sound.playSfx(o.Sounds.Intro2,.3):3===e.intValue?this.app.sound.playSfx(o.Sounds.Intro3,.3):4===e.intValue&&this.app.sound.playSfx(o.Sounds.Intro4,.3):"contempt"===e.data.name?this.app.sound.playSfx(o.Sounds.Contempt,.3):"laughter"===e.data.name&&this.app.sound.playSfx(o.Sounds.Laughter,.3)},e.prototype.startMenu=function(){this.app.scene.start(n.Menu.Name),this.app.scene.stop(e.Name)},e.prototype.update=function(t){this.animation.update(t/1e3)},e.prototype.resize=function(){this.background.position.set(640,480),this.background.scale.set(10),this.savesText.position.set(this.app.scale.width/2+this.icon.width/2,this.app.scale.height/2),this.animation.position.set(this.app.scale.width/2,this.app.scale.height/2),this.logo.position.set(this.app.scale.width/2,this.app.scale.height/2),this.skipButton.position.set(this.app.scale.width-60,60)},e.prototype.final=function(){this.app.timeline.clear(),this.icon.destroy({baseTexture:!0,texture:!0,children:!0}),this.animation.destroy(!0),this.logo.destroy({baseTexture:!0,texture:!0,children:!0}),this.app.loader.resources[o.Spines.Animation.name]=null,this.app.loader.resources[o.Atlases.Explode]=null,this.app.loader.resources[o.Atlases.Explode+"_image"]=null,this.app.loader.resources[o.Atlases.Logo]=null,this.app.loader.resources[o.Atlases.Logo+"_image"]=null,this.app.loader.resources[o.Atlases.Animation1]=null,this.app.loader.resources[o.Atlases.Animation1+"_image"]=null,this.app.loader.resources[o.Atlases.Animation2]=null,this.app.loader.resources[o.Atlases.Animation2+"_image"]=null,this.clear()},e.Name="SplashScreen",e}((r=a(r)).default);e.default=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(154),n(155),n(34)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Key",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Keyboard",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"KeyButton",{enumerable:!0,get:function(){return r.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(55),n(163),n(164)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Sound",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"GainGroup",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SoundManager",{enumerable:!0,get:function(){return r.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._gain=1,this._volume=1,this.sound=t}return Object.defineProperty(t.prototype,"gain",{get:function(){return this._gain},set:function(t){this._gain=t,this.sound.volume=this._volume*this._gain},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.sound.volume=this._volume*this._gain},enumerable:!1,configurable:!0}),t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){"use strict";n.r(e);var i=n(9),r=n(8),o=n(0),s=n(3),a=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach(function(t){t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var n=null;t.forEach(function(t){null===n?e._input.connect(t.destination):n.connect(t.destination),n=t}),n.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),u=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c,p=function(){return(p=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function d(){return c}var f,g,m,v,y=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var n=d().context;t.setValueAtTime(e,n.audioContext.currentTime)}else t.value=e;return e},t}(),_=0,b=function(t){function e(e){var n=t.call(this)||this;return n.id=_++,n._media=null,n._paused=!1,n._muted=!1,n._elapsed=0,n.init(e),n}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);y.setParamValue(this._gain.gain,r*i*n),y.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&((this._pausedReal=n)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",n))},e.prototype.play=function(t){var e=t.start,n=t.end,i=t.speed,r=t.loop,o=t.volume,s=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),u=a.source,h=a.gain;this._source=u,this._gain=h,this._speed=i,this._volume=o,this._loop=!!r,this._muted=s,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=n,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=n,this._source.loopStart=e,this._source.start(0,e)):n?this._source.start(0,e,n-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return 10<t&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){r.a.shared.remove(this._updateListener,this),t&&r.a.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),n=e-this._lastUpdate;if(0<n||t){var i=this._source.playbackRate.value;this._elapsed+=n*i,this._lastUpdate=e;var r=this._duration,o=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%s)/r}else o=this._elapsed%r/r;this._progress=o,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){(this._media=t).context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(o.EventEmitter),x=function(t){function e(e){var n=this,i=e.audioContext,r=i.createBufferSource(),o=i.createGain(),s=i.createAnalyser();return r.connect(s),s.connect(o),o.connect(e.destination),(n=t.call(this,s,o)||this).context=e,n.bufferSource=r,n.gain=o,n.analyser=s,n}return l(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,y.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var n=this.context.audioContext.createGain();return e.connect(n),n.connect(this.destination),{source:e,gain:n}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(a),w=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new x(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new b(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,n=new XMLHttpRequest,i=this.parent.url;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){e.source=n.response,e._decode(n.response,t)},n.send()},t.prototype._decode=function(t,e){var n=this;this.parent.context.decode(t,function(t,i){if(t)e&&e(t);else{n.parent.isLoaded=!0,n.buffer=i;var r=n.parent.autoPlayStart();e&&e(null,n.parent,r)}})},t}(),T=function(t){function e(){var n=this,i=window,r=new e.AudioContext,s=r.createDynamicsCompressor(),a=r.createAnalyser();return a.connect(s),s.connect(r.destination),(n=t.call(this,a,s)||this)._ctx=r,n._offlineCtx=new e.OfflineAudioContext(1,2,i.OfflineAudioContext?r.sampleRate:44100),n._unlocked=!1,n.compressor=s,n.analyser=a,n.events=new o.EventEmitter,n.volume=1,n.speed=1,n.muted=!1,n.paused=!1,"running"!==r.state&&(n._unlock(),n._unlock=n._unlock.bind(n),document.addEventListener("mousedown",n._unlock,!0),document.addEventListener("touchstart",n._unlock,!0),document.addEventListener("touchend",n._unlock,!0)),n}return l(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,function(t){e(null,t)},function(t){e(new Error(t.message||"Unable to decode file"))})},e}(a),S={WebAudioMedia:w,WebAudioInstance:b,WebAudioNodes:x,WebAudioContext:T,WebAudioUtils:y},P={Filter:u,EqualizerFilter:function(t){function e(n,i,r,o,s,a,u,h,l,c){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0);var p=this;if(!d().useLegacy){var f=[{f:e.F32,type:"lowshelf",gain:n},{f:e.F64,type:"peaking",gain:i},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:s},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:u},{f:e.F4K,type:"peaking",gain:h},{f:e.F8K,type:"peaking",gain:l},{f:e.F16K,type:"highshelf",gain:c}].map(function(t){var e=d().context.audioContext.createBiquadFilter();return e.type=t.type,y.setParamValue(e.Q,1),e.frequency.value=t.f,y.setParamValue(e.gain,t.gain),e});(p=t.call(this,f[0],f[f.length-1])||this).bands=f,p.bandsMap={};for(var g=0;g<p.bands.length;g++){var m=p.bands[g];0<g&&p.bands[g-1].connect(m),p.bandsMap[m.frequency.value]=m}return p}p=t.call(this,null)||this}return l(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);y.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach(function(t){y.setParamValue(t.gain,0)})},e.prototype.destroy=function(){this.bands.forEach(function(t){t.disconnect()}),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(u),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var n=this;if(!d().useLegacy){var i=d().context.audioContext.createWaveShaper();return(n=t.call(this,i)||this)._distortion=i,n.amount=e,n}n=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,n=new Float32Array(44100),i=Math.PI/180,r=0;r<44100;++r)e=2*r/44100-1,n[r]=(3+t)*e*20*i/(Math.PI+t*Math.abs(e));this._distortion.curve=n,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(u),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var n=this;if(!d().useLegacy){var i,r,o,s=d().context.audioContext;return o=s.createStereoPanner?i=s.createStereoPanner():((r=s.createPanner()).panningModel="equalpower",r),(n=t.call(this,o)||this)._stereo=i,n._panner=r,n.pan=e,n}n=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?y.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(u),ReverbFilter:function(t){function e(e,n,i){void 0===e&&(e=3),void 0===n&&(n=2),void 0===i&&(i=!1);var r=this;if(!d().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(n,0,100),r._reverse=i,r._rebuild(),r;r=t.call(this,null)||this}return l(e,t),e.prototype._clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=d().context.audioContext,n=e.sampleRate,i=n*this._seconds,r=e.createBuffer(2,i,n),o=r.getChannelData(0),s=r.getChannelData(1),a=0;a<i;a++)t=this._reverse?i-a:a,o[a]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay),s[a]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay);var u=d().context.audioContext.createConvolver();u.buffer=r,this.init(u)},e}(u),MonoFilter:function(t){function e(){var e=this;if(!d().useLegacy){var n=d().context.audioContext,i=n.createChannelSplitter(),r=n.createChannelMerger();return r.connect(i),(e=t.call(this,r,i)||this)._merger=r,e}e=t.call(this,null)||this}return l(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(u),TelephoneFilter:function(t){function e(){if(!d().useLegacy){var e=d().context.audioContext,n=e.createBiquadFilter(),i=e.createBiquadFilter(),r=e.createBiquadFilter(),o=e.createBiquadFilter();return n.type="lowpass",y.setParamValue(n.frequency,2e3),i.type="lowpass",y.setParamValue(i.frequency,2e3),r.type="highpass",y.setParamValue(r.frequency,500),o.type="highpass",y.setParamValue(o.frequency,500),n.connect(i),i.connect(r),r.connect(o),t.call(this,n,o)||this}t.call(this,null)}return l(e,t),e}(u)},O=0,E=function(t){function e(e){var n=t.call(this)||this;return n.id=O++,n.init(e),n}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*n*i,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&((this._pausedReal=n)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",n))},e.prototype.play=function(t){var n=this,i=t.start,o=t.end,s=t.speed,a=t.loop,u=t.volume,h=t.muted;this._speed=s,this._volume=u,this._loop=!!a,this._muted=h,this.refresh(),this.loop&&null!==o&&(this.loop=!1),this._start=i,this._end=o||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){n._source&&(n._source.currentTime=i,n._source.onloadedmetadata=null,n.emit("progress",i,n._duration),r.a.shared.add(n._onUpdate,n))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){r.a.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){r.a.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(o.EventEmitter),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new E(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,n=this.parent;if(4!==e.readyState){if(!n.url)return t(new Error("sound.url or sound.source must be set"));e.src=n.url;var i=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",o),e.removeEventListener("error",s)},r=function(){i(),n.isLoaded=!0;var e=n.autoPlayStart();t&&t(null,n,e)},o=function(){i(),t&&t(new Error("Sound loading has been aborted"))},s=function(){i();var n="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(n))};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",o,!1),e.addEventListener("error",s,!1),e.load()}else{n.isLoaded=!0;var a=n.autoPlayStart();t&&setTimeout(function(){t(null,n,a)},0)}},e}(o.EventEmitter),I=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return l(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(o.EventEmitter),C={HTMLAudioMedia:A,HTMLAudioInstance:E,HTMLAudioContext:I},M=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],R=(f={m4a:"mp4",oga:"ogg"},g=document.createElement("audio"),m={},v=/^no$/,M.forEach(function(t){var e=f[t]||t,n=g.canPlayType("audio/"+t).replace(v,""),i=g.canPlayType("audio/"+e).replace(v,"");m[t]=!!n||!!i}),Object.freeze(m)),k=/\.(\{([^\}]+)\})(\?.*)?$/;function D(t){var e=k,n="string"==typeof t?t:t.url;if(e.test(n)){for(var i=e.exec(n),r=i[2].split(","),o=r[r.length-1],s=0,a=r.length;s<a;s++){var u=r[s];if(R[u]){o=u;break}}var h=n.replace(i[1],o);return"string"!=typeof t&&(t.extension=o,t.url=h),h}return n}var L,B=function(){function t(){}return t.add=function(){t.legacy=d().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=M;t?e.forEach(function(t){i.c.setExtensionXhrType(t,i.c.XHR_RESPONSE_TYPE.DEFAULT),i.c.setExtensionLoadType(t,i.c.LOAD_TYPE.AUDIO)}):e.forEach(function(t){i.c.setExtensionXhrType(t,i.c.XHR_RESPONSE_TYPE.BUFFER),i.c.setExtensionLoadType(t,i.c.LOAD_TYPE.XHR)})},enumerable:!0,configurable:!0}),t.pre=function(t,e){D(t),e()},t.use=function(t,e){t.data&&-1<M.indexOf(t.extension)?t.sound=d().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),N=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),F=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var n=e.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var n={};return"string"==typeof e?n.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?n.source=e:n=e,(n=p({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},n)).url&&(n.url=D(n.url)),Object.freeze(n),new t(d().useLegacy?new A:new w,n)},Object.defineProperty(t.prototype,"context",{get:function(){return d().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=0<this._instances.length,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var n={};for(var i in t)n[i]=this.addSprites(i,t[i]);return n}if("string"==typeof t){var r=new N(this,e);return this._sprites[t]=r}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var n in this._sprites)this.removeSprites(n);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;0<=t;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var n,i=this;if("string"==typeof t?n={sprite:o=t,loop:this.loop,complete:e}:"function"==typeof t?(n={}).complete=t:n=t,(n=p({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},n||{})).sprite){var r=n.sprite,o=this._sprites[r];n.start=o.start,n.end=o.end,n.speed=o.speed||1,n.loop=o.loop||n.loop,delete n.sprite}if(n.offset&&(n.start=n.offset),!this.isLoaded)return new Promise(function(t,e){i.autoPlay=!0,i._autoPlayOptions=n,i._preload(function(i,r,o){i?e(i):(n.loaded&&n.loaded(i,r,o),t(o))})});this.singleInstance&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",function(){n.complete&&n.complete(i),i._onComplete(s)}),s.once("stop",function(){i._onComplete(s)}),s.play(n),s},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;0<=t;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);-1<e&&this._instances.splice(e,1),this.isPlaying=0<this._instances.length}this._poolInstance(t)},t.prototype._createInstance=function(){if(0<t._pool.length){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),j=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new T),this._htmlAudioContext=new I,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==T.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var n={};for(var i in t){var r=this._getOptions(t[i],e);n[i]=this.add(i,r)}return n}if("string"==typeof t){if(e instanceof F)return this._sounds[t]=e;r=this._getOptions(e);var o=F.from(r);return this._sounds[t]=o}},t.prototype._getOptions=function(t,e){var n;return n="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,p({},n,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){B.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var n=this.find(t);return void 0!==e&&(n.volume=e),n.volume},t.prototype.speed=function(t,e){var n=this.find(t);return void 0!==e&&(n.speed=e),n.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),U=0,V={get PLAY_ID(){return U},playOnce:function(t,e){var n="alias"+U++;return d().add(n,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(d().remove(n),e&&e(t))},complete:function(){d().remove(n),e&&e(null)}}),n},render:function(t,e){var n=document.createElement("canvas");e=p({width:512,height:128,fill:"black"},e||{}),n.width=e.width,n.height=e.height;var i=s.e.from(n);if(!(t.media instanceof w))return i;var r=t.media,o=n.getContext("2d");o.fillStyle=e.fill;for(var a=r.buffer.getChannelData(0),u=Math.ceil(a.length/e.width),h=e.height/2,l=0;l<e.width;l++){for(var c=1,d=-1,f=0;f<u;f++){var g=a[l*u+f];g<c&&(c=g),d<g&&(d=g)}o.fillRect(l,(1+c)*h,1,Math.max(1,(d-c)*h))}return i},resolveUrl:D,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var n=F.from({singleInstance:!0});if(!(n.media instanceof w))return n;for(var i=n.media,r=n.context.audioContext.createBuffer(1,48e3*e,48e3),o=r.getChannelData(0),s=0;s<o.length;s++){var a=t*(s/r.sampleRate)*Math.PI;o[s]=2*Math.sin(a)}return i.buffer=r,n.isLoaded=!0,n},extensions:M,supported:R},X=(L=new j,c=L);i.b.registerPlugin(B),Object.defineProperties(X,{Filterable:{get:function(){return a}},filters:{get:function(){return P}},htmlaudio:{get:function(){return C}},Sound:{get:function(){return F}},SoundLibrary:{get:function(){return j}},SoundSprite:{get:function(){return N}},utils:{get:function(){return V}},webaudio:{get:function(){return S}},sound:{get:function(){return X}}}),e.default=X},function(t,e,n){(function(i,r){var o;!function(i){var s=i.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s(function(e){t=e}),"function"==typeof t}();e?(e.Promise=a?s:T,e.Polyfill=T):void 0===(o=function(){return a?s:T}.call(e,n,e,t))||(t.exports=o);var u=function(){};function h(t){return"[object Array]"===Object.prototype.toString.call(t)}var l,c=void 0!==r?r:setTimeout,p=[];function d(){for(var t=0;t<p.length;t++)p[t][0](p[t][1]);l=!(p=[])}function f(t,e){p.push([t,e]),l||(l=!0,c(d,0))}function g(t){var e=t.owner,n=e.state_,i=e.data_,r=t[n],o=t.then;if("function"==typeof r){n="fulfilled";try{i=r(i)}catch(t){_(o,t)}}m(o,i)||("fulfilled"===n&&v(o,i),"rejected"===n&&_(o,i))}function m(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,function(i){n||(n=!0,e!==i?v(t,i):y(t,i))},function(e){n||(n=!0,_(t,e))}),!0}}catch(e){return n||_(t,e),!0}return!1}function v(t,e){t!==e&&m(t,e)||y(t,e)}function y(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(x,t))}function _(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(w,t))}function b(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)g(e[n])}function x(t){t.state_="fulfilled",b(t)}function w(t){t.state_="rejected",b(t)}function T(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof T==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function n(t){_(e,t)}try{t(function(t){v(e,t)},n)}catch(t){n(t)}}(t,this)}T.prototype={constructor:T,state_:"pending",then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(u),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?f(g,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},T.all=function(t){if(!h(t))throw new TypeError("You must pass an array to Promise.all().");return new this(function(e,n){var i=[],r=0;function o(t){return r++,function(n){i[t]=n,--r||e(i)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),n):i[a]=s;r||e(i)})},T.race=function(t){if(!h(t))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,n){for(var i,r=0;r<t.length;r++)(i=t[r])&&"function"==typeof i.then?i.then(e,n):e(i)})},T.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},T.reject=function(t){return new this(function(e,n){n(t)})}}("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this)}).call(this,n(25),n(61).setImmediate)},function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var l in n=Object(arguments[h]))r.call(n,l)&&(u[l]=n[l]);if(i){a=i(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(u[a[c]]=n[a[c]])}}return u}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(6),n(6),n(29),n(156),n(10),n(54),n(12),n(165),n(21),n(56)],void 0===(r=function(t,e,i,r,o,a,u,c,p,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Application=void 0,i=h(i),d=l(d),window.PIXI=i,n(166),r.settings.PRECISION_FRAGMENT=r.PRECISION.HIGH,r.settings.MIPMAP_TEXTURES=i.MIPMAP_MODES.ON,r.settings.ANISOTROPIC_LEVEL=16;var g=function(t){function e(){var e=this,n=1;return window.devicePixelRatio&&(n=3.2<window.devicePixelRatio?3.2:window.devicePixelRatio),(e=t.call(this,{forceCanvas:u.Config.FORCE_CANVAS,backgroundColor:3355443,width:u.Config.GAME_WIDTH,height:u.Config.GAME_HEIGHT,resolution:n,autoDensity:!0,antialias:!0,sharedTicker:!1,clearBeforeRender:!0})||this).pause=!1,e.content=document.getElementById("content"),e.content.appendChild(e.view),e.analytics=new d.default,e.saveManager=new a.SaveManager,e.assetLoader=new a.AssetLoader(e),e.localization=new a.Localization(e),e.timeline=new p.Timeline,e.sound=new c.SoundManager(e),e.sound.pauseOnBlur=!0,e.scale=new a.ScaleManager(e,u.Config.GAME_WIDTH,u.Config.GAME_HEIGHT,u.Config.SCALE_TYPE),e.scene=new a.SceneManager(e),e.scene.add(o.Boot.Name,new o.Boot(e)),e.scene.add(o.Preloader.Name,new o.Preloader(e)),e.scene.add(o.Gameplay.Name,new o.Gameplay(e)),e.scene.add(o.SplashScreen.Name,new o.SplashScreen(e)),e.scene.add(o.Menu.Name,new o.Menu(e)),e.scene.start(o.Boot.Name),e.ticker.add(e.loop,e),u.Config.WRAP_MODE&&e.scale.setWrap(u.Config.WRAP_WIDTH,u.Config.WRAP_HEIGHT),u.Config.LOCK_CONTEXT_MENU&&(e.view.oncontextmenu=function(t){t.preventDefault()}),h5branding.Branding.analyticsEnabled=!0,h5branding.SplashLoader.getInstance({gameId:u.Config.GAME_DISTRIBUTION_ID,gameName:u.Config.GAME_NAME,gameTitle:u.Config.GAME_NAME,libs:[],version:version}).create().then(function(){f.AdHandler.getInstance().init(e),e.ticker.start()}),e}return s(e,t),e.prototype.loop=function(){this.pause||(this.timeline.update(this.ticker.deltaMS),this.scene.update(this.ticker.deltaMS))},e}(i.Application);new(e.Application=g)}.apply(e,i))||(t.exports=r)},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(62),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(25))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,u=1,h={},l=!1,c=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,i="[object process]"==={}.toString.call(t.process)?function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):function(t){setTimeout(f,0,t)},p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return h[u]=r,i(u),u++},p.clearImmediate=d}function d(t){delete h[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=h[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(25),n(63))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,h=[],l=!1,c=-1;function p(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&d())}function d(){if(!l){var t=a(p);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new f(t,e)),1!==h.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(t,i){var r;!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,h=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,f=String.fromCharCode;function g(t){throw new RangeError(p[t])}function m(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function v(t,e){var n=t.split("@"),i="";return 1<n.length&&(i=n[0]+"@",t=n[1]),i+m((t=t.replace(c,".")).split("."),e).join(".")}function y(t){for(var e,n,i=[],r=0,o=t.length;r<o;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function _(t){return m(t,function(t){var e="";return 65535<t&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+f(t)}).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var i=0;for(t=n?d(t/700):t>>1,t+=d(t/e);455<t;i+=36)t=d(t/35);return d(i+36*t/(t+38))}function w(t){var e,n,i,r,o,s,a,h,l,c,p,f=[],m=t.length,v=0,y=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)128<=t.charCodeAt(i)&&g("not-basic"),f.push(t.charCodeAt(i));for(r=0<n?n+1:0;r<m;){for(o=v,s=1,a=36;m<=r&&g("invalid-input"),(36<=(h=(p=t.charCodeAt(r++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)||h>d((u-v)/s))&&g("overflow"),v+=h*s,!(h<(l=a<=b?1:b+26<=a?26:a-b));a+=36)s>d(u/(c=36-l))&&g("overflow"),s*=c;b=x(v-o,e=f.length+1,0==o),d(v/e)>u-y&&g("overflow"),y+=d(v/e),v%=e,f.splice(v++,0,y)}return _(f)}function T(t){var e,n,i,r,o,s,a,h,l,c,p,m,v,_,w,T=[];for(m=(t=y(t)).length,e=128,o=72,s=n=0;s<m;++s)(p=t[s])<128&&T.push(f(p));for(i=r=T.length,r&&T.push("-");i<m;){for(a=u,s=0;s<m;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>d((u-n)/(v=i+1))&&g("overflow"),n+=(a-e)*v,e=a,s=0;s<m;++s)if((p=t[s])<e&&++n>u&&g("overflow"),p==e){for(h=n,l=36;!(h<(c=l<=o?1:o+26<=l?26:l-o));l+=36)w=h-c,_=36-c,T.push(f(b(c+w%_,0))),h=d(w/_);T.push(f(b(h,0))),o=x(n,v,i==r),n=0,++i}++n,++e}return T.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:_},decode:w,encode:T,toASCII:function(t){return v(t,function(t){return l.test(t)?"xn--"+T(t):t})},toUnicode:function(t){return v(t,function(t){return h.test(t)?w(t.slice(4).toLowerCase()):t})}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(65)(t),n(25))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(68),e.encode=e.stringify=n(69)},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;0<u&&u<h&&(h=u);for(var l=0;l<h;++l){var c,p,d,f,g=t[l].replace(a,"%20"),m=g.indexOf(n);p=0<=m?(c=g.substr(0,m),g.substr(m+1)):(c=g,""),d=decodeURIComponent(c),f=decodeURIComponent(p),i(s,d)?r(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(i(s))+n;return r(t[s])?o(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(7),n(19),n(5),n(29),n(30),n(12),n(15),n(142),n(10)],void 0===(r=function(t,e,n,i,r,o,u,h,l,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.init=function(){this.app.analytics.startScene(e.Name),this.app.sound.playSfx(r.Sounds.Intro5,.3),this.app.sound.playMusic(r.Sounds.MainMenu,.3),this.background=this.addSprite(r.Atlases.Menu,"menu_background"),this.hand=new l.ColoredSprite(this.app,r.Atlases.Menu,"menu_hand"),this.subBackground=new l.ColoredSprite(this.app,r.Atlases.Menu,"menu_sub_background"),this.subBackground.anchor.set(.5),this.logo=new l.ColoredSprite(this.app,r.Atlases.Interface,"menu_logo"),this.logo.anchor.set(.5),this.logo.scale.set(5),this.background.anchor.set(.5),this.buttonsContainer=new c.MenuButtonsContainer(this),this.buttonsContainer.angle=-10,this.buttonsContainer.playButton.on(r.Events.POINTER_UP,this.start,this),this.buttonsContainer.googleButton.on(r.Events.POINTER_UP,function(){return p.Utils.openLink(p.Config.GOOGLE_PLAY)},this),this.availableText=n.Text.create(this.app,"available",r.Fonts.Kimberley,28,16777215),this.availableText.anchor.y=1,this.availableText.alpha=0,p.Utils.isDesktop()&&(this.availableText.visible=!1),this.menuMan=new u.MenuMan(this),this.startAnimation=new c.StartAnimation(this.app),this.saveMenu=new c.SaveMenu(this.app),this.saveMenu.continueButton.on(r.Events.POINTER_UP,this.showGame,this),this.saveMenu.clearButton.on(r.Events.POINTER_UP,this.clearSaves,this),this.addChild(this.hand,this.subBackground,this.logo,this.menuMan,this.buttonsContainer,this.buttonsContainer.googleButton,this.availableText,this.startAnimation,this.saveMenu),this.resize(),this.menuAnimation(),this.menuMan.x=-1e3,this.hand.x=2*-this.hand.width/3,this.hand.green=75,this.hand.blue=75,this.subBackground.scale.set(1.85),this.subBackground.green=75,this.subBackground.blue=75,this.logo.scale.set(5),this.logo.green=0,this.logo.blue=0,this.logo.angle=20},e.prototype.update=function(t){this.menuMan.update(t)},e.prototype.clearSaves=function(){this.app.saveManager.setInitValues(),this.showGame()},e.prototype.menuAnimation=function(){var t=this,e=this.app.timeline.tween(this.hand).from({x:-100}).to({x:0}).setting({duration:2});this.app.timeline.tween(this.hand).from({x:2*-this.hand.width/3,green:75,blue:75}).to({x:-100,green:255,blue:255}).setting({duration:1,onComplete:function(){return e.start()}}).start();var n=this.app.timeline.tween(this.subBackground).to({scale:{x:1.05,y:1.05}}).setting({duration:2});this.app.timeline.tween(this.subBackground).from({scale:{x:1.85,y:1.85},green:75,blue:75}).to({scale:{x:1.15,y:1.15},green:255,blue:255}).setting({duration:1,onComplete:function(){return n.start()}}).start(),this.app.timeline.tween(this.logo).from({scale:{x:5,y:5},green:0,blue:0,angle:20}).to({scale:{x:1.5,y:1.5},green:180,blue:0,angle:0}).setting({duration:1,onComplete:function(){t.app.timeline.tween(t.logo).from({green:180,blue:0}).to({scale:{x:1,y:1},green:255,blue:255}).setting({duration:.5,onComplete:function(){return t.buttonsContainer.buttonsSwitcher(!0)}}).start()}}).start(),this.app.timeline.tween(this.menuMan).from({x:-200}).to({x:200}).setting({duration:1,delay:1,easing:h.Easing.InOutSine}).start(),this.app.timeline.tween(this.availableText).to({alpha:1}).setting({duration:1,delay:1}).start(),this.menuMan.start()},e.prototype.start=function(){this.app.sound.stopSfx(r.Sounds.Intro5),this.startAnimation.start(),this.app.timeline.callback(this.showSaveMenu,1.5,!1,this)},e.prototype.showSaveMenu=function(){this.app.saveManager.stats.tutorialWasShowed?(this.hand.visible=!1,this.subBackground.visible=!1,this.logo.visible=!1,this.startAnimation.visible=!1,this.menuMan.visible=!1,this.buttonsContainer.googleButton.visible=!1,this.buttonsContainer.block(),this.saveMenu.show(),this.availableText.alpha=0):this.showGame()},e.prototype.showGame=function(){this.app.scene.stop(e.Name),this.app.scene.start(o.Gameplay.Name)},e.prototype.resize=function(){this.background.position.set(this.app.scale.width/2,this.app.scale.height/2),this.subBackground.position.set(this.app.scale.width/2,this.app.scale.height/2),this.startAnimation.position.set(this.app.scale.width/2,this.app.scale.height/2),this.logo.position.set(this.app.scale.width/2,this.app.scale.height/2),this.availableText.position.set(this.app.scale.width/2,this.app.scale.height-35),this.buttonsContainer.position.set(650,620),this.buttonsContainer.googleButton.position.set(this.availableText.x+this.availableText.width/2+50,this.app.scale.height-50),this.saveMenu.position.set(400,this.app.scale.height-300),this.menuMan.position.set(200,this.app.scale.height-250)},e.prototype.final=function(){this.app.timeline.clear(),this.background.destroy({children:!0,texture:!0,baseTexture:!0}),this.menuMan.destroy(),this.app.loader.resources[r.Spines.MenuMan.name]=null,this.app.loader.resources[r.Atlases.MenuMan]=null,this.app.loader.resources[r.Atlases.MenuMan+"_image"]=null,this.app.loader.resources[r.Atlases.Menu]=null,this.app.loader.resources[r.Atlases.Menu+"_image"]=null,this.clear()},e.Name="Menu",e}((i=a(i)).default);e.default=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(10),n(18)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationData=void 0;var r=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return o._current=0,o._autoUpdate=!1,o.isRevers=!1,o.autoUpdate=!0,o.animationData={},o.isActive=!1,o.pause=!1,o.backward=!1,o.pingPong=!1,o.loop=!1,o.startTime=0,o.time=0,o}return s(e,t),e.generateFrames=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=[],s=e;s<=i;s++)o.push(r?t+n.Utils.pad(r,s.toString()):t+s);return o},Object.defineProperty(e.prototype,"current",{get:function(){return this._current},set:function(t){this.currentAnimation&&0!==this.currentAnimation.frames.length||console.error("Animation not selected or frames are empty."),this._current=n.Utils.clamp(t);var e=Math.floor((this.currentAnimation.frames.length-1)*this._current);this.currentAnimation.atlas?this.setTexture(this.currentAnimation.atlas,this.currentAnimation.frames[e]):this.setFrame(this.currentAnimation.frames[e])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t&&!this._autoUpdate?this.app.timeline.addSprite(this):!t&&this._autoUpdate&&this.app.timeline.removeSprite(this),this._autoUpdate=t},enumerable:!1,configurable:!0}),e.prototype.addAnimation=function(t,e,n,i){if(!this.animationData[t])return this.animationData[t]=new o(e,n,i),this.currentAnimation||(this.currentAnimation=this.animationData[t]),this.animationData[t];console.error("Animation "+t+" alrady exist")},e.prototype.getAnimationData=function(t){return this.animationData[t]},e.prototype.removeAnimation=function(t){this.animationData[t]=null},e.prototype.exist=function(t){return null!==this.animationData[t]&&void 0!==this.animationData[t]},e.prototype.setAnimation=function(t){this.animationData[t]?this.currentAnimation=this.animationData[t]:console.error("Animation "+t+" not exist")},e.prototype.play=function(t,e,n,i,r){this.setAnimation(t),this.pause=!1,this.isRevers=!1,this.isActive=!0,this.startTime=-1,this.time=0,(e||!1===e)&&(this.loop=e),(n||!1===n)&&(this.backward=n),(i||!1===i)&&(this.pingPong=i),r&&(this.currentAnimation.duration=r),this.onStart&&this.onStart()},e.prototype.stop=function(t){this.isActive=!1,t&&this.onComplete&&this.onComplete()},e.prototype.update=function(t){if(this.isActive&&!this.pause){-1===this.startTime&&(this.startTime=this.time);var e=this.time-this.startTime;if(0<=e){var n=0===this.currentAnimation.duration?1:Math.min(e/this.currentAnimation.duration,1);this.current=this.backward&&!this.isRevers||!this.backward&&this.isRevers?1-n:n,this.onUpdate&&this.onUpdate(n),1<=n&&(this.pingPong&&!this.isRevers?(this.isRevers=!0,this.startTime=-1,this.onPingPong&&this.onPingPong()):this.loop?(this.onLoop&&this.onLoop(),this.pingPong&&(this.isRevers=!this.isRevers),this.startTime=-1):this.stop(!0))}this.time+=t}},e.prototype.destroy=function(e){this.autoUpdate&&(this.autoUpdate=!1),this.animationData=null,t.prototype.destroy.call(this,e)},e}((i=a(i)).default);e.default=r;var o=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=0),this.frames=t,this.duration=e,this.atlas=n};e.AnimationData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(41)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.DRAW_FPS=!1,t.DRAW_VERSION=!1,t.SHOW_DEBUG_INTERFACE=!1,t.SHOW_MASKS=!1,t.FORCE_MOBILE=!1,t.GAME_WIDTH=1280,t.GAME_HEIGHT=960,t.GAME_DISTRIBUTION_ID="3c6959b8087c448e865fa5d5762cfc81",t.GA_ID="G-GHS53NWPGQ",t.GOOGLE_PLAY="https://play.google.com/store/apps/details?id=com.gamesmedia.douchebaglife",t.BLOCK_ADS=!1,t.BLOCK_ANALYTICS=!1,t.FORCE_CANVAS=!1,t.LOCK_CONTEXT_MENU=!0,t.SCALE_TYPE=n.ScaleType.FIT,t.WRAP_MODE=!1,t.WRAP_WIDTH=640,t.WRAP_HEIGHT=480,t.GAME_NAME="Douchebag Workout",t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.Room1="room_1",t.Room2="room_2",t.Room3="room_3",t.Room4="room_4",t.Room5="room_5",t.Room6="room_6",t.Room7="room_7",t.Room8="room_8",t.Room9="room_9",t.Room10="room_10",t.Room11="room_11",t.Room12="room_12",t.Seller="seller",t.StatsFillingLine="stat_bar_filling_line",t.FillingLine="filling_line",t.Pic="pic_",t.list=[t.Room1,t.Room2,t.Room3,t.Room4,t.Room5,t.Room6,t.Room7,t.Room8,t.Room9,t.Room10,t.Room11,t.Room12,t.FillingLine,t.StatsFillingLine,t.Seller],t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.list=[t.Localization="localization",t.GameConfig="game_config"],t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.list=[t.CarbonBlock="CarbonBlock",t.Kimberley="Kimberley"],t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.POINTER_DOWN="pointerdown",t.POINTER_UP="pointerup",t.POINTER_OUT="pointerout",t.POINTER_OVER="pointerover",t.POINTER_UP_OUTSIDE="pointerupoutside",t.POINTER_MOVE="pointermove",t.CLEAR_CLICK="clearclick",t.CLICK="click",t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.MOUSE_OUT="mouseout",t.MOUSE_OVER="mouseover",t.MOUSE_UP_OUTSIDE="mouseupoutside",t.MOUSE_MOVE="mousemove",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.COMPLETE="complete",t.RESIZE="resize",t.PRELOAD_COMPLETE="preloadcomplete",t.ASSET_LOADED="assetloaded",t.LOAD_COMPLETE="loadcomplete",t.SHOW_ICONS_GRID="show_grid",t.SHOW_STYLES_GRID="show_styles_grid",t.FOOD="food",t.SIDE_MENU="side_menu",t.EAT="eat",t.BOOST="boost",t.WORK="work",t.GLASSES="glasses",t.BLING="bling",t.HAIRCUT="haircut",t.REFRESH_TAN="refresh_tan",t.TAN="tan",t.SHOW_ROOM="showroom",t.LEVEL_UP="levelup",t.GET_ACHIV="getachievement",t.CHECK_ACHIV="checkachievement",t.SHOW_CURSOR="showcursor",t.HIDE_CURSOR="hidecursor",t.SELLER_WAS_SHOWED="sellerwasshowed",t.SHOW_SELLER="showseller",t.TUTORIAL_SHOWED="tutourialshowed",t.TAN_CHANGED="tanchanged",t.SWITCH_TRACK="switchtrack",t.TRANSITION="transition",t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(42)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var i=function(){function t(){}return t.SimpleMan={atlases:[n.default.Man1,n.default.Man2],name:"man_spine"},t.MenuMan={atlases:[n.default.MenuMan],name:"menu_man_spine"},t.Animation={atlases:[n.default.Animation1,n.default.Animation2],name:"animation_spine"},t.list=[t.SimpleMan,t.Animation,t.MenuMan],t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.fillList=function(){for(var t=0;t<29;t++)this.effortList.push("effort_"+t)},t.Intro1="sd_intro_1",t.Intro2="sd_intro_2",t.Intro3="sd_intro_3",t.Intro4="sd_intro_4",t.Intro5="sd_intro_5",t.Contempt="contempt",t.Laughter="laughter",t.MusicIntro="tr_intro",t.Effort="effort_",t.Explode="explode_sound",t.list=[t.MainMenu="main_menu",t.Intro1,t.Intro2,t.Intro3,t.Intro4,t.Intro5,t.Contempt,t.Laughter,t.Explode,t.MusicIntro,t.Track0="track_0",t.Track1="track_1",t.Track2="track_2",t.Track3="track_3",t.Track4="track_4",t.Track5="track_5",t.Track6="track_6",t.Track7="track_7",t.Track8="track_8",t.Track9="track_9",t.Track10="track_10",t.Track11="track_11",t.GameButtonOnOver="game_button_on_over",t.SmallButtonOnOver="small_button_on_over",t.FillingPanelOnOver="stat_panels_on_over",t.PhotosAppearence="photos_appearence",t.PhotosLeft="photos_left",t.Eat="eat",t.TanReady="tan_ready",t.TanTick="tan_tick",t.AchievementUnlock="achievemen_unlock",t.StatFilling="stat_filling",t.Claps="claps",t.SellerSpeach="seller_speak",t.Whistle="whistle",t.Showing="showing",t.TakeBooster="booster_take",t.TakeSyrenge="syrenge_booster",t.TakeHormone="hormone_booster"],t.effortList=[],t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){}}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(10)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.getOs=function(){var t=window.navigator.userAgent,e=window.navigator.platform;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?"Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(e)?"iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?"Windows":/Android/.test(t)?"Android":/Linux/.test(e)?"Linux":void 0},t.isDesktop=function(){var t=this.getOs();return"iOS"!==t&&"Android"!==t},t.pad=function(t,e,n){return void 0===n&&(n=!0),void 0===e?t:n?(t+e).slice(-t.length):(e+t).substring(0,t.length)},t.clamp=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=0),Math.max(Math.min(t,e),n)},t.floatClamp=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=0),parseFloat(this.clamp(t,e,n).toFixed(2))},t.lerp=function(t,e,n){return(1-n)*t+n*e},t.loadScript=function(t,e,n,i){void 0===e&&(e=!1);var r=document.createElement("script");e&&r.setAttribute("type","module"),r.setAttribute("src",t),r.async=!0,"function"==typeof n&&(r.onload=n),"function"==typeof i&&(r.oncancel=i,r.onabort=i,r.onerror=i),document.body.appendChild(r)},t.openLink=function(t){window.open(t)},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(18),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,r,o,s,a,u){var h=t.call(this,e,n,r,u)||this;return h.anchor.set(.5),h.interactive=!0,h.buttonMode=!0,h.setFrames(r,o,s,a),h.on(i.Events.POINTER_DOWN,h.onDown,h),h.on(i.Events.POINTER_UP,h.onUp,h),h.on(i.Events.POINTER_OUT,h.onOut,h),h.on(i.Events.POINTER_OVER,h.onOver,h),h}return s(e,t),e.prototype.setFrames=function(t,e,n,i){this.outFrame=t,this.overFrame=null!=e?e:t,this.downFrame=null!=n?n:t,this.upFrame=null!=i?i:t,this.onOut()},e.prototype.onDown=function(){this.setFrame(this.downFrame)},e.prototype.onUp=function(){this.setFrame(this.upFrame)},e.prototype.onOut=function(){this.setFrame(this.outFrame)},e.prototype.onOver=function(){this.setFrame(this.overFrame)},e.prototype.destroy=function(e){this.app=null,this.outFrame=null,this.overFrame=null,this.upFrame=null,this.downFrame=null,t.prototype.destroy.call(this,e)},e}((n=a(n)).default);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(6),n(18),n(5),n(43)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=h(n),i=l(i),o=l(o);var a=function(t){function e(e,n,o,s,a,u,h){var l=t.call(this)||this;return l.app=e,l.sprite=new i.default(e,n,o,h),l.sprite.anchor.set(.5),l.addChild(l.sprite),l.interactive=!0,l.buttonMode=!0,l.setFrames(o,s,a,u),l.on(r.Events.POINTER_DOWN,l.onDown,l),l.on(r.Events.POINTER_UP,l.onUp,l),l.on(r.Events.POINTER_OUT,l.onOut,l),l.on(r.Events.POINTER_OVER,l.onOver,l),l}return s(e,t),e.prototype.setFrames=function(t,e,n,i){this.outFrame=t,this.overFrame=null!=e?e:t,this.downFrame=null!=n?n:t,this.upFrame=null!=i?i:t,this.onOut()},e.prototype.onDown=function(){this.sprite.setFrame(this.downFrame)},e.prototype.onUp=function(){this.sprite.setFrame(this.upFrame)},e.prototype.onOut=function(){this.sprite.setFrame(this.outFrame)},e.prototype.onOver=function(){this.sprite.setFrame(this.overFrame)},e.prototype.createText=function(t){this.text||(this.text=new o.default(this.app,"",t),this.text.anchor.set(.5),this.text.roundPixels=!0,this.text.position.set(0,0),this.addChild(this.text))},e.prototype.wrap=function(t){void 0===t&&(t=20),this.text&&(this.sprite.width=this.text.width+t)},e.prototype.setText=function(t,e,i,r,o){if(void 0===e&&(e="arial"),void 0===i&&(i=12),void 0===r&&(r=16777215),void 0===o&&(o="center"),!this.text){var s=new n.TextStyle({fontFamily:e,fontSize:i,fill:r,align:o});this.createText(s)}this.text.setText(t)},e.prototype.destroy=function(e){this.app=null,this.sprite&&(this.sprite.destroy(),this.sprite=null),this.text&&(this.text.destroy(),this.text=null),this.outFrame=null,this.overFrame=null,this.upFrame=null,this.downFrame=null,t.prototype.destroy.call(this,e)},e}(n.Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.style=new n.TextStyle({fontSize:30,fill:16777215,align:"left"}),e.debugText=new n.Text("",e.style),e.debugText.roundPixels=!0,e.addChild(e.debugText),e}return s(e,t),Object.defineProperty(e.prototype,"drawVersion",{get:function(){return this._drawVersion},set:function(t){this._drawVersion=t,this._drawVersion&&(this.debugText.text="Version: "+version)},enumerable:!1,configurable:!0}),e.prototype.update=function(t){},e}((n=h(n)).Container);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,r,o,s,a,u){var h=this;if(u||(u=e.loader.resources),u=u||e.loader.resources,"string"==typeof n){var l=n,c=u[l];h=c?c.texture?t.call(this,c.texture,r,o,s,a)||this:(i||console.error("Frame not found: "+l),t.call(this,c.textures[i],r,o,s,a)||this):(console.error("Resource not found: "+l),t.call(this,null,r,o,s,a)||this)}else(h=t.call(this,n,r,o,s,a)||this).frame=null,h.key=null,h.texture=n;return h.app=e,h.resources=u,h.key=n,h.frame=i,h.name=i,h.resources[h.key]&&h.resources[h.key].textures&&(h.textures=h.resources[h.key].textures),h}return s(e,t),e.prototype.setFrame=function(t){console.log(this.textures),this.textures&&this.textures[t]?(this.name=t,this.frame=t,this.texture=this.textures[t]):console.error("Image not found in textures: "+t+".")},e.prototype.setTexture=function(t,e){if("string"==typeof t){var n=t,i=this.resources[n];i?(this.key=n,e?(this.textures=i.textures,this.setFrame(e)):(this.frame=null,this.name=n,this.texture=i.texture)):console.error("Atlas not found: "+n)}else this.frame=null,this.key=null,this.texture=t},e.prototype.destroy=function(e){this.app=null,this.textures=null,this.resources=null,this.name=null,this.frame=null,this.key=null,t.prototype.destroy.call(this,e)},e.prototype.setBorders=function(t,e,n,i){void 0===t&&(t=this.leftWidth),void 0===e&&(e=this.topHeight),void 0===n&&(n=this.rightWidth),void 0===i&&(i=this.bottomHeight),this.leftWidth=t,this.topHeight=e,this.rightWidth=n,this.bottomHeight=i},e}((n=h(n)).NineSlicePlane);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,r){void 0===r&&(r=1.3);var o=t.call(this)||this;return o.app=e.app,o.scene=e,o.speed=r,o.shadow=e.addSprite(i.Atlases.MenuMan,"shadow"),o.shadow.position.set(-120,176),o.man=new n.spine.Spine(o.app.loader.resources[i.Spines.MenuMan.name].spineData),o.man.autoUpdate=!1,o.addChild(o.shadow,o.man),o}return s(e,t),e.prototype.start=function(){this.startIdle1()},e.prototype.startIdle=function(t,e,n){void 0===n&&(n=0),this.track=this.man.state.setAnimation(0,t,!1),this.man.update(0),0!==this.track.animationEnd&&this.app.timeline.tween(this.track).from({trackTime:0}).to({trackTime:this.track.animationEnd-.01}).setting({duration:this.track.animationEnd/this.speed,repeat:n,onComplete:e}).start()},e.prototype.startIdle1=function(){var t=this;this.startIdle("idle_1",function(){return t.startIdle2()})},e.prototype.startIdle2=function(){var t=this;this.startIdle("idle_2",function(){return t.startIdle3()},10)},e.prototype.startIdle3=function(){var t=this;this.startIdle("idle_3",function(){return t.startIdle1()})},e.prototype.update=function(t){this.man.update(0)},e.prototype.destroy=function(){this.app&&(this.track&&(this.app.timeline.clearTweens(this.track),this.track=null),this.man.destroy(!0),this.man=null,this.scene=null,this.app=null,this.shadow.destroy(),this.shadow=null,t.prototype.destroy.call(this))},e}((n=h(n)).Container);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(168),n(5),n(10),n(44),n(20)],void 0===(r=function(t,e,n,i,r,o,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(o){var s=t.call(this)||this;for(var h in s._tan=0,s._redHead=0,s._belly=0,s._bags=0,s._eyes=0,s._dumbbells=0,s.app=o.app,s.scene=o,s.slots={},s.textures=r.Spines.SimpleMan.textures,s.dropShadowFilter=new i.DropShadowFilter({distance:0,blur:3,alpha:.4,quality:2}),s.tanColor=new n.spine.core.Color(1,1,1,1),s.spine=new n.spine.Spine(s.app.loader.resources[r.Spines.SimpleMan.name].spineData),s.spine.filters=[s.dropShadowFilter],s.spine.scale.x=-1,s.addChild(s.spine),a.Body)if(Object.prototype.hasOwnProperty.call(a.Body,h)){var l=a.Body[h],c=s.spine.skeleton.findSlotIndex(l+"slot");s.slots[l]=s.spine.skeleton.slots[c]}return s.bodySlots=s.getSlots(e.TAN_PARTS),s.headSlots=s.getSlots(e.HEAD_PARTS),s.headTanSlots=s.getSlots(e.HEAD_TAN_PARTS),s.spine.autoUpdate=!1,s.startBlinking(),s.setState(u.State.IDLE),s}return s(e,t),e.prototype.getSlots=function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.slots[t[n]]);return e},Object.defineProperty(e.prototype,"tan",{get:function(){return this._tan},set:function(t){this._tan=o.Utils.clamp(t),this.tanColor.g=.63+.37*(1-this._tan),this.tanColor.b=.4+.6*(1-this._tan),this.updateSlotsColor(this.bodySlots,1,this.tanColor.g,this.tanColor.b)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redHead",{get:function(){return this._redHead},set:function(t){this._redHead=o.Utils.clamp(t);var e=o.Utils.lerp(this.tanColor.g,.749*this.tanColor.g,this._redHead),n=o.Utils.lerp(this.tanColor.b,.749*this.tanColor.b,this._redHead);this.updateSlotsColor(this.headTanSlots,1,e,n);var i=o.Utils.lerp(1,.749,this._redHead);this.updateSlotsColor(this.headSlots,1,i,i)},enumerable:!1,configurable:!0}),e.prototype.updateSlotsColor=function(t,e,n,i,r){void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1);for(var o=0;o<t.length;o++){var s=t[o].attachment;s&&s.color&&(s.color.a=r,s.color.r=e,s.color.g=n,s.color.b=i)}},Object.defineProperty(e.prototype,"belly",{get:function(){return this._belly},set:function(t){this._belly=o.Utils.clamp(t),this.setUnitProperty(a.Body.BELLY,this._belly,100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bags",{get:function(){return this._bags},set:function(t){this._bags=o.Utils.clamp(t),this.setUnitProperty(a.Body.BAGS,this._bags,8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eyes",{get:function(){return this._eyes},set:function(t){this._eyes=o.Utils.clamp(t),this.setUnitProperty(a.Body.EYES,this._eyes,25)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dumbbells",{get:function(){return this._dumbbells},set:function(t){if(this._dumbbells=o.Utils.clamp(t),this.currentState===u.State.ACT_1)this.setUnitProperty(a.Body.DUMBBELLS_1_1,this._dumbbells,9),this.setUnitProperty(a.Body.DUMBBELLS_1_2,this._dumbbells,9);else if(this.currentState===u.State.ACT_2)this.setUnitProperty(a.Body.POID,this._dumbbells,9);else if(this.currentState===u.State.ACT_3)this.setUnitProperty(a.Body.DUMBBELLS_6_1,this._dumbbells,9),this.setUnitProperty(a.Body.DUMBBELLS_6_2,this._dumbbells,9);else if(this.currentState===u.State.ACT_5)this.setUnitProperty(a.Body.DUMBBELLS_5_1,this._dumbbells,9,1,a.Body.DUMBBELLS_6_1),this.setUnitProperty(a.Body.DUMBBELLS_5_2,this._dumbbells,9);else if(this.currentState===u.State.ACT_6||this.currentState===u.State.ACT_7){var e=this._dumbbells;this._dumbbells<.7&&(e+=.12),this.setUnitProperty(a.Body.DUMBBELLS_6_1,e,9),this.setUnitProperty(a.Body.DUMBBELLS_6_2,e,9)}},enumerable:!1,configurable:!0}),e.prototype.setBody=function(t,e){e=o.Utils.clamp(Math.floor(e),30,1);var n=t+o.Utils.pad("0000",e.toString());this.textures[n]?this.setBodyTexture(t,this.textures[n]):console.error("Frame not exist: "+n)},e.prototype.setGlasses=function(t){this.changeTexture(1,5,t,a.Body.GLASSES)},e.prototype.setBling=function(t){this.changeTexture(1,5,t,a.Body.BLING)},e.prototype.setMouth=function(t){this.changeTexture(1,11,t,a.Body.MOUTH)},e.prototype.setHair=function(t){this.changeTexture(1,6,t,a.Body.HAIR)},e.prototype.setBodyTexture=function(t,e){this.slots[t].hackRegion&&this.slots[t].hackRegion.texture===e||this.hackTextureBySlot(this.slots[t],e)},e.prototype.hackTextureBySlot=function(t,e){var i=t.getAttachment();if(i&&i.region){var r=i.region;e?((r=new n.spine.core.TextureRegion).texture=e,r.size=null,t.hackRegion=r,t.hackAttachment=i):(t.hackRegion=null,t.hackAttachment=null),t.currentSprite&&t.currentSprite.region!==r&&(this.spine.setSpriteRegion(i,t.currentSprite,r),t.currentSprite.region=r)}},e.prototype.setUnitProperty=function(t,e,n,i,r){void 0===i&&(i=1),void 0===r&&(r=t);var s=r+o.Utils.pad("0000",Math.floor(e*n+i).toString());this.setBodyTexture(t,this.textures[s])},e.prototype.setState=function(t,e){switch(void 0===t&&(t=u.State.IDLE),this.currentState=t,this.spine.filters=[],this.play(t),this.spine.scale.x=e?1:-1,t){case u.State.IDLE:this.spine.position.set(1140,250),this.spine.filters=[this.dropShadowFilter];break;case u.State.ACT_1:this.spine.position.set(920,600);break;case u.State.ACT_2:this.spine.position.set(e?1100:750,600);break;case u.State.ACT_3:this.spine.position.set(1150,500);break;case u.State.ACT_4:this.spine.position.set(950,780);break;case u.State.ACT_5:this.spine.position.set(890,460);break;case u.State.ACT_6:this.spine.position.set(e?780:1100,200);break;case u.State.ACT_7:this.spine.position.set(1100,200);break;case u.State.ACT_8:this.spine.position.set(990,615);break;default:console.error("State not exist: "+t)}this.dumbbells=this.dumbbells,this.tan=this.tan},e.prototype.play=function(t){this.spine.state.hasAnimation(t)?(this.manTrack&&this.app.timeline.clearTweens(this.manTrack),this.manTrack=this.spine.state.setAnimation(0,t,!0),this.spine.update(0)):console.error("State not exist: "+t)},e.prototype.startBlinking=function(){this.app.timeline.tween(this).to({eyes:1}).setting({duration:.54,repeatDelay:3,repeat:-1}).start()},e.prototype.changeTexture=function(t,e,n,i){(n<t||e<n)&&console.error("Invalid index: "+n+". The index must be greater than "+(t-1)+" and less than "+(e+1)+"."),this.setBodyTexture(i,this.textures[i+o.Utils.pad("0000",n.toString())])},e.prototype.reset=function(){this.spine.state.clearTrack(0),this.spine.skeleton.setToSetupPose()},e.TAN_PARTS=[a.Body.LEFT_LOWER_ARM,a.Body.LEFT_UPPER_ARM,a.Body.LEFT_LOWER_LEG,a.Body.LEFT_UPPER_LEG,a.Body.LEFT_FOOT,a.Body.LEFT_HAND,a.Body.RIGHT_LOWER_ARM,a.Body.RIGHT_UPPER_ARM,a.Body.RIGHT_LOWER_LEG,a.Body.RIGHT_UPPER_LEG,a.Body.RIGHT_FOOT,a.Body.RIGHT_HAND,a.Body.ABS,a.Body.LOWER_ABS,a.Body.UPPER_ABS,a.Body.UPPER_BODY,a.Body.TRAPEZE,a.Body.BAGS,a.Body.HEAD,a.Body.WRIST_1,a.Body.BELLY,a.Body.WRIST_2,a.Body.HANDS_1,a.Body.HANDS_2],e.HEAD_PARTS=[a.Body.BLING,a.Body.GLASSES,a.Body.MOUTH,a.Body.HAIR,a.Body.EYES],e.HEAD_TAN_PARTS=[a.Body.BAGS,a.Body.HEAD],e}((n=h(n)).Container);e.default=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(o){var s=t.call(this)||this;s.app=o.app,s.timeline=s.app.timeline,s.explode=new i.AnimatedSprite(s.app,r.Atlases.Explode,"explode_1"),s.explode.anchor.set(.5),s.explode.addAnimation("explode",i.AnimatedSprite.generateFrames("explode_",1,22),.6),s.explode.alpha=0,s.explode.scale.set(1.3),s.explodeMask=new i.Sprite(s.app,r.Atlases.Logo,"explode_mask"),s.explodeMask.anchor.set(.5),s.logoBottom=new i.Sprite(s.app,r.Atlases.Logo,"pyrozer_bottom"),s.logoBottom.anchor.set(.5),s.logoTop=new i.Sprite(s.app,r.Atlases.Logo,"pyrozer_top"),s.logoTop.anchor.set(.5),s.fire=new n.TilingSprite(s.app.loader.resources[r.Atlases.Logo].textures.fire,e.MASK_WIDTH,e.MASK_HEIGHT),s.fire.position.set(-2,-s.logoTop.height/2+5),s.fire.anchor.set(.5,0),s.timeline.tween(s.fire.tilePosition).to({y:-1134}).setting({duration:1,repeat:-1}).start(),s.pyrozerLogo=new n.Container,s.pyrozerLogo.alpha=0,s.pyrozerLogo.scale.set(.61);var a=new n.Graphics;a.beginFill(),a.drawRect(-e.MASK_WIDTH/2+s.fire.x,s.fire.y,e.MASK_WIDTH,e.MASK_HEIGHT),a.endFill(),s.light=new i.Sprite(s.app,r.Atlases.Logo,"light"),s.light.position.set(-e.LOGO_WIDTH/1.7,-e.LOGO_WIDTH/1.7),s.light.anchor.set(.5),s.light.angle=-33,s.light.mask=a,s.light.scale.x=1.2,s.pyrozerLogo.addChild(s.logoBottom,s.fire,s.logoTop,s.light,a),s.addChild(s.pyrozerLogo,s.explode,s.explodeMask),s.particles=[];for(var u=0;u<e.PARTICLE_COUNT;u++){var h=new i.AnimatedSprite(s.app,r.Atlases.Logo,"particle_0001");h.position.set(-e.LOGO_WIDTH/2+e.LOGO_WIDTH*Math.random(),-e.LOGO_HEIGHT/2+e.LOGO_HEIGHT*Math.random()),h.alpha=0,h.scale.set(.3+.8*Math.random()),h.addAnimation("idle",i.AnimatedSprite.generateFrames("particle_",1,9,"0000"),.2),h.anchor.set(.5),s.particles.push(h),s.pyrozerLogo.addChild(h)}return s}return s(e,t),e.prototype.show=function(){this.explode.alpha=.71,this.explode.play("explode"),this.app.sound.playSfx(r.Sounds.Explode,.3),this.timeline.tween(this.explode).to({alpha:.5}).setting({duration:.52}).start(),this.timeline.tween(this.explode).from({alpha:.5}).to({alpha:0}).setting({delay:.52,duration:.52}).start(),this.timeline.tween(this.pyrozerLogo).to({scale:{x:1,y:1},alpha:1}).setting({duration:.2}).start(),this.timeline.tween(this.pyrozerLogo).from({alpha:1}).to({alpha:0}).setting({duration:.2,delay:4,onComplete:this.onComplete.bind(this)}).start();for(var t=0;t<this.particles.length;t++){var e=this.particles[t];this.timeline.callback(this.showParticle.bind(this,e),.03*t)}this.timeline.tween(this.light).to({x:-this.light.x,y:-this.light.y}).setting({delay:2,duration:.52}).start()},e.prototype.onComplete=function(){this.emit(r.Events.COMPLETE)},e.prototype.showParticle=function(t){t.play("idle",!0);var n=1+.5*Math.random();this.timeline.tween(t).to({alpha:1}).setting({duration:.2}).start(),this.timeline.tween(t).to({y:t.y-.6*e.LOGO_HEIGHT}).setting({duration:n}).start(),this.timeline.tween(t).from({alpha:1}).to({scale:{x:0,y:0},alpha:0}).setting({duration:.2,delay:n-.2}).start(),.5<Math.random()&&this.timeline.tween(t).to({x:t.x+10+15*Math.random()}).setting({duration:1.3,repeat:2,pingPong:!0}).start()},e.PARTICLE_COUNT=80,e.LOGO_WIDTH=360,e.LOGO_HEIGHT=300,e.MASK_WIDTH=350,e.MASK_HEIGHT=320,e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.Linear=function(t){return t},t.InQuad=function(t){return t*t},t.OutQuad=function(t){return t*(2-t)},t.InOutQuad=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},t.InCubic=function(t){return t*t*t},t.OutCubic=function(t){return--t*t*t+1},t.InOutCubic=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},t.InQuart=function(t){return t*t*t*t},t.OutQuart=function(t){return 1- --t*t*t*t},t.InOutQuart=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},t.InQuint=function(t){return t*t*t*t*t},t.OutQuint=function(t){return--t*t*t*t*t+1},t.InOutQuint=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},t.InSine=function(t){return 1-Math.cos(t*Math.PI/2)},t.OutSine=function(t){return Math.sin(t*Math.PI/2)},t.InOutSine=function(t){return.5*(1-Math.cos(Math.PI*t))},t.InExpo=function(t){return 0===t?0:Math.pow(1024,t-1)},t.OutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.InOutExpo=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},t.InCirc=function(t){return 1-Math.sqrt(1-t*t)},t.OutCirc=function(t){return Math.sqrt(1- --t*t)},t.InOutCirc=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-2)*(t-2))+1)},t.InElastic=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.4),0===t?0:1===t?1:(i=!e||e<1?(e=1,n/4):n*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-1))*Math.sin((t-1-i)*(2*Math.PI)/n))},t.OutElastic=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.4),0===t?0:1===t?1:(i=!e||e<1?(e=1,n/4):n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/n)+1)},t.InOutElastic=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.4),0===t?0:1===t?1:(i=!e||e<1?(e=1,n/4):n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-1))*Math.sin((t-1-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-1))*Math.sin((t-1-i)*(2*Math.PI)/n)*.5+1)},t.InBack=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},t.OutBack=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},t.InOutBack=function(t,e){void 0===e&&(e=1.70158);var n=1.525*e;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-2)*(t-2)*((n+1)*(t-2)+n)+2)},t.InBounce=function(e){return 1-t.OutBounce(1-e)},t.OutBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.InOutBounce=function(e){return e<.5?.5*t.InBounce(2*e):.5*t.OutBounce(2*e-1)+.5},t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.tweens=[],this.callbacks=[],this.animatedSprites=[],this.time=0}return t.prototype.update=function(t){this.time+=t;var e=t/1e3;this.updateTweens(e),this.updateCallbacks(),this.updateSprites(e)},t.prototype.updateTweens=function(t){for(var e=0;e<this.tweens.length;){var n=this.tweens[e];n.isEnd?(n.clear(),this.tweens.splice(e,1)):(n.update(t),e++)}},t.prototype.updateCallbacks=function(){for(var t=0;t<this.callbacks.length;){var e=this.callbacks[t];e.offset<=this.time?(e.context?e.callback.call(e.context):e.callback(),e.isLoop?t++:this.callbacks.splice(t,1)):t++}},t.prototype.updateSprites=function(t){for(var e=0;e<this.animatedSprites.length;e++)this.animatedSprites[e].update(t)},t.prototype.addSprite=function(t){this.animatedSprites.push(t)},t.prototype.removeSprite=function(t){for(var e=0;e<this.animatedSprites.length;e++)if(this.animatedSprites[e]===t){this.animatedSprites.splice(e,1);break}},t.prototype.tween=function(t){var e=new n.Tween(t);return this.tweens.push(e),e},t.prototype.addTween=function(t){return this.tweens.push(t),this},t.prototype.removeTween=function(t){for(var e=0;e<this.tweens.length;e++){var n=this.tweens[e];if(n===t){n.clear(),this.tweens.splice(e,1);break}}},t.prototype.clearTweens=function(t){if(t)for(var e=0;e<this.tweens.length;){var n=this.tweens[e];n.target===t?(n.clear(),this.tweens.splice(e,1)):e++}},t.prototype.clear=function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].clear();for(this.tweens=[],t=0;t<this.callbacks.length;t++)this.callbacks[t].callback=null,this.callbacks[t].context=null;this.callbacks=[]},t.prototype.callback=function(t,e,n,i){void 0===e&&(e=0);var o=new r;o.callback=t,o.context=i,o.isLoop=n,o.offset=this.time+1e3*e,this.callbacks.push(o)},t.prototype.removeCallback=function(t,e){for(var n=0;n<this.callbacks.length;n++){var i=this.callbacks[n];if(i.callback===t){if(!e)return void this.callbacks.splice(n,1);if(e===i.context)return void this.callbacks.splice(n,1)}}},t.prototype.clearCallbacks=function(t){if(t)for(var e=0;e<this.callbacks.length;)this.callbacks[e].context===t?this.callbacks.splice(e,1):e++},t}();e.default=i;var r=function(){}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.target=t,this.isEnd=!1,this.isPause=!1,this.duration=0,this.delay=0,this.repeatDelay=0,this.repeat=0,this.pingPong=!1,this.easing=n.Easing.Linear,this.isActive=!1,this.isStartRepeat=!1,this.repeatCount=0,this.time=0,this.timeDuration=0,this.timeDelay=0,this.timeRepeatDelay=0}return t.prototype.start=function(){return this.isEnd=!1,this.isActive=!0,this.isStartRepeat=!1,this.isRevers&&this.reverce(),this.isRevers=!1,this.isStart=!1,this.repeatCount=0,this.startTime=-1,this.repeatTime=-1,this.timeDelay=this.delay,this.timeRepeatDelay=this.repeatDelay,this.timeDuration=this.duration,this},t.prototype.clear=function(){this.target=null,this.path&&this.path.hidePath(),this.isEnd=!0,this.path=null,this.easing=null,this.onStart=null,this.onUpdate=null,this.onComplete=null,this.onRepeat=null,this.onPingPong=null},t.prototype.to=function(t){return this.toData=t,this},t.prototype.from=function(t){return this.fromData=t,this},t.prototype.update=function(t){if(this.isActive&&!this.isPause&&!this.isEnd){if(-1===this.startTime&&(this.startTime=this.time,this.checkData()),this.time-this.startTime>=this.timeDelay){this.isStart||(this.onStart&&this.onStart(),this.isStart=!0,this.repeatTime=this.time);var e=this.isRevers||!this.isStartRepeat?0:this.timeRepeatDelay,n=this.time-this.repeatTime-e;if(0<=n){var i=this.pingPong?this.timeDuration/2:this.timeDuration,r=0===i?1:Math.min(n/i,1);this.updateProperties(this.fromData,this.toData,this.target,r),this.updatePath(r),this.onUpdate&&this.onUpdate(r),1<=r&&(this.pingPong&&!this.isRevers?(this.reverce(),this.isStart=!1,this.onPingPong&&this.onPingPong()):(this.isRevers&&this.reverce(),-1!==this.repeat&&(0===this.repeat||this.repeat-this.repeatCount<=0)?this.stop():(this.repeatCount++,this.isStart=!1,this.isStartRepeat=!0,this.onRepeat&&this.onRepeat())))}}this.time+=t}},t.prototype.setting=function(t){return this.duration=t.duration||this.duration,this.delay=t.delay||this.delay,this.repeatDelay=t.repeatDelay||this.repeatDelay,this.repeat=t.repeat||this.repeat,this.pingPong=t.pingPong||this.pingPong,this.easing=t.easing||this.easing,this.onComplete=t.onComplete||this.onComplete,this.onRepeat=t.onRepeat||this.onRepeat,this.onStart=t.onStart||this.onStart,this.onUpdate=t.onUpdate||this.onUpdate,this.onPingPong=t.onPingPong||this.onPingPong,this.path=t.path||this.path,this},t.prototype.stop=function(t){void 0===t&&(t=!0),!this.isEnd&&t&&this.onComplete&&this.onComplete(),this.isEnd=!0,this.isActive=!1},t.prototype.pause=function(){this.isPause=!0},t.prototype.resume=function(){this.isPause=!1},t.prototype.reverce=function(){this.isRevers=!this.isRevers;var t=this.fromData;this.fromData=this.toData,this.toData=t},t.prototype.checkData=function(){this.fromData||(this.fromData={}),this.toData||(this.toData={}),this.checkFromData(this.fromData,this.toData,this.target),this.checkToData(this.fromData,this.toData,this.target)},t.prototype.checkToData=function(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n[i]||0===n[i])&&(this.isObject(e[i])&&this.isObject(n[i])?(t[i]&&this.isObject(t[i])||(t[i]={}),this.checkToData(t[i],e[i],n[i])):t[i]||0===t[i]||(t[i]=n[i]))},t.prototype.checkFromData=function(t,e,n){for(var i in t)t.hasOwnProperty(i)&&(n[i]||0===n[i])&&(this.isObject(t[i])&&this.isObject(n[i])?(e[i]&&this.isObject(e[i])||(e[i]={}),this.checkFromData(t[i],e[i],n[i])):(e[i]||0===e[i]||(e[i]=n[i]),n[i]=t[i]))},t.prototype.updateProperties=function(t,e,n,i){for(var r in e)e.hasOwnProperty(r)&&(this.isObject(e[r])&&n[r]?this.updateProperties(t[r],e[r],n[r],i):n[r]=t[r]+(e[r]-t[r])*this.easing(i))},t.prototype.updatePath=function(t){if(this.path){var e=this.isRevers?(1-t)*this.path.getLength():t*this.path.getLength(),n=this.path.getPoint(e);if(this.path.guideAngle){var i=this.path.getAngleToPoint(n.x-this.target.x,this.target.y-n.y);this.target.angle=this.path.moveToAngle(this.target.angle,i)}this.target.x=n.x,this.target.y=n.y}},t.prototype.isObject=function(t){return"object"==typeof t},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e};i=[n,e,n(6),n(12)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n);var r=function(){function t(t){void 0===t&&(t=[]),this.points=[],this.clearPoints=t,this.guideAngle=!1,this.reverseAngle=!1,this.length=0,this.correctAngle=0,this.angleSmoothing=0,this.reverse=!1,this.points=t,this.segmentLengths=[]}return t.prototype.drawPath=function(t,e,i){if(void 0===e&&(e=16760065),!(this.points.length<2)){this.graphics?this.graphics.clear():this.graphics=new n.Graphics,this.graphics.moveTo(this.points[0],this.points[1]),this.graphics.lineStyle(1,e,1);for(var r=0;r<this.points.length;r+=2)this.graphics.lineTo(this.points[r],this.points[r+1]);if(i||0===i){for(this.graphics.beginFill(i),r=0;r<this.points.length;r+=2)this.graphics.drawCircle(this.points[r],this.points[r+1],3);this.graphics.endFill()}return t.addChild(this.graphics),this.graphics}},t.prototype.hidePath=function(){this.graphics&&(this.graphics.destroy({children:!0,texture:!0,baseTexture:!0}),this.graphics=null)},t.prototype.lineTo=function(t,e){return this.clearPoints.push(t,e),this},t.prototype.addPoints=function(t){if(t.length%2==0)return this.clearPoints=this.clearPoints.concat(t),this;console.error("Incorrect point format.")},t.prototype.bezierCurveTo=function(t,e,n,r,o,s,a){return this.clearPoints.length<2&&this.lineTo(t,e),i.MathUtils.BezierCurveTo(t,e,n,r,o,s,this.clearPoints,a),this},t.prototype.quadraticCurveTo=function(t,e,n,r,o){return this.clearPoints.length<2&&this.lineTo(t,e),i.MathUtils.QuadraticCurveTo(t,e,n,r,this.clearPoints,o),this},t.prototype.getPoint=function(t){var e=new n.Point;if(0===this.length)return e;if(t>=this.length)e.x=this.points[this.points.length-2],e.y=this.points[this.points.length-1];else if(t<=0)e.x=this.points[0],e.y=this.points[1];else{for(var i=0,r=0,o=0;o<this.segmentLengths.length;o++){var s=this.segmentLengths[o];if(t<s){var a=this.segmentLengths[o-1];r=a?(t-a)/(s-a):t/s,i=o;break}}i*=2;var u=this.points[i],h=this.points[i+1],l=this.points[i+2],c=this.points[i+3];e.x=u+(l-u)*r,e.y=h+(c-h)*r}return e},t.prototype.getPoints=function(){return this.points},t.prototype.getLength=function(){return this.length},t.prototype.calculate=function(t,e,n,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=1),this.clearPoints.length<4&&console.error("Please add at least two points."),this.length=0,this.segmentLengths.length=0,this.points=this.clearPoints.slice(),this.reverse){for(var r=[],o=this.points.length-1;0<=o;o-=2)r.push(this.points[o-1]),r.push(this.points[o]);this.points=r}if(1!==n||1!==i||0!==t||0!==e)for(o=0;o<this.points.length;o+=2)this.points[o]=this.points[o]*n+t,this.points[o+1]=this.points[o+1]*i+e;for(o=0;o<this.points.length-2;o+=2){var s=this.points[o]-this.points[o+2],a=this.points[o+1]-this.points[o+3],u=Math.sqrt(s*s+a*a);this.length+=u,this.segmentLengths.push(this.length)}return this},t.prototype.getAngleToPoint=function(t,e){this.reverseAngle&&(t=-t,e=-e);var n=180*Math.atan2(e,t)/Math.PI;return(n=n<0?Math.abs(n):360-n)+this.correctAngle},t.prototype.moveToAngle=function(t,e,n){if(void 0===n&&(n=this.angleSmoothing),t===e||0===n)return e;Math.abs(t-e)<n&&(n=Math.abs(t-e));var i=Math.abs(e-t),r=Math.abs(t<e?t+(360-e):e+(360-t)),o=e;return r<i?(r<n&&(n=r),t<e?(o=t-n)<0&&(o=360+o):360<(o=t+n)&&(o-=360)):e<t?o=t-n:t<e&&(o=t+n),o},t}();e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.QuadraticCurveTo=function(t,e,n,i,r,o){void 0===o&&(o=20);for(var s=r[r.length-2],a=r[r.length-1],u=0,h=0,l=0,c=1;c<=o;++c)u=s+(t-s)*(l=c/o),h=a+(e-a)*l,r.push(u+(t+(n-t)*l-u)*l,h+(e+(i-e)*l-h)*l);return r},t.BezierCurveTo=function(t,e,n,i,r,o,s,a){void 0===a&&(a=20);for(var u=s[s.length-2],h=s[s.length-1],l=0,c=0,p=0,d=0,f=0,g=0,m=1;m<=a;++m)p=(c=(l=1-(g=m/a))*l)*l,f=(d=g*g)*g,s.push(p*u+3*c*g*t+3*l*d*n+f*r,p*h+3*c*g*e+3*l*d*i+f*o);return s},t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5),n(7)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.staticPart=new r.Sprite(e,i.Atlases.Preloader,"exercise"),n.animatedPart=new r.AnimatedSprite(e,i.Atlases.Preloader,"exercise_animation_0001"),n.animatedPart.addAnimation("exercise",r.AnimatedSprite.generateFrames("exercise_animation_",1,51,"0000"),1.05),n.animatedPart.play("exercise",!0,!1,!0),n.addChild(n.animatedPart,n.staticPart),n.resize(),n}return s(e,t),e.prototype.resize=function(){this.staticPart.position.set(0,0),this.animatedPart.position.set(-35,-25)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(18)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._red=255,e._green=255,e._blue=255,e}return s(e,t),Object.defineProperty(e.prototype,"red",{get:function(){return this._red},set:function(t){this._red=t,this.updateTint()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this._green},set:function(t){this._green=t,this.updateTint()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this._blue},set:function(t){this._blue=t,this.updateTint()},enumerable:!1,configurable:!0}),e.prototype.updateTint=function(){this.tint=this._red<<16|this._green<<8|this._blue},e.prototype.setTint=function(t){this._red=t>>16&255,this._green=t>>8&255,this._blue=255&t,this.tint=t},e.prototype.setRGB=function(t,e,n){this._red=t,this._green=e,this._blue=n,this.updateTint()},e}((n=a(n)).default);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(10),n(7),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,s){var a=t.call(this)||this;if(i.Config.SHOW_MASKS){a.app=e;var u=s.split("_")[0]+"_mask";a.maskSprite=new r.Sprite(e,n,u),a.maskSprite.anchor.set(.5),a.addChild(a.maskSprite),a.canMove=!0,a.lineArray=[],a.tweenStash=[];for(var h=0;h<3;h++){var l=new r.Sprite(e,o.Atlases.Preloader,"line_mask");l.position.set(a.maskSprite.width/2,-a.maskSprite.height/2),l.anchor.set(.5),l.angle=-45,a.addChild(l),a.lineArray.push(l),l.mask=a.maskSprite}a.resize()}return a}return s(e,t),Object.defineProperty(e.prototype,"CanMove",{set:function(t){i.Config.SHOW_MASKS&&(this.canMove=t)},enumerable:!1,configurable:!0}),e.prototype.stopTween=function(){if(i.Config.SHOW_MASKS){this.CanMove=!1;for(var t=0;t<this.tweenStash.length;t++)this.tweenStash[t].stop();for(t=0;t<this.lineArray.length;t++)this.lineArray[t].position.set(this.maskSprite.width/2,-this.maskSprite.height/2)}},e.prototype.setLinesScale=function(t){if(i.Config.SHOW_MASKS)for(var e=0;e<this.lineArray.length;e++)this.lineArray[e].scale.set(1,t)},e.prototype.lineMoving=function(){var t=this;if(i.Config.SHOW_MASKS){var e=void 0,n=void 0;if(this.canMove)for(var r=function(i){e=.2+Math.random()/2,n=1.5+3*Math.random(),o.tweenStash.push(o.app.timeline.tween(o.lineArray[i]).from({x:o.maskSprite.width/2,y:-o.maskSprite.height/2}).to({x:-o.maskSprite.width/2,y:o.maskSprite.height/2}).setting({duration:e,delay:n,onComplete:function(){t.canMove&&i===t.lineArray.length-1&&t.lineMoving()}}).start())},o=this,s=0;s<this.lineArray.length;s++)r(s)}},e.prototype.resize=function(){},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5),n(7),n(10)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var o=t.call(this)||this;o.precents=0,o.startX=220,o.leftPart=new r.Sprite(e,i.Atlases.Preloader,"loading_left"),o.leftPart.position.set(0,20);var s=new n.TextStyle({fontFamily:i.Fonts.Kimberley,fontSize:16,fill:16711680});return o.precentsText=new r.Text(e,o.precents.toString()+"%",s),o.progressStartLine=new r.AnimatedSprite(e,i.Atlases.Preloader,"load_01"),o.progressStartLine.addAnimation("loading",r.AnimatedSprite.generateFrames("load_",1,18,"00"),.5),o.progressStartLine.setAnimation("loading"),o.rightPart=new r.Sprite(e,i.Atlases.Preloader,"loading_right"),o.progressLine=new r.Sprite(e,i.Atlases.Preloader,"line"),o.progressLineFinishPart=new r.Sprite(e,i.Atlases.Preloader,"loading_finish_part"),o.progressLineFinishPart.visible=!1,o.addChild(o.leftPart,o.progressLine,o.progressStartLine,o.rightPart,o.precentsText,o.progressLineFinishPart),o.resize(),o}return s(e,t),e.prototype.setPrecents=function(t){this.precents=o.Utils.clamp(t),this.precents<=.1?(this.progressStartLine.current=10*this.precents,this.progressLine.scale.x=0):(this.progressStartLine.current=1,this.progressLine.width=this.length*this.precents),.99<=this.precents&&(this.progressLineFinishPart.visible=!0),this.precentsText.text=Math.floor(100*t).toString()+" %"},e.prototype.resize=function(){this.leftPart.position.set(0,140),this.rightPart.position.set(o.Config.GAME_WIDTH-this.rightPart.width,0),this.progressStartLine.position.set(57,0),this.precentsText.position.set(this.rightPart.position.x+this.rightPart.width/3,this.rightPart.position.y-25),this.progressLineFinishPart.position.set(this.rightPart.position.x-10,0),this.progressLine.position.set(this.progressStartLine.position.x+this.startX,0),this.length=this.rightPart.x-this.startX-60},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(16),n(5),n(15),n(47),n(48),n(49),n(32),n(20),n(35)],void 0===(r=function(t,e,n,i,r,o,a,u,l,c,p,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){function e(e,n){var s=t.call(this)||this;return s.app=e.app,s.scene=e,s.manController=s.scene.manController,s.dataBaseButtons=new i.DataBaseButtons(s.scene),s.gridsController=new u.GridsController(s.scene,s.manController,n),s.gridsController.on(r.Events.SHOW_ROOM,s.showRoom,s),s.popupController=new o.PopupController(s.scene,n),s.dataBaseButtons.dataBaseButton.on(r.Events.POINTER_UP,s.showPopup.bind(s,s.popupController.popupsConfig[0])),s.dataBaseButtons.optionsButton.on(r.Events.POINTER_UP,s.showPopup.bind(s,s.popupController.popupsConfig[1])),s.statsContainer=new o.StatsContainer(e,function(t){return s.switcherForStatUp(t)}),s.photosController=new l.PhotosController(e),s.statsContainer.on(r.Events.LEVEL_UP,s.photosController.checkUpLevelAnimation.bind(s.photosController),s),s.workoutInterface=new c.WorkoutInterface(e),s.cursorHint=new o.Cursor(s.scene),s.boosterOpenAnimation=new a.BoosterSellerAnimation(s.app),s.tanLoading=new o.TanLoading(s.app),s.achievementPanel=new o.AchievementPanel(s.app),s.addChild(s.dataBaseButtons,s.gridsController,s.popupController,s.statsContainer,s.photosController,s.workoutInterface,s.cursorHint,s.boosterOpenAnimation,s.tanLoading,s.achievementPanel),s.gridsController.on(r.Events.TAN,s.tanChange.bind(s),s.manController),s.boosterOpenAnimation.on(r.Events.SELLER_WAS_SHOWED,s.show.bind(s),s),s.photosController.on(r.Events.SHOW_SELLER,s.showSeller.bind(s),s),s.tanLoading.on(r.Events.TAN_CHANGED,s.gridsController.back.bind(s.gridsController),s),e.on(r.Events.GET_ACHIV,function(t){return s.achievementShow(t)},s),s.app.saveManager.stats.tutorialWasShowed||(s.tutorial=new d.Tutorial(s.app),s.tutorial.on(r.Events.TUTORIAL_SHOWED,s.tutorialComplete,s),s.addChild(s.tutorial),s.hide()),s.resize(),s}return s(e,t),e.prototype.tanChange=function(t){this.gridsController.hide(),this.manController.tan(t),this.tanLoading.switcher(!0)},e.prototype.tutorialComplete=function(){this.tutorial.destroy(),this.show(),this.app.saveManager.stats.tutorialWasShowed=!0,this.app.saveManager.save()},e.prototype.hide=function(){this.gridsController.hide(),this.dataBaseButtons.visible=!1,this.statsContainer.visible=!1,this.photosController.visible=!1},e.prototype.show=function(){this.gridsController.show(),this.dataBaseButtons.visible=!0,this.statsContainer.visible=!0,this.photosController.visible=!0},e.prototype.showSeller=function(){this.hide(),this.boosterOpenAnimation.startAnimation()},e.prototype.switcherForStatUp=function(t){this.dataBaseButtons.visible=t,(this.photosController.visible=t)?this.app.saveManager.stats.energy<=.2||1===this.app.saveManager.stats.energy?this.gridsController.backToMain():this.gridsController.currentGrid.appearAnimation(0):this.gridsController.visible=!1},e.prototype.showPopup=function(t){this.popupController.setPopup(t),this.popupController.visible=!0},e.prototype.showRoom=function(t,e,n){void 0===e&&(e=p.State.IDLE),this.emit(r.Events.SHOW_ROOM,t,e,n)},e.prototype.update=function(t){this.workoutInterface.update(t),this.cursorHint.move(this.app.renderer.plugins.interaction.mouse.global.x,this.app.renderer.plugins.interaction.mouse.global.y)},e.prototype.achievementShow=function(t){this.achievementPanel.setAchievementNumber(t),this.achievementPanel.appearAnimation(),this.app.timeline.tween(this.achievementPanel).from({y:960+this.achievementPanel.height}).to({y:910}).setting({duration:.3,onComplete:this.achievementHide.bind(this)}).start()},e.prototype.achievementHide=function(){var t=this;this.app.timeline.callback(function(){return t.app.timeline.tween(t.achievementPanel).to({y:960+t.achievementPanel.height}).setting({duration:.3}).start()},2)},e.prototype.resize=function(){this.dataBaseButtons.scale.set(.8),this.dataBaseButtons.position.set(37,37),this.gridsController.resize(),this.workoutInterface.resize(),this.boosterOpenAnimation.position.set(0,0),this.tanLoading.position.set(320,470),this.achievementPanel.position.set(50,960+this.achievementPanel.height)},e}((n=h(n)).Container);e.default=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(16),n(5),n(10)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return n.app=e.app,n.dataBaseButton=new i.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_cassete_icon","sb_frame_fill"),n.optionsButton=new i.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_settings_icon","sb_frame_fill"),n.googleButton=new i.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","google_icon","sb_frame_fill"),n.googleButton.on(r.Events.POINTER_UP,function(){return o.Utils.openLink(o.Config.GOOGLE_PLAY)},n),n.moreGamesButton=new i.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_joystick_icon","sb_frame_fill"),n.addChild(n.dataBaseButton,n.optionsButton,n.googleButton,n.moreGamesButton),n.resize(),o.Utils.isDesktop()&&(n.googleButton.visible=!1),n.moreGamesButton.visible=!1,n}return s(e,t),e.prototype.resize=function(){this.dataBaseButton.position.set(0,0),this.optionsButton.position.set(90,0),this.googleButton.position.set(180,0),this.moreGamesButton.position.set(270,0)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(7),n(5),n(26),n(15)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,r,s){var a=t.call(this,e,i.Atlases.Interface,"bb_background","bb_frame")||this;a.gridsController=s,a.isBlocked=!1;var u=r.split("_")[0]+"_bg";return a.iconBackground=new n.Sprite(a.app,i.Atlases.Interface,u),a.iconBackground.tint=0,a.iconBackground.anchor.set(.5),a.iconBackground.scale.set(.8),a.icon=new n.Sprite(a.app,i.Atlases.Interface,r),a.icon.anchor.set(.5),a.frame.tint=5672878,a.icon.scale.set(.8),a.lock=new o.Lock(a.app),a.addChild(a.iconBackground,a.icon,a.lock),a.lineMover.setLinesScale(1.75),a.lineMover.CanMove=!1,a.on(i.Events.POINTER_OUT,a.onOut,a),a.on(i.Events.POINTER_OVER,a.onOver,a),a.on(i.Events.POINTER_UP,a.onUp,a),a.resize(),a}return s(e,t),e.prototype.onUp=function(){this.callback&&(this.isBlocked||(this.gridsController.call(this.callback,this.params),this.scene.emit(i.Events.HIDE_CURSOR)))},e.prototype.changeIcon=function(t){var e=t.icon.split("_")[0]+"_bg";this.icon.setFrame(t.icon);var n=void 0!==t.anchorX?t.anchorX:.5,i=void 0!==t.anchorY?t.anchorY:.5;this.icon.anchor.set(n,i),this.callback=t.callback,this.params=t.params,this.iconBackground.textures[e]?(this.iconBackground.setFrame(e),this.iconBackground.visible=!0):this.iconBackground.visible=!1},e.prototype.clear=function(){this.callback=null,this.params=null},e.prototype.setBlock=function(t){this.isBlocked!==t&&(this.isBlocked=t,this.background.alpha=t?.3:1,this.frame.alpha=t?.3:1,this.icon.visible=!t,this.iconBackground.tint=t?16777215:0,this.lock.switcher(t))},e.prototype.onOut=function(){this.scene.emit(i.Events.HIDE_CURSOR),this.isBlocked||(t.prototype.onOut.call(this),this.lineMover.stopTween(),this.tweenStash.push(this.app.timeline.tween(this.background).to({scale:{x:1,y:1}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).to({scale:{x:1,y:1},red:86,green:143,blue:174}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.icon).to({scale:{x:.8,y:.8}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.iconBackground).to({scale:{x:.8,y:.8}}).setting({duration:.2}).start()))},e.prototype.onOver=function(){this.scene.emit(i.Events.SHOW_CURSOR,{index:this.icon.frame,isBlocked:this.isBlocked}),this.isBlocked||(this.app.sound.playSfx(i.Sounds.GameButtonOnOver),t.prototype.onOver.call(this),this.lineMover.CanMove=!0,this.lineMover.lineMoving(),this.tweenStash.push(this.app.timeline.tween(this.background).to({scale:{x:1.1,y:1.1}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).to({scale:{x:1.1,y:1.1},red:255,green:255,blue:255}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.icon).to({scale:{x:1.05,y:1.05}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.iconBackground).to({scale:{x:1.05,y:1.05}}).setting({duration:.2}).start()))},e.prototype.resize=function(){t.prototype.resize.call(this),this.icon.position.set(0,0)},e}((r=a(r)).default);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(26),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StyleButtonMode=void 0;var o,u=function(t){function e(e,n){var o=t.call(this,e,r.Atlases.Interface,"bb_background","bb_frame")||this;return o.index=0,o.gridsController=n,o.frame.tint=5672878,o.lineMover.setLinesScale(1.75),o.lineMover.CanMove=!1,o.text1=i.Text.create(o.app,"",r.Fonts.Kimberley,52,5672878,"center"),o.text2=i.Text.create(o.app,"",r.Fonts.Kimberley),o.on(r.Events.POINTER_OUT,o.onOut,o),o.on(r.Events.POINTER_OVER,o.onOver,o),o.on(r.Events.POINTER_UP,o.onUp,o),o}return s(e,t),e.prototype.onUp=function(){this.callback&&this.gridsController.call(this.callback,this.index+1)},e.prototype.onOut=function(){t.prototype.onOut.call(this),this.lineMover.stopTween(),this.tweenStash.push(this.app.timeline.tween(this.background).to({scale:{x:1,y:1}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).to({scale:{x:1,y:1},red:86,green:143,blue:174}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.text1).to({scale:{x:1,y:1}}).setting({duration:.2}).start()),void 0!==this.text2&&this.tweenStash.push(this.app.timeline.tween(this.text2).to({scale:{x:1,y:1}}).setting({duration:.2}).start())},e.prototype.onOver=function(){t.prototype.onOver.call(this),this.app.sound.playSfx(r.Sounds.GameButtonOnOver),this.lineMover.CanMove=!0,this.lineMover.lineMoving(),this.tweenStash.push(this.app.timeline.tween(this.background).to({scale:{x:1.1,y:1.1}}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.frame).to({scale:{x:1.1,y:1.1},red:254,green:254,blue:254}).setting({duration:.2}).start()),this.tweenStash.push(this.app.timeline.tween(this.text1).to({scale:{x:1.2,y:1.2}}).setting({duration:.2}).start()),void 0!==this.text2&&this.tweenStash.push(this.app.timeline.tween(this.text2).to({scale:{x:1.2,y:1.2}}).setting({duration:.2}).start())},e.prototype.clear=function(){this.index=0,this.callback=null},e.prototype.modeChoiser=function(t,e){if(e&&e.style!==o.DEFAULT){switch(this.style=e.style,this.callback=e.callback,this.index=t,this.text1.text=e.text1,this.text1.style.fontSize=46,this.style){case o.PHRASE:var n=this.frame.width/this.text1.width*38;this.text1.style.fontSize=n,this.text1.anchor.set(.5,.5);break;case o.FACTOR:this.text1.anchor.set(1,1),this.text2.text=e.text2,this.text2.anchor.set(0,1),this.text2.style.fontSize=70,this.addChild(this.text2);break;case o.STYLE:this.text1.anchor.set(.5,1),this.text2.text=e.text2,this.text2.anchor.set(.5,0),this.text2.style.fontSize=70,this.addChild(this.text2)}this.addChild(this.text1),this.resize()}},e.prototype.resize=function(){switch(this.style){case o.PHRASE:this.text1.position.set(0,0);break;case o.FACTOR:this.text2.position.set(0,this.text2.height/2+5),this.text1.position.set(0,this.text2.height/2);break;case o.STYLE:this.text1.position.set(0,-5),this.text2.position.set(0,5)}},e}((n=a(n)).default);e.default=u,function(t){t.PHRASE="phrase",t.STYLE="style",t.FACTOR="factor",t.DEFAULT="default"}(o=e.StyleButtonMode||(e.StyleButtonMode={}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(47),n(7),n(12),n(5)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.messageBox=new i.MessageBox(n.app),n.seller=new r.Sprite(n.app,a.Images.Seller),n.seller.anchor.set(.5),n.addChild(n.seller,n.messageBox),n.resize(),n.visible=!1,n}return s(e,t),e.prototype.startAnimation=function(){var t=this;this.app.timeline.callback(function(){t.firstStep()},1)},e.prototype.firstStep=function(){this.app.timeline.tween(this.seller).from({x:-450}).to({x:250}).setting({duration:.6}).start(),this.app.timeline.tween(this.messageBox).from({y:-100}).to({y:130}).setting({duration:.6,onComplete:this.secondStep.bind(this)}).start(),this.visible=!0},e.prototype.secondStep=function(){this.app.sound.playSfx(a.Sounds.SellerSpeach),this.app.timeline.tween(this.seller).from({x:250}).to({x:275}).setting({duration:2.8}).start(),this.app.timeline.tween(this.messageBox).from({y:130}).to({y:155}).setting({duration:2.8,onComplete:this.thirdStep.bind(this)}).start()},e.prototype.thirdStep=function(){this.seller.scale.set(2.15),this.seller.position.set(445,935),this.app.timeline.tween(this.seller).to({x:457}).setting({duration:1.6}).start(),this.messageBox.setText("question_2"),this.messageBox.position.set(700,-110),this.app.timeline.tween(this.messageBox).to({y:190}).setting({duration:.2,onComplete:this.thirdStepMessage2.bind(this)}).start()},e.prototype.thirdStepMessage2=function(){this.app.timeline.tween(this.messageBox).from({y:190}).to({y:202}).setting({duration:1.4,onComplete:this.fourthStep.bind(this)}).start()},e.prototype.fourthStep=function(){var t=this;this.app.timeline.tween(this.seller).to({x:-this.seller.width-100}).setting({duration:.8,easing:o.Easing.InExpo}).start(),this.app.timeline.tween(this.messageBox).to({x:this.app.scale.width+100}).setting({duration:.8,easing:o.Easing.InExpo,onComplete:function(){t.emit(a.Events.SELLER_WAS_SHOWED)}}).start()},e.prototype.resize=function(){this.seller.position.set(-450,635),this.messageBox.position.set(400,-100)},e}((n=h(n)).Container);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.messageBox=new i.SliceSprite(n.app,r.Atlases.Interface,"message_background",75,65,75,65),n.messageBox.width=478,n.messageBox.height=220,n.messageText=i.Text.create(n.app,"question_1",r.Fonts.Kimberley,38,3552822),n.messageText.anchor.set(.5),n.addChild(n.messageBox,n.messageText),n.resize(),n}return s(e,t),e.prototype.setText=function(t){this.messageText.setText(t)},e.prototype.resize=function(){this.messageText.position.set(this.messageBox.width/2,this.messageBox.height/2-15)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(16),n(31)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.createIconButtons(),i.type="icon",i}return s(e,t),e.prototype.createIconButtons=function(){for(var t=0;t<8;t++)this.buttonsArray.push(new n.GameplayButton(this.scene,"workout_icon",this.gridsController)),this.buttonsArray[t].visible=!1;this.addChilds()},e.prototype.appearAnimation=function(e){void 0===e&&(e=0),t.prototype.appearAnimation.call(this,e),this.checkBlockButtons()},e.prototype.show=function(e){t.prototype.show.call(this,e),void 0!==(this.config=e).roomName&&(this.gridRoom=e.roomName);for(var n=0;n<e.buttons.length;n++)this.buttonsArray[n].changeIcon(e.buttons[n]),this.buttonsArray[n].visible=!0;this.checkBlockButtons()},e.prototype.checkBlockButtons=function(){for(var t=!1,e=0;e<this.config.buttons.length;e++)this.blockedButtons[this.config.name]?(t=this.blockedButtons[this.config.name][e],this.buttonsArray[e].setBlock(t)):this.buttonsArray[e].setBlock(!1)},e.prototype.hide=function(){t.prototype.hide.call(this);for(var e=0;e<this.config.buttons.length;e++)this.buttonsArray[e].visible=!1,this.buttonsArray[e].clear()},e}((i=a(i)).default);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(16),n(31)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.gridsController=n,i.createStyleButtons(),i.isFirstShowing=!1,i.type="style",i}return s(e,t),e.prototype.createStyleButtons=function(){for(var t=0;t<6;t++)this.buttonsArray.push(new n.StylesButton(this.scene,this.gridsController)),this.buttonsArray[t].visible=!1;this.addChilds()},e.prototype.show=function(e){t.prototype.show.call(this,e),void 0!==(this.config=e).roomName&&(this.gridRoom=e.roomName);for(var n=0;n<e.buttons.length;n++)this.buttonsArray[n].modeChoiser(n,e.buttons[n]),this.buttonsArray[n].visible=!0},e.prototype.hide=function(){t.prototype.hide.call(this);for(var e=0;e<this.config.buttons.length;e++)this.buttonsArray[e].visible=!1,this.buttonsArray[e].clear()},e}((i=a(i)).default);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5),n(48),n(21)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,o){var s=t.call(this)||this;return s.scene=e,s.app=e.app,s.blockedButtons=o,s.gameConfig=e.gameConfig,s.manController=n,s.gridQueue=[],s.initEvents(),s.iconGrid=new r.IconsGrid(e,s),s.styleGrid=new r.StylesGrid(e,s),s.switchGrid(s.iconGrid),s.iconGrid.crossButton.on(i.Events.POINTER_UP,s.back,s),s.styleGrid.crossButton.on(i.Events.POINTER_UP,s.back,s),s.setGrid(s.iconGridsConfigs.mainConfig),s.addChild(s.iconGrid,s.styleGrid),s}return s(e,t),e.prototype.initEvents=function(){this.iconGridsConfigs=this.scene.gameConfig.iconGrid,this.styleGridsConfig=this.scene.gameConfig.styleGrid,this.on(i.Events.SHOW_ICONS_GRID,this.showIconsGrid,this),this.on(i.Events.FOOD,this.foodCallback,this),this.on(i.Events.SIDE_MENU,this.showSide,this),this.on(i.Events.SHOW_STYLES_GRID,this.showStylesGrid,this),this.on(i.Events.GLASSES,this.manController.setGlasses,this.manController),this.on(i.Events.BLING,this.manController.setBling,this.manController),this.on(i.Events.HAIRCUT,this.manController.setHair,this.manController),this.on(i.Events.REFRESH_TAN,this.refreshTan.bind(this),this.manController)},e.prototype.refreshTan=function(){this.manController.refreshTan(),this.backToMain()},e.prototype.call=function(t,e){this.emit(t,e)},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.boosterAnimation=function(t,e,n){if(0<=t&&t<4){var i=this.currentGrid.boosterAnimation(t,n);this.app.timeline.callback(e,i)}else e()},e.prototype.switchGrid=function(t){void 0!==this.currentGrid&&this.currentGrid.hide(),this.currentGrid=t},e.prototype.foodCallback=function(t){var e=this.getFoodConfig(t);this.setGrid(e),this.emit(i.Events.SHOW_ROOM,e.roomName)},e.prototype.showSide=function(t){var e=this.iconGridsConfigs.sideConfig;e.buttons[0].params=t.leftWorkout,e.buttons[1].params=t.rightWorkout,this.setGrid(e)},e.prototype.showIconsGrid=function(t){var e=this.iconGridsConfigs[t];this.setGrid(e),void 0!==e.roomName&&this.emit(i.Events.SHOW_ROOM,e.roomName)},e.prototype.showStylesGrid=function(t){var e=this.styleGridsConfig[t];this.setGrid(e),void 0!==e.roomName&&this.emit(i.Events.SHOW_ROOM,e.roomName)},e.prototype.getFoodConfig=function(t){var e=JSON.parse(JSON.stringify(this.iconGridsConfigs[t])),n=0,i=[];for(e.buttons.length=0;e.buttons.length<4;)n=Math.floor(Math.random()*this.iconGridsConfigs.foodConfig.buttons.length),this.hasIndex(n,i)||e.buttons.push(this.iconGridsConfigs.foodConfig.buttons[n]);return e},e.prototype.hasIndex=function(t,e){for(var n=0,i=0;i<e.length;i++)t===e[i]&&n++;return e.push(t),0<n},e.prototype.addToQueue=function(t){for(var e=0,n=0;n<this.gridQueue.length;n++)this.gridQueue[n]===t&&e++;0<e?this.gridQueue.splice(this.gridQueue.length-1,1):this.gridQueue.push(t)},e.prototype.back=function(){var t=this;o.AdHandler.getInstance().showAd("grid",function(){var e=t.gridQueue[t.gridQueue.length-2];e.roomName&&t.emit(i.Events.SHOW_ROOM,e.roomName),t.setGrid(e)})},e.prototype.backToMain=function(){this.gridQueue.length=1;var t=this.gridQueue[0];t.roomName&&this.emit(i.Events.SHOW_ROOM,t.roomName),this.setGrid(t,!1)},e.prototype.setGrid=function(t,e){if(void 0===e&&(e=!0),this.currentGrid.type!==t.type){var n="icon"===t.type?this.iconGrid:this.styleGrid;this.switchGrid(n)}this.currentGrid.show(t),e&&this.addToQueue(t),this.resize()},e.prototype.resize=function(){this.currentGrid.position.set(250,this.app.scale.height/2-this.currentGrid.height/2+this.currentGrid.step/2)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(49),n(7),n(12),n(5),n(16)],void 0===(r=function(t,e,n,i,r,o,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var o=t.call(this)||this;o.fullShowing=!1,o.sellerCanShow=!1,o.app=e.app,o.background=new r.Sprite(o.app,a.Atlases.Interface,"white_square"),o.leftButton=new u.SmallButton(e,a.Atlases.Preloader,"sb_background","sb_frame","white_arrow","sb_frame_fill"),o.leftButton.icon.skew.set(Math.PI),o.rightButton=new u.SmallButton(e,a.Atlases.Preloader,"sb_background","sb_frame","white_arrow","sb_frame_fill"),o.crossButton=new u.SmallButton(e,a.Atlases.Preloader,"sb_background","sb_frame","white_cross_icon","sb_frame_fill");var s=new n.TextStyle({fontFamily:"arial",fontSize:18,fill:6316128});o.levelText=new r.Text(o.app,"",s),o.levelText.anchor.set(.5,1);var h=new n.TextStyle({fontFamily:a.Fonts.CarbonBlock,fontSize:68,fill:6316128});return o.photoText=new r.Text(o.app,"",h),o.photosContainer=new i.PhotosContainer(e,o.photoText,o.levelText),o.crossButton.visible=!1,o.leftButton.visible=!1,o.rightButton.visible=!1,o.rightButton.on(a.Events.POINTER_UP,function(){return o.photosContainer.switchPhoto("right")},o),o.leftButton.on(a.Events.POINTER_UP,function(){return o.photosContainer.switchPhoto("left")},o),o.crossButton.on(a.Events.POINTER_UP,o.switchMode,o),o.background.alpha=0,o.photosContainer.on(a.Events.POINTER_UP,o.onUp,o),o.addChild(o.background,o.photosContainer,o.crossButton,o.leftButton,o.rightButton,o.levelText,o.photoText),o.resize(),o}return s(e,t),e.prototype.checkUpLevelAnimation=function(t){this.photosContainer.level!==t&&(this.photosContainer.level=t,this.photosContainer.currentPhoto=t,this.switchMode(),this.app.sound.playSfx(a.Sounds.Claps),this.sellerCanShow=1===this.photosContainer.level)},e.prototype.onUp=function(){1<=this.app.saveManager.stats.level&&this.switchMode()},e.prototype.switchMode=function(){var t=this;this.sellerCanShow&&(this.emit(a.Events.SHOW_SELLER),this.sellerCanShow=!1),console.log("switch"),this.fullShowing=!this.fullShowing;var e=this.fullShowing?1:.2,n=this.fullShowing?112:790,i=this.fullShowing?171:-10,r=this.fullShowing?.7:0,s=!!this.fullShowing;this.fullShowing&&this.app.sound.playSfx(a.Sounds.PhotosAppearence),this.background.interactive=s,this.app.timeline.tween(this.background).to({alpha:r}).setting({duration:.4,easing:o.Easing.OutExpo}).start(),this.app.timeline.tween(this.photosContainer).to({scale:{x:e,y:e},x:n,y:i}).setting({duration:.4,easing:o.Easing.OutExpo,onComplete:function(){t.fullShowing&&(t.photosContainer.setText(),t.switchElements(t.fullShowing))}}).start(),this.fullShowing||this.switchElements(this.fullShowing),this.photosContainer.showLast()},e.prototype.switchElements=function(t){this.levelText.visible=t,this.photoText.visible=t,this.crossButton.visible=t,this.leftButton.visible=t,this.rightButton.visible=t},e.prototype.resize=function(){this.photosContainer.scale.set(.2),this.photosContainer.position.set(800,-10),this.background.scale.set(110),this.leftButton.position.set(1e3,this.app.scale.height/2-this.leftButton.height/2),this.rightButton.position.set(1100,this.app.scale.height/2-this.rightButton.height/2),this.crossButton.position.set(1050,this.leftButton.position.y+100)},e}((n=h(n)).Container);e.default=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(10),n(7),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,i){var s,a=t.call(this)||this;a.app=e.app,a.interactive=!0,a.level=a.app.saveManager.stats.level,a.currentPhoto=a.level,a.photoText=n,a.levelText=i,a.photosArray=[],a.photos=e.gameConfig.photos;for(var u=0;u<a.photos.length;u++)s=new r.Sprite(a.app,o.Atlases.Pictures,o.Images.Pic+u),a.photosArray.push(s),a.photosArray[u].visible=!1,a.addChild(s);return a.showLast(),a}return s(e,t),e.prototype.switchPhoto=function(t){"right"===t?(this.app.sound.playSfx(o.Sounds.PhotosAppearence),this.currentPhoto=i.Utils.clamp(this.currentPhoto+1,this.level,0),this.photosArray[this.currentPhoto].visible=!0,void 0!==this.photosArray[this.currentPhoto-2]&&(this.photosArray[this.currentPhoto-2].visible=!1)):(this.app.sound.playSfx(o.Sounds.PhotosLeft),this.photosArray[this.currentPhoto].visible=1===this.currentPhoto,this.currentPhoto=i.Utils.clamp(this.currentPhoto-1,this.level,1),void 0!==this.photosArray[this.currentPhoto-1]&&(this.photosArray[this.currentPhoto-1].visible=!0)),this.setText()},e.prototype.setText=function(){if(0!==this.level&&0!==this.currentPhoto){var t=this.currentPhoto-1;this.levelText.setText(this.app.localization.t("level")+" : "+(t+1)),this.photoText.setText("picture_"+t),this.photoText.position.set(this.photosArray[t].position.x+.4*this.photosArray[t].width+this.photos[t].textX,this.photosArray[t].position.y+this.photosArray[t].height+200+this.photos[t].textY),this.levelText.position.set(this.photoText.position.x,this.photoText.position.y)}else this.levelText.text="",this.photoText.text=""},e.prototype.showLast=function(){this.currentPhoto=this.level;for(var t=0;t<this.level-2;t++)this.photosArray[t].visible=!1;this.photosArray[this.level].visible=!0,void 0!==this.photosArray[this.level-1]&&(this.photosArray[this.level-1].visible=!0)},e.prototype.resize=function(){},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(32),n(10),n(5),n(22)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var n=t.call(this)||this;return n.scene=e,n.app=e.app,n.bkg=e.addSprite(o.Atlases.Interface,"workout_bkg"),n.bkgRight=e.addSprite(o.Atlases.Interface,"workout_bkg_right"),n.menu=new i.WorkoutMenu(e),n.addChild(n.bkg,n.bkgRight,n.menu),r.Utils.isDesktop()||(n.leftArrow=n.createArrow(a.KeyType.LEFT),n.rightArrow=n.createArrow(a.KeyType.RIGHT),n.downArrow=n.createArrow(a.KeyType.DOWN),n.upArrow=n.createArrow(a.KeyType.UP),n.space=n.createSpace(a.KeyType.SPACE)),n.hide(),n.resize(),n}return s(e,t),e.prototype.showButton=function(t){r.Utils.isDesktop()||("twin"===t?(this.leftArrow.visible=!0,this.rightArrow.visible=!0):this.scene.keyboard.keyDictionary[t].visible=!0)},e.prototype.createArrow=function(t){var e=new i.WorkoutKeyArrow(this.scene,t);return e.scale.set(1.6),e.setArrow(t),e.visible=!1,this.scene.keyboard.addKey(e,t),this.addChild(e),e},e.prototype.createSpace=function(t){var e=new i.WorkoutKeySpace(this.scene,t);return e.scale.set(1.6),e.visible=!1,this.scene.keyboard.addKey(e,t),this.addChild(e),e},e.prototype.hide=function(){this.visible=!1,r.Utils.isDesktop()||(this.leftArrow.visible=!1,this.rightArrow.visible=!1,this.upArrow.visible=!1,this.downArrow.visible=!1,this.space.visible=!1)},e.prototype.show=function(){this.visible=!0},e.prototype.update=function(t){this.menu.update(t)},e.prototype.resize=function(){this.bkg.width=580,this.bkg.height=this.app.scale.height,this.bkgRight.x=this.bkg.width,this.bkgRight.height=this.app.scale.height,this.menu.position.set(.28*this.app.scale.width,this.app.scale.height/2),r.Utils.isDesktop()||(this.leftArrow.position.set(e.BUTTONS_OFFSET,this.app.scale.height-e.BUTTONS_OFFSET),this.downArrow.position.set(e.BUTTONS_OFFSET,this.app.scale.height-e.BUTTONS_OFFSET),this.rightArrow.position.set(this.app.scale.width-e.BUTTONS_OFFSET,this.app.scale.height-e.BUTTONS_OFFSET),this.upArrow.position.set(this.app.scale.width-e.BUTTONS_OFFSET,this.app.scale.height-e.BUTTONS_OFFSET),this.space.position.set(this.app.scale.width/2,this.app.scale.height-e.BUTTONS_OFFSET))},e.BUTTONS_OFFSET=96,e}((n=h(n)).Container);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(10),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n){var i=t.call(this)||this;return i._value=0,i.app=n.app,i.bkg=n.addSprite(r.Atlases.Interface,"workout_slider_bkg"),i.bkg.position.set(-1,-.5),i.bkg.anchor.set(.5),i.red=n.addSprite(r.Atlases.Interface,"workout_slider_red"),i.red.anchor.set(1,.5),i.red.height=e.HEIGHT,i.red.width=0,i.green=n.addSprite(r.Atlases.Interface,"workout_slider_green"),i.green.anchor.set(0,.5),i.green.width=0,i.green.height=e.HEIGHT,i.point=n.addSprite(r.Atlases.Interface,"workout_slider_point"),i.point.anchor.set(.5),i.addChild(i.bkg,i.red,i.green,i.point),i}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=i.Utils.clamp(t,1,-1),0<this._value?(this.red.width=0,this.green.width=e.HALF_WIDTH*this._value):this._value<0?(this.green.width=0,this.red.width=e.HALF_WIDTH*-this._value):(this.red.width=0,this.green.width=0),this.point.x=e.HALF_WIDTH*this.value},enumerable:!1,configurable:!0}),e.HALF_WIDTH=135,e.HEIGHT=28,e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(32),n(7),n(5),n(22),n(50)],void 0===(r=function(t,e,n,i,r,o,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var n=t.call(this)||this;return n.app=e.app,n.arrow=new i.WorkoutArrow(e),n.arrow.y=-75,n.secondArrow=new i.WorkoutArrow(e),n.secondArrow.position.set(54,n.arrow.y),n.spacebar=new i.WorkoutSpace(e),n.spacebar.y=n.arrow.y,n.slider=new i.WorkoutSlider(e),n.slider.y=110,n.topText=r.Text.create(e.app,"press",o.Fonts.Kimberley,28),n.topText.y=-175,n.bottomText=r.Text.create(e.app,"quickly",o.Fonts.Kimberley,28),n.bottomText.y=20,n.repsText=r.Text.create(e.app,"reps",o.Fonts.Kimberley,28),n.repsText.y=160,n.countText=r.Text.create(e.app,"1",o.Fonts.Kimberley,90),n.countText.y=225,n.cross=new i.WorkoutInfo(e,"workout_x"),n.cross.alpha=.5,n.cross.blinkScale=1.1,n.cross.blinkDuration=.6,n.cross.y=n.arrow.y,n.addChild(n.arrow,n.secondArrow,n.spacebar,n.slider,n.topText,n.bottomText,n.repsText,n.countText,n.cross),n.hide(),n}return s(e,t),e.prototype.showButton=function(t,e,n){t?(this.hide(),t===a.KeyType.SPACE?this.spacebar.show(!0,e===u.WorkoutType.PRESS):"twin"===t?(this.arrow.x=-54,this.showArrow(this.arrow,a.KeyType.LEFT,""),this.showArrow(this.secondArrow,a.KeyType.RIGHT,"")):this.showArrow(this.arrow,t,e,n)):(e===u.WorkoutType.DROP&&this.cross.show(!0,!0,.3),this.spacebar.stop(),this.arrow.stop(),this.secondArrow.stop()),this.setText(t,e)},e.prototype.setText=function(t,e){e===u.WorkoutType.PRESS?(this.topText.setText("press"),this.bottomText.setText("quickly")):e===u.WorkoutType.HOLD?(this.topText.setText("hold"),this.bottomText.setText("")):e===u.WorkoutType.DROP&&(t?(this.topText.setText("hold"),this.bottomText.setText("to_release")):(this.topText.setText("release"),this.bottomText.setText("")))},e.prototype.setCountText=function(t){t<0&&(t=0),this.countText.text=t.toString()},e.prototype.selectTwin=function(t){t?(this.arrow.scale.set(1.1),this.secondArrow.scale.set(1),this.arrow.alpha=1,this.secondArrow.alpha=.5):(this.arrow.scale.set(1),this.secondArrow.scale.set(1.1),this.arrow.alpha=.5,this.secondArrow.alpha=1)},e.prototype.showArrow=function(t,e,n,i){var r=n===u.WorkoutType.PRESS;t.setArrow(e),t.show(i,r),!i&&r&&t.blink()},e.prototype.hide=function(){this.arrow.x=0,this.arrow.alpha=1,this.spacebar.hide(),this.arrow.hide(),this.secondArrow.hide(),this.cross.hide()},e.prototype.update=function(t){},e}((n=h(n)).Container);e.default=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(33),n(5),n(22)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e,"workout_button")||this;return n.arrow=e.addSprite(i.Atlases.Interface,"workout_arrow"),n.arrow.anchor.set(.5),n.addChild(n.arrow),n}return s(e,t),e.prototype.setArrow=function(t){switch(t){case r.KeyType.DOWN:this.arrow.angle=180;break;case r.KeyType.LEFT:this.arrow.angle=270;break;case r.KeyType.RIGHT:this.arrow.angle=90;break;default:this.arrow.angle=0}},e}((n=a(n)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(33),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e,"workout_button_space")||this;return n.text=i.Text.create(e.app,"space",r.Fonts.Kimberley,41,0,"center"),n.text.style.letterSpacing=10,n.text.anchor.set(.5),n.addChild(n.text),n}return s(e,t),e}((n=a(n)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(34),n(5),n(22)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this,e.app,n,i.Atlases.Interface,"workout_button")||this;return r.arrow=e.addSprite(i.Atlases.Interface,"workout_arrow"),r.arrow.anchor.set(.5),r.addChild(r.arrow),r}return s(e,t),e.prototype.setArrow=function(t){switch(t){case r.KeyType.DOWN:this.arrow.angle=180;break;case r.KeyType.LEFT:this.arrow.angle=270;break;case r.KeyType.RIGHT:this.arrow.angle=90;break;default:this.arrow.angle=0}},e}((n=a(n)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(34),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var o=t.call(this,e.app,n,r.Atlases.Interface,"workout_button_space")||this;return o.text=i.Text.create(e.app,"space",r.Fonts.Kimberley,41,0,"center"),o.text.style.letterSpacing=10,o.text.anchor.set(.5),o.addChild(o.text),o}return s(e,t),e}((n=a(n)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(35)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;n.app=e,n.windowNumber=0,n.background=new i.SliceSprite(n.app,r.Atlases.Interface,"tutorial_background",75,65,75,65),n.background.width=643,n.background.visible=!1,n.tutorialArray=[new o.FirstFilling(n.app,function(){return n.emit(r.Events.TUTORIAL_SHOWED)}),new o.SecondFilling(n.app),new o.ThirdFilling(n.app),new o.FourthFilling(n.app)],n.addChild(n.background);for(var s=0;s<n.tutorialArray.length;s++)n.addChild(n.tutorialArray[s]);return n.switchWindow(),n.resize(),n}return s(e,t),e.prototype.show=function(){var t=this;this.app.sound.playSfx(r.Sounds.Showing),this.app.timeline.tween(this.background).from({scale:{x:1.5,y:1.5},x:100-.25*this.background.width,y:300-.25*this.background.height}).to({scale:{x:1,y:1},x:100,y:300}).setting({duration:.5,onStart:function(){t.background.visible=!0}}).start(),this.app.timeline.tween(this.currentFill).from({scale:{x:1.5,y:1.5}}).to({scale:{x:1,y:1}}).setting({duration:.5,onStart:function(){return t.currentFill.show()}}).start()},e.prototype.switchWindow=function(){this.windowNumber!==this.tutorialArray.length?(this.currentFill&&this.currentFill.hide(),this.currentFill=this.tutorialArray[this.windowNumber],this.background.height=this.currentFill.bgHeight,this.windowNumber++,this.currentFill.button.on(r.Events.POINTER_UP,this.switchWindow.bind(this),this),this.resize(),this.show()):(this.currentFill.hide(),this.emit(r.Events.TUTORIAL_SHOWED))},e.prototype.resize=function(){this.background.position.set(100,300),this.currentFill.position.set(this.background.position.x+this.background.width/2,this.background.position.y+this.background.height/2)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(12),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,r){var s=t.call(this)||this;s.app=e,s.tweenStash=[],s.interactive=!0,s.background=new i.Sprite(e,o.Atlases.Interface,"popup_button_background"),s.frame=new i.Sprite(e,o.Atlases.Interface,"popup_button_frame"),s.frame.anchor.set(.5),s.frame.alpha=0,s.frame.position.set(0,0);var a=new n.TextStyle({fontFamily:o.Fonts.Kimberley,fontSize:24,fill:3552822});return s.text=new i.Text(e,r,a),s.text.roundPixels=!0,s.text.anchor.set(0,.5),s.buttonMode=!0,s.on(o.Events.POINTER_OUT,s.onOut,s),s.on(o.Events.POINTER_OVER,s.onOver,s),s.addChild(s.frame,s.background,s.text),s.resize(),s}return s(e,t),e.prototype.set=function(t,e){this.removeAllListeners(o.Events.POINTER_UP),this.text.setText(t),e&&this.on(o.Events.POINTER_UP,e,this)},e.prototype.hide=function(){},e.prototype.onOut=function(){var t=this;this.clearTweenStash(),this.tweenStash.push(this.app.timeline.tween(this.frame).from({scale:{x:1.1,y:1.1},x:this.frameX+10}).to({scale:{x:.95,y:.95},x:this.frameX,alpha:0}).setting({easing:r.Easing.Linear,duration:.2,onComplete:function(){return t.frame.alpha=0}}).start())},e.prototype.onOver=function(){this.clearTweenStash(),this.app.sound.playSfx(o.Sounds.FillingPanelOnOver),this.frame.alpha=1,this.tweenStash.push(this.app.timeline.tween(this.frame).from({x:this.frameX,scale:{x:.975,y:.975}}).to({x:this.frameX+10,scale:{x:1.1,y:1.1}}).setting({easing:r.Easing.Linear,duration:.2}).start())},e.prototype.clearTweenStash=function(){for(var t=0;t<this.tweenStash.length;t++)this.tweenStash[t].stop();this.tweenStash.length=0},e.prototype.resize=function(){this.frame.position.set(this.background.width/2,this.background.height/2),this.text.position.set(20,this.background.height/2),this.frameX=this.frame.position.x},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(15),n(7),n(5),n(118)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,n,i){var r=t.call(this)||this;return r.stateInteractive=!1,r.subPopup=i,r.app=e,r.isActive=!1,r.tweenStash=[],r.state=a.CheckBoxState.DEFAULT,r.interactive=!0,r.createElements(n),r.on(o.Events.POINTER_OUT,r.onOut,r),r.on(o.Events.POINTER_OVER,r.onOver,r),r.on(o.Events.POINTER_UP,r.onUp,r),r.addChild(r.background,r.circle,r.circleFill,r.text,r.frame,r.dot,r.description),r.resize(),r}return s(e,t),e.prototype.onUp=function(){this.callback&&(this.state!==a.CheckBoxState.LOCKED&&this.subPopup.call(this.callback,this.params),this.stateInteractive&&this.setCheckBoxState(this.state===a.CheckBoxState.INACTIVE?a.CheckBoxState.ACTIVE:a.CheckBoxState.INACTIVE))},e.prototype.clear=function(){this.callback=null,this.params=null},e.prototype.set=function(t,e){this.text.setText(t.names+e),this.callback=t.callback,this.params=e,this.stateInteractive=t.stateInteractive,t.description?(this.description.setText(t.names+"description_"+e),this.description.visible=!0):this.description.visible=!1},e.prototype.createElements=function(t){this.background=new r.Sprite(this.app,o.Atlases.Interface,"checkbox_background"),this.background.anchor.set(0,.5),this.circle=new r.Sprite(this.app,o.Atlases.Interface,"checkbox_circle"),this.circle.anchor.set(.5),this.circleFill=new i.ColoredSprite(this.app,o.Atlases.Interface,"checkbox_circle_fill"),this.circleFill.anchor.set(.5),this.circleFill.scale.set(1.05),this.circleFill.tint=15132390,this.circleFill.alpha=.4;var e=new n.TextStyle({fontFamily:o.Fonts.Kimberley,fontSize:24,fill:3552822});this.description=r.Text.create(this.app,"",o.Fonts.Kimberley,17,3552822),this.description.anchor.set(0,.5),this.description.visible=!1,this.text=new r.Text(this.app,t,e),this.text.anchor.set(0,.5),this.frame=new r.Sprite(this.app,o.Atlases.Interface,"checkbox_frame"),this.frame.anchor.set(0,.5),this.dot=new r.Sprite(this.app,o.Atlases.Interface,"dot"),this.dot.anchor.set(.5),this.frame.visible=!1,this.background.visible=!1},e.prototype.onOut=function(){this.state!==a.CheckBoxState.LOCKED&&(this.frame.visible=!1,this.background.visible=!1),this.state===a.CheckBoxState.QUESTION&&(this.dot.visible=!1)},e.prototype.onOver=function(){this.state!==a.CheckBoxState.LOCKED&&(this.frame.visible=!0,this.background.visible=!0),this.state===a.CheckBoxState.QUESTION&&(this.dot.visible=!0)},e.prototype.setCheckBoxState=function(t){switch(this.state=t,this.alpha=1,t){case a.CheckBoxState.ACTIVE:this.isActive=!0,this.dot.visible=!0,this.dot.setFrame("dot");break;case a.CheckBoxState.LOCKED:this.dot.visible=!1,this.isActive=!1,this.interactive=!1,this.alpha=.6,this.text.setText("LOCKED");break;case a.CheckBoxState.QUESTION:this.isActive=!0,this.dot.visible=!1,this.dot.setFrame("quetion_icon");break;case a.CheckBoxState.INACTIVE:this.dot.visible=!1,this.isActive=!1}},e.prototype.resize=function(){this.background.position.set(25,0),this.text.position.set(45,0),this.frame.position.set(-35,0),this.description.position.set(45,30),this.scale.set(.9)},e}((n=h(n)).Container);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckBoxState=void 0,function(t){t.ACTIVE="active",t.QUESTION="question",t.LOCKED="locked",t.INACTIVE="inactive",t.DEFAULT="default"}(e.CheckBoxState||(e.CheckBoxState={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(23),n(36),n(7),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,i){var s,a=t.call(this,e,i)||this;a.app=e.app,a.type="buttons",a.popupMask=new r.SliceSprite(a.app,o.Atlases.Interface,"bb_mask",80,80,80,80),a.popupMask.width=300,a.popupMask.height=300;for(var u=0;u<3;u++)(s=new n.PopupButton(a.app,"")).visible=!1,a.addChild(s),a.elementsArray.push(s);return a.backgroundIcon.anchor.set(.5),a.addChild(a.popupMask),a.background.mask=a.popupMask,a.visible=!1,a}return s(e,t),e.prototype.show=function(e){t.prototype.show.call(this,e),this.titleText.setText(e.title),this.icon.frame=e.backgroundIcon,this.backgroundIcon.setFrame(e.backgroundIcon);for(var n=function(t){var n=i.popupController.getCallback(e.elements[t].callback);i.elementsArray[t].set(e.elements[t].text,function(){return n(e.elements[t].text)}),!1===e.elements[t].visible?i.elementsArray[t].visible=!1:i.elementsArray[t].visible=!0},i=this,r=0;r<e.elements.length;r++)n(r);this.resize()},e.prototype.resize=function(){for(var e=this.startX,n=this.startY,i=0;i<this.config.elements.length;i++)this.elementsArray[i].position.set(e,n),n+=this.stepY;this.background.width=this.elementsArray[0].width+400,this.background.height=110*this.config.elements.length,this.popupMask.width=this.background.width,this.popupMask.height=this.background.height,this.backgroundIcon.position.set(this.background.width-this.backgroundIcon.width/4,this.background.height/2+70),t.prototype.resize.call(this)},e}((i=a(i)).default);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(23),n(15),n(7),n(5),n(36)],void 0===(r=function(t,e,n,i,r,o,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(e,s){var a,u=t.call(this,e,s)||this;u.app=e.app,u.blockedButtons=s.blockedButtons,u.startX=100,u.startY=150,u.stepY=60,u.type="checkBoxes";var h=new PIXI.TextStyle({fontFamily:o.Fonts.Kimberley,fontSize:26,fill:3552822});u.subtitleText=new r.Text(u.app,"",h),u.slider=new i.Slider(u.app),u.slider.setting(.01,1,0),u.slider.setValue(u.app.saveManager.volume),u.slider.on(o.Events.POINTER_MOVE,u.updateVolume,u),u.slider.visible=!1,u.backgroundIcon.anchor.set(.5);for(var l=0;l<12;l++)(a=new n.PopupCheckBox(u.app,"",u)).visible=!1,u.addChild(a),u.elementsArray.push(a);return u.addChild(u.subtitleText,u.slider),u.visible=!1,u}return s(e,t),e.prototype.updateVolume=function(t){this.app.saveManager.volume=t,this.app.sound.sfxGroup.gain=t,this.app.sound.musicGroup.gain=t},e.prototype.show=function(e){t.prototype.show.call(this,e),this.titleText.setText(e.title),this.subtitleText.setText(e.subtitle),void 0!==e.backgroundIcon&&this.backgroundIcon.setFrame(e.backgroundIcon),this.backgroundIcon.visible=void 0!==e.backgroundIcon;var n,i=!e.names.includes("_"),r="";if(e.numeration=void 0===e.numeration||e.numeration,"volume"!==e.names)for(var o=0;o<e.references.length;o++)e.numeration&&(r=i?" "+(o+1):o.toString()),this.elementsArray[o].set(e,r),this.elementsArray[o].visible=!0,n=e.inversionBool?this.blockedButtons[e.subtitle][o]?e.activeState:e.inactiveState:this.blockedButtons[e.subtitle][o]?e.inactiveState:e.activeState,this.elementsArray[o].setCheckBoxState(n);else this.slider.visible=!0;this.resize()},e.prototype.hide=function(){this.slider.visible=!1,this.visible=!1},e.prototype.resize=function(){this.subtitleText.position.set(45,this.startY/3+10);for(var e=this.startX,n=this.startY,i=void 0!==this.config.columns?this.config.columns:1,r=0;r<this.config.references.length;r++)this.elementsArray[r].position.set(e,n),n+=this.stepY,2===i&&r===this.config.references.length/2-1&&(e+=this.stepX,n=this.startY);var o=2===i?2*this.stepX/3:this.stepX;if(this.background.width=this.elementsArray[0].width+o*i,this.background.height=this.config.references.length/i*50+250,this.backgroundIcon.position.set(this.background.width-this.backgroundIcon.width/6,this.background.height/2),t.prototype.resize.call(this),"volume"===this.config.names&&(this.background.width=700,this.background.height=300,this.slider.position.set(this.background.width/2,this.background.height/2)),700<this.background.height){var s=700/this.background.height;this.scale.set(s)}},e}((u=a(u)).default);e.default=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(5),n(23),n(24)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,r){var o=t.call(this,e)||this;return o.bgHeight=336,o.mainText.setText("tutorial_1_1"),o.changeText(o.mainText,42),o.mainText.style.align="left",o.sideText.setText("tutorial_1_2"),o.changeText(o.sideText,11,n.Fonts.Kimberley),o.button.set("see_tutorial"),o.button2=new i.PopupButton(o.app,"skip"),o.addChild(o.button2),o.mainText.style.color=16711680,o.button2.on(n.Events.POINTER_UP,r,o),o.resize(),o}return s(e,t),e.prototype.resize=function(){this.mainText.position.set(0,-80),this.sideText.position.set(150,-70),this.button.position.set(-270,0),this.button2.position.set(-270,70)},e}((r=a(r)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(7),n(5),n(24)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var r=t.call(this,e)||this;return r.bgHeight=530,r.mainText.setText("tutorial_2_1"),r.changeText(r.mainText,42),r.sideText.setText("tutorial_2_2"),r.changeText(r.sideText,20),r.icon1=new n.Sprite(r.app,i.Atlases.Interface,"fit_man"),r.icon1.anchor.set(.5),r.icon2=new n.Sprite(r.app,i.Atlases.Interface,"arrow"),r.icon2.anchor.set(.5),r.icon3=new n.Sprite(r.app,i.Atlases.Interface,"rocking_man"),r.icon3.anchor.set(.5),r.button.set("ok"),r.addChild(r.icon1,r.icon2,r.icon3),r.resize(),r}return s(e,t),e.prototype.resize=function(){this.mainText.position.set(0,-175),this.icon1.position.set(-140,15),this.icon2.position.set(0,0),this.icon3.position.set(155,0),this.sideText.position.set(0,140),this.button.position.set(-this.button.width/2,175)},e}((r=a(r)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(35),n(24)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,e)||this;i.bgHeight=530,i.mainText.setText("tutorial_3_1"),i.changeText(i.mainText,30),i.sideText.visible=!1,i.button.set("ok",null),i.elements=[],i.elements.push(new n.ListElement(i.app,"workout_bg","workout","list_element_1")),i.elements.push(new n.ListElement(i.app,"food_bg","food","list_element_2")),i.elements.push(new n.ListElement(i.app,"boosters_bg","booster","list_element_3")),i.elements.push(new n.ListElement(i.app,"shopping_bg","shopping","list_element_4"));for(var r=0;r<i.elements.length;r++)i.addChild(i.elements[r]);return i.resize(),i}return s(e,t),e.prototype.resize=function(){this.mainText.position.set(0,-190);for(var t=-105,e=0;e<this.elements.length;e++)this.elements[e].position.set(-240,t),this.elements[e].text1.position.x=65,this.elements[e].resize(),t+=77;this.button.position.set(-this.button.width/2,170)},e}((i=a(i)).default);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(5),n(7),n(24)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var r=t.call(this,e)||this;return r.bgHeight=530,r.tweenArray=[],r.mainText.setText("tutorial_4_1"),r.changeText(r.mainText,32),r.sideText.setText("tutorial_4_2"),r.changeText(r.sideText,18),r.text3=i.Text.create(r.app,"tutorial_4_3",n.Fonts.Kimberley,26),r.button.set("ok"),r.icon=new i.Sprite(r.app,n.Atlases.Interface,"cassete"),r.icon.anchor.set(.5),r.addChild(r.text3,r.icon),r.resize(),r}return s(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.setTweens()},e.prototype.setTweens=function(){this.tweenArray.push(this.app.timeline.tween(this.icon).to({y:-20}).setting({duration:1.2,pingPong:!0,repeat:-1}).start()),this.tweenArray.push(this.app.timeline.tween(this.text3).to({scale:{x:1.1,y:1.1}}).setting({duration:1.4,pingPong:!0,repeat:-1}).start()),this.tweenArray.push(this.app.timeline.tween(this.icon).from({angle:0}).to({angle:360}).setting({duration:.5,repeatDelay:2,repeat:-1}).start())},e.prototype.hide=function(){t.prototype.hide.call(this);for(var e=0;e<this.tweenArray.length;e++)this.tweenArray[e].clear()},e.prototype.resize=function(){this.mainText.position.set(0,-175),this.icon.position.set(0,-30),this.sideText.position.set(0,110),this.text3.position.set(0,this.sideText.position.y+25),this.button.position.set(-this.button.width/2,175)},e}((r=a(r)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,o,s){var a=t.call(this)||this;return a.app=e,a.icon=new i.Sprite(a.app,r.Atlases.Interface,n),a.icon.tint=0,a.icon.anchor.set(.5),a.icon.scale.set(.4),a.text1=i.Text.create(a.app,o,r.Fonts.Kimberley,20,0,"left"),a.text1.anchor.set(0,.5),a.colonText=i.Text.create(a.app,":",r.Fonts.Kimberley,20,0),a.colonText.anchor.set(.5),a.text2=i.Text.create(a.app,s,r.Fonts.Kimberley,20,6513507,"left"),a.text2.anchor.set(0,.5),a.addChild(a.icon,a.text1,a.colonText,a.text2),a.resize(),a}return s(e,t),e.prototype.resize=function(){this.colonText.position.set(this.text1.position.x+this.text1.width+5,0),this.text2.position.set(this.text1.position.x+this.text1.width+10,0)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(15),n(44),n(20)],void 0===(r=function(t,e,n,i,r,o,a,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,o){var s=t.call(this)||this;s.app=n.app,s.scene=n,s.manController=o,s.interactive=!0,s.bkg=new i.Sprite(s.app,r.Atlases.Interface,"creatine_bg"),s.bkg.position.set(0,100),s.bkg.alpha=.3,s.bkg.interactive=!0,s.bkg.width=700,s.bkg.height=s.app.scale.height-s.bkg.y,s.addChild(s.bkg),s.currentTimeText=s.scene.addText("0",r.Fonts.Kimberley,40,16777215),s.bodySliders=[];for(var a=function(t){var n=h.createSlider(10,120+40*t,e.BODY_PARTS[t],function(n){return s.manController.man.setBody(e.BODY_PARTS[t],n)});h.bodySliders.push(n)},h=this,l=0;l<e.BODY_PARTS.length;l++)a(l);s.createSlider(10,120+40*e.BODY_PARTS.length,"All Body",function(t){return s.setAllParts(t)}),s.createSlider(10,120+40*(e.BODY_PARTS.length+1),"Tan",function(t){return s.manController.man.tan=t}).setting(.01,1,0),s.createSlider(10,120+40*(e.BODY_PARTS.length+2),"Belly",function(t){return s.manController.man.belly=t}).setting(.01,1,0),s.createSlider(10,120+40*(e.BODY_PARTS.length+3),"Bags",function(t){return s.manController.man.bags=t}).setting(.01,1,0),s.createSlider(10,120+40*(e.BODY_PARTS.length+4),"Dumbbells",function(t){return s.manController.man.dumbbells=t}).setting(.01,1,0),s.createSlider(500,120+40*(e.BODY_PARTS.length+4),"Animation",function(t){return s.manController.setValue(t)}).setting(.01,1,0),s.createSlider(500,120+40*(e.BODY_PARTS.length+3),"Head Color",function(t){return s.manController.man.redHead=t}).setting(.01,1,0);var c=0;for(var p in u.State)if(Object.prototype.hasOwnProperty.call(u.State,p)){var d=u.State[p];s.createAnimationButton(c,d),c++}var f=function(t){g.createButton(300,120+48*(e.BODY_PARTS.length+3),t,"h_",function(){return s.manController.man.setHair(t)})},g=this;for(l=1;l<7;l++)f(l);var m=function(t){v.createButton(300,120+49.3*(e.BODY_PARTS.length+3),t,"g_",function(){return s.manController.man.setGlasses(t)}),v.createButton(300,120+50.7*(e.BODY_PARTS.length+3),t,"b_",function(){return s.manController.man.setBling(t)})},v=this;for(l=1;l<6;l++)m(l);var y=function(t){_.createButton(300,120+52*(e.BODY_PARTS.length+3),t,"m_",function(){return s.manController.man.setMouth(t)})},_=this;for(l=1;l<12;l++)y(l);var b=s.createButton(1e3,850,0,"boost",function(){return s.scene.statsController.setBooster("hormone")});return b.scale.set(1),b.text.scale.set(1),s.addChild(s.currentTimeText),s.resize(),s}return s(e,t),e.prototype.createButton=function(t,e,n,o,s){var a=new i.TextButton(this.app,r.Atlases.Interface,"workout_button");return a.position.set(t+55*n,e),a.scale.set(.5,.2),a.setText(o+n,r.Fonts.Kimberley,30,0),a.text.scale.y=2.5,a.on(r.Events.POINTER_UP,s),this.addChild(a),a},e.prototype.createAnimationButton=function(t,e){var n=this,o=new i.TextButton(this.app,r.Atlases.Interface,"workout_button");return o.position.set(50+100*t,850),o.scale.y=.5,o.setText(e,r.Fonts.Kimberley,33,0),o.text.scale.y=2,o.on(r.Events.POINTER_UP,function(){return n.manController.setState(e)}),this.addChild(o),o},e.prototype.setAllParts=function(t){for(var e=0;e<this.bodySliders.length;e++)this.bodySliders[e].setValue(t)},e.prototype.createSlider=function(t,e,n,s){var a=new o.Slider(this.app);a.position.set(t+290,e),a.scale.set(.5),a.setting(.1,30,1),a.on(r.Events.POINTER_MOVE,s),this.addChild(a);var u=i.Text.create(this.app,n,"arial",20);return u.position.set(t,a.y),u.anchor.set(0,.5),this.addChild(u),a},e.prototype.update=function(t){this.currentTimeText.text=this.manController.man.manTrack.getAnimationTime().toFixed(2),this.manController.update(0)},e.prototype.resize=function(){this.currentTimeText.position.set(this.app.scale.width-2*this.currentTimeText.width,this.app.scale.height-150)},e.BODY_PARTS=[a.Body.LEFT_LOWER_ARM,a.Body.LEFT_UPPER_ARM,a.Body.LEFT_LOWER_LEG,a.Body.LEFT_UPPER_LEG,a.Body.RIGHT_LOWER_ARM,a.Body.RIGHT_UPPER_ARM,a.Body.RIGHT_LOWER_LEG,a.Body.RIGHT_UPPER_LEG,a.Body.ABS,a.Body.LOWER_ABS,a.Body.UPPER_ABS,a.Body.UPPER_BODY,a.Body.TRAPEZE],e}((n=h(n)).Container);e.default=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});i=[n,e,n(6),n(10),n(7),n(5)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.leftShadow=new r.Sprite(n.app,o.Atlases.Interface,"slider_shadow"),n.leftShadow.anchor.set(0,.5),n.leftShadow.scale.set(-1,1),n.rightShadow=new r.Sprite(n.app,o.Atlases.Interface,"slider_shadow"),n.rightShadow.anchor.set(0,.5),n.background=n.createButton("slider_back",n.onDownBack),n.slider=n.createButton("slider",n.onDown),n.slider.y=-25,n.addChild(n.leftShadow,n.rightShadow,n.background,n.slider),n.pressed=!1,n.distance=n.background.width-16.5,n.halfDistance=n.distance/2,n.leftOffset=-4,n.min=0,n.max=100,n.difference=n.max-n.min,n.currentStep=0,n.step=10,n.ratio=1,n.updateSlider(),n}return s(e,t),e.prototype.createButton=function(t,e){var n=new r.Sprite(this.app,o.Atlases.Interface,t);return n.anchor.set(.5),n.buttonMode=!0,n.interactive=!0,n.on(o.Events.POINTER_DOWN,e,this),n.on(o.Events.POINTER_UP,this.onUp,this),n.on(o.Events.POINTER_UP_OUTSIDE,this.onUp,this),n.on(o.Events.POINTER_MOVE,this.moveSlider,this),n},e.prototype.onDownBack=function(t){this.onDown(),this.moveSlider(t)},e.prototype.onDown=function(){this.pressed=!0},e.prototype.onUp=function(){this.pressed=!1},e.prototype.moveSlider=function(t){if(this.pressed){var e=this.getGlobalPosition(),n=(t.data.global.x-e.x)/this.scale.x;n=i.Utils.clamp(n,this.halfDistance,-this.halfDistance),this.updateurrentStep(n),this.move(0),this.updateRatio(),this.updateSlider()}},e.prototype.move=function(t){this.currentStep+=1e-4,this.currentStep=Math.floor((this.currentStep-this.min)/this.step)*this.step+this.min,this.currentStep+=this.step*t,this.currentStep=i.Utils.clamp(this.currentStep,this.max,this.min),this.updateSlider(),this.updateRatio()},e.prototype.updateRatio=function(){this.emit(o.Events.POINTER_MOVE,this.currentStep)},e.prototype.setting=function(t,e,n){void 0===e&&(e=this.max),void 0===n&&(n=this.min),this.step=t,this.max=e,this.min=n,this.difference=this.max-this.min,this.updateSlider()},e.prototype.getRatio=function(){return this.difference?(this.currentStep-this.min)/this.difference:0},e.prototype.setValue=function(t){this.currentStep=t,this.currentStep=i.Utils.clamp(this.currentStep,this.max,this.min),this.updateSlider(),this.updateRatio()},e.prototype.updateSlider=function(){var t=this.getRatio()*this.distance-this.halfDistance;t=i.Utils.clamp(t,this.halfDistance,-this.halfDistance),this.slider.x=this.leftOffset+t},e.prototype.updateurrentStep=function(t){this.currentStep=(t+this.halfDistance)/this.distance*this.difference+this.min},e}(n.Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(23),n(21)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,n){var s=t.call(this)||this;return s.app=e.app,s.scene=e,s.blockedButtons=n,s.gridQueue=[],s.callbacksArray=new Map,s.fillConfigs(),s.background=new i.Sprite(s.app,r.Atlases.Interface,"white_square"),s.background.alpha=.7,s.background.interactive=!0,s.titlePopup=new o.TitlePopup(e,s),s.subtitlePopup=new o.SubtitlePopup(e,s),s.titlePopup.crossButton.on(r.Events.POINTER_UP,s.back,s),s.subtitlePopup.crossButton.on(r.Events.POINTER_UP,s.back,s),s.switchGrid(s.titlePopup),s.addChild(s.background,s.titlePopup,s.subtitlePopup),s.visible=!1,s}return s(e,t),e.prototype.fillConfigs=function(){var t=this;this.popupsConfig=this.scene.gameConfig.popups,this.subPopupsConfig=this.scene.gameConfig.subpopups,this.callbacksArray.set("show_subtitle",function(e){return t.setSubtitlePopup(e)})},e.prototype.setSubtitlePopup=function(t){var e=this.getSubtitlePopup(t);this.setPopup(e)},e.prototype.getSubtitlePopup=function(t){for(var e=0;e<this.subPopupsConfig.length;e++)if(this.subPopupsConfig[e].subtitle===t)return this.subPopupsConfig[e]},e.prototype.getCallback=function(t){return this.callbacksArray.get(t)},e.prototype.switchGrid=function(t){void 0!==this.popup&&this.popup.hide(),this.popup=t},e.prototype.addToQueue=function(t){for(var e=0,n=0;n<this.gridQueue.length;n++)this.gridQueue[n]===t&&e++;0<e?this.gridQueue.splice(this.gridQueue.length-1,1):this.gridQueue.push(t)},e.prototype.back=function(){var t=this;a.AdHandler.getInstance().showAd("options",function(){if(1===t.gridQueue.length)t.gridQueue.length=0,t.visible=!1;else{var e=t.gridQueue[t.gridQueue.length-2];t.setPopup(e)}})},e.prototype.setPopup=function(t){if(void 0!==this.popup&&this.popup.type!==t.type){var e="title"===t.type?this.titlePopup:this.subtitlePopup;this.switchGrid(e)}this.popup.show(t),this.addToQueue(t),this.resize()},e.prototype.resize=function(){this.background.scale.set(110),this.popup.position.set(this.app.scale.width/2-this.popup.background.width*this.popup.scale.x/2,this.app.scale.height/2-this.popup.background.height*this.popup.scale.y/2)},e}((n=h(n)).Container);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(27),n(5),n(7),n(16),n(15),n(21)],void 0===(r=function(t,e,n,i,r,o,a,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,s){var h=t.call(this)||this;h.app=e.app,h.switchInterface=s,h.background=new o.Sprite(h.app,r.Atlases.Interface,"white_square"),h.background.alpha=.7,h.background.interactive=!0,h.background.visible=!1,h.crossButton=new a.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_cross_icon","sb_frame_fill"),h.crossButton.visible=!1,h.crossButton.on(r.Events.POINTER_UP,h.switchStats.bind(h),h),h.statBarContainer=new i.StatBarsContainer(h.app),h.statPanelsContainer=new i.StatPanelsContainer(e),h.statPanelsContainer.visible=!1,h.levelPanel=new i.LevelPanel(h.app),h.gameoverPanel=new u.GameOverPanel(h.app),h.isShowing=!1,h.levelPanel.on(r.Events.POINTER_UP,h.switchStats,h);var l=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:54,fill:0});return h.failedText=new o.Text(h.app,"failed",l),h.failedText.alpha=0,h.addChild(h.background,h.levelPanel,h.statBarContainer,h.statPanelsContainer,h.failedText,h.crossButton,h.gameoverPanel),h.resize(),h}return s(e,t),e.prototype.boosterAppearence=function(){this.levelPanel.boosterAppearence()},e.prototype.startAnimation=function(){var t=this;this.switchInterface(!1),this.levelPanel.visible=!1,this.app.timeline.tween(this.statBarContainer).from({scale:{x:10,y:10},x:this.statBarContainer.position.x-160,y:this.statBarContainer.position.y+250}).to({scale:{x:1,y:1},x:this.app.scale.width/4,y:this.app.scale.height/2}).setting({onComplete:function(){t.mainBarsIncreaseAnimation()},duration:.6}).start()},e.prototype.mainBarsIncreaseAnimation=function(){var t=this;this.statBarContainer.animateMainBars(function(){return t.endBarAnimation()})},e.prototype.endBarAnimation=function(){this.app.timeline.tween(this.statBarContainer).to({scale:{x:0,y:0}}).setting({onComplete:this.queueChoiser.bind(this),duration:.2}).start()},e.prototype.queueChoiser=function(){var t=this;this.statBarContainer.scale.set(1),this.statPanelsContainer.wasChange()?this.statPanelsFirst():this.statBarContainer.sideWasChange()?(this.turningForAnimation(),this.app.timeline.callback(function(){t.statBarContainer.animateSideBars(function(){return t.endAnimation(.2)})})):this.endAnimation(0)},e.prototype.turningForAnimation=function(){this.levelPanel.visible=!0,this.statBarContainer.position.set(this.levelPanel.position.x-this.statBarContainer.width/2-160+120,this.levelPanel.position.y-30),this.statBarContainer.switchSideBars(!0),this.statBarContainer.changeSideAlpha(.5),this.statBarContainer.switchMainBars(!1),this.statPanelsContainer.position.set(this.statPanelsContainer.position.x+120,this.statPanelsContainer.position.y),this.statPanelsContainer.visible=!0,this.statPanelsContainer.setAlpha(.5),this.statPanelsContainer.interactiveSwitcher(!1),this.levelPanel.interactive=!1},e.prototype.statPanelsFirst=function(){var t=this;this.turningForAnimation(),this.app.timeline.tween(this.statPanelsContainer).from({scale:{x:4,y:4}}).to({scale:{x:1,y:1}}).setting({duration:.1}).start(),this.app.timeline.tween(this.statBarContainer).from({scale:{x:4,y:4}}).to({scale:{x:1,y:1}}).setting({onComplete:function(){return t.checkBoosterDecreasing()},duration:.1}).start()},e.prototype.checkBoosterDecreasing=function(){var t=this.levelPanel.animateBoosterFilling();this.app.timeline.callback(this.statPanelsSecond,t,!1,this)},e.prototype.statPanelsSecond=function(){var t,e=this;t=this.statPanelsContainer.sortAnimation(function(){return e.levelPanel.updateLevel()}),this.app.timeline.callback(function(){e.statBarContainer.animateSideBars(function(){return e.endAnimation(.2)})},t)},e.prototype.endAnimation=function(t){var e=this;this.app.timeline.callback(function(){e.statPanelsContainer.visible=!1,e.levelPanel.visible=!0,e.statPanelsContainer.setAlpha(1),e.statPanelsContainer.interactiveSwitcher(!0),e.levelPanel.interactive=!0,e.switchInterface(!0),e.statBarContainer.switchSideBars(!1),e.statBarContainer.changeSideAlpha(1),e.statBarContainer.switchMainBars(!0),e.resize(),e.emit(r.Events.LEVEL_UP,e.app.saveManager.stats.level)},t)},e.prototype.switchStats=function(){var t=this;l.AdHandler.getInstance().showAd("stat_container",function(){t.isShowing=!t.isShowing,t.background.visible=t.isShowing,t.crossButton.visible=t.isShowing,t.statBarContainer.switchSideBars(t.isShowing),t.statPanelsContainer.visible=t.isShowing})},e.prototype.showFailedText=function(t){void 0===t&&(t=0),this.failedText.alpha=1,this.app.timeline.tween(this.failedText).from({scale:{x:2,y:2}}).to({scale:{x:1,y:1}}).setting({duration:.6}).start(),this.app.timeline.tween(this.failedText).to({alpha:0}).setting({delay:.6+t,duration:.4}).start()},e.prototype.gameOverShow=function(){this.app.sound.playSfx(r.Sounds.AchievementUnlock),this.app.timeline.tween(this.gameoverPanel).from({y:960+this.gameoverPanel.height}).to({y:910-this.gameoverPanel.height}).setting({duration:.3,onComplete:this.gameOverHide.bind(this)}).start()},e.prototype.gameOverHide=function(){var t=this;this.app.timeline.callback(function(){return t.app.timeline.tween(t.gameoverPanel).to({y:960+2*t.gameoverPanel.height}).setting({duration:.3}).start()},4)},e.prototype.resize=function(){this.background.scale.set(110),this.levelPanel.position.set(this.app.scale.width-355,20),this.statPanelsContainer.position.set(50,120),this.statBarContainer.position.set(this.levelPanel.position.x-this.statBarContainer.width/2-160,this.levelPanel.position.y+30),this.failedText.position.set(180,200),this.crossButton.position.set(this.app.scale.width-this.crossButton.width*this.crossButton.scale.x,this.levelPanel.position.y+180),this.gameoverPanel.position.set(50,960+this.gameoverPanel.height)},e}((n=h(n)).Container);e.default=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(27),n(7),n(5),n(37)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var n=t.call(this,e)||this;n.app=e,n.gameConfig=n.app.loader.resources[r.JsonData.GameConfig].data,n.boosterPanel=new i.Sprite(e,r.Atlases.Interface,"boosters_panel"),n.boosterPanel.anchor.set(.5,0);var o=new PIXI.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:20,fill:2500134});n.levelText=new i.Text(e,"",o);var s=new PIXI.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:36,fill:2500134});n.levelNumberText=new i.Text(e,"",s),n.boosterIconsArray=[],n.createBoosters();for(var a=0;a<n.boosterIconsArray.length;a++)n.boosterIconsArray[a].setInitValue(n.gameConfig.boostersScore[a],n.app.saveManager.stats.boosters[a]),n.boosterIconsArray[a].zIndex=-2,n.addChild(n.boosterIconsArray[a]);return n.levelText.anchor.set(.5,.5),n.levelNumberText.anchor.set(.5,.5),n.addChild(n.boosterPanel,n.levelText,n.levelNumberText),n.boosterPanel.zIndex=-2,n.level=n.app.saveManager.stats.level,n.updateMaxValue(),n.value=n.app.saveManager.stats.levelPoints,n.updateText(),n.resize(),n}return s(e,t),e.prototype.boosterAppearence=function(){for(var t=0;t<this.boosterIconsArray.length;t++)1===this.app.saveManager.stats.boosters[t]&&(this.boosterIconsArray[t].setState(!0),this.boosterIconsArray[t].setValue(1))},e.prototype.updateMaxValue=function(){this.setting(this.gameConfig.levels[this.level],0<=this.level-1?this.gameConfig.levels[this.level-1]:0)},e.prototype.fillPoints=function(t,e){void 0===e&&(e=0),this.app.saveManager.stats.levelPoints!==Math.floor(this.value)&&this.app.timeline.tween(this).to({value:this.app.saveManager.stats.levelPoints}).setting({duration:t,delay:e,onComplete:this.checkForMax.bind(this,t)}).start()},e.prototype.fillLevels=function(t,e){void 0===e&&(e=0),this.app.timeline.tween(this).to({value:this.maxValue}).setting({duration:t,delay:e,onComplete:this.checkForMax.bind(this,t)}).start()},e.prototype.checkForMax=function(t,e){void 0===e&&(e=0);var n=this.app.saveManager.stats.level-this.level;Math.floor(this.value)===this.maxValue&&(this.level+=Math.sign(n),this.updateMaxValue(),this.value=this.value),this.updateText(),this.app.saveManager.stats.level===this.level?this.fillPoints(t,e):this.fillLevels(t,e)},e.prototype.updateText=function(){this.levelText.setText("Lvl"),this.levelNumberText.setText(this.level.toString())},e.prototype.updateLevel=function(t){void 0===t&&(t=0);var e=Math.abs(this.app.saveManager.stats.level-this.level);return 0===e&&this.app.saveManager.stats.levelPoints===this.value?0:(this.checkForMax(1.5,t),t+1.5*e)},e.prototype.animateBoosterFilling=function(){for(var t=0,e=0;e<this.boosterIconsArray.length;e++)t=this.boosterIconsArray[e].animateFilling(this.app.saveManager.stats.boosters[e]);return t},e.prototype.createBoosters=function(){this.boosterIconsArray.push(new n.BoosterElement(this.app,r.Atlases.Interface,"protein_icon",.73,.43)),this.boosterIconsArray.push(new n.BoosterElement(this.app,r.Atlases.Interface,"creatine_icon",.615,.43)),this.boosterIconsArray.push(new n.BoosterElement(this.app,r.Atlases.Interface,"pils_icon",.51,.36)),this.boosterIconsArray.push(new n.BoosterElement(this.app,r.Atlases.Interface,"syringe_icon",.45,.47))},e.prototype.resize=function(){t.prototype.resize.call(this),this.boosterPanel.position.set(this.background.width/2,this.background.height),this.levelText.position.set(this.background.position.x+this.background.width-65,this.background.position.y+this.background.height/2);var e=this.levelText.position.x+this.levelText.width/2;this.levelNumberText.position.set(e+(this.background.width-e)/2.3,this.levelText.position.y);for(var n=68,i=0;i<this.boosterIconsArray.length;i++)this.boosterIconsArray[i].position.set(n,this.boosterPanel.y+this.boosterPanel.height/2-2),n+=68;this.hitArea=new PIXI.Rectangle(0,0,this.background.width,this.background.height)},e}((o=a(o)).default);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,o,s,a,u){var h=t.call(this)||this;h.app=e,h.currentValue=0,h.background=new i.Sprite(h.app,r.Atlases.Interface,"booster_bg"),h.background.anchor.set(.5);var l=s.split("_")[0]+"_bg";h.iconBackground=new i.Sprite(h.app,o,l),h.iconBackground.anchor.set(.5),h.iconBackground.tint=0,h.icon=new i.Sprite(h.app,o,s),h.icon.anchor.set(a,u),h.barBackgorund=new i.Sprite(h.app,r.Atlases.Interface,"booster_bar"),h.barBackgorund.tint=8421504,h.barBackgorund.anchor.set(.5,.5);var c=h.app.loader.resources[r.Atlases.Interface].textures.booster_bar;h.fillingBar=new n.TilingSprite(c,62,5),h.fillingBar.anchor.set(0,.5);var p=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:22,fill:0});return h.plusText=new i.Text(h.app,"+0",p),h.plusText.anchor.set(.5,.5),h.plusText.visible=!1,h.addChild(h.background,h.iconBackground,h.icon,h.barBackgorund,h.fillingBar,h.plusText),h.resize(),h}return s(e,t),e.prototype.setInitValue=function(t,e){this.setPlusText(t),this.setState(0<e),this.setValue(e)},e.prototype.setPlusText=function(t){this.plusText.text="+ "+t},e.prototype.setValue=function(t){this.fillingBar.width=this.barBackgorund.width*t,this.currentValue=t},e.prototype.animateFilling=function(t){var e=this;return this.currentValue!==t&&1!==t&&(this.app.sound.playSfx(r.Sounds.TakeBooster),this.plusText.visible=!0,this.currentValue=t,this.app.timeline.tween(this.fillingBar).to({width:this.barBackgorund.width*t}).setting({duration:.6,onComplete:function(){0===t&&e.setState(!1),e.plusText.visible=!1}}).start()),.8},e.prototype.setState=function(t){this.icon.visible=t,this.background.tint=t?14277081:2500134,this.barBackgorund.visible=t,this.fillingBar.visible=t},e.prototype.resize=function(){this.icon.scale.set(.25),this.iconBackground.scale.set(.25),this.barBackgorund.position.set(0,35),this.fillingBar.position.set(-this.barBackgorund.width/2,35),this.plusText.position.set(0,60)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,o,s,a,u,h){var l=t.call(this)||this;l.fullWidth=165,l.app=e,l.color=a,l.side=h,l.background=new i.Sprite(l.app,r.Atlases.Interface,"stat_bar_background"),l.background.anchor.set(.5),l.iconBackground=new i.SliceSprite(l.app,r.Atlases.Interface,"stats_text_bg",23,16,23,16),l.iconBackground.width=53,l.icon=new i.Sprite(l.app,o,s),l.icon.anchor.set(.5),l.fillingContainer=new i.SliceSprite(l.app,r.Atlases.Interface,"stat_bar_filling_container",17,12,17,12),l.fillingContainer.width=165,l.fillingLine=new n.TilingSprite(l.app.loader.resources[r.Images.StatsFillingLine].texture,l.fullWidth,26),l.fillingLine.anchor.set(0,.5),l.fillingLine.tint=l.color,l.fillingLine.tilePosition.set(-2,-1),l.fillingContainer.tint=10526880;var c=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:14,fill:l.color,align:"center"});return l.text=new i.Text(l.app,u,c),l.text.anchor.set(.5,1),l.addChild(l.background,l.iconBackground,l.icon,l.fillingContainer,l.fillingLine,l.text),l.sideControl(),l.resize(),l}return s(e,t),Object.defineProperty(e.prototype,"CurrentPrecent",{get:function(){return this.currentPrecent},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t){this.currentPrecent=t,this.fillingLine.width=Math.floor(this.fullWidth*t)},e.prototype.sideAnimation=function(t,e,n){var i=this;void 0===e&&(e=null),void 0===n&&(n=0);var r=function(){i.app.timeline.tween(i).to({alpha:.5,scale:{x:1,y:1}}).setting({onComplete:function(){null!==e&&e()},delay:.2,duration:.15}).start()};return this.currentPrecent-t!=0&&0!==t?this.app.timeline.tween(this).to({alpha:1,scale:{x:1.05,y:1.05}}).setting({onComplete:function(){return i.animateFilling(t,r)},duration:.15,delay:n}).start():this.animateFilling(t,r),.9},e.prototype.animateFilling=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=0),this.currentPrecent-t!=0?(this.currentPrecent=t,this.app.timeline.tween(this.fillingLine).to({width:Math.ceil(this.fullWidth*t)}).setting({onComplete:function(){null!==e&&e()},duration:.4,delay:n}).start()):null!==e&&this.app.timeline.callback(e,.6),n+.4},e.prototype.sideControl=function(){"left"===this.side&&(this.icon.skew.set(0,Math.PI),this.background.skew.set(0,Math.PI))},e.prototype.resize=function(){var t=0,e=0;e="left"===this.side?(t=this.background.position.x-108,this.background.position.x-this.fillingContainer.width/2+37.5):(t=this.background.position.x+54,this.background.position.x-this.fillingContainer.width/2-37.5),this.iconBackground.position.set(t,-7),this.icon.position.set(this.iconBackground.position.x+this.iconBackground.width/2,this.iconBackground.position.y+this.iconBackground.height/2),this.fillingContainer.position.set(e,this.background.position.y-20.5),this.fillingLine.position.set(this.fillingContainer.position.x,-7.5),this.text.position.set(this.iconBackground.x+this.iconBackground.width/2,this.iconBackground.position.y-2)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(7),n(5),n(37)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,r,o,s){var a=t.call(this,e.app)||this;a.manController=e.manController,a.workoutIndex=s,a.workoutConfig=a.getManConfig(e.gameConfig,s),a.setting(1e3),a.statNamePanel=new n.Sprite(a.app,i.Atlases.Interface,"stats_text_bg");var u=new PIXI.TextStyle({fontFamily:i.Fonts.Kimberley,fontSize:17,fill:8355711});return a.statNameText=new n.Text(a.app,r,u),a.statNameText.anchor.set(0,.5),a.statNamePanel.alpha=.7,a.statNamePanel.width=160,a.addChild(a.statNamePanel,a.statNameText),a.value=o,a.resize(),a}return s(e,t),e.prototype.getManConfig=function(t,e){for(var n in t.man)if(Object.prototype.hasOwnProperty.call(t.man,n)){var i=t.man[n];if(i.index||0===i.index)if("number"==typeof i.index){if(i.index===e)return i}else for(var r=0;r<i.index.length;r++)if(i.index[r]===e)return i}return null},e.prototype.animate=function(t,e,n){void 0===e&&(e=0);var i=0;return this.value-t!=0&&0!==t?(i=this.fill(e,t),n()):this.shortPick(e),i},e.prototype.fill=function(t,e){var n=this;return this.app.timeline.callback(function(){n.scale.set(1.05),n.alpha=1},t),this.app.timeline.tween(this).to({value:e}).setting({onComplete:function(){n.scale.set(1),n.alpha=n.alpha=.5},onUpdate:this.onUpdate.bind(this),delay:t,duration:1.5}).start(),1.5},e.prototype.onUpdate=function(){this.manController.workoutStats[this.workoutIndex]=this.value,this.manController.updatePartsByConfig(this.workoutConfig),this.app.sound.playSfx(i.Sounds.StatFilling)},e.prototype.shortPick=function(t){return this.app.timeline.tween(this).to({alpha:1}).setting({delay:t,duration:.1,pingPong:!0}).start(),t+.1},e.prototype.resize=function(){t.prototype.resize.call(this),this.statNamePanel.position.set(this.background.position.x+this.background.width-this.statNamePanel.width/2+15,this.background.position.y+this.background.height/2-this.statNamePanel.height/2),this.statNameText.position.set(this.statNamePanel.position.x+15,this.statNamePanel.position.y+this.statNamePanel.height/2)},e}((r=a(r)).default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(27),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.energyBar=new i.StatBar(n.app,r.Atlases.Interface,"lightning_icon",6749952,"energy","left"),n.healthBar=new i.StatBar(n.app,r.Atlases.Interface,"health_icon",16711680,"health","right"),n.fatBar=new i.StatBar(n.app,r.Atlases.Interface,"pig_icon",16763904,"fat","left"),n.cardioBar=new i.StatBar(n.app,r.Atlases.Interface,"boot_icon",3381708,"cardio","right"),n.barsArray=[n.energyBar,n.healthBar,n.fatBar,n.cardioBar],n.fatBar.visible=!1,n.cardioBar.visible=!1,n.setInitValues(),n.addChild(n.energyBar,n.healthBar,n.fatBar,n.cardioBar),n.resize(),n}return s(e,t),e.prototype.setInitValues=function(){this.energyBar.setValue(this.app.saveManager.stats.energy),this.healthBar.setValue(this.app.saveManager.stats.health),this.fatBar.setValue(this.app.saveManager.stats.fat),this.cardioBar.setValue(this.app.saveManager.stats.cardio)},e.prototype.sideWasChange=function(){return this.fatBar.CurrentPrecent-this.app.saveManager.stats.fat!=0||this.cardioBar.CurrentPrecent-this.app.saveManager.stats.cardio!=0},e.prototype.animateMainBars=function(t){void 0===t&&(t=null);var e=this.energyBar.animateFilling(this.app.saveManager.stats.energy);this.healthBar.animateFilling(this.app.saveManager.stats.health,t,e)},e.prototype.animateSideBars=function(t){void 0===t&&(t=null);var e=this.fatBar.sideAnimation(this.app.saveManager.stats.fat);this.cardioBar.sideAnimation(this.app.saveManager.stats.cardio,t,e)},e.prototype.switchMainBars=function(t){this.energyBar.visible=t,this.healthBar.visible=t},e.prototype.switchSideBars=function(t){this.fatBar.visible=t,this.cardioBar.visible=t},e.prototype.changeSideAlpha=function(t){this.fatBar.alpha=t,this.cardioBar.alpha=t},e.prototype.resize=function(){this.energyBar.position.set(0,0),this.healthBar.position.set(this.energyBar.position.x+75,this.energyBar.position.y+this.energyBar.height-10),this.fatBar.position.set(this.energyBar.position.x,this.healthBar.position.y+this.healthBar.height-10),this.cardioBar.position.set(this.energyBar.position.x+75,this.fatBar.position.y+this.cardioBar.height-10)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(27)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.scene=e,n.app=e.app,n.fillData(),n.resize(),n}return s(e,t),e.prototype.fillData=function(){var t;this.statPanelsArray=[];for(var n=0;n<e.STAT_KEYS.length;n++)t=new i.StatPanel(this.scene,e.STAT_KEYS[n],this.app.saveManager.stats.workoutStats[n],n),this.statPanelsArray.push(t),this.addChild(t)},e.prototype.wasChange=function(){for(var t=0,e=0;e<this.statPanelsArray.length;e++)this.statPanelsArray[e].value-this.app.saveManager.stats.workoutStats[e]!=0&&t++;return 0!==t},e.prototype.sortAnimation=function(t){for(var e=0,n=0,i=0;i<this.statPanelsArray.length;i++)n=e,e+=this.statPanelsArray[i].animate(this.app.saveManager.stats.workoutStats[i],e,t),e+=7===i?n-e:.025;return e+.5},e.prototype.setAlpha=function(t){for(var e=0;e<this.statPanelsArray.length;e++)this.statPanelsArray[e].alpha=t},e.prototype.interactiveSwitcher=function(t){for(var e=0;e<this.statPanelsArray.length;e++)this.statPanelsArray[e].interactive=t},e.prototype.resize=function(){for(var t=0,e=0;e<this.statPanelsArray.length;e++)this.statPanelsArray[e].position.set(0,t),t+=73},e.STAT_KEYS=["neck","upper_arm_left","upper_arm_right","upper_body","abs","lower_arm_left","lower_arm_right","upper_leg_left","upper_leg_right","lower_leg_left","lower_leg_right"],e}((n=h(n)).Container);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5),n(7),n(12)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.topLock=new r.Sprite(e,i.Atlases.Interface,"lock_top"),n.topLock.anchor.set(.5),n.topLock.tint=0,n.botLock=new r.Sprite(e,i.Atlases.Interface,"lock_bot"),n.botLock.anchor.set(.5),n.botLock.tint=0,n.topTween=n.app.timeline.tween(n.topLock).from({y:-26}).to({y:-19}).setting({duration:1.2,easing:o.Easing.OutSine,pingPong:!0,repeat:-1}).start(),n.botTween=n.app.timeline.tween(n.botLock).from({y:32}).to({y:25}).setting({duration:1.2,easing:o.Easing.OutSine,pingPong:!0,repeat:-1}).start(),n.addChild(n.topLock,n.botLock),n.resize(),n.visible=!1,n}return s(e,t),e.prototype.switcher=function(t){(this.visible=t)?(this.topTween.start(),this.botTween.start()):(this.topTween.pause(),this.botTween.pause())},e.prototype.resize=function(){this.scale.set(.8),this.topLock.position.set(0,-26),this.botLock.position.set(0,32)},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});i=[n,e,n(7)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._red=255,e._green=255,e._blue=255,e}return s(e,t),Object.defineProperty(e.prototype,"red",{get:function(){return this._red},set:function(t){this._red=t,this.updateTint()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this._green},set:function(t){this._green=t,this.updateTint()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this._blue},set:function(t){this._blue=t,this.updateTint()},enumerable:!1,configurable:!0}),e.prototype.updateTint=function(){this.tint=this._red<<16|this._green<<8|this._blue},e.prototype.setTint=function(t){this._red=t>>16&255,this._green=t>>8&255,this._blue=255&t,this.tint=t},e.prototype.setRGB=function(t,e,n){this._red=t,this._green=e,this._blue=n,this.updateTint()},e}(n.Text);e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var o=t.call(this)||this;o.app=e,o.background=new i.Sprite(o.app,r.Atlases.Interface,"achiv_background"),o.background.anchor.set(0,1);var s=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:22,fill:0});o.achivText=new i.Text(o.app,"achievement",s),o.achivText.anchor.set(0,.5),o.doneText=new i.Text(o.app,"done",s),o.doneText.anchor.set(0,.5);var a=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:26,fill:16711680});return o.numberText=new i.Text(o.app,"#0",a),o.numberText.anchor.set(0,.5),o.addChild(o.background,o.achivText,o.numberText,o.doneText),o.resize(),o}return s(e,t),e.prototype.setAchievementNumber=function(t){this.numberText.setText("#"+t),this.resize()},e.prototype.appearAnimation=function(t){void 0===t&&(t=0),this.app.sound.playSfx(r.Sounds.AchievementUnlock),this.app.timeline.tween([this.achivText,this.numberText,this.doneText]).from({alpha:0}).to({alpha:1}).setting({duration:.3,delay:t}).start()},e.prototype.resize=function(){var t=-this.background.height/2;this.achivText.position.set(14,t),this.numberText.position.set(this.achivText.position.x+this.achivText.width+3,t),this.doneText.position.set(this.numberText.position.x+this.numberText.width+3,t)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.app=e.app,n.partX=0,n.buttonsDescription=e.gameConfig.buttonsDescription,n.isVisible=!1,n.cursorIcon=new i.Sprite(n.app,r.Atlases.Interface,"cursor"),n.cursorIcon.tint=3381708,n.background=new i.Sprite(n.app,r.Atlases.Interface,"cursor_background"),n.leftPart=new i.Sprite(n.app,r.Atlases.Interface,"cursor_left_part"),n.leftPart.tint=3381708,n.rightPart=new i.Sprite(n.app,r.Atlases.Interface,"cursor_right_part"),n.sideBackground=new i.Sprite(n.app,r.Atlases.Interface,"cursor_side_bg"),n.sideBackground.width=315,n.mainText=i.Text.create(n.app,"someWord","arial",18),n.mainText.anchor.set(0,.5),n.mainText.roundPixels=!1,n.sideText=i.Text.create(n.app,"sameText","arial",22,16711680),n.sideText.anchor.set(0,.5),n.sideText.roundPixels=!1,e.on(r.Events.SHOW_CURSOR,function(t){return n.turnOn(t)},n),e.on(r.Events.HIDE_CURSOR,n.turnOff.bind(n),n),n.addChild(n.background,n.cursorIcon,n.leftPart,n.rightPart,n.mainText,n.sideBackground,n.sideText),n.resize(),n.visible=!1,n}return s(e,t),e.prototype.move=function(t,e){this.isVisible&&this.position.set(t,e)},e.prototype.appear=function(){this.appearTween([this.cursorIcon,this.background,this.leftPart,this.mainText]),this.app.timeline.tween(this.rightPart).from({x:this.partX+50}).to({x:this.partX}).setting({duration:.2}).start()},e.prototype.appearTween=function(t){for(var e=0;e<t.length;e++)this.app.timeline.tween(t[e]).from({scale:{x:0,y:0}}).to({scale:{x:1,y:1}}).setting({duration:.2}).start()},e.prototype.turnOff=function(){this.visible=!1,this.isVisible=!1},e.prototype.turnOn=function(t){this.buttonsDescription[t.index]&&(this.visible=!0,this.isVisible=!0,this.mainText.setText(this.buttonsDescription[t.index].text),t.isBlocked?(this.cursorIcon.tint=16711680,this.leftPart.tint=16711680,this.sideBackground.visible=!0,this.sideText.visible=!0,t.index&&this.buttonsDescription[t.index].subtext&&(this.mainText.setText("locked"),this.sideText.setText(this.buttonsDescription[t.index].subtext),this.appearTween([this.sideText,this.sideBackground]))):(this.leftPart.tint=3381708,this.cursorIcon.tint=3381708,this.sideBackground.visible=!1,this.sideText.visible=!1),t.color&&(this.cursorIcon.tint=t.color,this.leftPart.tint=t.color),this.appear())},e.prototype.resize=function(){this.partX=this.background.position.x+this.background.width+10,this.cursorIcon.position.set(0,0),this.leftPart.position.set(7,7),this.background.position.set(14,7),this.rightPart.position.set(this.partX,7),this.mainText.position.set(this.background.position.x+10,this.background.position.y+this.background.height/2),this.sideBackground.position.set(this.background.position.x,this.background.position.y+this.background.height+5),this.sideText.position.set(this.sideBackground.position.x+10,this.sideBackground.position.y+this.sideBackground.height/2)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.tweenArray=[],n.text=i.Text.create(n.app,"max_tan",r.Fonts.Kimberley,32,0),n.nimb=new i.Sprite(n.app,r.Atlases.Interface,"tan_nimb"),n.nimb.anchor.set(.5),n.nimb.alpha=0,n.circle=new i.Sprite(n.app,r.Atlases.Interface,"tan_circle"),n.circle.anchor.set(.5),n.addChild(n.text,n.nimb,n.circle),n.tweenSet(),n.visible=!1,n.resize(),n}return s(e,t),e.prototype.tweenSet=function(){this.tweenArray.push(this.app.timeline.tween(this.text).to({alpha:0}).setting({pingPong:!0,duration:.6,repeat:-1})),this.tweenArray.push(this.app.timeline.tween(this.nimb).to({alpha:1}).setting({repeatDelay:.8,duration:.2,pingPong:!0,repeat:-1})),this.tweenArray.push(this.app.timeline.tween(this.circle).to({angle:-360}).setting({duration:1,repeat:-1}))},e.prototype.switcher=function(t){var e=this;(this.visible=t)&&this.app.sound.playSfx(r.Sounds.TanTick);for(var n=0;n<this.tweenArray.length;n++)t?this.tweenArray[n].isPause?this.tweenArray[n].resume():this.tweenArray[n].start():this.tweenArray[n].pause();t&&this.app.timeline.callback(function(){e.app.sound.playSfx(r.Sounds.TanReady),e.switcher(!1),e.emit(r.Events.TAN_CHANGED)},2)},e.prototype.resize=function(){this.text.position.set(0,-75)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var o=t.call(this)||this;o.app=e,o.background=new i.SliceSprite(o.app,r.Atlases.Interface,"achiv_background",132,36,132,36),o.background.width=870;var s=new n.TextStyle({fontFamily:r.Fonts.Kimberley,fontSize:20,fill:0});return o.doneText=new i.Text(o.app,"all_muscles",s),o.doneText.anchor.set(0,.5),o.addChild(o.background,o.doneText),o.resize(),o}return s(e,t),e.prototype.resize=function(){this.doneText.position.set(15,this.background.height/2)},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(143),n(144),n(145)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"MenuButtonsContainer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"StartAnimation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SaveMenu",{enumerable:!0,get:function(){return r.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(6),n(10),n(5),n(16),n(45)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=h(n),a=l(a);var u=function(t){function e(e){var n=t.call(this)||this;return n.app=e.app,n.playButton=new a.default(e,r.Atlases.Preloader,"sb_background","sb_frame","white_arrow_icon","sb_frame_fill"),n.googleButton=new o.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","google_icon","sb_frame_fill"),n.moreGamesButton=new o.SmallButton(e,r.Atlases.Preloader,"sb_background","sb_frame","white_joystick_icon","sb_frame_fill"),n.addChild(n.playButton,n.googleButton,n.moreGamesButton),n.buttonArray=[n.playButton],i.Utils.isDesktop()||n.buttonArray.push(n.googleButton),n.buttonsSwitcher(!1),n.resize(),n.googleButton.visible=!1,n.moreGamesButton.visible=!1,n.moreGamesButton.alpha=0,n}return s(e,t),e.prototype.block=function(){this.playButton.visible=!1,this.googleButton.visible=!1,this.moreGamesButton.visible=!1},e.prototype.buttonsSwitcher=function(t){if(t)this.showAnimation();else for(var e=0;e<this.buttonArray.length;e++)this.buttonArray[e].visible=t},e.prototype.showAnimation=function(){for(var t=this,e=function(e){n.app.timeline.callback(function(){t.buttonArray[e].visible=!0,t.buttonArray[e].respawnAnimation()},.1+.1*e)},n=this,i=0;i<this.buttonArray.length;i++)e(i)},e.prototype.resize=function(){this.playButton.position.set(0,0),this.googleButton.position.set(120,0),this.moreGamesButton.position.set(180,0)},e}(n.Container);e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.timeline=e.timeline,n.circles=[],n.lines=[],n.createCircleLine(0,40,0),n.createCircleLine(50,40,-120),n.createCircleLine(30,-6,-250),n.createCircleLine(-300,-250,-65),n.createCircleLine(200,-250,-165),n.createCircleLine(170,100,-315),n.createLine(-n.app.scale.width/2-10,-300,0,1.3,1),n.createLine(-n.app.scale.width/2-50,-50,-2.7,1.3,.6),n.createLine(-n.app.scale.width/2-200,-140,-15,1.7,1.5),n.whiteBkg=new i.Sprite(n.app,r.Atlases.Interface,"white"),n.whiteBkg.width=n.app.scale.width,n.whiteBkg.height=n.app.scale.height,n.whiteBkg.anchor.set(.5),n.whiteBkg.alpha=0,n.addChild(n.whiteBkg),n}return s(e,t),e.prototype.createLine=function(t,e,o,s,a){var u=new i.Sprite(this.app,r.Atlases.Interface,"menu_line_2");u.position.set(t,e),u.scale.set(s,a),u.angle=o,this.addChild(u);var h=new n.Graphics;h.beginFill(),h.drawRect(0,0,5,460),h.endFill(),u.addChild(h),u.mask=h,this.lines.push(h)},e.prototype.createCircleLine=function(t,e,n){var o=new i.Sprite(this.app,r.Atlases.Interface,"menu_line");o.position.set(t,e),o.angle=n,o.anchor.set(.5,-1),o.visible=!1,this.circles.push(o),this.addChild(o)},e.prototype.startCircle=function(t){var e=this.circles[t];e.visible=!0,this.app.timeline.tween(e).to({scale:{x:3,y:3},anchor:{y:-1},angle:e.angle-232}).setting({duration:.4}).start(),this.app.timeline.tween(e).to({alpha:0}).setting({duration:.2,delay:.2}).start()},e.prototype.startCircles=function(){var t=this;this.startCircle(0),this.startCircle(1),this.startCircle(2),this.timeline.callback(function(){return t.startCircle(3)},.27),this.timeline.callback(function(){return t.startCircle(4)},.33),this.timeline.callback(function(){return t.startCircle(5)},.4)},e.prototype.startLine=function(t,e){this.app.timeline.tween(this.lines[t]).to({width:1024}).setting({duration:1,delay:e}).start()},e.prototype.start=function(){this.startCircles(),this.startLine(0,.27),this.startLine(1,.18),this.startLine(2,.1),this.app.timeline.tween(this.whiteBkg).to({alpha:1}).setting({duration:.72}).start()},e}((n=h(n)).Container);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(7),n(5),n(23)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return n.app=e,n.savesText=i.Text.create(n.app,"already_saved",r.Fonts.Kimberley,20,16777215),n.icon=new i.Sprite(n.app,r.Atlases.Menu,"save_icon"),n.icon.anchor.set(1,.5),n.icon.x=-n.savesText.width/2-10,n.savesText.addChild(n.icon),n.savesText.x=-n.icon.width/2,n.continueButton=new o.PopupButton(n.app,"continue"),n.continueButton.position.set(-150,n.savesText.y+40),n.clearButton=new o.PopupButton(n.app,"clear"),n.clearButton.position.set(n.continueButton.x,n.continueButton.y+70),n.addChild(n.savesText,n.continueButton,n.clearButton),n.savesText.visible=!1,n.continueButton.visible=!1,n.clearButton.visible=!1,n}return s(e,t),e.prototype.show=function(){this.savesText.visible=!0,this.continueButton.visible=!0,this.clearButton.visible=!0},e}((n=h(n)).Container);e.default=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(19),n(5),n(51)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=a(r);var o=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.init=function(){this.app.analytics.startScene(e.Name),this.app.assetLoader.event.on(i.Events.PRELOAD_COMPLETE,this.startMenu,this),this.app.assetLoader.preload()},e.prototype.startMenu=function(){this.app.sound.init(),this.app.scene.start(r.default.Name),this.app.scene.stop(e.Name)},e.Name="Boot",e}(n.default);e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(19),n(5),n(148),n(15),n(10),n(53),n(20),n(30)],void 0===(r=function(t,e,n,i,r,o,u,h,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.init=function(){this.app.analytics.startScene(e.Name),this.gameConfig=this.app.loader.resources[i.JsonData.GameConfig].data,this.roomName=i.Images.Room1,this.keyboard=new h.Keyboard,this.background=this.addSprite(i.Images.Room2),this.man=new c.Man(this),this.manController=new r.ManController(this),this.statsController=new r.StatsController(this),this.userInterface=new o.UserInterface(this,this.statsController.blockedButtons),this.userInterface.on(i.Events.SHOW_ROOM,this.showRoom,this),this.statsController.setInstances(this.userInterface.gridsController,this.userInterface.statsContainer),this.workoutController=new r.WorkoutController(this),this.achievementsController=new r.AchievementsController(this),this.achievementsController.subscribeOnCosmetic(this.userInterface.gridsController),this.statsController.checkAchiv.on(i.Events.CHECK_ACHIV,this.achievementsController.checkNewAchiv.bind(this.achievementsController),this),this.addChild(this.man,this.userInterface),this.addMusic(),this.app.sound.startRandomMusic(0),this.resize(),this.userInterface.showRoom(i.Images.Room2)},e.prototype.addMusic=function(){for(var t=0;t<this.app.saveManager.stats.musicPlaylist.length;t++)this.app.sound.musicGroup.add("track_"+t,this.app.sound.getPixiSound("track_"+t))},e.prototype.showRoom=function(t,e,n){var i=this;void 0===e&&(e=l.State.IDLE),this.roomName!==t&&(this.roomName=t,this.manController.hide(.35,function(){return i.changeRoom(t,e,n)}))},e.prototype.changeRoom=function(t,e,n){this.background.setTexture(t),this.manController.setState(e,n),this.manController.show(.35)},e.prototype.resize=function(){this.userInterface.resize()},e.prototype.update=function(t){this.userInterface.update(t),this.workoutController.update(t),this.keyboard.update()},e.prototype.final=function(){this.app.timeline.clear(),this.clear()},e.Name="Gameplay",e}((n=a(n)).default);e.default=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(149),n(151),n(152),n(153)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"WorkoutController",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"ManController",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"StatsController",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"AchievementsController",{enumerable:!0,get:function(){return o.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(150),n(20),n(22),n(50),n(10),n(5)],void 0===(r=function(t,e,n,i,r,o,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t){this.scene=t,this.app=this.scene.app,this.keyboard=t.keyboard,this.firstTap=!1,this.isActive=!1,this.upAction=!1,this.isLeft=!1,this.whistleSound=!0,this.effortSound=!1,this.factor=1,this.mobileFactor=s.Utils.isDesktop()?1:.7,this.powerDown=1,this.fullDropDelay=1,this.cardioFactor=0,this.fullHoldDelay=1,this.holdDown=1,this.repsCount=0,this.isDrop=!0,this.timeline=t.app.timeline,this.manController=t.manController,this.userInterface=t.userInterface,this.workoutInterface=this.userInterface.workoutInterface,this.slider=this.workoutInterface.menu.slider,this.statsController=this.scene.statsController,this.gameConfig=t.gameConfig,this.userInterface.gridsController.on(a.Events.WORK,this.start,this)}return t.prototype.start=function(t){if(this.currentConfig=t,this.manConfig=this.gameConfig.man[this.currentConfig],this.option=this.gameConfig.options[this.manConfig.option],this.powerDown=this.option.powerDown||this.gameConfig.powerDown,this.fullDropDelay=this.option.dropDelay||this.gameConfig.dropDelay,this.fullHoldDelay=this.option.holdDelay||this.gameConfig.holdDelay,this.holdDown=this.option.holdDown||this.gameConfig.holdDown,this.factor=1,this.cardioFactor=0,this.actionIndex=0,this.dropDelay=0,this.upAction=!1,this.isLeft=!1,this.firstTap=!1,this.isDrop=!0,this.previousKey=null,this.action=this.option.actions[this.actionIndex],this.currentWorkout=this.currentConfig,this.showRoom(this.option.roomName,this.option.act,this.manConfig.reverseAct),(this.manConfig.index||0===this.manConfig.index)&&("number"==typeof this.manConfig.index?this.manController.man.dumbbells=this.scene.app.saveManager.stats.workoutStats[this.manConfig.index]/1e3:this.manController.man.dumbbells=this.scene.app.saveManager.stats.workoutStats[this.manConfig.index[0]]/1e3),this.holdDelay=this.fullHoldDelay,this.repsCount=this.getRepsCount(),this.workoutInterface.menu.setCountText(this.repsCount),this.isActive=!0,this.workoutInterface.show(),this.userInterface.hide(),this.slider.value=0,!s.Utils.isDesktop())for(var e=0;e<this.option.actions.length;e++)this.option.actions[e].key&&this.workoutInterface.showButton(this.option.actions[e].key);this.workoutInterface.menu.showButton(this.action.key,this.action.type,!0),"twin"===this.action.key&&this.workoutInterface.menu.selectTwin(this.isLeft)},t.prototype.showRoom=function(t,e,n){void 0===e&&(e=i.State.IDLE),this.scene.app.timeline.callback(this.userInterface.showRoom.bind(this.userInterface,t,e,n),.2)},t.prototype.getRepsCount=function(){for(var t=0,e=0;e<this.option.actions.length;e++)this.option.actions[e].type!==o.WorkoutType.DROP&&t++;return t},t.prototype.updateMan=function(t){this.currentWorkout===n.Workout.CARDIO?(this.manController.update(t*this.cardioFactor/200),this.cardioFactor-=t/500,this.cardioFactor<0&&(this.cardioFactor=0),this.manController.man.redHead=this.cardioFactor):this.manController.setValue((this.slider.value+1)/2)},t.prototype.getKey=function(t){return this.keyboard.keyDictionary[t]},t.prototype.checkForFail=function(){this.isActive&&this.slider.value<=-1&&(this.isActive=!1,this.hide(),this.statsController.failWorkout(this.manConfig.failedEnergy),this.statsController.statsInterface.startAnimation(),this.statsController.statsInterface.showFailedText(0))},t.prototype.checkForward=function(t,e){var i;if("twin"===t?(i=this.isLeft?this.getKey(r.KeyType.LEFT):this.getKey(r.KeyType.RIGHT)).pressed&&(this.isLeft=!this.isLeft,this.workoutInterface.menu.selectTwin(this.isLeft),this.currentWorkout===n.Workout.CARDIO&&(this.cardioFactor=1)):i=this.getKey(t),this.action.type!==o.WorkoutType.HOLD&&this.action.type!==o.WorkoutType.DROP||!i.released||(this.holdDelay=this.fullHoldDelay),(i.pressed||this.action.type!==o.WorkoutType.PRESS&&i.isDown)&&(this.firstTap=!0,this.action.type===o.WorkoutType.HOLD||this.action.type===o.WorkoutType.DROP?(this.slider.value+=this.option.speed*this.factor*(1-this.holdDelay/this.fullHoldDelay),this.reduceHoldDelay(e)):this.slider.value+=this.option.speed*this.factor,this.action.type!==o.WorkoutType.DROP&&1===this.slider.value&&(this.whistleSound=!1,this.upAction=!0),.7<this.slider.value&&!this.effortSound)){var s=Math.floor(Math.random()*a.Sounds.effortList.length);this.app.sound.playSfx(a.Sounds.Effort+s),this.effortSound=!0}},t.prototype.reduceHoldDelay=function(t){this.holdDelay-=t/1e3,this.holdDelay<0&&(this.holdDelay=0)},t.prototype.checkDrop=function(t){this.slider.value<=.85&&!this.whistleSound&&(this.app.sound.playSfx(a.Sounds.Whistle),this.whistleSound=!0),this.action.key?this.getKey(this.action.key).isDown&&this.dropDelay<=0&&(this.isDrop=!0,this.slider.value-=this.option.speed*this.factor*this.holdDown*(1-this.holdDelay/this.fullHoldDelay),this.reduceHoldDelay(t)):this.dropDelay<=0&&(this.isDrop=!0),this.dropDelay-=t/1e3,this.slider.value<=0&&(this.effortSound=!1,this.upAction=!0)},t.prototype.increaseAction=function(){if(this.holdDelay=this.fullHoldDelay,this.actionIndex++,this.actionIndex===this.option.actions.length)this.repsCount=0,this.workoutInterface.menu.setCountText(this.repsCount),this.success();else{var t=this.action;this.action.type!==o.WorkoutType.DROP&&(this.repsCount--,this.workoutInterface.menu.setCountText(this.repsCount)),this.action=this.option.actions[this.actionIndex],this.action.type===o.WorkoutType.DROP?(this.dropDelay=this.fullDropDelay,this.isDrop=!1,this.action.key||(this.previousKey=t.key)):(this.slider.value=0,this.whistleSound||(this.app.sound.playSfx(a.Sounds.Whistle),this.whistleSound=!0)),this.workoutInterface.menu.showButton(this.action.key,this.action.type)}this.factor=this.action.factor||this.factor,this.upAction=!1},t.prototype.success=function(){console.log("success"),this.isActive=!1,this.hide(),this.statsController.setWorkout(this.currentConfig)},t.prototype.hide=function(){this.manController.man.redHead=0,this.whistleSound=!0,this.effortSound=!1,this.userInterface.show(),this.workoutInterface.hide(),this.showRoom("room_2")},t.prototype.update=function(t){this.isActive&&(this.action.type===o.WorkoutType.PRESS||this.action.type===o.WorkoutType.HOLD?this.checkForward(this.action.key,t):this.previousKey&&this.checkForward(this.previousKey,t),this.action.type===o.WorkoutType.DROP&&this.checkDrop(t),this.isDrop&&this.firstTap&&(this.slider.value-=this.powerDown*this.mobileFactor*t/1e3),this.updateMan(t),this.upAction&&this.increaseAction(),this.checkForFail())},t}();e.default=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Workout=void 0,function(t){t.TRAPEZE="trapeze",t.LEFT_UPPER_ARM="left_upper_arm",t.RIGHT_UPPER_ARM="right_upper_arm",t.LEFT_LOWER_ARM="left_lower_arm",t.RIGHT_LOWER_ARM="right_lower_arm",t.UPPER_BODY="upper_body",t.ABS="abs",t.UPPER_LEGS="upper_legs",t.LEFT_LOWER_LEG="left_lower_leg",t.RIGHT_LOWER_LEG="right_lower_leg",t.CARDIO="cardio"}(e.Workout||(e.Workout={}))}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(10),n(20)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.app=t.app,this.scene=t,this.man=this.scene.man,this.gameConfig=t.gameConfig,this.stats=this.app.saveManager.stats,this.workoutStats=this.stats.workoutStats.slice()}return t.prototype.setGlasses=function(t){this.man.setGlasses(t),this.stats.glasses=t,this.app.saveManager.save()},t.prototype.setBling=function(t){this.man.setBling(t),this.stats.bling=t,this.app.saveManager.save()},t.prototype.setHair=function(t){this.man.setHair(t),this.stats.hair=t,this.app.saveManager.save()},t.prototype.refreshTan=function(){this.man.tan=0,this.man.spine.update(0),this.stats.bronzage=0,this.app.saveManager.save()},t.prototype.tan=function(t){var e=this,n=this.man.tan+.05*t;this.app.timeline.tween(this.man).to({tan:n}).setting({duration:1,onUpdate:function(){e.man.spine.update(0)},onComplete:function(){e.stats.bronzage=e.man.tan,e.app.saveManager.save()}}).start()},t.prototype.updatePartsByConfig=function(t){var e=this.getPartPercent(t);if(-1===this.man.spine.scale.x&&t.reverseConfig&&this.gameConfig.man[t.reverseConfig]&&(t=this.gameConfig.man[t.reverseConfig]),t.parts)for(var n=0;n<t.parts.length;n++){var i=t.parts[n];this.man.setBody(i,30*e)}},t.prototype.getPartPercent=function(t){var e=0;return(t.index||0===t.index)&&(e="number"==typeof t.index?this.workoutStats[t.index]/1e3:this.workoutStats[t.index[0]]/1e3),e},t.prototype.setState=function(t,e){void 0===t&&(t=i.State.IDLE),this.man.currentState!==t&&(this.man.setState(t,e),this.updateParts())},t.prototype.updateParts=function(){for(var t in this.gameConfig.man)if(Object.prototype.hasOwnProperty.call(this.gameConfig.man,t)){var e=this.gameConfig.man[t];this.updatePartsByConfig(e)}this.updateMouth()},t.prototype.updateMouth=function(){this.man.setMouth(Math.round(10*this.stats.levelPoints/(1e3*this.workoutStats.length))+1)},t.prototype.checkTween=function(){this.tween&&(this.tween.stop(!1),this.tween=null)},t.prototype.hide=function(t,e){void 0===t&&(t=.2),this.checkTween(),this.tween=this.app.timeline.tween(this.man).to({x:500}).setting({duration:t,onComplete:e}).start()},t.prototype.show=function(t){void 0===t&&(t=.2),this.checkTween(),this.tween=this.app.timeline.tween(this.man).to({x:0}).setting({duration:t}).start()},t.prototype.setValue=function(t){this.man.manTrack&&(t=n.Utils.clamp(t),this.man.manTrack.trackTime=t*(this.man.manTrack.animationEnd-.01),this.man.spine.update(0))},t.prototype.update=function(t){this.man.manTrack.trackTime+=t,this.man.spine.update(0)},t}();e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(10),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.app=t.app,this.gameOverWasShowed=!1,this.checkAchiv=new PIXI.utils.EventEmitter,this.gameConfig=t.gameConfig,this.stats=this.app.saveManager.stats,this.manController=t.manController,this.initBlockedButtons(),this.initBody(),this.updateButtonsAvailabling()}return t.prototype.setInstances=function(t,e){this.gridsInterface=t,this.statsInterface=e,this.gridsInterface.on(i.Events.EAT,this.setFood,this),this.gridsInterface.on(i.Events.BOOST,this.setBooster,this),this.checkGameOver()},t.prototype.initBlockedButtons=function(){this.blockedButtons={main:[!1,!0,!1,!1],boosters:[!0,!0,!0,!0,!0],pictures:[],videos:[],musicPlaylist:this.stats.musicPlaylist,achievements:this.stats.achievements};for(var t=0;t<10;t++)this.blockedButtons.pictures.push(!(t<this.stats.level)),this.blockedButtons.videos.push(!(t<this.stats.level));1<=this.stats.level&&(this.blockedButtons.main[1]=!1)},t.prototype.initBody=function(){this.manController.updateParts(),this.manController.man.belly=this.stats.fat,this.manController.man.setGlasses(this.stats.glasses),this.manController.man.setBling(this.stats.bling),this.manController.man.setHair(this.stats.hair),this.manController.man.tan=this.stats.bronzage,this.manController.man.bags=this.stats.health,this.manController.update(0)},t.prototype.setWorkout=function(t){for(var e=0,n=0;n<this.stats.boosters.length-1;n++)0<this.stats.boosters[n]&&(this.stats.boosters[n]-=.5,e+=this.gameConfig.boostersScore[n]);var r=this.gameConfig.man[t];(r.index||0===r.index)&&this.upWorkout(r,e),this.updateLevel(),this.setNeeds(r),this.app.sound.playSfx(i.Sounds.Showing),this.statsInterface.startAnimation(),this.checkGameOver()},t.prototype.upWorkout=function(t,e){if(void 0===e&&(e=0),t.index||0===t.index)if("number"==typeof t.index)this.upWorkoutStats(t.index,t.workout,e);else for(var n=0;n<t.index.length;n++)this.upWorkoutStats(t.index[n],t.workout,e)},t.prototype.upWorkoutStats=function(t,e,i){return this.stats.workoutStats[t]=n.Utils.clamp(this.stats.workoutStats[t]+e+i,1e3),this.stats.workoutStats[t]/1e3},t.prototype.setFood=function(t){var e=Object.assign({},this.gameConfig.food[t]);this.app.sound.playSfx(i.Sounds.Eat),e.healthy&&this.stats.healtyFoodCounter++,e.energy=2*(this.stats.energy+e.energy),this.setNeeds(e),this.statsInterface.startAnimation()},t.prototype.setNeeds=function(t){t.energy&&(this.stats.energy=n.Utils.floatClamp(this.stats.energy+t.energy)),t.health&&(this.stats.health=n.Utils.floatClamp(this.stats.health+t.health),this.manController.man.bags=this.stats.health),t.fat&&(this.stats.fat=n.Utils.floatClamp(this.stats.fat+t.fat),this.manController.man.belly=this.stats.fat),t.cardio&&(this.stats.cardio=n.Utils.floatClamp(this.stats.cardio+t.cardio)),this.updateButtonsAvailabling(),this.checkAchiv.emit(i.Events.CHECK_ACHIV),this.app.saveManager.save()},t.prototype.failWorkout=function(t){this.stats.energy=n.Utils.floatClamp(this.stats.energy+t),this.updateButtonsAvailabling(),this.app.saveManager.save()},t.prototype.setBooster=function(t){var e=this,n=this.gameConfig.boosters[t];if(this.stats.boosters[n.index]=n.value,this.stats.availableBoosters[n.index]-=1,4===n.index){for(var r=0;r<this.gridsInterface.iconGridsConfigs.workoutConfig.buttons.length;r++){var o=this.gridsInterface.iconGridsConfigs.workoutConfig.buttons[r];"string"==typeof o.params?this.upWorkout(this.gameConfig.man[o.params]):(this.upWorkout(this.gameConfig.man[o.params.leftWorkout]),this.upWorkout(this.gameConfig.man[o.params.rightWorkout]))}this.updateLevel()}this.app.sound.playSfx(n.sound?n.sound:i.Sounds.TakeBooster),this.setNeeds(n),this.gridsInterface.boosterAnimation(n.index,function(){return e.statsInterface.startAnimation()},function(){return e.statsInterface.boosterAppearence()})},t.prototype.updateLevel=function(){for(var t=this.stats.levelPoints=0;t<this.stats.workoutStats.length;t++)this.stats.levelPoints+=this.stats.workoutStats[t];this.stats.levelPoints>=this.gameConfig.levels[this.stats.level]&&this.stats.level<=this.gameConfig.levels.length&&(this.stats.level++,this.levelUpCallback())},t.prototype.levelUpCallback=function(){1===this.stats.level&&(this.blockedButtons.main[1]=!1),this.blockedButtons.videos[this.stats.level]=!1,this.blockedButtons.pictures[this.stats.level]=!1,this.stats.availableBoosters=this.gameConfig.boostersCount[this.stats.level],this.updateButtonsAvailabling()},t.prototype.updateButtonsAvailabling=function(){for(var t=0;t<this.blockedButtons.boosters.length;t++)0!==this.stats.availableBoosters[t]&&0===this.stats.boosters[t]?this.blockedButtons.boosters[t]=!1:this.blockedButtons.boosters[t]=!0;this.stats.energy<=.2?this.blockedButtons.main[0]=!0:this.blockedButtons.main[0]=!1,1===this.stats.energy?this.blockedButtons.main[2]=!0:this.blockedButtons.main[2]=!1},t.prototype.checkGameOver=function(){for(var t=0,e=0;e<this.stats.workoutStats.length;e++)1e3<=this.stats.workoutStats[e]&&t++;t!==this.stats.workoutStats.length||this.gameOverWasShowed||(this.statsInterface.gameOverShow(),this.gameOverWasShowed=!0)},t}();e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.app=t.app,this.scene=t,this.achievementsConfig=t.gameConfig.achievements,this.stats=this.app.saveManager.stats,this.stats.healtyFoodCounter=0,this.operations=new Map,this.operations.set(">=",function(t,e){return e<=t}),this.operations.set("<=",function(t,e){return t<=e}),this.checkNewAchiv()}return t.prototype.subscribeOnCosmetic=function(t){t.on(n.Events.GLASSES,this.checkNewAchiv.bind(this),this),t.on(n.Events.BLING,this.checkNewAchiv.bind(this),this),t.on(n.Events.HAIRCUT,this.checkNewAchiv.bind(this),this),t.on(n.Events.REFRESH_TAN,this.checkNewAchiv.bind(this),this),t.on(n.Events.TAN,this.checkNewAchiv.bind(this),this)},t.prototype.checkNewAchiv=function(){for(var t=0,e=0,i=0,r="",o=0;o<this.achievementsConfig.length;o++)if(!this.stats.achievements[o]){for(var s=0;s<this.achievementsConfig[o].ifs.length;s++)t=this.getPathValue(this.achievementsConfig[o].ifs[s].path),e=this.achievementsConfig[o].ifs[s].compareValue,r=this.achievementsConfig[o].ifs[s].operation,this.getCompareResult(t,r,e)&&i++;i===this.achievementsConfig[o].ifs.length&&(this.scene.emit(n.Events.GET_ACHIV,o+1),this.stats.achievements[o]=!0,this.app.saveManager.save()),i=0}},t.prototype.getCompareResult=function(t,e,n){if("number"==typeof t)return this.operations.get(e)(t,n);for(var i=0,r=0;r<t.length;r++)return this.operations.get(e)(t[r],n)&&i++,i===t.length-1},t.prototype.getPathValue=function(t){return t.includes("[")?this.getArrayElement(t):this.stats[t]},t.prototype.getArrayElement=function(t){var e=Number(t.charAt(t.indexOf("[")+1)),n=t.substring(0,t.indexOf("["));return this.stats[n][e]},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return u(e,t),e};i=[n,e,n(6),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.isDown=!1,n.isUp=!0,n.pressed=!1,n.released=!1,n.value=e,window.addEventListener(i.Events.KEY_DOWN,n.onDown.bind(n),!1),window.addEventListener(i.Events.KEY_UP,n.onUp.bind(n),!1),n}return s(e,t),e.prototype.onDown=function(t){t.key===this.value&&(this.isDown||(this.pressed=!0,this.isDown=!0,this.isUp=!1,this.emit(i.Events.KEY_DOWN,this.value),t.preventDefault()))},e.prototype.onUp=function(t){this.isUp||t.key!==this.value||(this.released=!0,this.isDown=!1,this.isUp=!0,this.emit(i.Events.KEY_UP,this.value),t.preventDefault())},e.prototype.clear=function(){this.pressed=!1,this.released=!1},e}((n=h(n)).utils.EventEmitter);e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(53),n(10),n(22)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.keys=[],this.keyDictionary={},i.Utils.isDesktop()&&(this.leftArrow=this.createKey(r.KeyType.LEFT),this.rightArrow=this.createKey(r.KeyType.RIGHT),this.downArrow=this.createKey(r.KeyType.DOWN),this.upArrow=this.createKey(r.KeyType.UP),this.space=this.createKey(r.KeyType.SPACE))}return t.prototype.createKey=function(t){var e=new n.Key(t);return this.keys.push(e),this.keyDictionary[t]=e},t.prototype.addKey=function(t,e){this.keyDictionary[e]||(this.keyDictionary[e]=t,this.keys.push(t))},t.prototype.update=function(){for(var t=0;t<this.keys.length;t++)this.keys[t].clear()},t}();e.default=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(41),n(157),n(158),n(160),n(162)],void 0===(r=function(t,e,n,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ScaleManager",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"SceneManager",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Localization",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"AssetLoader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SaveManager",{enumerable:!0,get:function(){return s.default}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(6),n(7)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.app=t,this.scenes={},this.all=[],this.mainContainer=new n.Container,this.topInterface=new i.TopInterface,this.app.stage.addChild(this.mainContainer),this.app.stage.addChild(this.topInterface)}return t.prototype.add=function(t,e){this.scenes[t]=e,this.all.push(e)},t.prototype.remove=function(t){var e=this.all.indexOf(this.scenes[t]);-1!==e&&this.all.splice(e,1),this.scenes[t]=null},t.prototype.start=function(t){this.scenes[t].enabled=!0},t.prototype.stop=function(t){this.scenes[t].enabled=!1},t.prototype.update=function(t){for(var e=0;e<this.all.length;e++)!(n=this.all[e]).enabled&&n.isInit&&(this.mainContainer.removeChild(n),n.isInit=!1,n.final());for(e=0;e<this.all.length;e++)(n=this.all[e]).enabled&&!n.isInit&&(this.mainContainer.addChild(n),n.isInit=!0,n.init());for(e=0;e<this.all.length;e++){var n;(n=this.all[e]).enabled&&n.isInit&&!n.pause&&n.update(t)}this.topInterface.update(t)},t}();e.default=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(5),n(159),n(167)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=o(i),r=o(r);var s=function(){function t(t){this.app=t,this.texts=[],this.i18n=r.default.createInstance(),this.i18n.use(i.default)}return t.prototype.init=function(){this.data=this.app.loader.resources[n.JsonData.Localization].data,this.i18n.init({fallbackLng:"en",resources:this.data,debug:!1}),this.languages=this.i18n.languages},t.prototype.changeLanguage=function(t,e){var n=this;this.i18n.changeLanguage(t,function(t,i){return n.updateTexts(t,i,e)})},t.prototype.updateTexts=function(t,e,n){for(var i=0;i<this.texts.length;i++)this.texts[i].updateLocalization();n&&n(t,e)},t.prototype.t=function(t,e){return this.i18n.t(t,e)},t.prototype.saveText=function(t){this.texts.push(t)},t.prototype.removeText=function(t){for(var e=0;e<this.texts.length;e++)if(this.texts[e]===t)return void this.texts.splice(e,1)},t}();e.default=s}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.r(e);var i=n(13),r=n(14),o=[],s=o.forEach,a=o.slice;var h=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,c=function(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*n*1e3)),i&&(r.domain=i),document.cookie=function(t,e,n){var i=n||{};i.path=i.path||"/";var r=t+"="+encodeURIComponent(e);if(0<i.maxAge){var o=i.maxAge-0;if(isNaN(o))throw new Error("maxAge should be a Number");r+="; Max-Age="+Math.floor(o)}if(i.domain){if(!h.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!h.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}(t,encodeURIComponent(e),r)},d={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&"undefined"!=typeof document){var n=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&"undefined"!=typeof document&&c(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},f={name:"querystring",lookup:function(t){var e;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("=");0<r&&n[i].substring(0,r)===t.lookupQuerystring&&(e=n[i].substring(r+1))}return e}},g=null,m=function(){if(null!==g)return g;try{g="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(t){g=!1}return g},v={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&m()){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&m()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},y=null,_=function(){if(null!==y)return y;try{y="undefined"!==window&&null!==window.sessionStorage,window.sessionStorage.setItem("i18next.translate.boo","foo"),window.sessionStorage.removeItem("i18next.translate.boo")}catch(t){y=!1}return y},b={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&_()){var n=window.sessionStorage.getItem(t.lookupSessionStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&_()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},x={name:"navigator",lookup:function(t){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return 0<e.length?e:void 0}},w={name:"htmlTag",lookup:function(t){var e,n=t.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(e=n.getAttribute("lang")),e}},T={name:"path",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof t.lookupFromPathIndex){if("string"!=typeof n[t.lookupFromPathIndex])return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},S={name:"subdomain",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(e="number"==typeof t.lookupFromSubdomainIndex?n[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return e}},P=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return Object(r.a)(t,[{key:"init",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=function(t){return s.call(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t}(e,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(d),this.addDetector(f),this.addDetector(v),this.addDetector(b),this.addDetector(x),this.addDetector(w),this.addDetector(T),this.addDetector(S)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var e=this;t||(t=this.options.order);var n=[];return t.forEach(function(t){if(e.detectors[t]){var i=e.detectors[t].lookup(e.options);i&&"string"==typeof i&&(i=[i]),i&&(n=n.concat(i))}}),this.services.languageUtils.getBestMatchFromCodes?n:0<n.length?n[0]:null}},{key:"cacheUserLanguage",value:function(t,e){var n=this;e||(e=this.options.caches),e&&(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(t)||e.forEach(function(e){n.detectors[e]&&n.detectors[e].cacheUserLanguage(t,n.options)}))}}]),t}();P.type="languageDetector",e.default=P},function(t,e,n){var i,r,o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e};i=[n,e,n(6),n(5),n(161),n(10)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=a(r);var s=function(){function t(t){this.app=t,this.isFontsLoaded=!1,this.isAssetsLoaded=!1,this.max=0,this.current=0,this.percent=0,this.event=new n.utils.EventEmitter,this.app.loader.onLoad.add(this.onLoadAsset,this)}return t.prototype.onLoadAsset=function(){this.current++,this.percent=this.current/this.max,this.event.emit(i.Events.ASSET_LOADED)},t.prototype.load=function(){var t=this;this.current=0,i.Sounds.fillList(),this.max=i.JsonData.list.length+i.Images.list.length+2*i.Atlases.list.length+i.Sounds.list.length+i.Sounds.effortList.length+i.Fonts.list.length+i.Spines.list.length,i.JsonData.list.forEach(function(e){t.app.loader.add(e,"assets/json/"+e+".json")}),i.Images.list.forEach(function(e){t.app.loader.add(e,"assets/images/"+e+".png")}),i.Atlases.list.forEach(function(e){t.app.loader.add(e,"assets/atlases/"+e+".json")}),i.Sounds.list.forEach(function(e){"iOS"===o.Utils.getOs()?t.app.loader.add(e,"assets/sounds/m4a/"+e+".m4a"):t.app.loader.add(e,"assets/sounds/ogg/"+e+".ogg")}),i.Sounds.effortList.forEach(function(e){"iOS"===o.Utils.getOs()?t.app.loader.add(e,"assets/sounds/m4a/"+e+".m4a"):t.app.loader.add(e,"assets/sounds/ogg/"+e+".ogg")}),this.app.loader.onComplete.once(this.assetsLoaded,this),this.app.loader.load();for(var e=[],n=0;n<i.Fonts.list.length;n++)e[n]="assets/fonts/"+i.Fonts.list[n]+"/"+i.Fonts.list[n]+".css";r.load({custom:{families:i.Fonts.list,urls:e},active:function(){return t.fontLoaded()},fontloading:function(){return t.current++},inactive:function(){return t.fontNotLoaded()}})},t.prototype.fontNotLoaded=function(){console.warn("WebFont not loaded"),this.fontLoaded()},t.prototype.fontLoaded=function(){this.isFontsLoaded=!0,this.checkForComplete()},t.prototype.assetsLoaded=function(){this.isAssetsLoaded=!0,this.checkForComplete()},t.prototype.checkForComplete=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.isFontsLoaded&&this.isAssetsLoaded&&(i.Spines.list.forEach(function(e){var i=new n.spine.core.TextureAtlas;if(1===e.atlases.length)e.textures=t.app.loader.resources[e.atlases[0]].textures,i.addTextureHash(e.textures,!0);else if(1<e.atlases.length){for(var r={},o=0;o<e.atlases.length;o++){var s=e.atlases[o];for(var a in t.app.loader.resources[s].textures)Object.prototype.hasOwnProperty.call(t.app.loader.resources[s].textures,a)&&(r[a]=t.app.loader.resources[s].textures[a])}i.addTextureHash(r,!0),e.textures=r}t.app.loader.add(e.name,"assets/spines/"+e.name+".json",{metadata:{spineAtlas:i}})}),this.app.loader.onComplete.once(this.onSpineComplete,this),this.app.loader.load())},t.prototype.onSpineComplete=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.utils.clearTextureCache(),this.event.emit(i.Events.LOAD_COMPLETE,t)},t.prototype.preload=function(){var t=this;this.current=0,this.max=2*i.Atlases.prelist.length,i.Atlases.prelist.forEach(function(e){t.app.loader.add(e,"assets/atlases/"+e+".json")}),this.app.loader.onComplete.once(this.checkPreloadComplete,this),this.app.loader.load()},t.prototype.checkPreloadComplete=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.event.emit(i.Events.PRELOAD_COMPLETE,t)},t}();e.default=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;!function(){function r(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(t,e,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o).apply(null,arguments)}var a=Date.now||function(){return+new Date};function u(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var h=!!window.FontFace;function l(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function c(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,s=0;s<i.length;s+=1)if(e[r]===i[s]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,s=0;s<n.length;s+=1)if(i[r]===n[s]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function g(t,e,n){function i(){a&&r&&(a(s),a=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,s=null,a=n||null;h?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout(function(){r=!0,i()},0),c(t,"head",e)}function m(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=l(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){s||(s=!0,n&&n(Error("Script load timeout")))},i||5e3),o}return null}function v(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,b(t)}}function _(t,e){t.c=e,b(t)}function b(t){0==t.a&&t.c&&(t.c(),t.c=null)}function x(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function T(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function S(t){return t.a+t.f}function P(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function O(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function E(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new x("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function A(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),d(t.f,n,i)}I(t,"inactive")}function I(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,S(n)):t.h[e]())}function C(){this.c={}}function M(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function R(t){c(t.c,"body",t.a)}function k(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+T(t.c)+";font-style:"+P(t)+";font-weight:"+t.f+"00;"}function D(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function L(t,e,n,i,r,o,s){this.v=t,this.B=e,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),t=k(t=new w(this.a.c+",serif",S(this.a))),this.g.a.style.cssText=t,t=k(t=new w(this.a.c+",sans-serif",S(this.a))),this.h.a.style.cssText=t,t=k(t=new w("serif",S(this.a))),this.j.a.style.cssText=t,t=k(t=new w("sans-serif",S(this.a))),this.m.a.style.cssText=t,R(this.g),R(this.h),R(this.j),R(this.m)}x.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},D.prototype.start=function(){var t=this.c.o.document,e=this,n=a(),i=new Promise(function(i,r){!function o(){a()-n>=e.f?r():t.fonts.load(function(t){return P(t)+" "+t.f+"00 300px "+T(t.c)}(e.a),e.h).then(function(t){1<=t.length?i():setTimeout(o,25)},function(){r()})}()}),r=null,o=new Promise(function(t,n){r=setTimeout(n,e.f)});Promise.race([o,i]).then(function(){r&&(clearTimeout(r),r=null),e.g(e.a)},function(){e.j(e.a)})};var B={D:"serif",C:"sans-serif"},N=null;function F(){if(null===N){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return N}function j(t,e,n){for(var i in B)if(B.hasOwnProperty(i)&&e===t.f[B[i]]&&n===t.f[B[i]])return!0;return!1}function V(t,e){setTimeout(s(function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),e(this.a)},t),0)}function X(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}L.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),function U(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=F()&&j(t,n,i)),e?a()-t.A>=t.w?F()&&j(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?V(t,t.v):V(t,t.B):function(t){setTimeout(s(function(){U(this)},t),50)}(t):V(t,t.v)}(this)};var G=null;function H(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&d(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),I(t,"active")):A(t.a))}function W(t){this.j=t,this.a=new C,this.h=0,this.f=this.g=!0}function z(t,e,n,i,r){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=r||null,a=i||{};if(0===n.length&&o)A(e.a);else{e.f+=n.length,o&&(e.j=o);var u,h=[];for(u=0;u<n.length;u++){var l=n[u],c=a[l.c],p=e.a,f=l;if(p.g&&d(p.f,[p.a.c("wf",f.c,S(f).toString(),"loading")]),I(p,"fontloading",f),(p=null)===G)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);G=f?42<parseInt(f[1],10):!g}else G=!1;p=G?new D(s(e.g,e),s(e.h,e),e.c,l,e.s,c):new L(s(e.g,e),s(e.h,e),e.c,l,e.s,t,c),h.push(p)}for(u=0;u<h.length;u++)h[u].start()}},0)}function Y(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=e||""}X.prototype.g=function(t){var e=this.a;e.g&&d(e.f,[e.a.c("wf",t.c,S(t).toString(),"active")],[e.a.c("wf",t.c,S(t).toString(),"loading"),e.a.c("wf",t.c,S(t).toString(),"inactive")]),I(e,"fontactive",t),this.m=!0,H(this)},X.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,S(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,S(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,S(t).toString(),"inactive")),d(e.f,i,r)}I(e,"fontinactive",t),H(this)},W.prototype.load=function(t){this.c=new u(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],r=n.timeout;!function(t){t.g&&d(t.f,[t.a.c("wf","loading")]),I(t,"loading")}(e),i=function(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}(t.a,n,t.c);var o=new X(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load(function(e,n,i){z(t,o,e,n,i)})}(this,new E(this.c,t),t)},Y.prototype.load=function(t){var e=this,n=e.a.projectId,i=e.a.version;if(n){var r=e.c.o;m(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(i?"?v="+i:""),function(i){i?t([]):(r["__MonotypeConfiguration__"+n]=function(){return e.a},function e(){if(r["__mti_fntLst"+n]){var i,o=r["__mti_fntLst"+n](),s=[];if(o)for(var a=0;a<o.length;a++){var u=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(i=o[a].fontStyle+o[a].fontWeight,s.push(new w(u,i))):s.push(new w(u))}t(s)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+n}else t([])},q.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},s=new v;for(e=0,n=i.length;e<n;e++)g(this.c,i[e],y(s));var a=[];for(e=0,n=r.length;e<n;e++)if((i=r[e].split(":"))[1])for(var u=i[1].split(","),h=0;h<u.length;h+=1)a.push(new w(i[0],u[h]));else a.push(new w(i[0]));_(s,function(){t(a,o)})};function Q(t){this.f=t,this.a=[],this.c={}}var J={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function nt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function rt(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}nt.prototype.load=function(t){var e=new v,n=this.c,i=new K(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}(i,r);var o=new Q(r);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,u=(a=a.split(",")).length,h=0;h<u;h++){var l;if((l=a[h]).match(/^[\w-]+$/))if(null==(p=et.exec(l.toLowerCase())))l="";else{if(l=null==(l=p[2])||""==l?"n":tt[l],null==(p=p[1])||""==p)p="4";else var p=$[p]||(isNaN(p)?"4":p.substr(0,1));l=[l,p].join("")}else l="";l&&s.push(l)}0<s.length&&(o=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=J[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=J[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new w(r,o[i]))}}(o),g(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),y(e)),_(e,function(){t(o.a,o.c,it)})},rt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],s=e[r+1],a=0;a<s.length;a++)i.push(new w(o,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}},2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var s=n.fonts[r];i.a.push(new w(s.name,O("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var st=new W(window);st.a.c.custom=function(t,e){return new q(e,t)},st.a.c.fontdeck=function(t,e){return new ot(e,t)},st.a.c.monotype=function(t,e){return new Y(e,t)},st.a.c.typekit=function(t,e){return new rt(e,t)},st.a.c.google=function(t,e){return new nt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,n,e,t))||(t.exports=i)}()},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){(this._volume=1,localStorage)?(this.savesNotWork=!1,null==localStorage.getItem("douchebag-workout")?(this.setInitValues(),this.save()):this.restore()):(this.savesNotWork=!0,this.setInitValues())}return t.prototype.setInitValues=function(){this._volume=1,this.stats||(this.stats=new n.Stats),this.stats.tutorialWasShowed=!1,this.stats.level=0,this.stats.levelPoints=0,this.stats.workoutStats=this.createArray(11,0),this.stats.energy=.75,this.stats.health=.75,this.stats.fat=0,this.stats.cardio=0,this.stats.tracks=this.createArray(12,!0),this.stats.achievements=this.createArray(10,!1),this.stats.boosters=this.createArray(5,0),this.stats.bling=1,this.stats.hair=1,this.stats.glasses=1,this.stats.bronzage=0,this.stats.availableBoosters=this.createArray(5,0),this.stats.musicPlaylist=this.createArray(12,!0),this.stats.healtyFoodCounter=0},t.prototype.createArray=function(t,e){for(var n=[],i=0;i<t;i++)n.push(e);return n},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.save()},enumerable:!1,configurable:!0}),t.prototype.save=function(){if(!this.savesNotWork){var t=JSON.stringify({volume:this._volume,stats:this.stats}),e=this.hash(t);localStorage.setItem("douchebag-workout",t),localStorage.setItem("douchebag-workouth",e)}},t.prototype.restore=function(){var t=this;if(!this.savesNotWork){var e,n,i=localStorage.getItem("douchebag-workout"),r=localStorage.getItem("douchebag-workouth");Promise.all([i,r]).then(function(i){if(e=i[0]||"",n=i[1]||"0",""!==e)if(n===t.hash(e)){if(e)try{var r=JSON.parse(e);t._volume=r.volume,t.stats=r.stats,r.stats&&(0===r.volume||r.volume)&&r.stats.availableBoosters||t.setInitValues(),t.save()}catch(t){console.warn("Unable to parse save game.",t)}}else console.warn("Incorrect save data.");else console.log("No saved data.")})}},t.prototype.hash=function(t){var e,n,i=0;if(0===t.length)return i.toString();for(e=0,n=t.length;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i.toString()},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(55)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var i=function(){function t(){this._gain=1,this.soundDictionary={},this.sounds=[]}return Object.defineProperty(t.prototype,"gain",{get:function(){return this._gain},set:function(t){this._gain=t;for(var e=0;e<this.sounds.length;e++)this.sounds[e].gain=this._gain},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){var i=new n.default(e);return(this.soundDictionary[t]=i).gainGroup&&i.gainGroup.remove(t),i.gainGroup=this,i.gain=this.gain,this.sounds.push(i),i},t.prototype.get=function(t,e){var n=this.soundDictionary[t];return!n&&e&&this.add(t,e),n},t.prototype.remove=function(t){var e=this.soundDictionary[t];this.soundDictionary[t]=null,e.gainGroup=null;for(var n=0;n<this.sounds.length;n++)if(e===this.sounds[n]){this.sounds.splice(n,1);break}},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(56),n(54),n(21)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var s=function(){function t(t){this._pauseOnBlur=!1,this.app=t,this.newTrackDelay=0,this.musicGroup=new i.GainGroup,this.sfxGroup=new i.GainGroup,this.context=n.default.context}return t.prototype.init=function(){this.sfxGroup.gain=this.app.saveManager.volume,this.musicGroup.gain=this.app.saveManager.volume},Object.defineProperty(t.prototype,"pauseOnBlur",{get:function(){return this._pauseOnBlur},set:function(t){!this._pauseOnBlur&&t?(window.addEventListener("blur",this.onBlur.bind(this)),window.addEventListener("focus",this.onFocus.bind(this))):this._pauseOnBlur&&!t&&(window.removeEventListener("blur",this.onBlur.bind(this)),window.removeEventListener("focus",this.onFocus.bind(this))),this._pauseOnBlur=t},enumerable:!1,configurable:!0}),t.prototype.onBlur=function(){r.AdHandler.getInstance().setGameState(!0)},t.prototype.onFocus=function(){r.AdHandler.getInstance().setGameState(!1)},t.prototype.getPixiSound=function(t){return this.app.loader.resources[t]&&this.app.loader.resources[t].sound||console.error("Sound not found: "+t),this.app.loader.resources[t].sound},t.prototype.playSfx=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var i=this.sfxGroup.get(t);return i||(i=this.sfxGroup.add(t,this.getPixiSound(t))),i.volume=e,i.sound.loop=n,0!==this.context.audioContext.currentTime&&i.sound.play(),i},t.prototype.stopSfx=function(t){var e=this.sfxGroup.get(t);if(e)return e.sound.stop(),e},t.prototype.playMusic=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var i=this.musicGroup.get(t);return i||(i=this.musicGroup.add(t,this.getPixiSound(t))),this.stopMusic(),this.music=i,this.music.volume=e,this.music.sound.loop=n,this.music.sound.play(),this.music},t.prototype.startRandomMusic=function(t){var e=this,n=this.getAvailableMusic();if(this.newTrackDelay=void 0!==t?t:this.newTrackDelay,0!==n.length){var i=Math.floor(Math.random()*n.length);this.newTrackDelay=this.playMusic("track_"+n[i]).sound.duration,this.currentTrackIndex=n[i],this.app.timeline.callback(function(){e.startRandomMusic()},this.newTrackDelay,!1,this)}else this.stopMusic()},t.prototype.updateMusic=function(){for(var t=this.getAvailableMusic(),e=0,n=0;n<t.length;n++)t[n]===this.currentTrackIndex&&e++;0!==e&&this.music.sound.isPlaying||(this.stopMusic(),this.app.timeline.clearCallbacks(this),this.startRandomMusic(0))},t.prototype.getAvailableMusic=function(){for(var t=[],e=0;e<this.app.saveManager.stats.musicPlaylist.length;e++)this.app.saveManager.stats.musicPlaylist[e]&&t.push(e);return t},t.prototype.stopMusic=function(){return this.music&&this.music.sound.stop(),this.music},t}();e.default=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(10)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,n.Config.BLOCK_ANALYTICS||(ga("create",n.Config.GA_ID,"auto"),n.Utils.loadScript("https://www.google-analytics.com/analytics.js"))}return t.prototype.startScene=function(t){ga("send","event","startScene",t)},t.prototype.send=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ga("send",t)},t}();e.default=i}.apply(e,i))||(t.exports=r)},function(t,e){var n,i,r,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});!function(t){!function(t){var e,n,i,r=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var i=0;i<e.length;i++)this.timelineIds[e[i].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,n,i,r,o,s,a){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var u=this.timelines,h=0,l=u.length;h<l;h++)u[h].apply(t,e,n,r,o,s,a)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var i=0,r=t.length/n-2;if(0==r)return n;for(var o=r>>>1;;){if(t[(o+1)*n]<=e?i=o+1:r=o,i==r)return(i+1)*n;o=i+r>>>1}},t.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;i<=r;i+=n)if(t[i]>e)return i;return-1},t}();t.Animation=r,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(n=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(i=t.TimelineType||(t.TimelineType={}));var s=function(){function e(n){if(n<=0)throw new Error("frameCount must be > 0: "+n);this.curves=t.Utils.newFloatArray((n-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var n=t*e.BEZIER_SIZE;if(n==this.curves.length)return e.LINEAR;var i=this.curves[n];return i==e.LINEAR?e.LINEAR:i==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,n,i,r,o){var s=.03*(2*-n+r),a=.03*(2*-i+o),u=.006*(3*(n-r)+1),h=.006*(3*(i-o)+1),l=2*s+u,c=2*a+h,p=.3*n+s+.16666667*u,d=.3*i+a+.16666667*h,f=t*e.BEZIER_SIZE,g=this.curves;g[f++]=e.BEZIER;for(var m=p,v=d,y=f+e.BEZIER_SIZE-1;f<y;f+=2)g[f]=m,g[f+1]=v,p+=l,d+=c,l+=u,c+=h,m+=p,v+=d},e.prototype.getCurvePercent=function(n,i){i=t.MathUtils.clamp(i,0,1);var r=this.curves,o=n*e.BEZIER_SIZE,s=r[o];if(s==e.LINEAR)return i;if(s==e.STEPPED)return 0;for(var a=0,u=++o,h=o+e.BEZIER_SIZE-1;o<h;o+=2)if((a=r[o])>=i){var l=void 0,c=void 0;return(c=o==u?l=0:(l=r[o-2],r[o-1]))+(r[o+1]-c)*(i-l)/(a-l)}var p=r[o-1];return p+(1-p)*(i-a)/(1-a)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}(),a=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=n},s.prototype.apply=function(t,n,i,o,a,u,h){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(i<l[0])switch(u){case e.setup:return void(c.rotation=c.data.rotation);case e.first:var p=c.data.rotation-c.rotation;c.rotation+=(p-360*(16384-(16384.499999999996-p/360|0)))*a}else if(i>=l[l.length-s.ENTRIES]){var d=l[l.length+s.PREV_ROTATION];switch(u){case e.setup:c.rotation=c.data.rotation+d*a;break;case e.first:case e.replace:d+=c.data.rotation-c.rotation,d-=360*(16384-(16384.499999999996-d/360|0));case e.add:c.rotation+=d*a}}else{var f=r.binarySearch(l,i,s.ENTRIES),g=l[f+s.PREV_ROTATION],m=l[f],v=this.getCurvePercent((f>>1)-1,1-(i-m)/(l[f+s.PREV_TIME]-m)),y=l[f+s.ROTATION]-g;switch(y=g+(y-360*(16384-(16384.499999999996-y/360|0)))*v,u){case e.setup:c.rotation=c.data.rotation+(y-360*(16384-(16384.499999999996-y/360|0)))*a;break;case e.first:case e.replace:y+=c.data.rotation-c.rotation;case e.add:c.rotation+=(y-360*(16384-(16384.499999999996-y/360|0)))*a}}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(t.CurveTimeline=s);t.RotateTimeline=a;var u=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,n,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=n,this.frames[t+s.Y]=i},s.prototype.apply=function(t,n,i,o,a,u,h){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(i<l[0])switch(u){case e.setup:return c.x=c.data.x,void(c.y=c.data.y);case e.first:c.x+=(c.data.x-c.x)*a,c.y+=(c.data.y-c.y)*a}else{var p=0,d=0;if(i>=l[l.length-s.ENTRIES])p=l[l.length+s.PREV_X],d=l[l.length+s.PREV_Y];else{var f=r.binarySearch(l,i,s.ENTRIES);p=l[f+s.PREV_X],d=l[f+s.PREV_Y];var g=l[f],m=this.getCurvePercent(f/s.ENTRIES-1,1-(i-g)/(l[f+s.PREV_TIME]-g));p+=(l[f+s.X]-p)*m,d+=(l[f+s.Y]-d)*m}switch(u){case e.setup:c.x=c.data.x+p*a,c.y=c.data.y+d*a;break;case e.first:case e.replace:c.x+=(c.data.x+p-c.x)*a,c.y+=(c.data.y+d-c.y)*a;break;case e.add:c.x+=p*a,c.y+=d*a}}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(s),h=function(s){function a(t){return s.call(this,t)||this}return o(a,s),a.prototype.getPropertyId=function(){return(i.scale<<24)+this.boneIndex},a.prototype.apply=function(i,o,s,u,h,l,c){var p=this.frames,d=i.bones[this.boneIndex];if(d.active)if(s<p[0])switch(l){case e.setup:return d.scaleX=d.data.scaleX,void(d.scaleY=d.data.scaleY);case e.first:d.scaleX+=(d.data.scaleX-d.scaleX)*h,d.scaleY+=(d.data.scaleY-d.scaleY)*h}else{var f=0,g=0;if(s>=p[p.length-a.ENTRIES])f=p[p.length+a.PREV_X]*d.data.scaleX,g=p[p.length+a.PREV_Y]*d.data.scaleY;else{var m=r.binarySearch(p,s,a.ENTRIES);f=p[m+a.PREV_X],g=p[m+a.PREV_Y];var v=p[m],y=this.getCurvePercent(m/a.ENTRIES-1,1-(s-v)/(p[m+a.PREV_TIME]-v));f=(f+(p[m+a.X]-f)*y)*d.data.scaleX,g=(g+(p[m+a.Y]-g)*y)*d.data.scaleY}if(1==h)l==e.add?(d.scaleX+=f-d.data.scaleX,d.scaleY+=g-d.data.scaleY):(d.scaleX=f,d.scaleY=g);else{var _=0,b=0;if(c==n.mixOut)switch(l){case e.setup:_=d.data.scaleX,b=d.data.scaleY,d.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-_)*h,d.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-b)*h;break;case e.first:case e.replace:_=d.scaleX,b=d.scaleY,d.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-_)*h,d.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-b)*h;break;case e.add:_=d.scaleX,b=d.scaleY,d.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-d.data.scaleX)*h,d.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-d.data.scaleY)*h}else switch(l){case e.setup:_=Math.abs(d.data.scaleX)*t.MathUtils.signum(f),b=Math.abs(d.data.scaleY)*t.MathUtils.signum(g),d.scaleX=_+(f-_)*h,d.scaleY=b+(g-b)*h;break;case e.first:case e.replace:_=Math.abs(d.scaleX)*t.MathUtils.signum(f),b=Math.abs(d.scaleY)*t.MathUtils.signum(g),d.scaleX=_+(f-_)*h,d.scaleY=b+(g-b)*h;break;case e.add:_=t.MathUtils.signum(f),b=t.MathUtils.signum(g),d.scaleX=Math.abs(d.scaleX)*_+(f-Math.abs(d.data.scaleX)*_)*h,d.scaleY=Math.abs(d.scaleY)*b+(g-Math.abs(d.data.scaleY)*b)*h}}}},a}(t.TranslateTimeline=u);t.ScaleTimeline=h;var l=function(t){function n(e){return t.call(this,e)||this}return o(n,t),n.prototype.getPropertyId=function(){return(i.shear<<24)+this.boneIndex},n.prototype.apply=function(t,i,o,s,a,u,h){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(o<l[0])switch(u){case e.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case e.first:c.shearX+=(c.data.shearX-c.shearX)*a,c.shearY+=(c.data.shearY-c.shearY)*a}else{var p=0,d=0;if(o>=l[l.length-n.ENTRIES])p=l[l.length+n.PREV_X],d=l[l.length+n.PREV_Y];else{var f=r.binarySearch(l,o,n.ENTRIES);p=l[f+n.PREV_X],d=l[f+n.PREV_Y];var g=l[f],m=this.getCurvePercent(f/n.ENTRIES-1,1-(o-g)/(l[f+n.PREV_TIME]-g));p+=(l[f+n.X]-p)*m,d+=(l[f+n.Y]-d)*m}switch(u){case e.setup:c.shearX=c.data.shearX+p*a,c.shearY=c.data.shearY+d*a;break;case e.first:case e.replace:c.shearX+=(c.data.shearX+p-c.shearX)*a,c.shearY+=(c.data.shearY+d-c.shearY)*a;break;case e.add:c.shearX+=p*a,c.shearY+=d*a}}},n}(u);t.ShearTimeline=l;var c=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,n,i,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=n,this.frames[t+s.G]=i,this.frames[t+s.B]=r,this.frames[t+s.A]=o},s.prototype.apply=function(t,n,i,o,a,u,h){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(i<c[0])switch(u){case e.setup:return void l.color.setFromColor(l.data.color);case e.first:var p=l.color,d=l.data.color;p.add((d.r-p.r)*a,(d.g-p.g)*a,(d.b-p.b)*a,(d.a-p.a)*a)}else{var f=0,g=0,m=0,v=0;if(i>=c[c.length-s.ENTRIES]){var y=c.length;f=c[y+s.PREV_R],g=c[y+s.PREV_G],m=c[y+s.PREV_B],v=c[y+s.PREV_A]}else{var _=r.binarySearch(c,i,s.ENTRIES);f=c[_+s.PREV_R],g=c[_+s.PREV_G],m=c[_+s.PREV_B],v=c[_+s.PREV_A];var b=c[_],x=this.getCurvePercent(_/s.ENTRIES-1,1-(i-b)/(c[_+s.PREV_TIME]-b));f+=(c[_+s.R]-f)*x,g+=(c[_+s.G]-g)*x,m+=(c[_+s.B]-m)*x,v+=(c[_+s.A]-v)*x}1==a?l.color.set(f,g,m,v):(p=l.color,u==e.setup&&p.setFromColor(l.data.color),p.add((f-p.r)*a,(g-p.g)*a,(m-p.b)*a,(v-p.a)*a))}}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(s);t.ColorTimeline=c;var p=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.twoColor<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,n,i,r,o,a,u,h){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=n,this.frames[t+s.G]=i,this.frames[t+s.B]=r,this.frames[t+s.A]=o,this.frames[t+s.R2]=a,this.frames[t+s.G2]=u,this.frames[t+s.B2]=h},s.prototype.apply=function(t,n,i,o,a,u,h){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(i<c[0])switch(u){case e.setup:return l.color.setFromColor(l.data.color),void l.darkColor.setFromColor(l.data.darkColor);case e.first:var p=l.color,d=l.darkColor,f=l.data.color,g=l.data.darkColor;p.add((f.r-p.r)*a,(f.g-p.g)*a,(f.b-p.b)*a,(f.a-p.a)*a),d.add((g.r-d.r)*a,(g.g-d.g)*a,(g.b-d.b)*a,0)}else{var m=0,v=0,y=0,_=0,b=0,x=0,w=0;if(i>=c[c.length-s.ENTRIES]){var T=c.length;m=c[T+s.PREV_R],v=c[T+s.PREV_G],y=c[T+s.PREV_B],_=c[T+s.PREV_A],b=c[T+s.PREV_R2],x=c[T+s.PREV_G2],w=c[T+s.PREV_B2]}else{var S=r.binarySearch(c,i,s.ENTRIES);m=c[S+s.PREV_R],v=c[S+s.PREV_G],y=c[S+s.PREV_B],_=c[S+s.PREV_A],b=c[S+s.PREV_R2],x=c[S+s.PREV_G2],w=c[S+s.PREV_B2];var P=c[S],O=this.getCurvePercent(S/s.ENTRIES-1,1-(i-P)/(c[S+s.PREV_TIME]-P));m+=(c[S+s.R]-m)*O,v+=(c[S+s.G]-v)*O,y+=(c[S+s.B]-y)*O,_+=(c[S+s.A]-_)*O,b+=(c[S+s.R2]-b)*O,x+=(c[S+s.G2]-x)*O,w+=(c[S+s.B2]-w)*O}1==a?(l.color.set(m,v,y,_),l.darkColor.set(b,x,w,1)):(p=l.color,d=l.darkColor,u==e.setup&&(p.setFromColor(l.data.color),d.setFromColor(l.data.darkColor)),p.add((m-p.r)*a,(v-p.g)*a,(y-p.b)*a,(_-p.a)*a),d.add((b-d.r)*a,(x-d.g)*a,(w-d.b)*a,0))}}},s.ENTRIES=8,s.PREV_TIME=-8,s.PREV_R=-7,s.PREV_G=-6,s.PREV_B=-5,s.PREV_A=-4,s.PREV_R2=-3,s.PREV_G2=-2,s.PREV_B2=-1,s.R=1,s.G=2,s.B=3,s.A=4,s.R2=5,s.G2=6,s.B2=7,s}(s);t.TwoColorTimeline=p;var d=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return o.prototype.getPropertyId=function(){return(i.attachment<<24)+this.slotIndex},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},o.prototype.apply=function(t,i,o,s,a,u,h){var l=t.slots[this.slotIndex];if(l.bone.active)if(h!=n.mixOut){var c=this.frames;if(o<c[0])u!=e.setup&&u!=e.first||this.setAttachment(t,l,l.data.attachmentName);else{var p;p=o>=c[c.length-1]?c.length-1:r.binarySearch(c,o,1)-1;var d=this.attachmentNames[p];t.slots[this.slotIndex].setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}}else u==e.setup&&this.setAttachment(t,l,l.data.attachmentName)},o.prototype.setAttachment=function(t,e,n){e.attachment=null==n?null:t.getAttachment(this.slotIndex,n)},o}();t.AttachmentTimeline=d;var f=null,g=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==f&&(f=t.Utils.newFloatArray(64)),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.deform<<27)+ +this.attachment.id+this.slotIndex},s.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},s.prototype.apply=function(n,i,o,s,a,u,h){var l=n.slots[this.slotIndex];if(l.bone.active){var c=l.getAttachment();if(c instanceof t.VertexAttachment&&c.deformAttachment==this.attachment){var p=l.deform;0==p.length&&(u=e.setup);var d=this.frameVertices,f=d[0].length,g=this.frames;if(o<g[0]){var m=c;switch(u){case e.setup:return void(p.length=0);case e.first:if(1==a){p.length=0;break}var v=t.Utils.setArraySize(p,f);if(null==m.bones)for(var y=m.vertices,_=0;_<f;_++)v[_]+=(y[_]-v[_])*a;else for(a=1-a,_=0;_<f;_++)v[_]*=a}}else{var b=t.Utils.setArraySize(p,f);if(o>=g[g.length-1]){var x=d[g.length-1];if(1==a)if(u==e.add)if(null==(m=c).bones){y=m.vertices;for(var w=0;w<f;w++)b[w]+=x[w]-y[w]}else for(var T=0;T<f;T++)b[T]+=x[T];else t.Utils.arrayCopy(x,0,b,0,f);else switch(u){case e.setup:var S=c;if(null==S.bones){y=S.vertices;for(var P=0;P<f;P++){var O=y[P];b[P]=O+(x[P]-O)*a}}else for(var E=0;E<f;E++)b[E]=x[E]*a;break;case e.first:case e.replace:for(var A=0;A<f;A++)b[A]+=(x[A]-b[A])*a;break;case e.add:if(null==(m=c).bones){y=m.vertices;for(var I=0;I<f;I++)b[I]+=(x[I]-y[I])*a}else for(var C=0;C<f;C++)b[C]+=x[C]*a}}else{var M=r.binarySearch(g,o),R=d[M-1],k=d[M],D=g[M],L=this.getCurvePercent(M-1,1-(o-D)/(g[M-1]-D));if(1==a)if(u==e.add)if(null==(m=c).bones){y=m.vertices;for(var B=0;B<f;B++){var N=R[B];b[B]+=N+(k[B]-N)*L-y[B]}}else for(var F=0;F<f;F++)N=R[F],b[F]+=N+(k[F]-N)*L;else for(var j=0;j<f;j++)N=R[j],b[j]=N+(k[j]-N)*L;else switch(u){case e.setup:var U=c;if(null==U.bones){y=U.vertices;for(var V=0;V<f;V++)N=R[V],O=y[V],b[V]=O+(N+(k[V]-N)*L-O)*a}else for(var X=0;X<f;X++)N=R[X],b[X]=(N+(k[X]-N)*L)*a;break;case e.first:case e.replace:for(var G=0;G<f;G++)N=R[G],b[G]+=(N+(k[G]-N)*L-b[G])*a;break;case e.add:if(null==(m=c).bones){y=m.vertices;for(var H=0;H<f;H++)N=R[H],b[H]+=(N+(k[H]-N)*L-y[H])*a}else for(var W=0;W<f;W++)N=R[W],b[W]+=(N+(k[W]-N)*L)*a}}}}}},s}(s);t.DeformTimeline=g;var m=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return i.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,n,i,o,s,a){if(null!=i){var u=this.frames,h=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,i,o,s,a),e=-1;else if(e>=u[h-1])return;if(!(n<u[0])){var l=0;if(e<u[0])l=0;else for(var c=u[l=r.binarySearch(u,e)];0<l&&u[l-1]==c;)l--;for(;l<h&&n>=u[l];l++)i.push(this.events[l])}}},e}();t.EventTimeline=m;var v=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return o.prototype.getPropertyId=function(){return i.drawOrder<<24},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},o.prototype.apply=function(i,o,s,a,u,h,l){var c=i.drawOrder,p=i.slots;if(l!=n.mixOut||h!=e.setup){var d=this.frames;if(s<d[0])h!=e.setup&&h!=e.first||t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else{var f;f=s>=d[d.length-1]?d.length-1:r.binarySearch(d,s)-1;var g=this.drawOrders[f];if(null==g)t.Utils.arrayCopy(p,0,c,0,p.length);else for(var m=0,v=g.length;m<v;m++)c[m]=p[g[m]]}}else t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length)},o}();t.DrawOrderTimeline=v;var y=function(s){function a(e){var n=s.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*a.ENTRIES),n}return o(a,s),a.prototype.getPropertyId=function(){return(i.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(t,e,n,i,r,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.MIX]=n,this.frames[t+a.SOFTNESS]=i,this.frames[t+a.BEND_DIRECTION]=r,this.frames[t+a.COMPRESS]=o?1:0,this.frames[t+a.STRETCH]=s?1:0},a.prototype.apply=function(t,i,o,s,u,h,l){var c=this.frames,p=t.ikConstraints[this.ikConstraintIndex];if(p.active)if(o<c[0])switch(h){case e.setup:return p.mix=p.data.mix,p.softness=p.data.softness,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,void(p.stretch=p.data.stretch);case e.first:p.mix+=(p.data.mix-p.mix)*u,p.softness+=(p.data.softness-p.softness)*u,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch}else if(o>=c[c.length-a.ENTRIES])h==e.setup?(p.mix=p.data.mix+(c[c.length+a.PREV_MIX]-p.data.mix)*u,p.softness=p.data.softness+(c[c.length+a.PREV_SOFTNESS]-p.data.softness)*u,l==n.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],p.compress=0!=c[c.length+a.PREV_COMPRESS],p.stretch=0!=c[c.length+a.PREV_STRETCH])):(p.mix+=(c[c.length+a.PREV_MIX]-p.mix)*u,p.softness+=(c[c.length+a.PREV_SOFTNESS]-p.softness)*u,l==n.mixIn&&(p.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],p.compress=0!=c[c.length+a.PREV_COMPRESS],p.stretch=0!=c[c.length+a.PREV_STRETCH]));else{var d=r.binarySearch(c,o,a.ENTRIES),f=c[d+a.PREV_MIX],g=c[d+a.PREV_SOFTNESS],m=c[d],v=this.getCurvePercent(d/a.ENTRIES-1,1-(o-m)/(c[d+a.PREV_TIME]-m));h==e.setup?(p.mix=p.data.mix+(f+(c[d+a.MIX]-f)*v-p.data.mix)*u,p.softness=p.data.softness+(g+(c[d+a.SOFTNESS]-g)*v-p.data.softness)*u,l==n.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=c[d+a.PREV_BEND_DIRECTION],p.compress=0!=c[d+a.PREV_COMPRESS],p.stretch=0!=c[d+a.PREV_STRETCH])):(p.mix+=(f+(c[d+a.MIX]-f)*v-p.mix)*u,p.softness+=(g+(c[d+a.SOFTNESS]-g)*v-p.softness)*u,l==n.mixIn&&(p.bendDirection=c[d+a.PREV_BEND_DIRECTION],p.compress=0!=c[d+a.PREV_COMPRESS],p.stretch=0!=c[d+a.PREV_STRETCH]))}},a.ENTRIES=6,a.PREV_TIME=-6,a.PREV_MIX=-5,a.PREV_SOFTNESS=-4,a.PREV_BEND_DIRECTION=-3,a.PREV_COMPRESS=-2,a.PREV_STRETCH=-1,a.MIX=1,a.SOFTNESS=2,a.BEND_DIRECTION=3,a.COMPRESS=4,a.STRETCH=5,a}(s);t.IkConstraintTimeline=y;var _=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,n,i,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=n,this.frames[t+s.TRANSLATE]=i,this.frames[t+s.SCALE]=r,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,n,i,o,a,u,h){var l=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(i<l[0]){var p=c.data;switch(u){case e.setup:return c.rotateMix=p.rotateMix,c.translateMix=p.translateMix,c.scaleMix=p.scaleMix,void(c.shearMix=p.shearMix);case e.first:c.rotateMix+=(p.rotateMix-c.rotateMix)*a,c.translateMix+=(p.translateMix-c.translateMix)*a,c.scaleMix+=(p.scaleMix-c.scaleMix)*a,c.shearMix+=(p.shearMix-c.shearMix)*a}}else{var d=0,f=0,g=0,m=0;if(i>=l[l.length-s.ENTRIES]){var v=l.length;d=l[v+s.PREV_ROTATE],f=l[v+s.PREV_TRANSLATE],g=l[v+s.PREV_SCALE],m=l[v+s.PREV_SHEAR]}else{var y=r.binarySearch(l,i,s.ENTRIES);d=l[y+s.PREV_ROTATE],f=l[y+s.PREV_TRANSLATE],g=l[y+s.PREV_SCALE],m=l[y+s.PREV_SHEAR];var _=l[y],b=this.getCurvePercent(y/s.ENTRIES-1,1-(i-_)/(l[y+s.PREV_TIME]-_));d+=(l[y+s.ROTATE]-d)*b,f+=(l[y+s.TRANSLATE]-f)*b,g+=(l[y+s.SCALE]-g)*b,m+=(l[y+s.SHEAR]-m)*b}u==e.setup?(p=c.data,c.rotateMix=p.rotateMix+(d-p.rotateMix)*a,c.translateMix=p.translateMix+(f-p.translateMix)*a,c.scaleMix=p.scaleMix+(g-p.scaleMix)*a,c.shearMix=p.shearMix+(m-p.shearMix)*a):(c.rotateMix+=(d-c.rotateMix)*a,c.translateMix+=(f-c.translateMix)*a,c.scaleMix+=(g-c.scaleMix)*a,c.shearMix+=(m-c.shearMix)*a)}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(s);t.TransformConstraintTimeline=_;var b=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=n},s.prototype.apply=function(t,n,i,o,a,u,h){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(i<l[0])switch(u){case e.setup:return void(c.position=c.data.position);case e.first:c.position+=(c.data.position-c.position)*a}else{var p=0;if(i>=l[l.length-s.ENTRIES])p=l[l.length+s.PREV_VALUE];else{var d=r.binarySearch(l,i,s.ENTRIES);p=l[d+s.PREV_VALUE];var f=l[d],g=this.getCurvePercent(d/s.ENTRIES-1,1-(i-f)/(l[d+s.PREV_TIME]-f));p+=(l[d+s.VALUE]-p)*g}u==e.setup?c.position=c.data.position+(p-c.data.position)*a:c.position+=(p-c.position)*a}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(s),x=function(t){function n(e){return t.call(this,e)||this}return o(n,t),n.prototype.getPropertyId=function(){return(i.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,i,o,s,a,u,h){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(o<l[0])switch(u){case e.setup:return void(c.spacing=c.data.spacing);case e.first:c.spacing+=(c.data.spacing-c.spacing)*a}else{var p=0;if(o>=l[l.length-n.ENTRIES])p=l[l.length+n.PREV_VALUE];else{var d=r.binarySearch(l,o,n.ENTRIES);p=l[d+n.PREV_VALUE];var f=l[d],g=this.getCurvePercent(d/n.ENTRIES-1,1-(o-f)/(l[d+n.PREV_TIME]-f));p+=(l[d+n.VALUE]-p)*g}u==e.setup?c.spacing=c.data.spacing+(p-c.data.spacing)*a:c.spacing+=(p-c.spacing)*a}},n}(t.PathConstraintPositionTimeline=b);t.PathConstraintSpacingTimeline=x;var w=function(n){function s(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return o(s,n),s.prototype.getPropertyId=function(){return(i.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,n,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=n,this.frames[t+s.TRANSLATE]=i},s.prototype.apply=function(t,n,i,o,a,u,h){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(i<l[0])switch(u){case e.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case e.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*a,c.translateMix+=(c.data.translateMix-c.translateMix)*a}else{var p=0,d=0;if(i>=l[l.length-s.ENTRIES])p=l[l.length+s.PREV_ROTATE],d=l[l.length+s.PREV_TRANSLATE];else{var f=r.binarySearch(l,i,s.ENTRIES);p=l[f+s.PREV_ROTATE],d=l[f+s.PREV_TRANSLATE];var g=l[f],m=this.getCurvePercent(f/s.ENTRIES-1,1-(i-g)/(l[f+s.PREV_TIME]-g));p+=(l[f+s.ROTATE]-p)*m,d+=(l[f+s.TRANSLATE]-d)*m}u==e.setup?(c.rotateMix=c.data.rotateMix+(p-c.data.rotateMix)*a,c.translateMix=c.data.translateMix+(d-c.data.translateMix)*a):(c.rotateMix+=(p-c.rotateMix)*a,c.translateMix+=(d-c.translateMix)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(s);t.PathConstraintMixTimeline=w}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool(function(){return new n}),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,i=e.length;n<i;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var o=t*r.timeScale;if(0<r.delay){if(r.delay-=o,0<r.delay)continue;o=-r.delay,r.delay=0}var s=r.next;if(null!=s){var a=r.trackLast-s.delay;if(0<=a){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(a/r.timeScale+t)*s.timeScale,r.trackTime+=o,this.setCurrent(n,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var u=r.mixingFrom;for((r.mixingFrom=null)!=u&&(u.mixingTo=null);null!=u;)this.queue.end(u),u=u.mixingFrom}r.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var i=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(n){if(null==n)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,r=this.tracks,o=!1,s=0,a=r.length;s<a;s++){var u=r[s];if(!(null==u||0<u.delay)){o=!0;var h=0==s?t.MixBlend.first:u.mixBlend,l=u.alpha;null!=u.mixingFrom?l*=this.applyMixingFrom(u,n,h):u.trackTime>=u.trackEnd&&null==u.next&&(l=0);var c=u.animationLast,p=u.getAnimationTime(),d=u.animation.timelines.length,f=u.animation.timelines;if(0==s&&1==l||h==t.MixBlend.add)for(var g=0;g<d;g++){t.Utils.webkit602BugfixHelper(l,h);var m=f[g];m instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(m,n,p,h,!0):m.apply(n,c,p,i,l,h,t.MixDirection.mixIn)}else{var v=u.timelineMode,y=0==u.timelinesRotation.length;y&&t.Utils.setArraySize(u.timelinesRotation,d<<1,null);var _=u.timelinesRotation;for(g=0;g<d;g++){var b=f[g],x=v[g]==e.SUBSEQUENT?h:t.MixBlend.setup;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,n,p,l,x,_,g<<1,y):b instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(b,n,p,h,!0):(t.Utils.webkit602BugfixHelper(l,h),b.apply(n,c,p,i,l,x,t.MixDirection.mixIn))}}this.queueEvents(u,p),i.length=0,u.nextAnimationLast=p,u.nextTrackLast=u.trackTime}}for(var w=this.unkeyedState+e.SETUP,T=n.slots,S=0,P=n.slots.length;S<P;S++){var O=T[S];if(O.attachmentState==w){var E=O.data.attachmentName;O.attachment=null==E?null:n.getAttachment(O.data.index,E)}}return this.unkeyedState+=2,this.queue.drain(),o},e.prototype.applyMixingFrom=function(n,i,r){var o=n.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,i,r);var s=0;0==n.mixDuration?(s=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):(1<(s=n.mixTime/n.mixDuration)&&(s=1),r!=t.MixBlend.first&&(r=o.mixBlend));var a=s<o.eventThreshold?this.events:null,u=s<o.attachmentThreshold,h=s<o.drawOrderThreshold,l=o.animationLast,c=o.getAnimationTime(),p=o.animation.timelines.length,d=o.animation.timelines,f=o.alpha*n.interruptAlpha,g=f*(1-s);if(r==t.MixBlend.add)for(var m=0;m<p;m++)d[m].apply(i,l,c,a,g,r,t.MixDirection.mixOut);else{var v=o.timelineMode,y=o.timelineHoldMix,_=0==o.timelinesRotation.length;_&&t.Utils.setArraySize(o.timelinesRotation,p<<1,null);var b=o.timelinesRotation;for(m=o.totalAlpha=0;m<p;m++){var x=d[m],w=t.MixDirection.mixOut,T=void 0,S=0;switch(v[m]){case e.SUBSEQUENT:if(!h&&x instanceof t.DrawOrderTimeline)continue;T=r,S=g;break;case e.FIRST:T=t.MixBlend.setup,S=g;break;case e.HOLD_SUBSEQUENT:T=r,S=f;break;case e.HOLD_FIRST:T=t.MixBlend.setup,S=f;break;default:T=t.MixBlend.setup;var P=y[m];S=f*Math.max(0,1-P.mixTime/P.mixDuration)}o.totalAlpha+=S,x instanceof t.RotateTimeline?this.applyRotateTimeline(x,i,c,S,T,b,m<<1,_):x instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(x,i,c,T,u):(t.Utils.webkit602BugfixHelper(S,r),h&&x instanceof t.DrawOrderTimeline&&T==t.MixBlend.setup&&(w=t.MixDirection.mixIn),x.apply(i,l,c,a,S,T,w))}}return 0<n.mixDuration&&this.queueEvents(o,c),this.events.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime,s},e.prototype.applyAttachmentTimeline=function(n,i,r,o,s){var a=i.slots[n.slotIndex];if(a.bone.active){var u,h=n.frames;r<h[0]?o!=t.MixBlend.setup&&o!=t.MixBlend.first||this.setAttachment(i,a,a.data.attachmentName,s):(u=r>=h[h.length-1]?h.length-1:t.Animation.binarySearch(h,r)-1,this.setAttachment(i,a,n.attachmentNames[u],s)),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,n,i,r){n.attachment=null==i?null:t.getAttachment(n.data.index,i),r&&(n.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(e,n,i,r,o,s,a,u){if(u&&(s[a]=0),1!=r){var h=e,l=h.frames,c=n.bones[h.boneIndex];if(c.active){var p=0,d=0;if(i<l[0])switch(o){case t.MixBlend.setup:c.rotation=c.data.rotation;default:return;case t.MixBlend.first:p=c.rotation,d=c.data.rotation}else if(p=o==t.MixBlend.setup?c.data.rotation:c.rotation,i>=l[l.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+l[l.length+t.RotateTimeline.PREV_ROTATION];else{var f=t.Animation.binarySearch(l,i,t.RotateTimeline.ENTRIES),g=l[f+t.RotateTimeline.PREV_ROTATION],m=l[f],v=h.getCurvePercent((f>>1)-1,1-(i-m)/(l[f+t.RotateTimeline.PREV_TIME]-m));d=l[f+t.RotateTimeline.ROTATION]-g,d=g+(d-=360*(16384-(16384.499999999996-d/360|0)))*v+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,_=d-p;if(0==(_-=360*(16384-(16384.499999999996-_/360|0))))y=s[a];else{var b=0,x=0;x=u?(b=0,_):(b=s[a],s[a+1]);var w=0<_,T=0<=b;t.MathUtils.signum(x)!=t.MathUtils.signum(_)&&Math.abs(x)<=90&&(180<Math.abs(b)&&(b+=360*t.MathUtils.signum(b)),T=w),y=_+b-b%360,T!=w&&(y+=360*t.MathUtils.signum(b)),s[a]=y}s[a+1]=_,p+=y*r,c.rotation=p-360*(16384-(16384.499999999996-p/360|0))}}else e.apply(n,0,i,null,1,o,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var n=t.animationStart,i=t.animationEnd,r=i-n,o=t.trackLast%r,s=this.events,a=0,u=s.length;a<u;a++){var h=s[a];if(h.time<o)break;h.time>i||this.queue.event(t,h)}for((t.loop?0==r||o>t.trackTime%r:i<=e&&t.animationLast<i)&&this.queue.complete(t);a<u;a++)s[a].time<n||this.queue.event(t,s[a])},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var i=n.mixingFrom;if(null==i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,n){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(n&&this.queue.interrupt(i),((e.mixingFrom=i).mixingTo=e).mixTime=0,null!=i.mixingFrom&&0<i.mixDuration&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,n)},e.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var i=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,i=!1):this.disposeNext(r));var o=this.trackEntry(t,e,n,r);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,i)},e.prototype.addAnimationWith=function(t,e,n,i){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var o=this.trackEntry(t,e,n,r);if(null==r)this.setCurrent(t,o,!0),this.queue.drain();else if(r.next=o,i<=0){var s=r.animationEnd-r.animationStart;0!=s?(r.loop?i+=s*(1+(r.trackTime/s|0)):i+=Math.max(s,r.trackTime),i-=this.data.getMix(r.animation,e)):i=r.trackTime}return o.delay=i,o},e.prototype.setEmptyAnimation=function(t,n){var i=this.setAnimationWith(t,e.emptyAnimation,!1);return i.mixDuration=n,i.trackEnd=n,i},e.prototype.addEmptyAnimation=function(t,n,i){i<=0&&(i-=n);var r=this.addAnimationWith(t,e.emptyAnimation,!1,i);return r.mixDuration=n,r.trackEnd=n,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,n,i,r){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=n,o.loop=i,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=n.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==r?0:this.data.getMix(r.animation,n),o.mixBlend=t.MixBlend.replace,o},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,n=this.tracks.length;e<n;e++){var i=this.tracks[e];if(null!=i){for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;null!=i.mixingFrom&&i.mixBlend==t.MixBlend.add||this.computeHold(i),null!=(i=i.mixingTo););}}},e.prototype.computeHold=function(n){var i=n.mixingTo,r=n.animation.timelines,o=n.animation.timelines.length,s=t.Utils.setArraySize(n.timelineMode,o);n.timelineHoldMix.length=0;var a=t.Utils.setArraySize(n.timelineHoldMix,o),u=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var h=0;h<o;h++)s[h]=u.add(r[h].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(h=0;h<o;h++){var l=r[h],c=l.getPropertyId();if(u.add(c))if(null==i||l instanceof t.AttachmentTimeline||l instanceof t.DrawOrderTimeline||l instanceof t.EventTimeline||!i.animation.hasTimeline(c))s[h]=e.FIRST;else{for(var p=i.mixingTo;null!=p;p=p.mixingTo)if(!p.animation.hasTimeline(c)){if(0<n.mixDuration){s[h]=e.HOLD_MIX,a[h]=p;continue t}break}s[h]=e.HOLD_FIRST}else s[h]=e.SUBSEQUENT}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);0<=e&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,n,i){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,n,i)},e.prototype.addAnimationByName=function(t,n,i,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,n,i,r)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var n=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=n;var i,r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(i.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(i.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(i.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(i.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(i.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(i.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,n=this.animState.listeners,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1];switch(o){case i.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(var a=0;a<n.length;a++)n[a].start&&n[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case i.interrupt:for(null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s),a=0;a<n.length;a++)n[a].interrupt&&n[a].interrupt(s);break;case i.end:for(null!=s.listener&&s.listener.end&&s.listener.end(s),a=0;a<n.length;a++)n[a].end&&n[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case i.dispose:for(null!=s.listener&&s.listener.dispose&&s.listener.dispose(s),a=0;a<n.length;a++)n[a].dispose&&n[a].dispose(s);this.animState.trackEntryPool.free(s);break;case i.complete:for(null!=s.listener&&s.listener.complete&&s.listener.complete(s),a=0;a<n.length;a++)n[a].complete&&n[a].complete(s);var u=t.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,u),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,u);break;case i.event:var h=e[2+r++];for(null!=s.listener&&s.listener.event&&s.listener.event(s,h),a=0;a<n.length;a++)n[a].event&&n[a].event(s,h);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=r,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(i=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=o}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(i,r,n)},t.prototype.setMixByName=function(e,n,i){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,n,i)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var i=t.name+"."+e.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,i=this.animationToMixTime[n];return void 0===i?this.defaultMix:i},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+n+")");var o=new t.RegionAttachment(n);return o.region=r,o},e.prototype.newMeshAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+n+")");var o=new t.MeshAttachment(n);return o.region=r,o},e.prototype.newBoundingBoxAttachment=function(e,n){return new t.BoundingBoxAttachment(n)},e.prototype.newPathAttachment=function(e,n){return new t.PathAttachment(n)},e.prototype.newPointAttachment=function(e,n){return new t.PointAttachment(n)},e.prototype.newClippingAttachment=function(e,n){return new t.ClippingAttachment(n)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e,n){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(n,i,r,o,s,a,u){this.ax=n,this.ay=i,this.arotation=r,this.ascaleX=o,this.ascaleY=s,this.ashearX=a,this.ashearY=u,this.appliedValid=!0;var h=this.parent,l=this.matrix,c=this.skeleton.scaleX,p=e.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==h){var d=this.skeleton,f=r+90+u;return l.a=t.MathUtils.cosDeg(r+a)*o*c,l.c=t.MathUtils.cosDeg(f)*s*c,l.b=t.MathUtils.sinDeg(r+a)*o*p,l.d=t.MathUtils.sinDeg(f)*s*p,l.tx=n*c+d.x,void(l.ty=i*p+d.y)}var g=h.matrix.a,m=h.matrix.c,v=h.matrix.b,y=h.matrix.d;switch(l.tx=g*n+m*i+h.matrix.tx,l.ty=v*n+y*i+h.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:f=r+90+u;var _=t.MathUtils.cosDeg(r+a)*o,b=t.MathUtils.cosDeg(f)*s,x=t.MathUtils.sinDeg(r+a)*o,w=t.MathUtils.sinDeg(f)*s;return l.a=g*_+m*x,l.c=g*b+m*w,l.b=v*_+y*x,void(l.d=v*b+y*w);case t.TransformMode.OnlyTranslation:f=r+90+u,l.a=t.MathUtils.cosDeg(r+a)*o,l.c=t.MathUtils.cosDeg(f)*s,l.b=t.MathUtils.sinDeg(r+a)*o,l.d=t.MathUtils.sinDeg(f)*s;break;case t.TransformMode.NoRotationOrReflection:var T=0,S=r+a-(T=1e-4<(O=g*g+v*v)?(O=Math.abs(g*y-m*v)/O,g/=this.skeleton.scaleX,m=(v/=this.skeleton.scaleY)*O,y=g*O,Math.atan2(v,g)*t.MathUtils.radDeg):(v=g=0,90-Math.atan2(y,m)*t.MathUtils.radDeg)),P=r+u-T+90;_=t.MathUtils.cosDeg(S)*o,b=t.MathUtils.cosDeg(P)*s,x=t.MathUtils.sinDeg(S)*o,w=t.MathUtils.sinDeg(P)*s,l.a=g*_-m*x,l.c=g*b-m*w,l.b=v*_+y*x,l.d=v*b+y*w;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var O,E=t.MathUtils.cosDeg(r),A=t.MathUtils.sinDeg(r),I=(g*E+m*A)/c,C=(v*E+y*A)/p;1e-5<(O=Math.sqrt(I*I+C*C))&&(O=1/O),I*=O,C*=O,O=Math.sqrt(I*I+C*C),this.data.transformMode==t.TransformMode.NoScale&&g*y-m*v<0!=(e.yDown?this.skeleton.scaleX<0!=0<this.skeleton.scaleY:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(O=-O);var M=Math.PI/2+Math.atan2(C,I),R=Math.cos(M)*O,k=Math.sin(M)*O;_=t.MathUtils.cosDeg(a)*o,b=t.MathUtils.cosDeg(90+u)*s,x=t.MathUtils.sinDeg(a)*o,w=t.MathUtils.sinDeg(90+u)*s,l.a=I*_+R*x,l.c=I*b+R*w,l.b=C*_+k*x,l.d=C*b+k*w}l.a*=c,l.c*=c,l.b*=p,l.d*=p},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,n=this.matrix;if(null==e)return this.ax=n.tx,this.ay=n.ty,this.arotation=Math.atan2(n.b,n.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(n.a*n.a+n.b*n.b),this.ascaleY=Math.sqrt(n.c*n.c+n.d*n.d),this.ashearX=0,void(this.ashearY=Math.atan2(n.a*n.c+n.b*n.d,n.a*n.d-n.b*n.c)*t.MathUtils.radDeg);var i=e.matrix,r=1/(i.a*i.d-i.b*i.c),o=n.tx-i.tx,s=n.ty-i.ty;this.ax=o*i.d*r-s*i.c*r,this.ay=s*i.a*r-o*i.b*r;var a=r*i.d,u=r*i.a,h=r*i.c,l=r*i.b,c=a*n.a-h*n.b,p=a*n.c-h*n.d,d=u*n.b-l*n.a,f=u*n.d-l*n.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),1e-4<this.ascaleX){var g=c*f-p*d;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*p+d*f,g)*t.MathUtils.radDeg,this.arotation=Math.atan2(d,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,p)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,i=e.c,r=e.b,o=e.d,s=1/(n*o-i*r),a=t.x-e.tx,u=t.y-e.ty;return t.x=a*o*s-u*i*s,t.y=u*n*s-a*r*s,t},e.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,i=t.y;return t.x=n*e.a+i*e.c+e.tx,t.y=n*e.b+i*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var n=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(r.a*n-r.b*i,r.d*i-r.c*n)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var n=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(i*r.b+n*r.d,i*r.a+n*r.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var n=this.matrix,i=n.a,r=n.c,o=n.b,s=n.d,a=t.MathUtils.cosDeg(e),u=t.MathUtils.sinDeg(e);n.a=a*i-u*o,n.c=a*r-u*s,n.b=u*i+a*o,n.d=u*r+a*s,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e;t.BoneData=function(n,i,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,n<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");this.index=n,this.name=i,this.parent=r},function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.ConstraintData=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.EventData=function(t){this.name=t}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,n,i,r,o,s,a){e.appliedValid||e.updateAppliedTransform();var u=e.parent.matrix,h=u.a,l=u.c,c=u.b,p=u.d,d=-e.ashearX-e.arotation,f=0,g=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:f=n-e.worldX,g=i-e.worldY;break;case t.TransformMode.NoRotationOrReflection:var m=Math.abs(h*p-l*c)/(h*h+c*c),v=h/e.skeleton.scaleX,y=c/e.skeleton.scaleY;l=-y*m*e.skeleton.scaleX,p=v*m*e.skeleton.scaleY,d+=Math.atan2(y,v)*t.MathUtils.radDeg;default:var _=n-u.tx,b=i-u.ty,x=h*p-l*c;f=(_*p-b*l)/x-e.ax,g=(b*h-_*c)/x-e.ay}d+=Math.atan2(g,f)*t.MathUtils.radDeg,e.ascaleX<0&&(d+=180),180<d?d-=360:d<-180&&(d+=360);var w=e.ascaleX,T=e.ascaleY;if(r||o){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:f=n-e.worldX,g=i-e.worldY}var S=e.data.length*w,P=Math.sqrt(f*f+g*g);(r&&P<S||o&&S<P&&1e-4<S)&&(w*=m=(P/S-1)*a+1,s&&(T*=m))}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+d*a,w,T,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,n,i,r,o,s,a,u){if(0!=u){e.appliedValid||e.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var h=e.ax,l=e.ay,c=e.ascaleX,p=c,d=e.ascaleY,f=n.ascaleX,g=e.matrix,m=0,v=0,y=0;y=c<0?(c=-c,m=180,-1):(m=0,1),d<0&&(d=-d,y=-y),v=f<0?(f=-f,180):0;var _=n.ax,b=0,x=0,w=0,T=g.a,S=g.c,P=g.b,O=g.d,E=Math.abs(c-d)<=1e-4;w=E?(x=T*_+S*(b=n.ay)+g.tx,P*_+O*b+g.ty):(b=0,x=T*_+g.tx,P*_+g.ty);var A=e.parent.matrix;T=A.a,S=A.c,P=A.b;var I,C,M=1/(T*(O=A.d)-S*P),R=x-A.tx,k=w-A.ty,D=(R*O-k*S)*M-h,L=(k*T-R*P)*M-l,B=Math.sqrt(D*D+L*L),N=n.data.length*f;if(B<1e-4)return this.apply1(e,i,r,!1,s,!1,u),void n.updateWorldTransformWith(_,b,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);var F=((R=i-A.tx)*O-(k=r-A.ty)*S)*M-h,j=(k*T-R*P)*M-l,U=F*F+j*j;if(0!=a){a*=c*(f+1)/2;var V=Math.sqrt(U),X=V-B-N*c+a;if(0<X){var G=Math.min(1,X/(2*a))-1;U=(F-=(G=(X-a*(1-G*G))/V)*F)*F+(j-=G*j)*j}}t:if(E){var H=(U-B*B-(N*=c)*N)/(2*B*N);H<-1?H=-1:1<H&&(H=1,s&&(p*=(Math.sqrt(U)/(B+N)-1)*u+1)),C=Math.acos(H)*o,T=B+N*H,S=N*Math.sin(C),I=Math.atan2(j*T-F*S,F*T+j*S)}else{var W=(T=c*N)*T,z=(S=d*N)*S,Y=Math.atan2(j,F),q=-2*z*B,K=z-W;if(0<=(O=q*q-4*K*(P=z*B*B+W*U-W*z))){var Z=Math.sqrt(O);q<0&&(Z=-Z);var Q=(Z=-(q+Z)/2)/K,J=P/Z,$=Math.abs(Q)<Math.abs(J)?Q:J;if($*$<=U){k=Math.sqrt(U-$*$)*o,I=Y-Math.atan2(k,$),C=Math.atan2(k/d,($-B)/c);break t}}var tt=t.MathUtils.PI,et=B-T,nt=et*et,it=0,rt=0,ot=B+T,st=ot*ot,at=0;-1<=(P=-T*B/(W-z))&&P<=1&&(P=Math.acos(P),(O=(R=T*Math.cos(P)+B)*R+(k=S*Math.sin(P))*k)<nt&&(tt=P,nt=O,et=R,it=k),st<O&&(rt=P,st=O,ot=R,at=k)),C=U<=(nt+st)/2?(I=Y-Math.atan2(it*o,et),tt*o):(I=Y-Math.atan2(at*o,ot),rt*o)}var ut=Math.atan2(b,_)*y,ht=e.arotation;180<(I=(I-ut)*t.MathUtils.radDeg+m-ht)?I-=360:I<-180&&(I+=360),e.updateWorldTransformWith(h,l,ht+I*u,p,e.ascaleY,0,0),ht=n.arotation,180<(C=((C+ut)*t.MathUtils.radDeg-n.ashearX)*y+v-ht)?C-=360:C<-180&&(C+=360),n.updateWorldTransformWith(_,b,ht+C*u,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}else n.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return o(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof t.PathAttachment){var i=this.rotateMix,r=this.translateMix,o=0<i;if(0<r||o){var s=this.data,a=s.spacingMode,u=a==t.SpacingMode.Length,h=s.rotateMode,l=h==t.RotateMode.Tangent,c=h==t.RotateMode.ChainScale,p=this.bones.length,d=l?p:p+1,f=this.bones,g=t.Utils.setArraySize(this.spaces,d),m=null,v=this.spacing;if(c||u){c&&(m=t.Utils.setArraySize(this.lengths,p));for(var y=0,_=d-1;y<_;){var b=(C=f[y]).data.length;if(b<e.epsilon)c&&(m[y]=0),g[++y]=0;else{var x=b*C.matrix.a,w=b*C.matrix.b,T=Math.sqrt(x*x+w*w);c&&(m[y]=T),g[++y]=(u?b+v:v)*T/b}}}else for(y=1;y<d;y++)g[y]=v;var S=this.computeWorldPositions(n,d,l,s.positionMode==t.PositionMode.Percent,a==t.SpacingMode.Percent),P=S[0],O=S[1],E=s.offsetRotation,A=!1;0==E?A=h==t.RotateMode.Chain:(A=!1,E*=0<(I=this.target.bone.matrix).a*I.d-I.b*I.c?t.MathUtils.degRad:-t.MathUtils.degRad),y=0;for(var I=3;y<p;y++,I+=3){var C,M=(C=f[y]).matrix;M.tx+=(P-M.tx)*r,M.ty+=(O-M.ty)*r;var R=(x=S[I])-P,k=(w=S[I+1])-O;if(c){var D=m[y];if(0!=D){var L=(Math.sqrt(R*R+k*k)/D-1)*i+1;M.a*=L,M.b*=L}}if(P=x,O=w,o){var B=M.a,N=M.c,F=M.b,j=M.d,U=0,V=0,X=0;if(U=l?S[I-1]:0==g[y+1]?S[I+2]:Math.atan2(k,R),U-=Math.atan2(F,B),A){V=Math.cos(U),X=Math.sin(U);var G=C.data.length;P+=(G*(V*B-X*F)-R)*i,O+=(G*(X*B+V*F)-k)*i}else U+=E;U>t.MathUtils.PI?U-=t.MathUtils.PI2:U<-t.MathUtils.PI&&(U+=t.MathUtils.PI2),U*=i,V=Math.cos(U),X=Math.sin(U),M.a=V*B-X*F,M.c=V*N-X*j,M.b=X*B+V*F,M.d=X*N+V*j}C.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(n,i,r,o,s){var a=this.target,u=this.position,h=this.spaces,l=t.Utils.setArraySize(this.positions,3*i+2),c=null,p=n.closed,d=n.worldVerticesLength,f=d/6,g=e.NONE;if(!n.constantSpeed){var m=n.lengths,v=m[f-=p?1:2];if(o&&(u*=v),s)for(var y=0;y<i;y++)h[y]*=v;c=t.Utils.setArraySize(this.world,8);for(var _=y=0,b=0;y<i;y++,_+=3){var x=u+=W=h[y];if(p)(x%=v)<0&&(x+=v),b=0;else{if(x<0){g!=e.BEFORE&&(g=e.BEFORE,n.computeWorldVertices(a,2,4,c,0,2)),this.addBeforePosition(x,c,0,l,_);continue}if(v<x){g!=e.AFTER&&(g=e.AFTER,n.computeWorldVertices(a,d-6,4,c,0,2)),this.addAfterPosition(x-v,c,0,l,_);continue}}for(;;b++){var w=m[b];if(!(w<x)){0==b?x/=w:x=(x-(K=m[b-1]))/(w-K);break}}b!=g&&(g=b,p&&b==f?(n.computeWorldVertices(a,d-4,4,c,0,2),n.computeWorldVertices(a,0,4,c,4,2)):n.computeWorldVertices(a,6*b+2,8,c,0,2)),this.addCurvePosition(x,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,_,r||0<y&&0==W)}return l}p?(d+=2,c=t.Utils.setArraySize(this.world,d),n.computeWorldVertices(a,2,d-4,c,0,2),n.computeWorldVertices(a,0,2,c,d-4,2),c[d-2]=c[0],c[d-1]=c[1]):(f--,d-=4,c=t.Utils.setArraySize(this.world,d),n.computeWorldVertices(a,2,d,c,0,2));for(var T=t.Utils.setArraySize(this.curves,f),S=0,P=c[0],O=c[1],E=0,A=0,I=0,C=0,M=0,R=0,k=0,D=0,L=0,B=0,N=0,F=0,j=0,U=0,V=(y=0,2);y<f;y++,V+=6)E=c[V],A=c[V+1],I=c[V+2],C=c[V+3],N=2*(k=.1875*(P-2*E+I))+(L=.09375*(3*(E-I)-P+(M=c[V+4]))),F=2*(D=.1875*(O-2*A+C))+(B=.09375*(3*(A-C)-O+(R=c[V+5]))),j=.75*(E-P)+k+.16666667*L,U=.75*(A-O)+D+.16666667*B,S+=Math.sqrt(j*j+U*U),j+=N,U+=F,N+=L,F+=B,S+=Math.sqrt(j*j+U*U),j+=N,U+=F,S+=Math.sqrt(j*j+U*U),j+=N+L,U+=F+B,S+=Math.sqrt(j*j+U*U),T[y]=S,P=M,O=R;if(o&&(u*=S),s)for(y=0;y<i;y++)h[y]*=S;for(var X=this.segments,G=0,H=b=_=y=0;y<i;y++,_+=3){var W;if(x=u+=W=h[y],p)(x%=S)<0&&(x+=S),b=0;else{if(x<0){this.addBeforePosition(x,c,0,l,_);continue}if(S<x){this.addAfterPosition(x-S,c,d-4,l,_);continue}}for(;;b++){var z=T[b];if(!(z<x)){0==b?x/=z:x=(x-(K=T[b-1]))/(z-K);break}}if(b!=g){var Y=6*(g=b);for(P=c[Y],O=c[Y+1],E=c[Y+2],A=c[Y+3],I=c[Y+4],C=c[Y+5],N=2*(k=.03*(P-2*E+I))+(L=.006*(3*(E-I)-P+(M=c[Y+6]))),F=2*(D=.03*(O-2*A+C))+(B=.006*(3*(A-C)-O+(R=c[Y+7]))),j=.3*(E-P)+k+.16666667*L,U=.3*(A-O)+D+.16666667*B,G=Math.sqrt(j*j+U*U),X[0]=G,Y=1;Y<8;Y++)j+=N,U+=F,N+=L,F+=B,G+=Math.sqrt(j*j+U*U),X[Y]=G;j+=N,U+=F,G+=Math.sqrt(j*j+U*U),X[8]=G,j+=N+L,U+=F+B,G+=Math.sqrt(j*j+U*U),X[9]=G,H=0}for(x*=G;;H++){var q=X[H];if(!(q<x)){var K;0==H?x/=q:x=H+(x-(K=X[H-1]))/(q-K);break}}this.addCurvePosition(.1*x,P,O,E,A,I,C,M,R,l,_,r||0<y&&0==W)}return l},e.prototype.addBeforePosition=function(t,e,n,i,r){var o=e[n],s=e[n+1],a=e[n+2]-o,u=e[n+3]-s,h=Math.atan2(u,a);i[r]=o+t*Math.cos(h),i[r+1]=s+t*Math.sin(h),i[r+2]=h},e.prototype.addAfterPosition=function(t,e,n,i,r){var o=e[n+2],s=e[n+3],a=o-e[n],u=s-e[n+1],h=Math.atan2(u,a);i[r]=o+t*Math.cos(h),i[r+1]=s+t*Math.sin(h),i[r+2]=h},e.prototype.addCurvePosition=function(t,e,n,i,r,o,s,a,u,h,l,c){(0==t||isNaN(t))&&(t=1e-4);var p=t*t,d=p*t,f=1-t,g=f*f,m=g*f,v=f*t,y=3*v,_=f*y,b=y*t,x=e*m+i*_+o*b+a*d,w=n*m+r*_+s*b+u*d;h[l]=x,h[l+1]=w,c&&(h[l+2]=Math.atan2(w-(n*g+r*v*2+s*p),x-(e*g+i*v*2+o*p)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n}return o(e,t),e}(t.ConstraintData);t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=e.bones[n],r=void 0;if(null==i.parent)r=new t.Bone(i,this,null);else{var o=this.bones[i.parent.index];r=new t.Bone(i,this,o),o.children.push(r)}this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,n=0;n<e.slots.length;n++){var s=e.slots[n],a=(r=this.bones[s.boneData.index],new t.Slot(s,r));this.slots.push(a),this.drawOrder.push(a)}for(this.ikConstraints=new Array,n=0;n<e.ikConstraints.length;n++){var u=e.ikConstraints[n];this.ikConstraints.push(new t.IkConstraint(u,this))}for(this.transformConstraints=new Array,n=0;n<e.transformConstraints.length;n++){var h=e.transformConstraints[n];this.transformConstraints.push(new t.TransformConstraint(h,this))}for(this.pathConstraints=new Array,n=0;n<e.pathConstraints.length;n++){var l=e.pathConstraints[n];this.pathConstraints.push(new t.PathConstraint(l,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted;if(null!=this.skin){var i=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++)for(var r=this.bones[i[e].index];r.sorted=!1,r.active=!0,null!=(r=r.parent););}var o=this.ikConstraints,s=this.transformConstraints,a=this.pathConstraints,u=o.length,h=s.length,l=a.length,c=u+h+l;t:for(e=0;e<c;e++){for(var p=0;p<u;p++)if((d=o[p]).data.order==e){this.sortIkConstraint(d);continue t}for(p=0;p<h;p++)if((d=s[p]).data.order==e){this.sortTransformConstraint(d);continue t}for(p=0;p<l;p++){var d;if((d=a[p]).data.order==e){this.sortPathConstraint(d);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var n=e.target;this.sortBone(n);var i=e.bones,r=i[0];if(this.sortBone(r),1<i.length){var o=i[i.length-1];-1<this._updateCache.indexOf(o)||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(r.children),i[i.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var n=e.target,i=n.data.index,r=n.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(var o=0,s=this.data.skins.length;o<s;o++)this.sortPathConstraintAttachment(this.data.skins[o],i,r);var a=n.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,r);var u=e.bones,h=u.length;for(o=0;o<h;o++)this.sortBone(u[o]);for(this._updateCache.push(e),o=0;o<h;o++)this.sortReset(u[o].children);for(o=0;o<h;o++)u[o].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var n=e.bones,i=n.length;if(e.data.local)for(var r=0;r<i;r++){var o=n[r];this.sortBone(o.parent),-1<this._updateCache.indexOf(o)||this.updateCacheReset.push(o)}else for(r=0;r<i;r++)this.sortBone(n[r]);this._updateCache.push(e);for(var s=0;s<i;s++)this.sortReset(n[s].children);for(s=0;s<i;s++)n[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,n){var i=t.attachments[e];if(i)for(var r in i)this.sortPathConstraintAttachmentWith(i[r],n)},e.prototype.sortPathConstraintAttachmentWith=function(e,n){if(e instanceof t.PathAttachment){var i=e.bones;if(null==i)this.sortBone(n);else for(var r=this.bones,o=0;o<i.length;)for(var s=i[o++],a=o+s;o<a;o++){var u=i[o];this.sortBone(r[u])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}var r=this._updateCache;for(e=0,n=r.length;e<n;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var i=this.ikConstraints;for(e=0,n=i.length;e<n;e++)(a=i[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;var r=this.transformConstraints;for(e=0,n=r.length;e<n;e++){var o=(a=r[e]).data;a.rotateMix=o.rotateMix,a.translateMix=o.translateMix,a.scaleMix=o.scaleMix,a.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++){var a;o=(a=s[e]).data,a.position=o.position,a.spacing=o.spacing,a.rotateMix=o.rotateMix,a.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var n=0,i=e.length;n<i;n++)e[n].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n],o=r.data.attachmentName;if(null!=o){var s=t.getAttachment(n,o);null!=s&&r.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,r=n.length;i<r;i++){var o=n[i];if(o.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(i,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,n,i){if(void 0===i&&(i=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var r=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var c=r[h];if(c.bone.active){var p=0,d=null,f=c.getAttachment();if(f instanceof t.RegionAttachment)p=8,d=t.Utils.setArraySize(i,p,0),f.computeWorldVertices(c.bone,d,0,2);else if(f instanceof t.MeshAttachment){var g=f;p=g.worldVerticesLength,d=t.Utils.setArraySize(i,p,0),g.computeWorldVertices(c,0,p,d,0,2)}if(null!=d)for(var m=0,v=d.length;m<v;m+=2){var y=d[m],_=d[m+1];o=Math.min(o,y),s=Math.min(s,_),a=Math.max(a,y),u=Math.max(u,_)}}}e.set(o,s),n.set(a-o,u-s)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),e.deprecatedWarning1=!1,e}();t.Skeleton=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var r=this.scale,o=new t.SkeletonData;o.name="";var s=new n(i);o.hash=s.readString(),o.version=s.readString(),"3.8.75"===o.version&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),o.x=s.readFloat(),o.y=s.readFloat(),o.width=s.readFloat(),o.height=s.readFloat();var a=s.readBoolean();a&&(o.fps=s.readFloat(),o.imagesPath=s.readString(),o.audioPath=s.readString());var u=0;u=s.readInt(!0);for(var h=0;h<u;h++)s.strings.push(s.readString());for(u=s.readInt(!0),h=0;h<u;h++){var l=s.readString(),c=0==h?null:o.bones[s.readInt(!0)];(f=new t.BoneData(h,l,c)).rotation=s.readFloat(),f.x=s.readFloat()*r,f.y=s.readFloat()*r,f.scaleX=s.readFloat(),f.scaleY=s.readFloat(),f.shearX=s.readFloat(),f.shearY=s.readFloat(),f.length=s.readFloat()*r,f.transformMode=e.TransformModeValues[s.readInt(!0)],f.skinRequired=s.readBoolean(),a&&t.Color.rgba8888ToColor(f.color,s.readInt32()),o.bones.push(f)}for(u=s.readInt(!0),h=0;h<u;h++){var p=s.readString(),d=o.bones[s.readInt(!0)],f=new t.SlotData(h,p,d);t.Color.rgba8888ToColor(f.color,s.readInt32());var g=s.readInt32();-1!=g&&t.Color.rgb888ToColor(f.darkColor=new t.Color,g),f.attachmentName=s.readStringRef(),f.blendMode=e.BlendModeValues[s.readInt(!0)],o.slots.push(f)}u=s.readInt(!0);for(var m=void(h=0);h<u;h++){(f=new t.IkConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0);for(var v=0;v<m;v++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.bones[s.readInt(!0)],f.mix=s.readFloat(),f.softness=s.readFloat()*r,f.bendDirection=s.readByte(),f.compress=s.readBoolean(),f.stretch=s.readBoolean(),f.uniform=s.readBoolean(),o.ikConstraints.push(f)}for(u=s.readInt(!0),m=void(h=0);h<u;h++){for((f=new t.TransformConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0),v=0;v<m;v++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.bones[s.readInt(!0)],f.local=s.readBoolean(),f.relative=s.readBoolean(),f.offsetRotation=s.readFloat(),f.offsetX=s.readFloat()*r,f.offsetY=s.readFloat()*r,f.offsetScaleX=s.readFloat(),f.offsetScaleY=s.readFloat(),f.offsetShearY=s.readFloat(),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),f.scaleMix=s.readFloat(),f.shearMix=s.readFloat(),o.transformConstraints.push(f)}for(u=s.readInt(!0),m=void(h=0);h<u;h++){for((f=new t.PathConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0),v=0;v<m;v++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.slots[s.readInt(!0)],f.positionMode=e.PositionModeValues[s.readInt(!0)],f.spacingMode=e.SpacingModeValues[s.readInt(!0)],f.rotateMode=e.RotateModeValues[s.readInt(!0)],f.offsetRotation=s.readFloat(),f.position=s.readFloat(),f.positionMode==t.PositionMode.Fixed&&(f.position*=r),f.spacing=s.readFloat(),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=r),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),o.pathConstraints.push(f)}var y=this.readSkin(s,o,!0,a);for(null!=y&&(o.defaultSkin=y,o.skins.push(y)),h=o.skins.length,t.Utils.setArraySize(o.skins,u=h+s.readInt(!0));h<u;h++)o.skins[h]=this.readSkin(s,o,!1,a);for(u=this.linkedMeshes.length,h=0;h<u;h++){var _=this.linkedMeshes[h],b=null==_.skin?o.defaultSkin:o.findSkin(_.skin);if(null==b)throw new Error("Skin not found: "+_.skin);var x=b.getAttachment(_.slotIndex,_.parent);if(null==x)throw new Error("Parent mesh not found: "+_.parent);_.mesh.deformAttachment=_.inheritDeform?x:_.mesh,_.mesh.setParentMesh(x)}for(this.linkedMeshes.length=0,u=s.readInt(!0),h=0;h<u;h++)(f=new t.EventData(s.readStringRef())).intValue=s.readInt(!1),f.floatValue=s.readFloat(),f.stringValue=s.readString(),f.audioPath=s.readString(),null!=f.audioPath&&(f.volume=s.readFloat(),f.balance=s.readFloat()),o.events.push(f);for(u=s.readInt(!0),h=0;h<u;h++)o.animations.push(this.readAnimation(s,s.readString(),o));return o},e.prototype.readSkin=function(e,n,i,r){var o=null,s=0;if(i){if(0==(s=e.readInt(!0)))return null;o=new t.Skin("default")}else{(o=new t.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var a=0,u=o.bones.length;a<u;a++)o.bones[a]=n.bones[e.readInt(!0)];for(a=0,u=e.readInt(!0);a<u;a++)o.constraints.push(n.ikConstraints[e.readInt(!0)]);for(a=0,u=e.readInt(!0);a<u;a++)o.constraints.push(n.transformConstraints[e.readInt(!0)]);for(a=0,u=e.readInt(!0);a<u;a++)o.constraints.push(n.pathConstraints[e.readInt(!0)]);s=e.readInt(!0)}for(a=0;a<s;a++)for(var h=e.readInt(!0),l=0,c=e.readInt(!0);l<c;l++){var p=e.readStringRef(),d=this.readAttachment(e,n,o,h,p,r);null!=d&&o.setAttachment(h,p,d)}return o},e.prototype.readAttachment=function(n,r,o,s,a,u){var h=this.scale,l=n.readStringRef();null==l&&(l=a);var c=n.readByte();switch(e.AttachmentTypeValues[c]){case t.AttachmentType.Region:var p=n.readStringRef(),d=n.readFloat(),f=n.readFloat(),g=n.readFloat(),m=n.readFloat(),v=n.readFloat(),y=n.readFloat(),_=n.readFloat(),b=n.readInt32();null==p&&(p=l);var x=this.attachmentLoader.newRegionAttachment(o,l,p);return null==x?null:(x.path=p,x.x=f*h,x.y=g*h,x.scaleX=m,x.scaleY=v,x.rotation=d,x.width=y*h,x.height=_*h,t.Color.rgba8888ToColor(x.color,b),x);case t.AttachmentType.BoundingBox:var w=n.readInt(!0),T=this.readVertices(n,w),S=(b=u?n.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,l));return null==S?null:(S.worldVerticesLength=w<<1,S.vertices=T.vertices,S.bones=T.bones,u&&t.Color.rgba8888ToColor(S.color,b),S);case t.AttachmentType.Mesh:p=n.readStringRef(),b=n.readInt32(),w=n.readInt(!0);var P=this.readFloatArray(n,w<<1,1),O=this.readShortArray(n),E=(T=this.readVertices(n,w),n.readInt(!0)),A=null;return _=y=0,u&&(A=this.readShortArray(n),y=n.readFloat(),_=n.readFloat()),null==p&&(p=l),null==(I=this.attachmentLoader.newMeshAttachment(o,l,p))?null:(I.path=p,t.Color.rgba8888ToColor(I.color,b),I.bones=T.bones,I.vertices=T.vertices,I.worldVerticesLength=w<<1,I.triangles=O,I.regionUVs=new Float32Array(P),I.hullLength=E<<1,u&&(I.edges=A,I.width=y*h,I.height=_*h),I);case t.AttachmentType.LinkedMesh:p=n.readStringRef(),b=n.readInt32();var I,C=n.readStringRef(),M=n.readStringRef(),R=n.readBoolean();return _=y=0,u&&(y=n.readFloat(),_=n.readFloat()),null==p&&(p=l),null==(I=this.attachmentLoader.newMeshAttachment(o,l,p))?null:(I.path=p,t.Color.rgba8888ToColor(I.color,b),u&&(I.width=y*h,I.height=_*h),this.linkedMeshes.push(new i(I,C,s,M,R)),I);case t.AttachmentType.Path:for(var k=n.readBoolean(),D=n.readBoolean(),L=(w=n.readInt(!0),T=this.readVertices(n,w),t.Utils.newArray(w/3,0)),B=0,N=L.length;B<N;B++)L[B]=n.readFloat()*h;return b=u?n.readInt32():0,null==(p=this.attachmentLoader.newPathAttachment(o,l))?null:(p.closed=k,p.constantSpeed=D,p.worldVerticesLength=w<<1,p.vertices=T.vertices,p.bones=T.bones,p.lengths=L,u&&t.Color.rgba8888ToColor(p.color,b),p);case t.AttachmentType.Point:d=n.readFloat(),f=n.readFloat(),g=n.readFloat(),b=u?n.readInt32():0;var F=this.attachmentLoader.newPointAttachment(o,l);return null==F?null:(F.x=f*h,F.y=g*h,F.rotation=d,u&&t.Color.rgba8888ToColor(F.color,b),F);case t.AttachmentType.Clipping:var j=n.readInt(!0),U=(w=n.readInt(!0),T=this.readVertices(n,w),b=u?n.readInt32():0,this.attachmentLoader.newClippingAttachment(o,l));return null==U?null:(U.endSlot=r.slots[j],U.worldVerticesLength=w<<1,U.vertices=T.vertices,U.bones=T.bones,u&&t.Color.rgba8888ToColor(U.color,b),U)}return null},e.prototype.readVertices=function(e,n){var i=n<<1,o=new r,s=this.scale;if(!e.readBoolean())return o.vertices=this.readFloatArray(e,i,s),o;for(var a=new Array,u=new Array,h=0;h<n;h++){var l=e.readInt(!0);u.push(l);for(var c=0;c<l;c++)u.push(e.readInt(!0)),a.push(e.readFloat()*s),a.push(e.readFloat()*s),a.push(e.readFloat())}return o.vertices=t.Utils.toFloatArray(a),o.bones=u,o},e.prototype.readFloatArray=function(t,e,n){var i=new Array(e);if(1==n)for(var r=0;r<e;r++)i[r]=t.readFloat();else for(r=0;r<e;r++)i[r]=t.readFloat()*n;return i},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),i=0;i<e;i++)n[i]=t.readShort();return n},e.prototype.readAnimation=function(n,i,r){for(var o=new Array,s=this.scale,a=0,u=new t.Color,h=new t.Color,l=0,c=n.readInt(!0);l<c;l++)for(var p=n.readInt(!0),d=0,f=n.readInt(!0);d<f;d++){var g=n.readByte(),m=n.readInt(!0);switch(g){case e.SLOT_ATTACHMENT:(b=new t.AttachmentTimeline(m)).slotIndex=p;for(var v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readStringRef());o.push(b),a=Math.max(a,b.frames[m-1]);break;case e.SLOT_COLOR:for((b=new t.ColorTimeline(m)).slotIndex=p,v=0;v<m;v++){var y=n.readFloat();t.Color.rgba8888ToColor(u,n.readInt32()),b.setFrame(v,y,u.r,u.g,u.b,u.a),v<m-1&&this.readCurve(n,v,b)}o.push(b),a=Math.max(a,b.frames[(m-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:for((b=new t.TwoColorTimeline(m)).slotIndex=p,v=0;v<m;v++)y=n.readFloat(),t.Color.rgba8888ToColor(u,n.readInt32()),t.Color.rgb888ToColor(h,n.readInt32()),b.setFrame(v,y,u.r,u.g,u.b,u.a,h.r,h.g,h.b),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.TwoColorTimeline.ENTRIES])}}for(l=0,c=n.readInt(!0);l<c;l++){var _=n.readInt(!0);for(d=0,f=n.readInt(!0);d<f;d++)switch(g=n.readByte(),m=n.readInt(!0),g){case e.BONE_ROTATE:for((b=new t.RotateTimeline(m)).boneIndex=_,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat()),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var b=void 0,x=1;for(g==e.BONE_SCALE?b=new t.ScaleTimeline(m):g==e.BONE_SHEAR?b=new t.ShearTimeline(m):(b=new t.TranslateTimeline(m),x=s),b.boneIndex=_,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat()*x,n.readFloat()*x),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.TranslateTimeline.ENTRIES])}}for(l=0,c=n.readInt(!0);l<c;l++){var w=n.readInt(!0);for(m=n.readInt(!0),(b=new t.IkConstraintTimeline(m)).ikConstraintIndex=w,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat(),n.readFloat()*s,n.readByte(),n.readBoolean(),n.readBoolean()),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.IkConstraintTimeline.ENTRIES])}for(l=0,c=n.readInt(!0);l<c;l++){for(w=n.readInt(!0),m=n.readInt(!0),(b=new t.TransformConstraintTimeline(m)).transformConstraintIndex=w,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat()),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.TransformConstraintTimeline.ENTRIES])}for(l=0,c=n.readInt(!0);l<c;l++){w=n.readInt(!0);var T=r.pathConstraints[w];for(d=0,f=n.readInt(!0);d<f;d++)switch(g=n.readByte(),m=n.readInt(!0),g){case e.PATH_POSITION:case e.PATH_SPACING:for(b=void 0,x=1,g==e.PATH_SPACING?(b=new t.PathConstraintSpacingTimeline(m),T.spacingMode!=t.SpacingMode.Length&&T.spacingMode!=t.SpacingMode.Fixed||(x=s)):(b=new t.PathConstraintPositionTimeline(m),T.positionMode==t.PositionMode.Fixed&&(x=s)),b.pathConstraintIndex=w,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat()*x),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:for((b=new t.PathConstraintMixTimeline(m)).pathConstraintIndex=w,v=0;v<m;v++)b.setFrame(v,n.readFloat(),n.readFloat(),n.readFloat()),v<m-1&&this.readCurve(n,v,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.PathConstraintMixTimeline.ENTRIES])}}for(l=0,c=n.readInt(!0);l<c;l++){var S=r.skins[n.readInt(!0)];for(d=0,f=n.readInt(!0);d<f;d++){p=n.readInt(!0);for(var P=0,O=n.readInt(!0);P<O;P++){var E=S.getAttachment(p,n.readStringRef()),A=null!=E.bones,I=E.vertices,C=A?I.length/3*2:I.length;for(m=n.readInt(!0),(b=new t.DeformTimeline(m)).slotIndex=p,b.attachment=E,v=0;v<m;v++){y=n.readFloat();var M=void 0,R=n.readInt(!0);if(0==R)M=A?t.Utils.newFloatArray(C):I;else{M=t.Utils.newFloatArray(C);var k=n.readInt(!0);if(R+=k,1==s)for(var D=k;D<R;D++)M[D]=n.readFloat();else for(D=k;D<R;D++)M[D]=n.readFloat()*s;if(!A){D=0;for(var L=M.length;D<L;D++)M[D]+=I[D]}}b.setFrame(v,y,M),v<m-1&&this.readCurve(n,v,b)}o.push(b),a=Math.max(a,b.frames[m-1])}}}var B=n.readInt(!0);if(0<B){b=new t.DrawOrderTimeline(B);var N=r.slots.length;for(l=0;l<B;l++){y=n.readFloat();var F=n.readInt(!0),j=t.Utils.newArray(N,0);for(d=N-1;0<=d;d--)j[d]=-1;var U=t.Utils.newArray(N-F,0),V=0,X=0;for(d=0;d<F;d++){for(p=n.readInt(!0);V!=p;)U[X++]=V++;j[V+n.readInt(!0)]=V++}for(;V<N;)U[X++]=V++;for(d=N-1;0<=d;d--)-1==j[d]&&(j[d]=U[--X]);b.setFrame(l,y,j)}o.push(b),a=Math.max(a,b.frames[B-1])}var G=n.readInt(!0);if(0<G){for(b=new t.EventTimeline(G),l=0;l<G;l++){y=n.readFloat();var H=r.events[n.readInt(!0)],W=new t.Event(y,H);W.intValue=n.readInt(!1),W.floatValue=n.readFloat(),W.stringValue=n.readBoolean()?n.readString():H.stringValue,null!=W.data.audioPath&&(W.volume=n.readFloat(),W.balance=n.readFloat()),b.setFrame(l,W)}o.push(b),a=Math.max(a,b.frames[G-1])}return new t.Animation(i,o,a)},e.prototype.readCurve=function(t,n,i){switch(t.readByte()){case e.CURVE_STEPPED:i.setStepped(n);break;case e.CURVE_BEZIER:this.setCurve(i,n,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,n,i,r,o){t.setCurve(e,n,i,r,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var n=function(){function t(t,e,n,i){void 0===e&&(e=new Array),void 0===n&&(n=0),void 0===i&&(i=new DataView(t.buffer)),this.strings=e,this.index=n,this.buffer=i}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var i=this.readByte();switch(i>>4){case 12:case 13:e+=String.fromCharCode((31&i)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&i)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(i),n++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),i=function(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r},r=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool(function(){return t.Utils.newFloatArray(16)})}return e.prototype.update=function(e,n){if(null==e)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,o=this.polygonPool,s=e.slots,a=s.length;i.length=0,o.freeAll(r);for(var u=r.length=0;u<a;u++){var h=s[u];if(h.bone.active){var l=h.getAttachment();if(l instanceof t.BoundingBoxAttachment){var c=l;i.push(c);var p=o.obtain();p.length!=c.worldVerticesLength&&(p=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(p),c.computeWorldVertices(h,0,c.worldVerticesLength,p,0,2)}}}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons,o=0,s=r.length;o<s;o++)for(var a=r[o],u=a,h=0,l=a.length;h<l;h+=2){var c=u[h],p=u[h+1];t=Math.min(t,c),e=Math.min(e,p),n=Math.max(n,c),i=Math.max(i,p)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,i){var r=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(t<=r&&n<=r||e<=o&&i<=o||s<=t&&s<=n||a<=e&&a<=i)return!1;var u=(i-e)/(n-t),h=u*(r-t)+e;if(o<h&&h<a)return!0;if((h=u*(s-t)+e)>o&&h<a)return!0;var l=(o-e)/u+t;return r<l&&l<s||(l=(a-e)/u+t)>r&&l<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,i=0,r=n.length;i<r;i++)if(this.containsPointPolygon(n[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var i=t,r=t.length,o=r-2,s=!1,a=0;a<r;a+=2){var u=i[a+1],h=i[o+1];if(u<n&&n<=h||h<n&&n<=u){var l=i[a];l+(n-u)/(h-u)*(i[o]-l)<e&&(s=!s)}o=a}return s},e.prototype.intersectsSegment=function(t,e,n,i){for(var r=this.polygons,o=0,s=r.length;o<s;o++)if(this.intersectsSegmentPolygon(r[o],t,e,n,i))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,i,r){for(var o=t,s=t.length,a=e-i,u=n-r,h=e*r-n*i,l=o[s-2],c=o[s-1],p=0;p<s;p+=2){var d=o[p],f=o[p+1],g=l*f-c*d,m=l-d,v=c-f,y=a*v-u*m,_=(h*m-a*g)/y;if((l<=_&&_<=d||d<=_&&_<=l)&&(e<=_&&_<=i||i<=_&&_<=e)){var b=(h*v-u*g)/y;if((c<=b&&b<=f||f<=b&&b<=c)&&(n<=b&&b<=r||r<=b&&b<=n))return!0}l=d,c=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(n,i){if(null!=this.clipAttachment)return 0;var r=(this.clipAttachment=i).worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,r);i.computeWorldVertices(n,0,r,o,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var a=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),u=0,h=a.length;u<h;u++){var l=a[u];e.makeClockwise(l),l.push(l[0]),l.push(l[1])}return a.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,n,i,r,o,s,a,u){var h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,p=this.clippingPolygons,d=this.clippingPolygons.length,f=u?12:8,g=0;l.length=0;t:for(var m=c.length=0;m<r;m+=3)for(var v=i[m]<<1,y=e[v],_=e[v+1],b=o[v],x=o[v+1],w=e[v=i[m+1]<<1],T=e[v+1],S=o[v],P=o[v+1],O=e[v=i[m+2]<<1],E=e[v+1],A=o[v],I=o[v+1],C=0;C<d;C++){var M=l.length;if(!this.clip(y,_,w,T,O,E,p[C],h)){(U=t.Utils.setArraySize(l,M+3*f))[M]=y,U[M+1]=_,U[M+2]=s.r,U[M+3]=s.g,U[M+4]=s.b,U[M+5]=s.a,u?(U[M+6]=b,U[M+7]=x,U[M+8]=a.r,U[M+9]=a.g,U[M+10]=a.b,U[M+11]=a.a,U[M+12]=w,U[M+13]=T,U[M+14]=s.r,U[M+15]=s.g,U[M+16]=s.b,U[M+17]=s.a,U[M+18]=S,U[M+19]=P,U[M+20]=a.r,U[M+21]=a.g,U[M+22]=a.b,U[M+23]=a.a,U[M+24]=O,U[M+25]=E,U[M+26]=s.r,U[M+27]=s.g,U[M+28]=s.b,U[M+29]=s.a,U[M+30]=A,U[M+31]=I,U[M+32]=a.r,U[M+33]=a.g,U[M+34]=a.b,U[M+35]=a.a):(U[M+6]=b,U[M+7]=x,U[M+8]=w,U[M+9]=T,U[M+10]=s.r,U[M+11]=s.g,U[M+12]=s.b,U[M+13]=s.a,U[M+14]=S,U[M+15]=P,U[M+16]=O,U[M+17]=E,U[M+18]=s.r,U[M+19]=s.g,U[M+20]=s.b,U[M+21]=s.a,U[M+22]=A,U[M+23]=I),M=c.length,(K=t.Utils.setArraySize(c,M+3))[M]=g,K[M+1]=g+1,K[M+2]=g+2,g+=3;continue t}var R=h.length;if(0!=R){for(var k=T-E,D=O-w,L=y-O,B=E-_,N=1/(k*L+D*(_-E)),F=R>>1,j=this.clipOutput,U=t.Utils.setArraySize(l,M+F*f),V=0;V<R;V+=2){var X=j[V],G=j[V+1];U[M]=X,U[M+1]=G,U[M+2]=s.r,U[M+3]=s.g,U[M+4]=s.b,U[M+5]=s.a;var H=X-O,W=G-E,z=(k*H+D*W)*N,Y=(B*H+L*W)*N,q=1-z-Y;U[M+6]=b*z+S*Y+A*q,U[M+7]=x*z+P*Y+I*q,u&&(U[M+8]=a.r,U[M+9]=a.g,U[M+10]=a.b,U[M+11]=a.a),M+=f}M=c.length;var K=t.Utils.setArraySize(c,M+3*(F-2));for(F--,V=1;V<F;V++)K[M]=g,K[M+1]=g+V,K[M+2]=g+V+1,M+=3;g+=F+1}}},e.prototype.clip=function(t,e,n,i,r,o,s,a){var u=a,h=!1,l=null;2<=s.length%4?(l=a,a=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(n),l.push(i),l.push(r),l.push(o),l.push(t),l.push(e),a.length=0;for(var c=s,p=s.length-4,d=0;;d+=2){for(var f=c[d],g=c[d+1],m=c[d+2],v=c[d+3],y=f-m,_=g-v,b=l,x=l.length-2,w=a.length,T=0;T<x;T+=2){var S=b[T],P=b[T+1],O=b[T+2],E=b[T+3],A=0<y*(E-v)-_*(O-m);if(0<y*(P-v)-_*(S-m)){if(A){a.push(O),a.push(E);continue}var I=((M=O-S)*(g-P)-(C=E-P)*(f-S))/(C*(m-f)-M*(v-g));a.push(f+(m-f)*I),a.push(g+(v-g)*I)}else if(A){var C,M;I=((M=O-S)*(g-P)-(C=E-P)*(f-S))/(C*(m-f)-M*(v-g)),a.push(f+(m-f)*I),a.push(g+(v-g)*I),a.push(O),a.push(E)}h=!0}if(w==a.length)return!(u.length=0);if(a.push(a[0]),a.push(a[1]),d==p)break;var R=a;(a=l).length=0,l=R}if(u!=a){d=u.length=0;for(var k=a.length-2;d<k;d++)u[d]=a[d]}else u.length=u.length-2;return h},e.makeClockwise=function(t){for(var e=t,n=t.length,i=e[n-2]*e[1]-e[0]*e[n-1],r=0,o=0,s=0,a=0,u=n-3;a<u;a+=2)r=e[a],o=e[a+1],s=e[a+2],i+=r*e[a+3]-s*o;if(!(i<0)){a=0;var h=n-2;for(u=n>>1;a<u;a+=2){var l=e[a],c=e[a+1],p=h-a;e[a]=e[p],e[a+1]=e[p+1],e[p]=l,e[p+1]=c}}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.FAIL_ON_NON_EXISTING_SKIN=!1;var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var i=this.scale,r=new t.SkeletonData,o="string"==typeof n?JSON.parse(n):n,s=o.skeleton;if(null!=s){if(r.hash=s.hash,r.version=s.spine,"3.8"!==r.version.substr(0,3)){var a="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+s.spine+". Please look in pixi-spine repository README for another branch.";console.error(a)}"3.8.75"===r.version&&(a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.",console.error(a)),r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(o.bones)for(var u=0;u<o.bones.length;u++){var h=o.bones[u],l=null,c=this.getValue(h,"parent",null);if(null!=c&&null==(l=r.findBone(c)))throw new Error("Parent bone not found: "+c);(g=new t.BoneData(r.bones.length,h.name,l)).length=this.getValue(h,"length",0)*i,g.x=this.getValue(h,"x",0)*i,g.y=this.getValue(h,"y",0)*i,g.rotation=this.getValue(h,"rotation",0),g.scaleX=this.getValue(h,"scaleX",1),g.scaleY=this.getValue(h,"scaleY",1),g.shearX=this.getValue(h,"shearX",0),g.shearY=this.getValue(h,"shearY",0),g.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),g.skinRequired=this.getValue(h,"skin",!1),r.bones.push(g)}if(o.slots)for(u=0;u<o.slots.length;u++){var p=(E=o.slots[u]).name,d=E.bone,f=r.findBone(d);if(null==f)throw new Error("Slot bone not found: "+d);var g=new t.SlotData(r.slots.length,p,f),m=this.getValue(E,"color",null);null!=m&&g.color.setFromString(m);var v=this.getValue(E,"dark",null);null!=v&&(g.darkColor=new t.Color(1,1,1,1),g.darkColor.setFromString(v)),g.attachmentName=this.getValue(E,"attachment",null),g.blendMode=e.blendModeFromString(this.getValue(E,"blend","normal")),r.slots.push(g)}if(o.ik)for(u=0;u<o.ik.length;u++){var y=o.ik[u];(g=new t.IkConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1);for(var _=0;_<y.bones.length;_++){if(d=y.bones[_],null==(S=r.findBone(d)))throw new Error("IK bone not found: "+d);g.bones.push(S)}var b=y.target;if(g.target=r.findBone(b),null==g.target)throw new Error("IK target bone not found: "+b);g.mix=this.getValue(y,"mix",1),g.softness=this.getValue(y,"softness",0)*i,g.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,g.compress=this.getValue(y,"compress",!1),g.stretch=this.getValue(y,"stretch",!1),g.uniform=this.getValue(y,"uniform",!1),r.ikConstraints.push(g)}if(o.transform)for(u=0;u<o.transform.length;u++){for(y=o.transform[u],(g=new t.TransformConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1),_=0;_<y.bones.length;_++){if(d=y.bones[_],null==(S=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);g.bones.push(S)}if(b=y.target,g.target=r.findBone(b),null==g.target)throw new Error("Transform constraint target bone not found: "+b);g.local=this.getValue(y,"local",!1),g.relative=this.getValue(y,"relative",!1),g.offsetRotation=this.getValue(y,"rotation",0),g.offsetX=this.getValue(y,"x",0)*i,g.offsetY=this.getValue(y,"y",0)*i,g.offsetScaleX=this.getValue(y,"scaleX",0),g.offsetScaleY=this.getValue(y,"scaleY",0),g.offsetShearY=this.getValue(y,"shearY",0),g.rotateMix=this.getValue(y,"rotateMix",1),g.translateMix=this.getValue(y,"translateMix",1),g.scaleMix=this.getValue(y,"scaleMix",1),g.shearMix=this.getValue(y,"shearMix",1),r.transformConstraints.push(g)}if(o.path)for(u=0;u<o.path.length;u++){for(y=o.path[u],(g=new t.PathConstraintData(y.name)).order=this.getValue(y,"order",0),g.skinRequired=this.getValue(y,"skin",!1),_=0;_<y.bones.length;_++){if(d=y.bones[_],null==(S=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);g.bones.push(S)}if(b=y.target,g.target=r.findSlot(b),null==g.target)throw new Error("Path target slot not found: "+b);g.positionMode=e.positionModeFromString(this.getValue(y,"positionMode","percent")),g.spacingMode=e.spacingModeFromString(this.getValue(y,"spacingMode","length")),g.rotateMode=e.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),g.offsetRotation=this.getValue(y,"rotation",0),g.position=this.getValue(y,"position",0),g.positionMode==t.PositionMode.Fixed&&(g.position*=i),g.spacing=this.getValue(y,"spacing",0),g.spacingMode!=t.SpacingMode.Length&&g.spacingMode!=t.SpacingMode.Fixed||(g.spacing*=i),g.rotateMix=this.getValue(y,"rotateMix",1),g.translateMix=this.getValue(y,"translateMix",1),r.pathConstraints.push(g)}if(o.skins)for(u=0;u<o.skins.length;u++){var x=o.skins[u],w=new t.Skin(x.name);if(x.bones)for(var T=0;T<x.bones.length;T++){var S;if(null==(S=r.findBone(x.bones[T])))throw new Error("Skin bone not found: "+x.bones[u]);w.bones.push(S)}if(x.ik)for(T=0;T<x.ik.length;T++){if(null==(P=r.findIkConstraint(x.ik[T])))throw new Error("Skin IK constraint not found: "+x.ik[u]);w.constraints.push(P)}if(x.transform)for(T=0;T<x.transform.length;T++){if(null==(P=r.findTransformConstraint(x.transform[T])))throw new Error("Skin transform constraint not found: "+x.transform[u]);w.constraints.push(P)}if(x.path)for(T=0;T<x.path.length;T++){var P;if(null==(P=r.findPathConstraint(x.path[T])))throw new Error("Skin path constraint not found: "+x.path[u]);w.constraints.push(P)}for(var p in x.attachments){var O=r.findSlot(p);if(null==O)throw new Error("Slot not found: "+p);var E=x.attachments[p];for(var A in E){var I=this.readAttachment(E[A],w,O.index,A,r);null!=I&&w.setAttachment(O.index,A,I)}}r.skins.push(w),"default"==w.name&&(r.defaultSkin=w)}u=0;for(var C=this.linkedMeshes.length;u<C;u++){var M=this.linkedMeshes[u];if(null==(w=null==M.skin?r.defaultSkin:r.findSkin(M.skin)))throw new Error("Skin not found: "+M.skin);var R=w.getAttachment(M.slotIndex,M.parent);if(null==R)throw new Error("Parent mesh not found: "+M.parent);M.mesh.deformAttachment=M.inheritDeform?R:M.mesh,M.mesh.setParentMesh(R)}if(this.linkedMeshes.length=0,o.events)for(var k in o.events){var D=o.events[k];(g=new t.EventData(k)).intValue=this.getValue(D,"int",0),g.floatValue=this.getValue(D,"float",0),g.stringValue=this.getValue(D,"string",""),g.audioPath=this.getValue(D,"audio",null),null!=g.audioPath&&(g.volume=this.getValue(D,"volume",1),g.balance=this.getValue(D,"balance",0)),r.events.push(g)}if(o.animations)for(var L in o.animations){var B=o.animations[L];this.readAnimation(B,L,r)}return r},e.prototype.readAttachment=function(e,i,r,o,s){var a=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var u=this.getValue(e,"path",o),h=this.attachmentLoader.newRegionAttachment(i,o,u);return null==h?null:(h.path=u,h.x=this.getValue(e,"x",0)*a,h.y=this.getValue(e,"y",0)*a,h.scaleX=this.getValue(e,"scaleX",1),h.scaleY=this.getValue(e,"scaleY",1),h.rotation=this.getValue(e,"rotation",0),h.width=e.width*a,h.height=e.height*a,null!=(x=this.getValue(e,"color",null))&&h.color.setFromString(x),h);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(i,o);return null==l?null:(this.readVertices(e,l,e.vertexCount<<1),null!=(x=this.getValue(e,"color",null))&&l.color.setFromString(x),l);case"mesh":case"linkedmesh":u=this.getValue(e,"path",o);var c=this.attachmentLoader.newMeshAttachment(i,o,u);if(null==c)return null;c.path=u,null!=(x=this.getValue(e,"color",null))&&c.color.setFromString(x),c.width=this.getValue(e,"width",0)*a,c.height=this.getValue(e,"height",0)*a;var p=this.getValue(e,"parent",null);if(null!=p)return this.linkedMeshes.push(new n(c,this.getValue(e,"skin",null),r,p,this.getValue(e,"deform",!0))),c;var d=e.uvs;return this.readVertices(e,c,d.length),c.triangles=e.triangles,c.regionUVs=new Float32Array(d),c.edges=this.getValue(e,"edges",null),c.hullLength=2*this.getValue(e,"hull",0),c;case"path":if(null==(u=this.attachmentLoader.newPathAttachment(i,o)))return null;u.closed=this.getValue(e,"closed",!1),u.constantSpeed=this.getValue(e,"constantSpeed",!0);var f=e.vertexCount;this.readVertices(e,u,f<<1);for(var g=t.Utils.newArray(f/3,0),m=0;m<e.lengths.length;m++)g[m]=e.lengths[m]*a;return u.lengths=g,null!=(x=this.getValue(e,"color",null))&&u.color.setFromString(x),u;case"point":var v=this.attachmentLoader.newPointAttachment(i,o);return null==v?null:(v.x=this.getValue(e,"x",0)*a,v.y=this.getValue(e,"y",0)*a,v.rotation=this.getValue(e,"rotation",0),null!=(x=this.getValue(e,"color",null))&&v.color.setFromString(x),v);case"clipping":var y=this.attachmentLoader.newClippingAttachment(i,o);if(null==y)return null;var x,_=this.getValue(e,"end",null);if(null!=_){var b=s.findSlot(_);if(null==b)throw new Error("Clipping end slot not found: "+_);y.endSlot=b}return f=e.vertexCount,this.readVertices(e,y,f<<1),null!=(x=this.getValue(e,"color",null))&&y.color.setFromString(x),y}return null},e.prototype.readVertices=function(e,n,i){var r=this.scale;n.worldVerticesLength=i;var o=e.vertices;if(i!=o.length){var s=new Array,a=new Array;for(c=0,p=o.length;c<p;){var u=o[c++];a.push(u);for(var h=c+4*u;c<h;c+=4)a.push(o[c]),s.push(o[c+1]*r),s.push(o[c+2]*r),s.push(o[c+3])}n.bones=a,n.vertices=t.Utils.toFloatArray(s)}else{var l=t.Utils.toFloatArray(o);if(1!=r)for(var c=0,p=o.length;c<p;c++)l[c]*=r;n.vertices=l}},e.prototype.readAnimation=function(e,n,i){var r=this.scale,o=new Array,s=0;if(e.slots)for(var a in e.slots){var u=e.slots[a];if(-1==(Z=i.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var h in u){var l=u[h];if("attachment"==h){(b=new t.AttachmentTimeline(l.length)).slotIndex=Z;for(var c=0,p=0;p<l.length;p++){var d=l[p];b.setFrame(c++,this.getValue(d,"time",0),d.name)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}else if("color"==h){for((b=new t.ColorTimeline(l.length)).slotIndex=Z,p=c=0;p<l.length;p++){d=l[p];var f=new t.Color;f.setFromString(d.color||"ffffffff"),b.setFrame(c,this.getValue(d,"time",0),f.r,f.g,f.b,f.a),this.readCurve(d,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+a+")");for((b=new t.TwoColorTimeline(l.length)).slotIndex=Z,p=c=0;p<l.length;p++){d=l[p];var g=new t.Color,m=new t.Color;g.setFromString(d.light),m.setFromString(d.dark),b.setFrame(c,this.getValue(d,"time",0),g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(d,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var v in e.bones){var y=e.bones[v],_=i.findBoneIndex(v);if(-1==_)throw new Error("Bone not found: "+v);for(var h in y)if(l=y[h],"rotate"===h){for((b=new t.RotateTimeline(l.length)).boneIndex=_,p=c=0;p<l.length;p++)d=l[p],b.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,b,c),c++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+v+")");var b=null,x=1,w=0;for("scale"===h?(b=new t.ScaleTimeline(l.length),w=1):"shear"===h?b=new t.ShearTimeline(l.length):(b=new t.TranslateTimeline(l.length),x=r),b.boneIndex=_,p=c=0;p<l.length;p++){d=l[p];var T=this.getValue(d,"x",w),S=this.getValue(d,"y",w);b.setFrame(c,this.getValue(d,"time",0),T*x,S*x),this.readCurve(d,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}if(e.ik)for(var P in e.ik){var O=e.ik[P],E=i.findIkConstraint(P);for((b=new t.IkConstraintTimeline(O.length)).ikConstraintIndex=i.ikConstraints.indexOf(E),p=c=0;p<O.length;p++)d=O[p],b.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,b,c),c++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var P in e.transform){for(O=e.transform[P],E=i.findTransformConstraint(P),(b=new t.TransformConstraintTimeline(O.length)).transformConstraintIndex=i.transformConstraints.indexOf(E),p=c=0;p<O.length;p++)d=O[p],b.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,b,c),c++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var P in e.path){O=e.path[P];var A=i.findPathConstraintIndex(P);if(-1==A)throw new Error("Path constraint not found: "+P);var I=i.pathConstraints[A];for(var h in O)if(l=O[h],"position"===h||"spacing"===h){for(b=null,x=1,"spacing"===h?(b=new t.PathConstraintSpacingTimeline(l.length),I.spacingMode!=t.SpacingMode.Length&&I.spacingMode!=t.SpacingMode.Fixed||(x=r)):(b=new t.PathConstraintPositionTimeline(l.length),I.positionMode==t.PositionMode.Fixed&&(x=r)),b.pathConstraintIndex=A,p=c=0;p<l.length;p++)d=l[p],b.setFrame(c,this.getValue(d,"time",0),this.getValue(d,h,0)*x),this.readCurve(d,b,c),c++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){for((b=new t.PathConstraintMixTimeline(l.length)).pathConstraintIndex=A,p=c=0;p<l.length;p++)d=l[p],b.setFrame(c,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,b,c),c++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}if(e.deform)for(var C in e.deform){var M=e.deform[C],R=i.findSkin(C);if(null!=R)for(var a in M){if(u=M[a],-1==(Z=i.findSlotIndex(a)))throw new Error("Slot not found: "+u.name);for(var h in u){l=u[h];var k=R.getAttachment(Z,h);if(null==k)throw new Error("Deform attachment not found: "+l.name);var D=null!=k.bones,L=k.vertices,B=D?L.length/3*2:L.length;(b=new t.DeformTimeline(l.length)).slotIndex=Z,b.attachment=k;for(var N=c=0;N<l.length;N++){d=l[N];var F=void 0,j=this.getValue(d,"vertices",null);if(null==j)F=D?t.Utils.newFloatArray(B):L;else{F=t.Utils.newFloatArray(B);var U=this.getValue(d,"offset",0);if(t.Utils.arrayCopy(j,0,F,U,j.length),1!=r)for(var V=(p=U)+j.length;p<V;p++)F[p]*=r;if(!D)for(p=0;p<B;p++)F[p]+=L[p]}b.setFrame(c,this.getValue(d,"time",0),F),this.readCurve(d,b,c),c++}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}}else if(t.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+C)}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){b=new t.DrawOrderTimeline(X.length);var G=i.slots.length;for(N=c=0;N<X.length;N++){var H=X[N],W=null,z=this.getValue(H,"offsets",null);if(null!=z){W=t.Utils.newArray(G,-1);var Y=t.Utils.newArray(G-z.length,0),q=0,K=0;for(p=0;p<z.length;p++){var Z,Q=z[p];if(-1==(Z=i.findSlotIndex(Q.slot)))throw new Error("Slot not found: "+Q.slot);for(;q!=Z;)Y[K++]=q++;W[q+Q.offset]=q++}for(;q<G;)Y[K++]=q++;for(p=G-1;0<=p;p--)-1==W[p]&&(W[p]=Y[--K])}b.setFrame(c++,this.getValue(H,"time",0),W)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(e.events){for(b=new t.EventTimeline(e.events.length),p=c=0;p<e.events.length;p++){var J=e.events[p],$=i.findEvent(J.name);if(null==$)throw new Error("Event not found: "+J.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(J,"time",0)),$);tt.intValue=this.getValue(J,"int",$.intValue),tt.floatValue=this.getValue(J,"float",$.floatValue),tt.stringValue=this.getValue(J,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(J,"volume",1),tt.balance=this.getValue(J,"balance",0)),b.setFrame(c++,tt)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new t.Animation(n,o,s))},e.prototype.readCurve=function(t,e,n){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(n);else{var i=t.curve;e.setCurve(n,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var n=function(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n};t.SkinEntry=e;var n=function(){function n(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return n.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=n},n.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],i=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){i=!0;break}i||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(i=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==o){i=!0;break}i||this.constraints.push(o)}var s=t.getAttachments();for(e=0;e<s.length;e++){var a=s[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},n.prototype.copySkin=function(e){for(var n=0;n<e.bones.length;n++){for(var i=e.bones[n],r=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==i){r=!0;break}r||this.bones.push(i)}for(n=0;n<e.constraints.length;n++){var s=e.constraints[n];for(r=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){r=!0;break}r||this.constraints.push(s)}var a=e.getAttachments();for(n=0;n<a.length;n++){var u=a[n];null!=u.attachment&&(u.attachment instanceof t.MeshAttachment?u.attachment=u.attachment.newLinkedMesh():u.attachment=u.attachment.copy(),this.setAttachment(u.slotIndex,u.name,u.attachment))}},n.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},n.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},n.prototype.getAttachments=function(){for(var t=new Array,n=0;n<this.attachments.length;n++){var i=this.attachments[n];if(i)for(var r in i){var o=i[r];o&&t.push(new e(n,r,o))}}return t},n.prototype.getAttachmentsForSlot=function(t,n){var i=this.attachments[t];if(i)for(var r in i){var o=i[r];o&&n.push(new e(t,r,o))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(t,e){for(var n=0,i=0;i<t.slots.length;i++){var r=t.slots[i],o=r.getAttachment();if(o&&n<e.attachments.length){var s=e.attachments[n];for(var a in s)if(o==s[a]){var u=this.getAttachment(n,a);null!=u&&r.setAttachment(u);break}}n++}},n}();t.Skin=n}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e,n){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.SlotData=function(e,n,i){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=e,this.name=n,this.boneData=i}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e,n,i=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=i,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(n=t.TextureWrap||(t.TextureWrap={}));var r=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),t}();t.TextureRegion=r}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,n)}return e.prototype.addTexture=function(e,n){for(var o=this.pages,s=null,a=0;a<o.length;a++)if(o[a].baseTexture===n.baseTexture){s=o[a];break}if(null===s){(s=new i).name="texturePage";var u=n.baseTexture;s.width=u.realWidth,s.height=u.realHeight,s.baseTexture=u,s.minFilter=s.magFilter=t.TextureFilter.Nearest,s.uWrap=t.TextureWrap.ClampToEdge,s.vWrap=t.TextureWrap.ClampToEdge,o.push(s)}var h=new r;return h.name=e,h.page=s,h.texture=n,h.index=-1,this.regions.push(h),h},e.prototype.addTextureHash=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(e&&-1!==n.indexOf(".")?n.substr(0,n.lastIndexOf(".")):n,t[n])},e.prototype.addSpineAtlas=function(t,e,n){return this.load(t,e,n)},e.prototype.load=function(e,o,s){var a=this;if(null==o)throw new Error("textureLoader cannot be null.");var u=new n(e),h=new Array(4),l=null,c=function(){for(;;){var e=u.readLine();if(null==e)return s&&s(a);if(0==(e=e.trim()).length)l=null;else{if(!l){(l=new i).name=e,2==u.readTuple(h)&&(l.width=parseInt(h[0]),l.height=parseInt(h[1]),u.readTuple(h)),u.readTuple(h),l.minFilter=t.Texture.filterFromString(h[0]),l.magFilter=t.Texture.filterFromString(h[1]);var n=u.readValue();l.uWrap=t.TextureWrap.ClampToEdge,l.vWrap=t.TextureWrap.ClampToEdge,"x"==n?l.uWrap=t.TextureWrap.Repeat:"y"==n?l.vWrap=t.TextureWrap.Repeat:"xy"==n&&(l.uWrap=l.vWrap=t.TextureWrap.Repeat),o(e,function(t){if(null===t)return a.pages.splice(a.pages.indexOf(l),1),s&&s(null);(l.baseTexture=t).valid||t.setSize(l.width,l.height),a.pages.push(l),l.setFilters(),l.width&&l.height||(l.width=t.realWidth,l.height=t.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()}),a.pages.push(l);break}var p=new r;p.name=e,p.page=l;var f,d=u.readValue();f="true"==d.toLocaleLowerCase()?6:"false"==d.toLocaleLowerCase()?0:(720-parseFloat(d))%360/45,u.readTuple(h);var g=parseInt(h[0]),m=parseInt(h[1]);u.readTuple(h);var v=parseInt(h[0]),y=parseInt(h[1]),_=l.baseTexture.resolution;g/=_,m/=_,v/=_,y/=_;var b=f%4!=0,x=new PIXI.Rectangle(g,m,b?y:v,b?v:y);4==u.readTuple(h)&&4==u.readTuple(h)&&u.readTuple(h);var w=parseInt(h[0])/_,T=parseInt(h[1])/_;u.readTuple(h);var S=parseInt(h[0])/_,P=parseInt(h[1])/_,O=new PIXI.Rectangle(0,0,w,T),E=new PIXI.Rectangle(S,T-y-P,v,y);if("3"!=PIXI.VERSION[0])p.texture=new PIXI.Texture(p.page.baseTexture,x,O,E,f);else{var A=new PIXI.Rectangle(g,m,v,y),I=A.clone();E.width=w,E.height=T,p.texture=new PIXI.Texture(p.page.baseTexture,A,I,E,f)}p.index=parseInt(u.readValue()),p.texture.updateUvs(),a.regions.push(p)}}};c()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var n=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var i=0,r=n+1;i<3;i++){var o=e.indexOf(",",r);if(-1==o)break;t[i]=e.substr(r,o-r).trim(),r=o+1}return t[i]=e.substring(r).trim(),i+1},t}(),i=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,n=this.minFilter;n==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=PIXI.MIPMAP_MODES.POW2,n==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=i;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=r}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(n.findBone(e.bones[i].name));this.target=n.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,u=s.c,h=s.b,l=s.d,c=0<a*l-u*h?t.MathUtils.degRad:-t.MathUtils.degRad,p=this.data.offsetRotation*c,d=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var v=f[g],y=!1,_=v.matrix;if(0!=e){var b=_.a,x=_.c,w=_.b,T=_.d;(I=Math.atan2(h,a)-Math.atan2(w,b)+p)>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2),I*=e;var S=Math.cos(I),P=Math.sin(I);_.a=S*b-P*w,_.c=S*x-P*T,_.b=P*b+S*w,_.d=P*x+S*T,y=!0}if(0!=n){var O=this.temp;o.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),_.tx+=(O.x-_.tx)*n,_.ty+=(O.y-_.ty)*n,y=!0}if(0<i){var E=Math.sqrt(_.a*_.a+_.b*_.b),A=Math.sqrt(a*a+h*h);1e-5<E&&(E=(E+(A-E+this.data.offsetScaleX)*i)/E),_.a*=E,_.b*=E,E=Math.sqrt(_.c*_.c+_.d*_.d),A=Math.sqrt(u*u+l*l),1e-5<E&&(E=(E+(A-E+this.data.offsetScaleY)*i)/E),_.c*=E,_.d*=E,y=!0}if(0<r){x=_.c,T=_.d;var I,C=Math.atan2(T,x);(I=Math.atan2(l,u)-Math.atan2(h,a)-(C-Math.atan2(_.b,_.a)))>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2),I=C+(I+d)*r,E=Math.sqrt(x*x+T*T),_.c=Math.cos(I)*E,_.d=Math.sin(I)*E,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,u=s.c,h=s.b,l=s.d,c=0<a*l-u*h?t.MathUtils.degRad:-t.MathUtils.degRad,p=this.data.offsetRotation*c,d=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var A,v=f[g],y=!1,_=v.matrix;if(0!=e){var b=_.a,x=_.c,w=_.b,T=_.d;(A=Math.atan2(h,a)+p)>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e;var S=Math.cos(A),P=Math.sin(A);_.a=S*b-P*w,_.c=S*x-P*T,_.b=P*b+S*w,_.d=P*x+S*T,y=!0}if(0!=n){var O=this.temp;o.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),_.tx+=O.x*n,_.ty+=O.y*n,y=!0}if(0<i){var E=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleX)*i+1;_.a*=E,_.b*=E,E=(Math.sqrt(u*u+l*l)-1+this.data.offsetScaleY)*i+1,_.c*=E,_.d*=E,y=!0}if(0<r)(A=Math.atan2(l,u)-Math.atan2(h,a))>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),x=_.c,T=_.d,A=Math.atan2(T,x)+(A-t.MathUtils.PI/2+d)*r,E=Math.sqrt(x*x+T*T),_.c=Math.cos(A)*E,_.d=Math.sin(A)*E,y=!0;y&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var u=o[s];u.appliedValid||u.updateAppliedTransform();var h=u.arotation;if(0!=t){var l=r.arotation-h+this.data.offsetRotation;h+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t}var c=u.ax,p=u.ay;0!=e&&(c+=(r.ax-c+this.data.offsetX)*e,p+=(r.ay-p+this.data.offsetY)*e);var d=u.ascaleX,f=u.ascaleY;0<n&&(1e-5<d&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*n)/d),1e-5<f&&(f=(f+(r.ascaleY-f+this.data.offsetScaleY)*n)/f));var g=u.ashearY;0<i&&(l=r.ashearY-g+this.data.offsetShearY,l-=360*(16384-(16384.499999999996-l/360|0)),u.shearY+=l*i),u.updateWorldTransformWith(c,p,h,d,f,u.ashearX,g)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var u=o[s];u.appliedValid||u.updateAppliedTransform();var h=u.arotation;0!=t&&(h+=(r.arotation+this.data.offsetRotation)*t);var l=u.ax,c=u.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);var p=u.ascaleX,d=u.ascaleY;0<n&&(1e-5<p&&(p*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<d&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var f=u.ashearY;0<i&&(f+=(r.ashearY+this.data.offsetShearY)*i),u.updateWorldTransformWith(l,c,h,p,d,u.ashearX,f)}},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return o(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}return e.prototype.triangulate=function(t){for(var n=t,i=t.length>>1,r=this.indicesArray,o=r.length=0;o<i;o++)r[o]=o;var s=this.isConcaveArray;o=s.length=0;for(var a=i;o<a;++o)s[o]=e.isConcave(o,i,n,r);var u=this.triangles;for(u.length=0;3<i;){for(var h=i-1,l=(o=0,1);;){t:if(!s[o]){for(var c=r[h]<<1,p=r[o]<<1,d=r[l]<<1,f=n[c],g=n[c+1],m=n[p],v=n[p+1],y=n[d],_=n[d+1],b=(l+1)%i;b!=h;b=(b+1)%i)if(s[b]){var x=r[b]<<1,w=n[x],T=n[x+1];if(e.positiveArea(y,_,f,g,w,T)&&e.positiveArea(f,g,m,v,w,T)&&e.positiveArea(m,v,y,_,w,T))break t}break}if(0==l){do{if(!s[o])break;o--}while(0<o);break}h=o,l=((o=l)+1)%i}u.push(r[(i+o-1)%i]),u.push(r[o]),u.push(r[(o+1)%i]),r.splice(o,1),s.splice(o,1);var S=(--i+o-1)%i,P=o==i?0:o;s[S]=e.isConcave(S,i,n,r),s[P]=e.isConcave(P,i,n,r)}return 3==i&&(u.push(r[2]),u.push(r[0]),u.push(r[1])),u},e.prototype.decompose=function(t,n){var i=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;for(var a=this.polygonPool.obtain(),u=-1,h=a.length=0,l=0,c=n.length;l<c;l+=3){var p=n[l]<<1,d=n[l+1]<<1,f=n[l+2]<<1,g=i[p],m=i[p+1],v=i[d],y=i[d+1],_=i[f],b=i[f+1],x=!1;if(u==p){var w=a.length-4,T=e.winding(a[w],a[w+1],a[w+2],a[w+3],_,b),S=e.winding(_,b,a[0],a[1],a[2],a[3]);T==h&&S==h&&(a.push(_),a.push(b),s.push(f),x=!0)}x||(0<a.length?(r.push(a),o.push(s)):(this.polygonPool.free(a),this.polygonIndicesPool.free(s)),(a=this.polygonPool.obtain()).length=0,a.push(g),a.push(m),a.push(v),a.push(y),a.push(_),a.push(b),(s=this.polygonIndicesPool.obtain()).length=0,s.push(p),s.push(d),s.push(f),h=e.winding(g,m,v,y,_,b),u=p)}for(0<a.length&&(r.push(a),o.push(s)),l=0,c=r.length;l<c;l++)if(0!=(s=o[l]).length)for(var P=s[0],O=s[s.length-1],E=(a=r[l])[w=a.length-4],A=a[w+1],I=a[w+2],C=a[w+3],M=a[0],R=a[1],k=a[2],D=a[3],L=e.winding(E,A,I,C,M,R),B=0;B<c;B++)if(B!=l){var N=o[B];if(3==N.length){var F=N[0],j=N[1],U=N[2],V=r[B];_=V[V.length-2],b=V[V.length-1],F==P&&j==O&&(T=e.winding(E,A,I,C,_,b),S=e.winding(_,b,M,R,k,D),T==L&&S==L&&(V.length=0,N.length=0,a.push(_),a.push(b),s.push(U),E=I,A=C,I=_,C=b,B=0))}}for(l=r.length-1;0<=l;l--)0==(a=r[l]).length&&(r.splice(l,1),this.polygonPool.free(a),s=o[l],o.splice(l,1),this.polygonIndicesPool.free(s));return r},e.isConcave=function(t,e,n,i){var r=i[(e+t-1)%e]<<1,o=i[t]<<1,s=i[(t+1)%e]<<1;return!this.positiveArea(n[r],n[r+1],n[o],n[o+1],n[s],n[s+1])},e.positiveArea=function(t,e,n,i,r,o){return 0<=t*(o-i)+n*(e-o)+r*(i-e)},e.winding=function(t,e,n,i,r,o){var s=n-t,a=i-e;return 0<=r*a-o*s+s*e-t*a?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var n=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=n,this.a=i}return t.prototype.set=function(t,e,n,i){return this.r=t,this.g=e,this.b=n,this.a=i,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,n,i){return this.r+=t,this.g+=e,this.b+=n,this.a+=i,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=n;var i=function(){function t(){}return t.clamp=function(t,e,n){return t<e?e:n<t?n:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return 0<t?1:t<0?-1:0},t.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))},t.randomTriangularWith=function(t,e,n){var i=Math.random(),r=e-t;return i<=(n-t)/r?t+Math.sqrt(i*r*(n-t)):e-Math.sqrt((1-i)*r*(e-n))},t.PI2=2*(t.PI=3.1415927),t.radDeg=t.radiansToDegrees=180/t.PI,t.degRad=t.degreesToRadians=t.PI/180,t}();t.MathUtils=i;var r=function(){function t(){}return t.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n.power=2,n.power=e,n}return o(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(t.Interpolation=r),a=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(t.Pow=s);t.PowOut=a;var u=function(){function t(){}return t.arrayCopy=function(t,e,n,i,r){for(var o=e,s=i;o<e+r;o++,s++)n[s]=t[o]},t.setArraySize=function(t,e,n){void 0===n&&(n=0);var i=t.length;if(i==e)return t;if(i<(t.length=e))for(var r=i;r<e;r++)t[r]=n;return t},t.ensureArrayCapacity=function(e,n,i){return void 0===i&&(i=0),e.length>=n?e:t.setArraySize(e,n,i)},t.newArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),i=0;i<n.length;i++)n[i]=0;return n},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),i=0;i<n.length;i++)n[i]=0;return n},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,n){void 0===n&&(n=!0);for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=u;var h=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e],i=n.matrix;console.log(n.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.tx+", "+i.ty)}},t}();t.DebugUtils=h;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var p=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=p;var d=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=d}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},n=function(e){function n(t){var i=e.call(this,t)||this;return i.id=(65535&n.nextID++)<<11,i.worldVerticesLength=0,i.deformAttachment=i}return o(n,e),n.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},n.prototype.computeWorldVertices=function(t,e,n,i,r,o){n=r+(n>>1)*o;var s=t.bone.skeleton,a=t.deform,u=this.vertices,h=this.bones;if(null!=h){for(var l=0,c=0,p=0;p<e;p+=2)l+=(m=h[l])+1,c+=m;var d=s.bones;if(0==a.length)for(A=r,S=3*c;A<n;A+=o){var f=0,g=0,m=h[l++];for(m+=l;l<m;l++,S+=3){b=d[h[l]].matrix,I=u[S],C=u[S+1];var v=u[S+2];f+=(I*b.a+C*b.c+b.tx)*v,g+=(I*b.b+C*b.d+b.ty)*v}i[A]=f,i[A+1]=g}else for(var y=a,_=(A=r,S=3*c,c<<1);A<n;A+=o){for(g=f=0,m=h[l++],m+=l;l<m;l++,S+=3,_+=2)b=d[h[l]].matrix,I=u[S]+y[_],C=u[S+1]+y[_+1],v=u[S+2],f+=(I*b.a+C*b.c+b.tx)*v,g+=(I*b.b+C*b.d+b.ty)*v;i[A]=f,i[A+1]=g}}else{0<a.length&&(u=a);for(var b,x=(b=t.bone.matrix).tx,w=b.ty,T=b.a,S=b.c,P=b.b,O=b.d,E=e,A=r;A<n;E+=2,A+=o){var I=u[E],C=u[E+1];i[A]=I*T+C*S+x,i[A+1]=I*P+C*O+w}}},n.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},n.nextID=0,n}(t.Attachment=e);t.VertexAttachment=n}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(1,1,1,1),i}return o(n,e),n.prototype.copy=function(){var t=new n(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(.2275,.2275,.8078,1),i}return o(n,e),n.prototype.copy=function(){var t=new n(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(1,1,1,1),i.tempColor=new t.Color(0,0,0,0),i}return o(n,e),n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},n.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new n(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},n.prototype.newLinkedMesh=function(){var t=new n(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},n}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.closed=!1,i.constantSpeed=!1,i.color=new t.Color(1,1,1,1),i}return o(n,e),n.prototype.copy=function(){var e=new n(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},n}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(.38,.94,0,1),i}return o(n,e),n.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},n.prototype.computeWorldRotation=function(e){var n=e.matrix,i=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),o=i*n.a+r*n.c,s=i*n.b+r*n.d;return Math.atan2(s,o)*t.MathUtils.radDeg},n.prototype.copy=function(){var t=new n(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new t.Color(1,1,1,1),i.offset=t.Utils.newFloatArray(8),i.uvs=t.Utils.newFloatArray(8),i.tempColor=new t.Color(1,1,1,1),i}return o(n,e),n.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,o=i+this.region.width*t,s=r+this.region.height*e,a=this.rotation*Math.PI/180,u=Math.cos(a),h=Math.sin(a),l=i*u+this.x,c=i*h,p=r*u+this.y,d=r*h,f=o*u+this.x,g=o*h,m=s*u+this.y,v=s*h,y=this.offset;y[n.OX1]=l-d,y[n.OY1]=p+c,y[n.OX2]=l-v,y[n.OY2]=m+c,y[n.OX3]=f-v,y[n.OY3]=m+g,y[n.OX4]=f-d,y[n.OY4]=p+g},n.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},n.prototype.computeWorldVertices=function(t,e,i,r){var o=this.offset,s=t.matrix,a=s.tx,u=s.ty,h=s.a,l=s.c,c=s.b,p=s.d,d=0,f=0;d=o[n.OX1],f=o[n.OY1],e[i]=d*h+f*l+a,e[i+1]=d*c+f*p+u,i+=r,d=o[n.OX2],f=o[n.OY2],e[i]=d*h+f*l+a,e[i+1]=d*c+f*p+u,i+=r,d=o[n.OX3],f=o[n.OY3],e[i]=d*h+f*l+a,e[i+1]=d*c+f*p+u,i+=r,d=o[n.OX4],f=o[n.OY4],e[i]=d*h+f*l+a,e[i+1]=d*c+f*p+u},n.prototype.copy=function(){var e=new n(this.name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,n,i,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(n,i,r,o){var s=this.angle*t.MathUtils.degreesToRadians,a=n.x-this.worldX,u=n.y-this.worldY,h=Math.sqrt(a*a+u*u);if(h<this.radius){var l=e.interpolation.apply(0,s,(this.radius-h)/this.radius),c=Math.cos(l),p=Math.sin(l);n.x=c*a-p*u+this.worldX,n.y=p*a+c*u+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(r||(r={})),Math.fround||(Math.fround=Math.fround=(i=new Float32Array(1),function(t){return i[0]=t,i[0]})),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return o(e,t),e}(PIXI.Sprite);t.SpineSprite=n;var i=PIXI.GraphicsGeometry.prototype;if(!i.invalidate){var r=[];i.invalidate=function(){var t=this.graphicsData;r.push(0),this.graphicsData=r,this.clear(),this.graphicsData=t}}var s=function(t){function e(e,n,i,r,o){var s=t.call(this,e,n,i,r,o)||this;return s.region=null,s.attachment=null,s}return o(e,t),e}(PIXI.SimpleMesh);t.SpineMesh=s;var a=function(i){function r(e){var n=i.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=e,n.skeleton=new t.core.Skeleton(e),n.skeleton.updateWorldTransform(),n.stateData=new t.core.AnimationStateData(e),n.state=new t.core.AnimationState(n.stateData),n.slotContainers=[],n.tempClipContainers=[];for(var r=0,o=n.skeleton.slots.length;r<o;r++){var s=n.skeleton.slots[r],a=s.getAttachment(),u=n.newContainer();if(n.slotContainers.push(u),n.addChild(u),n.tempClipContainers.push(null),a instanceof t.core.RegionAttachment){var h=a.region.name,l=n.createSprite(s,a,h);s.currentSprite=l,s.currentSpriteName=h,u.addChild(l)}else if(a instanceof t.core.MeshAttachment){var c=n.createMesh(s,a);s.currentMesh=c,s.currentMeshId=a.id,u.addChild(c)}else{if(!(a instanceof t.core.ClippingAttachment))continue;n.createGraphics(s,a),u.addChild(s.clippingContainer),u.addChild(s.currentGraphics)}}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return o(r,i),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?r.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&((this._visible=t)&&(this.lastTime=0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:r.globalDelayLimit)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),r.prototype.update=function(n){var i=this.delayLimit;if(i<n&&(n=i),this.state.update(n),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var r=this.skeleton.slots,o=this.color,s=null,a=null;o?(s=o.light,a=o.dark):s=this.tintRgb;for(var u=0,h=r.length;u<h;u++){var l=(E=r[u]).getAttachment(),c=this.slotContainers[u];if(l){var p=null,d=l.color;if(l instanceof t.core.RegionAttachment){var f=l.region;if(f){E.currentMesh&&(E.currentMesh.visible=!1,E.currentMesh=null,E.currentMeshId=void 0,E.currentMeshName=void 0);var g=f;if(E.currentSpriteName&&E.currentSpriteName===g.name)E.currentSpriteName!==g.name||E.hackRegion||this.setSpriteRegion(l,E.currentSprite,f);else{var m=g.name;if(E.currentSprite&&(E.currentSprite.visible=!1),E.sprites=E.sprites||{},void 0!==E.sprites[m])E.sprites[m].visible=!0;else{var v=this.createSprite(E,l,m);c.addChild(v)}E.currentSprite=E.sprites[m],E.currentSpriteName=m}}(y=c.transform).setFromMatrix(E.bone.matrix),E.currentSprite.color?p=E.currentSprite.color:(e[0]=s[0]*E.color.r*d.r,e[1]=s[1]*E.color.g*d.g,e[2]=s[2]*E.color.b*d.b,E.currentSprite.tint=PIXI.utils.rgb2hex(e)),E.currentSprite.blendMode=E.blendMode}else{if(!(l instanceof t.core.MeshAttachment)){if(l instanceof t.core.ClippingAttachment){E.currentGraphics||(this.createGraphics(E,l),c.addChild(E.clippingContainer),c.addChild(E.currentGraphics)),this.updateGraphics(E,l),c.alpha=1,c.visible=!0;continue}c.visible=!1;continue}var y;if(E.currentSprite&&(E.currentSprite.visible=!1,E.currentSprite=null,E.currentSpriteName=void 0,(y=new PIXI.Transform)._parentID=-1,y._worldID=c.transform._worldID,c.transform=y),!E.currentMeshId||E.currentMeshId!==l.id){var _=l.id;if(E.currentMesh&&(E.currentMesh.visible=!1),E.meshes=E.meshes||{},void 0!==E.meshes[_])E.meshes[_].visible=!0;else{var b=this.createMesh(E,l);c.addChild(b)}E.currentMesh=E.meshes[_],E.currentMeshName=l.name,E.currentMeshId=_}l.computeWorldVerticesOld(E,E.currentMesh.vertices),E.currentMesh.color?p=E.currentMesh.color:(e[0]=s[0]*E.color.r*d.r,e[1]=s[1]*E.color.g*d.g,e[2]=s[2]*E.color.b*d.b,E.currentMesh.tint=PIXI.utils.rgb2hex(e)),E.currentMesh.blendMode=E.blendMode}if(c.visible=!0,p){var x=E.color.r*d.r,w=E.color.g*d.g,T=E.color.b*d.b;p.setLight(s[0]*x+a[0]*(1-x),s[1]*w+a[1]*(1-w),s[2]*T+a[2]*(1-T)),T=E.darkColor?(x=E.darkColor.r,w=E.darkColor.g,E.darkColor.b):w=x=0,p.setDark(s[0]*x+a[0]*(1-x),s[1]*w+a[1]*(1-w),s[2]*T+a[2]*(1-T))}c.alpha=E.color.a}else c.visible=!1}var S=this.skeleton.drawOrder,P=null,O=null;for(u=0,h=S.length;u<h;u++){var E=r[S[u].data.index];if(c=this.slotContainers[S[u].data.index],O||null!==c.parent&&c.parent!==this&&(c.parent.removeChild(c),c.parent=this),E.currentGraphics&&E.getAttachment())O=E.clippingContainer,P=E.getAttachment(),O.children.length=0,this.children[u]=c,P.endSlot==E.data&&(P.endSlot=null);else if(O){var A=this.tempClipContainers[u];A||((A=this.tempClipContainers[u]=this.newContainer()).visible=!1),this.children[u]=A,c.parent=null,O.addChild(c),P.endSlot==E.data&&(O.renderable=!0,P=O=null)}else this.children[u]=c}}},r.prototype.setSpriteRegion=function(e,n,i){n.attachment===e&&n.region===i||(n.region=i,n.attachment=e,n.texture=i.texture,n.rotation=e.rotation*t.core.MathUtils.degRad,n.position.x=e.x,n.position.y=e.y,n.alpha=e.color.a,i.size?(n.scale.x=i.size.width/i.originalWidth,n.scale.y=-i.size.height/i.originalHeight):(n.scale.x=e.scaleX*e.width/i.originalWidth,n.scale.y=-e.scaleY*e.height/i.originalHeight))},r.prototype.setMeshRegion=function(t,e,n){e.attachment===t&&e.region===n||(e.region=n,e.attachment=t,e.texture=n.texture,n.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},r.prototype.autoUpdateTransform=function(){if(r.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},r.prototype.createSprite=function(t,e,n){var i=e.region;t.hackAttachment===e&&(i=t.hackRegion);var r=i.texture,o=this.newSprite(r);return o.anchor.set(.5),this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[n]=o},r.prototype.createMesh=function(t,e){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var i=this.newMesh(n.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),PIXI.DRAW_MODES.TRIANGLES);return void 0!==i._canvasPadding&&(i._canvasPadding=1.5),i.alpha=e.color.a,i.region=e.region,this.setMeshRegion(e,i,n),t.meshes=t.meshes||{},t.meshes[e.id]=i},r.prototype.createGraphics=function(t,e){var n=this.newGraphics(),i=new PIXI.Polygon([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(i),n.renderable=!1,t.currentGraphics=n,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,n},r.prototype.updateGraphics=function(t,e){var n=t.currentGraphics.geometry,i=n.graphicsData[0].shape.points,r=e.worldVerticesLength;i.length=r,e.computeWorldVertices(t,0,r,i,0,2),n.invalidate()},r.prototype.hackTextureBySlotIndex=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=this.skeleton.slots[e];if(!r)return!1;var o=r.getAttachment(),s=o.region;return n?((s=new t.core.TextureRegion).texture=n,s.size=i,r.hackRegion=s,r.hackAttachment=o):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=s?(this.setSpriteRegion(o,r.currentSprite,s),r.currentSprite.region=s):r.currentMesh&&r.currentMesh.region!=s&&this.setMeshRegion(o,r.currentMesh,s),!0},r.prototype.hackTextureBySlotName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=this.skeleton.findSlotIndex(t);return-1!=i&&this.hackTextureBySlotIndex(i,e,n)},r.prototype.hackTextureAttachment=function(e,n,i,r){void 0===r&&(r=null);var o=this.skeleton.findSlotIndex(e),s=this.skeleton.getAttachmentByName(e,n);s.region.texture=i;var a=this.skeleton.slots[o];if(!a)return!1;var u=a.getAttachment();if(n!==u.name)return!1;var h=s.region;return i?((h=new t.core.TextureRegion).texture=i,h.size=r,a.hackRegion=h,a.hackAttachment=u):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=h?(this.setSpriteRegion(u,a.currentSprite,h),a.currentSprite.region=h):a.currentMesh&&a.currentMesh.region!=h&&this.setMeshRegion(u,a.currentMesh,h),!0},r.prototype.newContainer=function(){return new PIXI.Container},r.prototype.newSprite=function(t){return new n(t)},r.prototype.newGraphics=function(){return new PIXI.Graphics},r.prototype.newMesh=function(t,e,n,i,r){return new s(t,e,n,i,r)},r.prototype.transformHack=function(){return 1},r.prototype.hackAttachmentGroups=function(t,e,n){if(t){for(var i=[],r=[],o=0,s=this.skeleton.slots.length;o<s;o++){var a=this.skeleton.slots[o],u=a.currentSpriteName||a.currentMeshName||"",h=a.currentSprite||a.currentMesh;u.endsWith(t)?(h.parentGroup=e,r.push(h)):n&&h&&(h.parentGroup=n,i.push(h))}return[i,r]}},r.prototype.destroy=function(t){for(var e=0,n=this.skeleton.slots.length;e<n;e++){var r=this.skeleton.slots[e];for(var o in r.meshes)r.meshes[o].destroy(t);for(var s in r.meshes=null,r.sprites)r.sprites[s].destroy(t);r.sprites=null}for(e=0,n=this.slotContainers.length;e<n;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,i.prototype.destroy.call(this,t)},r.globalAutoUpdate=!0,r.globalDelayLimit=0,r.clippingPolygon=[],r}(PIXI.Container);t.Spine=a}(r||(r={})),function(t){PIXI.spine=t;var e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(r||(r={})),function(t){PIXI.LoaderResource.setExtensionXhrType("skel",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var e=function(){function e(){}return e.use=function(e,r){if(!e.data)return r();var o=e.type===PIXI.LoaderResource.TYPE.JSON&&e.data.bones,s=e.xhrType===PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER&&("skel"===e.extension||e.metadata.spineMetadata);if(!o&&!s)return r();var a=null,u=e.data;o?a=new t.core.SkeletonJson(null):(a=new t.core.SkeletonBinary(null),e.data instanceof ArrayBuffer&&(u=new Uint8Array(e.data)));var h=e.metadata||{},l=h?e.metadata.spineSkeletonScale:null;l&&(a.scale=l);var c=h?e.metadata.spineAtlas:null;if(!1===c)return r();if(c&&c.pages)return a.attachmentLoader=new t.core.AtlasAttachmentLoader(c),e.spineData=a.readSkeletonData(u),e.spineAtlas=c,r();var p=h.spineAtlasSuffix||".atlas",d=e.url,f=d.indexOf("?");0<f&&(d=d.substr(0,f)),d=d.substr(0,d.lastIndexOf("."))+p,e.metadata&&e.metadata.spineAtlasFile&&(d=e.metadata.spineAtlasFile),d=d.replace(this.baseUrl,"");var g={crossOrigin:e.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:h.spineMetadata||null,parentResource:e},m={crossOrigin:e.crossOrigin,metadata:h.imageMetadata||null,parentResource:e},v=e.url.substr(0,e.url.lastIndexOf("/")+1);v=v.replace(this.baseUrl,"");var y=h.imageNamePrefix||e.name+"_atlas_page_",_=h.images?i(h.images):h.image?i({default:h.image}):h.imageLoader?h.imageLoader(this,y,v,m):n(this,y,v,m),b=function(n){new t.core.TextureAtlas(n,_,function(n){n&&(a.attachmentLoader=new t.core.AtlasAttachmentLoader(n),e.spineData=a.readSkeletonData(u),e.spineAtlas=n),r()})};e.metadata&&e.metadata.atlasRawData?b(e.metadata.atlasRawData):this.add(e.name+"_atlas",d,g,function(t){t.error?r():b(t.data)})},e}();function n(t,e,n,i){return n&&n.lastIndexOf("/")!==n.length-1&&(n+="/"),function(r,o){var s=e+r,a=n+r,u=t.resources[s];if(u){var h=function(){o(u.texture.baseTexture)};u.texture?h():u.onAfterMiddleware.add(h)}else t.add(s,a,i,function(t){t.error?o(null):o(t.texture.baseTexture)})}}function i(t){return function(e,n){var i=t[e]||t.default;i&&i.baseTexture?n(i.baseTexture):n(i)}}t.AtlasParser=e,t.imageLoaderAdapter=n,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,n){n(PIXI.BaseTexture.from(t,e))}},t.staticImageLoader=i,PIXI.Loader&&PIXI.Loader.registerPlugin(e)}(r||(r={}))},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}n.r(e);var s=n(13),a=n(14),u=n(59),h=n.n(u);function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!==h()(e)&&"function"!=typeof e?l(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}var g={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},m=new(function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),this.init(e,n)}return Object(a.a)(t,[{key:"init",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||g,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,o({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),v=function(){function t(){Object(s.a)(this,t),this.observers={}}return Object(a.a)(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)}),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter(function(t){return t!==e}):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach(function(t){t.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){e.apply(e,[t].concat(n))})}}]),t}();function y(){var t,e,n=new Promise(function(n,i){t=n,e=i});return n.resolve=t,n.reject=e,n}function _(t){return null==t?"":""+t}function x(t,e,n){function i(t){return t&&-1<t.indexOf("###")?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");1<o.length;){if(r())return{};var s=i(o.shift());!t[s]&&n&&(t[s]=new n),t=Object.prototype.hasOwnProperty.call(t,s)?t[s]:{}}return r()?{}:{obj:t,k:i(o.shift())}}function w(t,e,n){var i=x(t,e,Object);i.obj[i.k]=n}function T(t,e){var n=x(t,e),i=n.obj,r=n.k;if(i)return i[r]}function S(t,e,n){var i=T(t,n);return void 0!==i?i:T(e,n)}function O(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function A(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return E[t]}):t}var I="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&-1<window.navigator.userAgent.indexOf("MSIE"),C=function(t){function e(t){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Object(s.a)(this,e),n=c(this,p(e).call(this)),I&&v.call(l(n)),n.data=t||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return f(e,v),Object(a.a)(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);-1<e&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),-1<t.indexOf(".")&&(o=t.split(".")),T(this.data,o)}},{key:"addResource",value:function(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[t,e];n&&(s=s.concat(o?n.split(o):n)),-1<t.indexOf(".")&&(i=e,e=(s=t.split("."))[1]),this.addNamespaces(e),w(this.data,s,i),r.silent||this.emit("added",t,e,n,i)}},{key:"addResources",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(t,e,r,n[r],{silent:!0});i.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,i,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];-1<t.indexOf(".")&&(i=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var u=T(this.data,a)||{};i?function P(t,e,n){for(var i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):P(t[i],e[i],n):t[i]=e[i]);return t}(u,n,r):u=o({},u,n),w(this.data,a,u),s.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?o({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(),M={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var o=this;return t.forEach(function(t){o.processors[t]&&(e=o.processors[t].process(e,n,i,r))}),e}},R={},k=function(t){function e(t){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,e),n=c(this,p(e).call(this)),I&&v.call(l(n)),function(t,e,n){t.forEach(function(t){e[t]&&(n[t]=e[t])})}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,l(n)),n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=m.create("translator"),n}return f(e,v),Object(a.a)(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,r=e.ns||this.options.defaultNS;if(n&&-1<t.indexOf(n)){var o=t.match(this.interpolator.nestingRegexp);if(o&&0<o.length)return{key:t,namespaces:r};var s=t.split(n);(n!==i||n===i&&-1<this.options.ns.indexOf(s[0]))&&(r=s.shift()),t=s.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}},{key:"translate",value:function(t,n,r){var s=this;if("object"!==i(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,u=this.extractFromKey(t[t.length-1],n),h=u.key,l=u.namespaces,c=l[l.length-1],p=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(d){var f=n.nsSeparator||this.options.nsSeparator;return c+f+h}return h}var g=this.resolve(t,n),m=g&&g.res,v=g&&g.usedKey||h,y=g&&g.exactUsedKey||h,_=Object.prototype.toString.apply(m),x=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject;if(w&&m&&("string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0&&("string"!=typeof x||"[object Array]"!==_)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,m,n):"key '".concat(h," (").concat(this.language,")' returned an object instead of string.");if(a){var S="[object Array]"===_,P=S?[]:{},O=S?y:v;for(var E in m)if(Object.prototype.hasOwnProperty.call(m,E)){var A="".concat(O).concat(a).concat(E);P[E]=this.translate(A,o({},n,{joinArrays:!1,ns:l})),P[E]===A&&(P[E]=m[E])}m=P}}else if(w&&"string"==typeof x&&"[object Array]"===_)(m=m.join(x))&&(m=this.extendTranslation(m,t,n,r));else{var I=!1,C=!1,M=void 0!==n.count&&"string"!=typeof n.count,R=e.hasDefaultValue(n),k=M?this.pluralResolver.getSuffix(p,n.count):"",D=n["defaultValue".concat(k)]||n.defaultValue;!this.isValidLookup(m)&&R&&(I=!0,m=D),this.isValidLookup(m)||(C=!0,m=h);var L=R&&D!==m&&this.options.updateMissing;if(C||I||L){if(this.logger.log(L?"updateKey":"missingKey",p,c,h,L?D:m),a){var B=this.resolve(h,o({},n,{keySeparator:!1}));B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var N=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var j=0;j<F.length;j++)N.push(F[j]);else"all"===this.options.saveMissingTo?N=this.languageUtils.toResolveHierarchy(n.lng||this.language):N.push(n.lng||this.language);var U=function(t,e,i){s.options.missingKeyHandler?s.options.missingKeyHandler(t,c,e,L?i:m,L,n):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(t,c,e,L?i:m,L,n),s.emit("missingKey",t,c,e,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?N.forEach(function(t){s.pluralResolver.getSuffixes(t).forEach(function(e){U([t],h+e,n["defaultValue".concat(e)]||D)})}):U(N,h,D))}m=this.extendTranslation(m,t,n,g,r),C&&m===h&&this.options.appendNamespaceToMissingKey&&(m="".concat(c,":").concat(h)),C&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(t,e,n,i,r){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(o({},n,{interpolation:o({},this.options.interpolation,n.interpolation)}));var a,u=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(u){var h=t.match(this.interpolator.nestingRegexp);a=h&&h.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=o({},this.options.interpolation.defaultVariables,l)),t=this.interpolator.interpolate(t,l,n.lng||this.language,n),u){var c=t.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r&&r[0]===i[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(e[0])),null):s.translate.apply(s,i.concat([e]))},n)),n.interpolation&&this.interpolator.reset()}var p=n.postProcess||this.options.postProcess,d="string"==typeof p?[p]:p;return null!=t&&d&&d.length&&!1!==n.applyPostProcessor&&(t=M.handle(d,t,e,this.options&&this.options.postProcessPassResolved?o({i18nResolved:i},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,i,r,o,s=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!s.isValidLookup(e)){var u=s.extractFromKey(t,a),h=u.key;n=h;var l=u.namespaces;s.options.fallbackNS&&(l=l.concat(s.options.fallbackNS));var c=void 0!==a.count&&"string"!=typeof a.count,p=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,d=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);l.forEach(function(t){s.isValidLookup(e)||(o=t,!R["".concat(d[0],"-").concat(t)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(R["".concat(d[0],"-").concat(t)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach(function(n){if(!s.isValidLookup(e)){r=n;var o,u,l=h,d=[l];for(s.i18nFormat&&s.i18nFormat.addLookupKeys?s.i18nFormat.addLookupKeys(d,h,n,t,a):(c&&(o=s.pluralResolver.getSuffix(n,a.count)),c&&p&&d.push(l+o),p&&d.push(l+="".concat(s.options.contextSeparator).concat(a.context)),c&&d.push(l+=o));u=d.pop();)s.isValidLookup(e)||(i=u,e=s.getResource(n,t,u,a))}}))})}}),{res:e,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}}],[{key:"hasDefaultValue",value:function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&"defaultValue"===e.substring(0,"defaultValue".length)&&void 0!==t[e])return!0;return!1}}]),e}();function D(t){return t.charAt(0).toUpperCase()+t.slice(1)}var L=function(){function t(e){Object(s.a)(this,t),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=m.create("languageUtils")}return Object(a.a)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&-1<t.indexOf("-")){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=D(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=D(n[1].toLowerCase())),-1<e.indexOf(n[2].toLowerCase())&&(n[2]=D(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(t)}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||-1<this.supportedLngs.indexOf(t)}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach(function(t){if(!e){var i=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(i)||(e=i)}}),!e&&this.options.supportedLngs&&t.forEach(function(t){if(!e){var i=n.getLanguagePartFromCode(t);if(n.isSupportedCode(i))return e=i;e=n.options.supportedLngs.find(function(t){if(0===t.indexOf(i))return t})}}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],o=function(t){t&&(n.isSupportedCode(t)?r.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&-1<t.indexOf("-")?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),i.forEach(function(t){r.indexOf(t)<0&&o(n.formatLanguageCode(t))}),r}}]),t}(),B=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],N={1:function(t){return Number(1<t)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:3<=t%100&&t%100<=10?3:11<=t%100?4:5)},6:function(t){return Number(1==t?0:2<=t&&t<=4?1:2)},7:function(t){return Number(1==t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(2<=t)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:2<t&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&(t%100<10||20<=t%100)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||1<t%100&&t%100<11?1:10<t%100&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||0<t%100&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||10<t)&&t%10==0?2:3)}};var j=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),this.languageUtils=e,this.options=n,this.logger=m.create("pluralResolver"),this.rules=function(){var t={};return B.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:N[e.fc]}})}),t}()}return Object(a.a)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&1<e.numbers.length}},{key:"getPluralFormsOfKey",value:function(t,e){return this.getSuffixes(t).map(function(t){return e+t})}},{key:"getSuffixes",value:function(t){var e=this,n=this.getRule(t);return n?n.numbers.map(function(n){return e.getSuffix(t,n)}):[]}},{key:"getSuffix",value:function(t,e){var n=this,i=this.getRule(t);if(i){var r=i.noAbs?i.plurals(e):i.plurals(Math.abs(e)),o=i.numbers[r];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),U=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t),this.logger=m.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Object(a.a)(t,[{key:"init",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:A,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?O(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?O(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?O(e.nestingPrefix):e.nestingPrefixEscaped||O("$t("),this.nestingSuffix=e.nestingSuffix?O(e.nestingSuffix):e.nestingSuffixEscaped||O(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,i){var r,o,s,a=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function h(t){return t.replace(/\$/g,"$$$$")}var l=function(t){if(t.indexOf(a.formatSeparator)<0){var r=S(e,u,t);return a.alwaysFormat?a.format(r,void 0,n):r}var o=t.split(a.formatSeparator),s=o.shift().trim(),h=o.join(a.formatSeparator).trim();return a.format(S(e,u,s),h,n,i)};this.resetRegExp();var c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&i.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return h(t)}},{regex:this.regexp,safeValue:function(t){return a.escapeValue?h(a.escape(t)):h(t)}}].forEach(function(e){for(s=0;r=e.regex.exec(t);){if(void 0===(o=l(r[1].trim())))if("function"==typeof c){var n=c(t,r,i);o="string"==typeof n?n:""}else{if(p){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(t)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=_(o));if(t=t.replace(r[0],e.safeValue(o)),e.regex.lastIndex=0,++s>=a.maxReplaces)break}}),t}},{key:"nest",value:function(t,e){var n,i,r=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=o({},s);function u(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var i=t.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);t=i[0],r=(r=this.interpolate(r,a)).replace(/'/g,'"');try{a=JSON.parse(r),e&&(a=o({},e,a))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(r)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var h=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map(function(t){return t.trim()});n[1]=c.shift(),h=c,l=!0}if((i=e(u.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=_(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),i=""),l&&(i=h.reduce(function(t,e){return r.format(t,e,s.lng,s)},i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}]),t}(),V=function(t){function e(t,n,i){var r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return Object(s.a)(this,e),r=c(this,p(e).call(this)),I&&v.call(l(r)),r.backend=t,r.store=n,r.services=i,r.languageUtils=i.languageUtils,r.options=o,r.logger=m.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(i,o.backend,o),r}return f(e,v),Object(a.a)(e,[{key:"queueLoad",value:function(t,e,n,i){var r=this,o=[],s=[],a=[],u=[];return t.forEach(function(t){var i=!0;e.forEach(function(e){var a="".concat(t,"|").concat(e);!n.reload&&r.store.hasResourceBundle(t,e)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),u.indexOf(e)<0&&u.push(e)))}),i||a.push(t)}),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:u}}},{key:"loaded",value:function(t,e,n){var i=t.split("|"),r=i[0],o=i[1];e&&this.emit("failedLoading",r,o,e),n&&this.store.addResourceBundle(r,o,n),this.state[t]=e?-1:2;var s={};this.queue.forEach(function(n){var i,a,h,l,c;i=n.loaded,a=o,(l=(h=x(i,[r],Object)).obj)[c=h.k]=l[c]||[],l[c].push(a),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach(function(t){s[t]||(s[t]=[]),n.loaded[t].length&&n.loaded[t].forEach(function(e){s[t].indexOf(e)<0&&s[t].push(e)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(function(t){return!t.done})}},{key:"read",value:function(t,e,n){var i=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:350,s=5<arguments.length?arguments[5]:void 0;return t.length?this.backend[n](t,e,function(a,u){a&&u&&r<5?setTimeout(function(){i.read.call(i,t,e,n,r+1,2*o,s)},o):s(a,u)}):s(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(function(t){n.loadOne(t)})}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=t.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,function(i,s){i&&e.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&e.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),e.loaded(t,i,s)})}},{key:"saveMissing",value:function(t,e,n,i,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,i,null,o({},s,{isUpdate:r})),t&&t[0]&&this.store.addResource(t[0],e,n,i))}}]),e}();function X(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===i(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===i(t[2])||"object"===i(t[3])){var n=t[3]||t[2];Object.keys(n).forEach(function(t){e[t]=n[t]})}return e},interpolation:{escapeValue:!0,format:function(t,e,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function G(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&(t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t.supportedLngs=t.whitelist),t.nonExplicitWhitelist&&(t.nonExplicitSupportedLngs=t.nonExplicitWhitelist),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function H(){}var W=new(function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0;if(Object(s.a)(this,e),t=c(this,p(e).call(this)),I&&v.call(l(t)),t.options=G(n),t.services={},t.logger=m,t.modules={external:[]},i&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,i),c(t,l(t));setTimeout(function(){t.init(n,i)},0)}return t}return f(e,v),Object(a.a)(e,[{key:"init",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;function i(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),e.whitelist&&!e.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),e.nonExplicitWhitelist&&!e.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=o({},X(),this.options,G(e)),this.format=this.options.interpolation.format,n||(n=H),!this.options.isClone){this.modules.logger?m.init(i(this.modules.logger),this.options):m.init(null,this.options);var r=new L(this.options);this.store=new C(this.options.resources,this.options);var s=this.services;s.logger=m,s.resourceStore=this.store,s.languageUtils=r,s.pluralResolver=new j(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new U(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new V(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(e){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))}),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new k(this.services,this.options),this.translator.on("*",function(e){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))}),this.modules.external.forEach(function(e){e.init&&e.init(t)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);0<a.length&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}});var l=y(),c=function(){var e=function(e,i){t.isInitialized&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),l.resolve(i),n(e,i)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}},{key:"loadResources",value:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H,r="string"==typeof t?t:this.language;if("function"==typeof t&&(i=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var o=[],s=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach(function(t){o.indexOf(t)<0&&o.push(t)})};if(r)s(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return s(t)});this.options.preload&&this.options.preload.forEach(function(t){return s(t)}),this.services.backendConnector.load(o,this.options.ns,i)}else i(null)}},{key:"reloadResources",value:function(t,e,n){var i=y();return t||(t=this.languages),e||(e=this.options.ns),n||(n=H),this.services.backendConnector.reload(t,e,function(t){i.resolve(),n(t)}),i}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&M.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var i=y();this.emit("languageChanging",t);var r=function(t){var r="string"==typeof t?t:n.services.languageUtils.getBestMatchFromCodes(t);r&&(n.language||(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r)),n.translator.language||n.translator.changeLanguage(r),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(r)),n.loadResources(r,function(t){!function(t,r){r?(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r),n.translator.changeLanguage(r),n.isLanguageChangingTo=void 0,n.emit("languageChanged",r),n.logger.log("languageChanged",r)):n.isLanguageChangingTo=void 0,i.resolve(function(){return n.t.apply(n,arguments)}),e&&e(t,function(){return n.t.apply(n,arguments)})}(t,r)})};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(t):r(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(t,e){var n=this,r=function t(e,r){var s;if("object"!==i(r)){for(var a=arguments.length,u=new Array(2<a?a-2:0),h=2;h<a;h++)u[h-2]=arguments[h];s=n.options.overloadTranslationOptionHandler([e,r].concat(u))}else s=o({},r);return s.lng=s.lng||t.lng,s.lngs=s.lngs||t.lngs,s.ns=s.ns||t.ns,n.t(e,s)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(t,n){var i=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,t)||!this.services.backendConnector.backend||!(!s(i,t)||r&&!s(o,t))}},{key:"loadNamespaces",value:function(t,e){var n=this,i=y();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),this.loadResources(function(t){i.resolve(),e&&e(t)}),i):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=y();"string"==typeof t&&(t=[t]);var i=this.options.preload||[],r=t.filter(function(t){return i.indexOf(t)<0});return r.length?(this.options.preload=i.concat(r),this.loadResources(function(t){n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.languages&&0<this.languages.length?this.languages[0]:this.language),t?0<=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new e(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},1<arguments.length?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H,r=o({},this.options,n,{isClone:!0}),s=new e(r);return["store","services","language"].forEach(function(e){s[e]=t[e]}),s.services=o({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new k(s.services,s.options),s.translator.on("*",function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];s.emit.apply(s,[t].concat(n))}),s.init(r,i),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),e}());e.default=W},function(t,e,n){"use strict";n.r(e),n.d(e,"DropShadowFilter",function(){return l});var i=n(3),r=n(2),o=function(t){function e(e,n,i){void 0===e&&(e=4),void 0===n&&(n=3),void 0===i&&(i=!1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",i?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new r.g,this.pixelSize=1,this._clamp=i,this._kernels=null,Array.isArray(e)?this.kernels=e:(this._blur=e,this.quality=n)}t&&(e.__proto__=t);var n={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(t,e,n,i){var r,o=this._pixelSize.x/e._frame.width,s=this._pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)r=this._kernels[0]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,e,n,i);else{for(var a,u=t.getFilterTexture(),h=e,l=u,c=this._quality-1,p=0;p<c;p++)r=this._kernels[p]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,h,l,1),a=h,h=l,l=a;r=this._kernels[c]+.5,this.uniforms.uOffset[0]=r*o,this.uniforms.uOffset[1]=r*s,t.applyFilter(this,h,n,i),t.returnFilterTexture(u)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(t,e){return t+e+.5},0))},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,n=[t];if(0<t)for(var i=t,r=t/e,o=1;o<e;o++)i-=r,n.push(i);this._kernels=n,this._updatePadding()},n.kernels.get=function(){return this._kernels},n.kernels.set=function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},n.clamp.get=function(){return this._clamp},n.pixelSize.set=function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof r.g?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},n.pixelSize.get=function(){return this._pixelSize},n.quality.get=function(){return this._quality},n.quality.set=function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},n.blur.get=function(){return this._blur},n.blur.set=function(t){this._blur=t,this._generateKernels()},Object.defineProperties(e.prototype,n),e}(i.m),s=n(4),a=n(0),l=function(t){function e(e){e&&e.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),e={rotation:e},void 0!==arguments[1]&&(e.distance=arguments[1]),void 0!==arguments[2]&&(e.blur=arguments[2]),void 0!==arguments[3]&&(e.color=arguments[3]),void 0!==arguments[4]&&(e.alpha=arguments[4])),e=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:s.b.FILTER_RESOLUTION},e),t.call(this);var n=e.kernels,i=e.blur,a=e.quality,l=e.pixelSize,c=e.resolution;this._tintFilter=new t("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=new r.g,this._tintFilter.resolution=c,this._blurFilter=n?new o(n):new o(i,a),this.pixelSize=l,this.resolution=c;var p=e.shadowOnly,d=e.rotation,f=e.distance,g=e.alpha,m=e.color;this.shadowOnly=p,this.rotation=d,this.distance=f,this.alpha=g,this.color=m,this._updatePadding()}t&&(e.__proto__=t);var n={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(t,e,n,i){var r=t.getFilterTexture();this._tintFilter.apply(t,e,r,1),this._blurFilter.apply(t,r,n,i),!0!==this.shadowOnly&&t.applyFilter(this,e,n,0),t.returnFilterTexture(r)},e.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},e.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},n.resolution.get=function(){return this._resolution},n.resolution.set=function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},n.distance.get=function(){return this._distance},n.distance.set=function(t){this._distance=t,this._updatePadding(),this._updateShift()},n.rotation.get=function(){return this.angle/r.b},n.rotation.set=function(t){this.angle=t*r.b,this._updateShift()},n.alpha.get=function(){return this._tintFilter.uniforms.alpha},n.alpha.set=function(t){this._tintFilter.uniforms.alpha=t},n.color.get=function(){return Object(a.rgb2hex)(this._tintFilter.uniforms.color)},n.color.set=function(t){Object(a.hex2rgb)(t,this._tintFilter.uniforms.color)},n.kernels.get=function(){return this._blurFilter.kernels},n.kernels.set=function(t){this._blurFilter.kernels=t},n.blur.get=function(){return this._blurFilter.blur},n.blur.set=function(t){this._blurFilter.blur=t,this._updatePadding()},n.quality.get=function(){return this._blurFilter.quality},n.quality.set=function(t){this._blurFilter.quality=t},n.pixelSize.get=function(){return this._blurFilter.pixelSize},n.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(e.prototype,n),e}(i.m)}]);